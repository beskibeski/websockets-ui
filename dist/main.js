(()=>{"use strict";var e={148:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(852),o=r(s(784)),n="8181";console.log(`Start static http server on the ${n} port!`),i.httpServer.listen(n),o.default.start()},287:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPlayerIndex=t.checkPlayer=t.checkPassword=t.showPlayers=t.addPlayer=void 0;const s=[];t.addPlayer=e=>{s.push(e)},t.showPlayers=()=>{console.log(s)},t.checkPlayer=e=>void 0!==s.find((t=>t.name===e.name)),t.checkPassword=e=>void 0!==s.find((t=>t.password===e.password)),t.getPlayerIndex=e=>s.findIndex((t=>t.name===e.name))},852:function(e,t,s){var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.httpServer=void 0;const n=o(s(58)),a=o(s(72)),c=o(s(136));t.httpServer=c.createServer((function(e,t){const s=a.resolve(a.dirname(""))+("/"===e.url?"/front/index.html":"/front"+e.url);n.readFile(s,(function(e,s){if(e)return t.writeHead(404),void t.end(JSON.stringify(e));t.writeHead(200),t.end(s)}))}))},756:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{console.log("Room is created"),e.send(JSON.stringify(t))}},448:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registrateNewPlayer=t.loginWithWrongPassword=t.login=void 0;const r=s(287);t.login=(e,t)=>{const s={name:t.name,index:(0,r.getPlayerIndex)(t),error:!1},i={type:"reg",id:0,data:JSON.stringify(s)};console.log(`Login for player ${t.name} successful`),e.send(JSON.stringify(i))},t.loginWithWrongPassword=(e,t)=>{const s={name:t.name,index:(0,r.getPlayerIndex)(t),errorText:"Wrong login name or password",error:!0},i={type:"reg",id:0,data:JSON.stringify(s)};console.log("Wrong credentials"),e.send(JSON.stringify(i))},t.registrateNewPlayer=(e,t)=>{const s={name:t.name,index:(0,r.getPlayerIndex)(t),errorText:"The new user is registrated, please submit with the same credentials",error:!0},i={type:"reg",id:0,data:JSON.stringify(s)};(0,r.addPlayer)(t),console.log(`Registration of player ${t.name} is successful`),e.send(JSON.stringify(i))}},404:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(287),o=s(448),n=r(s(756));t.default=(e,t)=>{const s=JSON.parse(e.toString());switch((e=>e.type)(s)){case"reg":const e=JSON.parse(s.data);(0,i.checkPlayer)(e)?(0,i.checkPassword)(e)?(0,o.login)(t,e):(0,i.checkPassword)(e)||(0,o.loginWithWrongPassword)(t,e):(0,o.registrateNewPlayer)(t,e);break;case"create_room":(0,n.default)(t,s);break;case"single_play":console.log(s.type)}}},784:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(472),o=r(s(404)),n=Number("3000");t.default={start(){new i.WebSocketServer({port:n}).on("connection",((e,t)=>{console.log(`Websocket is started on ${Object.values(t.headers)[0]} with security key ${Object.values(t.headers)[10]}`),e.on("message",(t=>{(0,o.default)(t,e)})),e.on("close",(()=>{console.log("Websocket is disconnected")}))}))}}},472:(e,t,s)=>{const r=s(144);r.createWebSocketStream=s(408),r.Server=s(796),r.Receiver=s(804),r.Sender=s(957),r.WebSocket=r,r.WebSocketServer=r.Server,e.exports=r},92:(e,t,s)=>{const{EMPTY_BUFFER:r}=s(820);function i(e,t,s,r,i){for(let o=0;o<i;o++)s[r+o]=e[o]^t[3&o]}function o(e,t){for(let s=0;s<e.length;s++)e[s]^=t[3&s]}if(e.exports={concat:function(e,t){if(0===e.length)return r;if(1===e.length)return e[0];const s=Buffer.allocUnsafe(t);let i=0;for(let t=0;t<e.length;t++){const r=e[t];s.set(r,i),i+=r.length}return i<t?s.slice(0,i):s},mask:i,toArrayBuffer:function(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)},toBuffer:function e(t){if(e.readOnly=!0,Buffer.isBuffer(t))return t;let s;return t instanceof ArrayBuffer?s=Buffer.from(t):ArrayBuffer.isView(t)?s=Buffer.from(t.buffer,t.byteOffset,t.byteLength):(s=Buffer.from(t),e.readOnly=!1),s},unmask:o},!process.env.WS_NO_BUFFER_UTIL)try{const t=s(Object(function(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.mask=function(e,s,r,o,n){n<48?i(e,s,r,o,n):t.mask(e,s,r,o,n)},e.exports.unmask=function(e,s){e.length<32?o(e,s):t.unmask(e,s)}}catch(e){}},820:e=>{e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},584:(e,t,s)=>{const{kForOnEventAttribute:r,kListener:i}=s(820),o=Symbol("kCode"),n=Symbol("kData"),a=Symbol("kError"),c=Symbol("kMessage"),h=Symbol("kReason"),l=Symbol("kTarget"),d=Symbol("kType"),f=Symbol("kWasClean");class _{constructor(e){this[l]=null,this[d]=e}get target(){return this[l]}get type(){return this[d]}}Object.defineProperty(_.prototype,"target",{enumerable:!0}),Object.defineProperty(_.prototype,"type",{enumerable:!0});class u extends _{constructor(e,t={}){super(e),this[o]=void 0===t.code?0:t.code,this[h]=void 0===t.reason?"":t.reason,this[f]=void 0!==t.wasClean&&t.wasClean}get code(){return this[o]}get reason(){return this[h]}get wasClean(){return this[f]}}Object.defineProperty(u.prototype,"code",{enumerable:!0}),Object.defineProperty(u.prototype,"reason",{enumerable:!0}),Object.defineProperty(u.prototype,"wasClean",{enumerable:!0});class p extends _{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[c]}}Object.defineProperty(p.prototype,"error",{enumerable:!0}),Object.defineProperty(p.prototype,"message",{enumerable:!0});class m extends _{constructor(e,t={}){super(e),this[n]=void 0===t.data?null:t.data}get data(){return this[n]}}Object.defineProperty(m.prototype,"data",{enumerable:!0});const y={addEventListener(e,t,s={}){let o;if("message"===e)o=function(e,s){const r=new m("message",{data:s?e:e.toString()});r[l]=this,t.call(this,r)};else if("close"===e)o=function(e,s){const r=new u("close",{code:e,reason:s.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});r[l]=this,t.call(this,r)};else if("error"===e)o=function(e){const s=new p("error",{error:e,message:e.message});s[l]=this,t.call(this,s)};else{if("open"!==e)return;o=function(){const e=new _("open");e[l]=this,t.call(this,e)}}o[r]=!!s[r],o[i]=t,s.once?this.once(e,o):this.on(e,o)},removeEventListener(e,t){for(const s of this.listeners(e))if(s[i]===t&&!s[r]){this.removeListener(e,s);break}}};e.exports={CloseEvent:u,ErrorEvent:p,Event:_,EventTarget:y,MessageEvent:m}},56:(e,t,s)=>{const{tokenChars:r}=s(708);function i(e,t,s){void 0===e[t]?e[t]=[s]:e[t].push(s)}e.exports={format:function(e){return Object.keys(e).map((t=>{let s=e[t];return Array.isArray(s)||(s=[s]),s.map((e=>[t].concat(Object.keys(e).map((t=>{let s=e[t];return Array.isArray(s)||(s=[s]),s.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const t=Object.create(null);let s,o,n=Object.create(null),a=!1,c=!1,h=!1,l=-1,d=-1,f=-1,_=0;for(;_<e.length;_++)if(d=e.charCodeAt(_),void 0===s)if(-1===f&&1===r[d])-1===l&&(l=_);else if(0===_||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${_}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${_}`);-1===f&&(f=_);const r=e.slice(l,f);44===d?(i(t,r,n),n=Object.create(null)):s=r,l=f=-1}}else-1===f&&-1!==l&&(f=_);else if(void 0===o)if(-1===f&&1===r[d])-1===l&&(l=_);else if(32===d||9===d)-1===f&&-1!==l&&(f=_);else if(59===d||44===d){if(-1===l)throw new SyntaxError(`Unexpected character at index ${_}`);-1===f&&(f=_),i(n,e.slice(l,f),!0),44===d&&(i(t,s,n),n=Object.create(null),s=void 0),l=f=-1}else{if(61!==d||-1===l||-1!==f)throw new SyntaxError(`Unexpected character at index ${_}`);o=e.slice(l,_),l=f=-1}else if(c){if(1!==r[d])throw new SyntaxError(`Unexpected character at index ${_}`);-1===l?l=_:a||(a=!0),c=!1}else if(h)if(1===r[d])-1===l&&(l=_);else if(34===d&&-1!==l)h=!1,f=_;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${_}`);c=!0}else if(34===d&&61===e.charCodeAt(_-1))h=!0;else if(-1===f&&1===r[d])-1===l&&(l=_);else if(-1===l||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${_}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${_}`);-1===f&&(f=_);let r=e.slice(l,f);a&&(r=r.replace(/\\/g,""),a=!1),i(n,o,r),44===d&&(i(t,s,n),n=Object.create(null),s=void 0),o=void 0,l=f=-1}}else-1===f&&(f=_);if(-1===l||h||32===d||9===d)throw new SyntaxError("Unexpected end of input");-1===f&&(f=_);const u=e.slice(l,f);return void 0===s?i(t,u,n):(void 0===o?i(n,u,!0):i(n,o,a?u.replace(/\\/g,""):u),i(t,s,n)),t}}},156:e=>{const t=Symbol("kDone"),s=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[s]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[s]()}[s](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},516:(e,t,s)=>{const r=s(592),i=s(92),o=s(156),{kStatusCode:n}=s(820),a=Buffer.from([0,0,255,255]),c=Symbol("permessage-deflate"),h=Symbol("total-length"),l=Symbol("callback"),d=Symbol("buffers"),f=Symbol("error");let _;function u(e){this[d].push(e),this[h]+=e.length}function p(e){this[h]+=e.length,this[c]._maxPayload<1||this[h]<=this[c]._maxPayload?this[d].push(e):(this[f]=new RangeError("Max payload size exceeded"),this[f].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[f][n]=1009,this.removeListener("data",p),this.reset())}function m(e){this[c]._inflate=null,e[n]=1007,this[l](e)}e.exports=class{constructor(e,t,s){if(this._maxPayload=0|s,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!_){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;_=new o(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[l];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,s=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!s)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(s.server_no_context_takeover=!0),t.clientNoContextTakeover&&(s.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(s.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?s.client_max_window_bits=t.clientMaxWindowBits:!0!==s.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete s.client_max_window_bits,s}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let s=e[t];if(s.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(s=s[0],"client_max_window_bits"===t){if(!0!==s){const e=+s;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${s}`);s=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${s}`)}else if("server_max_window_bits"===t){const e=+s;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${s}`);s=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==s)throw new TypeError(`Invalid value for parameter "${t}": ${s}`)}e[t]=s}))})),e}decompress(e,t,s){_.add((r=>{this._decompress(e,t,((e,t)=>{r(),s(e,t)}))}))}compress(e,t,s){_.add((r=>{this._compress(e,t,((e,t)=>{r(),s(e,t)}))}))}_decompress(e,t,s){const o=this._isServer?"client":"server";if(!this._inflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?r.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=r.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[c]=this,this._inflate[h]=0,this._inflate[d]=[],this._inflate.on("error",m),this._inflate.on("data",p)}this._inflate[l]=s,this._inflate.write(e),t&&this._inflate.write(a),this._inflate.flush((()=>{const e=this._inflate[f];if(e)return this._inflate.close(),this._inflate=null,void s(e);const r=i.concat(this._inflate[d],this._inflate[h]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[h]=0,this._inflate[d]=[],t&&this.params[`${o}_no_context_takeover`]&&this._inflate.reset()),s(null,r)}))}_compress(e,t,s){const o=this._isServer?"server":"client";if(!this._deflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?r.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=r.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[h]=0,this._deflate[d]=[],this._deflate.on("data",u)}this._deflate[l]=s,this._deflate.write(e),this._deflate.flush(r.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=i.concat(this._deflate[d],this._deflate[h]);t&&(e=e.slice(0,e.length-4)),this._deflate[l]=null,this._deflate[h]=0,this._deflate[d]=[],t&&this.params[`${o}_no_context_takeover`]&&this._deflate.reset(),s(null,e)}))}}},804:(e,t,s)=>{const{Writable:r}=s(378),i=s(516),{BINARY_TYPES:o,EMPTY_BUFFER:n,kStatusCode:a,kWebSocket:c}=s(820),{concat:h,toArrayBuffer:l,unmask:d}=s(92),{isValidStatusCode:f,isValidUTF8:_}=s(708);function u(e,t,s,r,i){const o=new e(s?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(o,u),o.code=i,o[a]=r,o}e.exports=class extends r{constructor(e={}){super(),this._binaryType=e.binaryType||o[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,s){if(8===this._opcode&&0==this._state)return s();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(s)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const s=this._buffers[0],r=t.length-e;e>=s.length?t.set(this._buffers.shift(),r):(t.set(new Uint8Array(s.buffer,s.byteOffset,e),r),this._buffers[0]=s.slice(e)),e-=s.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,u(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const t=64==(64&e[0]);if(t&&!this._extensions[i.extensionName])return this._loop=!1,u(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,u(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,u(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,u(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,u(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,u(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,u(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,u(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,u(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,u(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,u(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,u(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=n;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&0!=(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])&&d(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[i.extensionName].decompress(e,this._fin,((e,s)=>{if(e)return t(e);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(u(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(s)}const r=this.dataMessage();if(r)return t(r);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let s;s="nodebuffer"===this._binaryType?h(t,e):"arraybuffer"===this._binaryType?l(h(t,e)):t,this.emit("message",s,!0)}else{const s=h(t,e);if(!this._skipUTF8Validation&&!_(s))return this._loop=!1,u(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",s,!1)}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,n),this.end();else{if(1===e.length)return u(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{const t=e.readUInt16BE(0);if(!f(t))return u(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const s=e.slice(2);if(!this._skipUTF8Validation&&!_(s))return u(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,s),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},957:(e,t,s)=>{s(872),s(192);const{randomFillSync:r}=s(968),i=s(516),{EMPTY_BUFFER:o}=s(820),{isValidStatusCode:n}=s(708),{mask:a,toBuffer:c}=s(92),h=Symbol("kByteLength"),l=Buffer.alloc(4);class d{constructor(e,t,s){this._extensions=t||{},s&&(this._generateMask=s,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let s,i,o=!1,n=2,c=!1;t.mask&&(s=t.maskBuffer||l,t.generateMask?t.generateMask(s):r(s,0,4),c=0==(s[0]|s[1]|s[2]|s[3]),n=6),"string"==typeof e?i=t.mask&&!c||void 0===t[h]?(e=Buffer.from(e)).length:t[h]:(i=e.length,o=t.mask&&t.readOnly&&!c);let d=i;i>=65536?(n+=8,d=127):i>125&&(n+=2,d=126);const f=Buffer.allocUnsafe(o?i+n:n);return f[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(f[0]|=64),f[1]=d,126===d?f.writeUInt16BE(i,2):127===d&&(f[2]=f[3]=0,f.writeUIntBE(i,4,6)),t.mask?(f[1]|=128,f[n-4]=s[0],f[n-3]=s[1],f[n-2]=s[2],f[n-1]=s[3],c?[f,e]:o?(a(e,s,f,n,i),[f]):(a(e,s,e,0,i),[f,e])):[f,e]}close(e,t,s,r){let i;if(void 0===e)i=o;else{if("number"!=typeof e||!n(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const s=Buffer.byteLength(t);if(s>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+s),i.writeUInt16BE(e,0),"string"==typeof t?i.write(t,2):i.set(t,2)}else i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0)}const a={[h]:i.length,fin:!0,generateMask:this._generateMask,mask:s,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,i,!1,a,r]):this.sendFrame(d.frame(i,a),r)}ping(e,t,s){let r,i;if("string"==typeof e?(r=Buffer.byteLength(e),i=!1):(r=(e=c(e)).length,i=c.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[h]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,s]):this.sendFrame(d.frame(e,o),s)}pong(e,t,s){let r,i;if("string"==typeof e?(r=Buffer.byteLength(e),i=!1):(r=(e=c(e)).length,i=c.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[h]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,s]):this.sendFrame(d.frame(e,o),s)}send(e,t,s){const r=this._extensions[i.extensionName];let o,n,a=t.binary?2:1,l=t.compress;if("string"==typeof e?(o=Buffer.byteLength(e),n=!1):(o=(e=c(e)).length,n=c.readOnly),this._firstFragment?(this._firstFragment=!1,l&&r&&r.params[r._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(l=o>=r._threshold),this._compress=l):(l=!1,a=0),t.fin&&(this._firstFragment=!0),r){const r={[h]:o,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:n,rsv1:l};this._deflating?this.enqueue([this.dispatch,e,this._compress,r,s]):this.dispatch(e,this._compress,r,s)}else this.sendFrame(d.frame(e,{[h]:o,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:n,rsv1:!1}),s)}dispatch(e,t,s,r){if(!t)return void this.sendFrame(d.frame(e,s),r);const o=this._extensions[i.extensionName];this._bufferedBytes+=s[h],this._deflating=!0,o.compress(e,s.fin,((e,t)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof r&&r(e);for(let t=0;t<this._queue.length;t++){const s=this._queue[t],r=s[s.length-1];"function"==typeof r&&r(e)}}else this._bufferedBytes-=s[h],this._deflating=!1,s.readOnly=!1,this.sendFrame(d.frame(t,s),r),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][h],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][h],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=d},408:(e,t,s)=>{const{Duplex:r}=s(378);function i(e){e.emit("close")}function o(){!this.destroyed&&this._writableState.finished&&this.destroy()}function n(e){this.removeListener("error",n),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let s=!0;const a=new r({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t,s){const r=!s&&a._readableState.objectMode?t.toString():t;a.push(r)||e.pause()})),e.once("error",(function(e){a.destroyed||(s=!1,a.destroy(e))})),e.once("close",(function(){a.destroyed||a.push(null)})),a._destroy=function(t,r){if(e.readyState===e.CLOSED)return r(t),void process.nextTick(i,a);let o=!1;e.once("error",(function(e){o=!0,r(e)})),e.once("close",(function(){o||r(t),process.nextTick(i,a)})),s&&e.terminate()},a._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),a._readableState.endEmitted&&a.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){a._final(t)}))},a._read=function(){e.isPaused&&e.resume()},a._write=function(t,s,r){e.readyState!==e.CONNECTING?e.send(t,r):e.once("open",(function(){a._write(t,s,r)}))},a.on("end",o),a.on("error",n),a}},728:(e,t,s)=>{const{tokenChars:r}=s(708);e.exports={parse:function(e){const t=new Set;let s=-1,i=-1,o=0;for(;o<e.length;o++){const n=e.charCodeAt(o);if(-1===i&&1===r[n])-1===s&&(s=o);else if(0===o||32!==n&&9!==n){if(44!==n)throw new SyntaxError(`Unexpected character at index ${o}`);{if(-1===s)throw new SyntaxError(`Unexpected character at index ${o}`);-1===i&&(i=o);const r=e.slice(s,i);if(t.has(r))throw new SyntaxError(`The "${r}" subprotocol is duplicated`);t.add(r),s=i=-1}}else-1===i&&-1!==s&&(i=o)}if(-1===s||-1!==i)throw new SyntaxError("Unexpected end of input");const n=e.slice(s,o);if(t.has(n))throw new SyntaxError(`The "${n}" subprotocol is duplicated`);return t.add(n),t}}},708:(e,t,s)=>{function r(e){const t=e.length;let s=0;for(;s<t;)if(0==(128&e[s]))s++;else if(192==(224&e[s])){if(s+1===t||128!=(192&e[s+1])||192==(254&e[s]))return!1;s+=2}else if(224==(240&e[s])){if(s+2>=t||128!=(192&e[s+1])||128!=(192&e[s+2])||224===e[s]&&128==(224&e[s+1])||237===e[s]&&160==(224&e[s+1]))return!1;s+=3}else{if(240!=(248&e[s]))return!1;if(s+3>=t||128!=(192&e[s+1])||128!=(192&e[s+2])||128!=(192&e[s+3])||240===e[s]&&128==(240&e[s+1])||244===e[s]&&e[s+1]>143||e[s]>244)return!1;s+=4}return!0}if(e.exports={isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:r,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},!process.env.WS_NO_UTF_8_VALIDATE)try{const t=s(Object(function(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.isValidUTF8=function(e){return e.length<150?r(e):t(e)}}catch(e){}},796:(e,t,s)=>{const r=s(467),i=s(136),{createHash:o}=(s(256),s(872),s(192),s(968)),n=s(56),a=s(516),c=s(728),h=s(144),{GUID:l,kWebSocket:d}=s(820),f=/^[+/0-9A-Za-z]{22}==$/;function _(e){e._state=2,e.emit("close")}function u(){this.destroy()}function p(e,t,s,r){s=s||i.STATUS_CODES[t],r={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(s),...r},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${i.STATUS_CODES[t]}\r\n`+Object.keys(r).map((e=>`${e}: ${r[e]}`)).join("\r\n")+"\r\n\r\n"+s)}function m(e,t,s,r,i){if(e.listenerCount("wsClientError")){const r=new Error(i);Error.captureStackTrace(r,m),e.emit("wsClientError",r,s,t)}else p(s,r,i)}e.exports=class extends r{constructor(e,t){if(super(),null==(e={maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:h,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=i.createServer(((e,t)=>{const s=i.STATUS_CODES[426];t.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),t.end(s)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const s of Object.keys(t))e.on(s,t[s]);return function(){for(const s of Object.keys(t))e.removeListener(s,t[s])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,s,r)=>{this.handleUpgrade(t,s,r,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(_,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(_,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{_(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,s,r){t.on("error",u);const i=e.headers["sec-websocket-key"],o=+e.headers["sec-websocket-version"];if("GET"!==e.method)return void m(this,e,t,405,"Invalid HTTP method");if("websocket"!==e.headers.upgrade.toLowerCase())return void m(this,e,t,400,"Invalid Upgrade header");if(!i||!f.test(i))return void m(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");if(8!==o&&13!==o)return void m(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");if(!this.shouldHandle(e))return void p(t,400);const h=e.headers["sec-websocket-protocol"];let l=new Set;if(void 0!==h)try{l=c.parse(h)}catch(s){return void m(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const d=e.headers["sec-websocket-extensions"],_={};if(this.options.perMessageDeflate&&void 0!==d){const s=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=n.parse(d);e[a.extensionName]&&(s.accept(e[a.extensionName]),_[a.extensionName]=s)}catch(s){return void m(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const n={origin:e.headers[8===o?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(n,((o,n,a,c)=>{if(!o)return p(t,n||401,a,c);this.completeUpgrade(_,i,l,e,t,s,r)}));if(!this.options.verifyClient(n))return p(t,401)}this.completeUpgrade(_,i,l,e,t,s,r)}completeUpgrade(e,t,s,r,i,c,h){if(!i.readable||!i.writable)return i.destroy();if(i[d])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return p(i,503);const f=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${o("sha1").update(t+l).digest("base64")}`],m=new this.options.WebSocket(null);if(s.size){const e=this.options.handleProtocols?this.options.handleProtocols(s,r):s.values().next().value;e&&(f.push(`Sec-WebSocket-Protocol: ${e}`),m._protocol=e)}if(e[a.extensionName]){const t=e[a.extensionName].params,s=n.format({[a.extensionName]:[t]});f.push(`Sec-WebSocket-Extensions: ${s}`),m._extensions=e}this.emit("headers",f,r),i.write(f.concat("\r\n").join("\r\n")),i.removeListener("error",u),m.setSocket(i,c,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(m),m.on("close",(()=>{this.clients.delete(m),this._shouldEmitClose&&!this.clients.size&&process.nextTick(_,this)}))),h(m,r)}}},144:(e,t,s)=>{const r=s(467),i=s(256),o=s(136),n=s(872),a=s(192),{randomBytes:c,createHash:h}=s(968),{Readable:l}=s(378),{URL:d}=s(716),f=s(516),_=s(804),u=s(957),{BINARY_TYPES:p,EMPTY_BUFFER:m,GUID:y,kForOnEventAttribute:g,kListener:v,kStatusCode:b,kWebSocket:S,NOOP:w}=s(820),{EventTarget:{addEventListener:k,removeEventListener:x}}=s(584),{format:E,parse:O}=s(56),{toBuffer:N}=s(92),T=Symbol("kAborted"),C=[8,13],P=["CONNECTING","OPEN","CLOSING","CLOSED"],L=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class R extends r{constructor(e,t,s){super(),this._binaryType=p[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=m,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=R.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(s=t,t=[]):t=[t]),U(this,e,t,s)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){p.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,s){const r=new _({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation});this._sender=new u(e,this._extensions,s.generateMask),this._receiver=r,this._socket=e,r[S]=this,e[S]=this,r.on("conclude",A),r.on("drain",F),r.on("error",j),r.on("message",G),r.on("ping",V),r.on("pong",q),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",H),e.on("data",Y),e.on("end",J),e.on("error",X),this._readyState=R.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=R.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[f.extensionName]&&this._extensions[f.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=R.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==R.CLOSED){if(this.readyState===R.CONNECTING){const e="WebSocket was closed before the connection was established";return W(this,this._req,e)}this.readyState!==R.CLOSING?(this._readyState=R.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end()}}pause(){this.readyState!==R.CONNECTING&&this.readyState!==R.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,s){if(this.readyState===R.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(s=e,e=t=void 0):"function"==typeof t&&(s=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===R.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||m,t,s)):D(this,e,s)}pong(e,t,s){if(this.readyState===R.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(s=e,e=t=void 0):"function"==typeof t&&(s=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===R.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||m,t,s)):D(this,e,s)}resume(){this.readyState!==R.CONNECTING&&this.readyState!==R.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,s){if(this.readyState===R.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(s=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==R.OPEN)return void D(this,e,s);const r={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[f.extensionName]||(r.compress=!1),this._sender.send(e||m,r,s)}terminate(){if(this.readyState!==R.CLOSED){if(this.readyState===R.CONNECTING){const e="WebSocket was closed before the connection was established";return W(this,this._req,e)}this._socket&&(this._readyState=R.CLOSING,this._socket.destroy())}}}function U(e,t,s,r){const n={protocolVersion:C[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...r,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!C.includes(n.protocolVersion))throw new RangeError(`Unsupported protocol version: ${n.protocolVersion} (supported versions: ${C.join(", ")})`);let a;if(t instanceof d)a=t,e._url=t.href;else{try{a=new d(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}e._url=t}const l="wss:"===a.protocol,_="ws+unix:"===a.protocol;let u;if("ws:"===a.protocol||l||_?_&&!a.pathname?u="The URL's pathname is empty":a.hash&&(u="The URL contains a fragment identifier"):u='The URL\'s protocol must be one of "ws:", "wss:", or "ws+unix:"',u){const t=new SyntaxError(u);if(0===e._redirects)throw t;return void B(e,t)}const p=l?443:80,m=c(16).toString("base64"),g=l?i.request:o.request,v=new Set;let b,S;if(n.createConnection=l?M:I,n.defaultPort=n.defaultPort||p,n.port=a.port||p,n.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,n.headers={"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket",...n.headers},n.path=a.pathname+a.search,n.timeout=n.handshakeTimeout,n.perMessageDeflate&&(b=new f(!0!==n.perMessageDeflate?n.perMessageDeflate:{},!1,n.maxPayload),n.headers["Sec-WebSocket-Extensions"]=E({[f.extensionName]:b.offer()})),s.length){for(const e of s){if("string"!=typeof e||!L.test(e)||v.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");v.add(e)}n.headers["Sec-WebSocket-Protocol"]=s.join(",")}if(n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin),(a.username||a.password)&&(n.auth=`${a.username}:${a.password}`),_){const e=n.path.split(":");n.socketPath=e[0],n.path=e[1]}if(n.followRedirects){if(0===e._redirects){e._originalSecure=l,e._originalHost=a.host;const t=r&&r.headers;if(r={...r,headers:{}},t)for(const[e,s]of Object.entries(t))r.headers[e.toLowerCase()]=s}else if(0===e.listenerCount("redirect")){const t=a.host===e._originalHost;(!t||e._originalSecure&&!l)&&(delete n.headers.authorization,delete n.headers.cookie,t||delete n.headers.host,n.auth=void 0)}n.auth&&!r.headers.authorization&&(r.headers.authorization="Basic "+Buffer.from(n.auth).toString("base64")),S=e._req=g(n),e._redirects&&e.emit("redirect",e.url,S)}else S=e._req=g(n);n.timeout&&S.on("timeout",(()=>{W(e,S,"Opening handshake has timed out")})),S.on("error",(t=>{null===S||S[T]||(S=e._req=null,B(e,t))})),S.on("response",(i=>{const o=i.headers.location,a=i.statusCode;if(o&&n.followRedirects&&a>=300&&a<400){if(++e._redirects>n.maxRedirects)return void W(e,S,"Maximum redirects exceeded");let i;S.abort();try{i=new d(o,t)}catch(t){const s=new SyntaxError(`Invalid URL: ${o}`);return void B(e,s)}U(e,i,s,r)}else e.emit("unexpected-response",S,i)||W(e,S,`Unexpected server response: ${i.statusCode}`)})),S.on("upgrade",((t,s,r)=>{if(e.emit("upgrade",t),e.readyState!==R.CONNECTING)return;if(S=e._req=null,"websocket"!==t.headers.upgrade.toLowerCase())return void W(e,s,"Invalid Upgrade header");const i=h("sha1").update(m+y).digest("base64");if(t.headers["sec-websocket-accept"]!==i)return void W(e,s,"Invalid Sec-WebSocket-Accept header");const o=t.headers["sec-websocket-protocol"];let a;if(void 0!==o?v.size?v.has(o)||(a="Server sent an invalid subprotocol"):a="Server sent a subprotocol but none was requested":v.size&&(a="Server sent no subprotocol"),a)return void W(e,s,a);o&&(e._protocol=o);const c=t.headers["sec-websocket-extensions"];if(void 0!==c){if(!b)return void W(e,s,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=O(c)}catch(t){return void W(e,s,"Invalid Sec-WebSocket-Extensions header")}const r=Object.keys(t);if(1!==r.length||r[0]!==f.extensionName)return void W(e,s,"Server indicated an extension that was not requested");try{b.accept(t[f.extensionName])}catch(t){return void W(e,s,"Invalid Sec-WebSocket-Extensions header")}e._extensions[f.extensionName]=b}e.setSocket(s,r,{generateMask:n.generateMask,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation})})),S.end()}function B(e,t){e._readyState=R.CLOSING,e.emit("error",t),e.emitClose()}function I(e){return e.path=e.socketPath,n.connect(e)}function M(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=n.isIP(e.host)?"":e.host),a.connect(e)}function W(e,t,s){e._readyState=R.CLOSING;const r=new Error(s);Error.captureStackTrace(r,W),t.setHeader?(t[T]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(B,e,r)):(t.destroy(r),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function D(e,t,s){if(t){const s=N(t).length;e._socket?e._sender._bufferedBytes+=s:e._bufferedAmount+=s}s&&s(new Error(`WebSocket is not open: readyState ${e.readyState} (${P[e.readyState]})`))}function A(e,t){const s=this[S];s._closeFrameReceived=!0,s._closeMessage=t,s._closeCode=e,void 0!==s._socket[S]&&(s._socket.removeListener("data",Y),process.nextTick(z,s._socket),1005===e?s.close():s.close(e,t))}function F(){const e=this[S];e.isPaused||e._socket.resume()}function j(e){const t=this[S];void 0!==t._socket[S]&&(t._socket.removeListener("data",Y),process.nextTick(z,t._socket),t.close(e[b])),t.emit("error",e)}function $(){this[S].emitClose()}function G(e,t){this[S].emit("message",e,t)}function V(e){const t=this[S];t.pong(e,!t._isServer,w),t.emit("ping",e)}function q(e){this[S].emit("pong",e)}function z(e){e.resume()}function H(){const e=this[S];let t;this.removeListener("close",H),this.removeListener("data",Y),this.removeListener("end",J),e._readyState=R.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[S]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",$),e._receiver.on("finish",$))}function Y(e){this[S]._receiver.write(e)||this.pause()}function J(){const e=this[S];e._readyState=R.CLOSING,e._receiver.end(),this.end()}function X(){const e=this[S];this.removeListener("error",X),this.on("error",w),e&&(e._readyState=R.CLOSING,this.destroy())}Object.defineProperty(R,"CONNECTING",{enumerable:!0,value:P.indexOf("CONNECTING")}),Object.defineProperty(R.prototype,"CONNECTING",{enumerable:!0,value:P.indexOf("CONNECTING")}),Object.defineProperty(R,"OPEN",{enumerable:!0,value:P.indexOf("OPEN")}),Object.defineProperty(R.prototype,"OPEN",{enumerable:!0,value:P.indexOf("OPEN")}),Object.defineProperty(R,"CLOSING",{enumerable:!0,value:P.indexOf("CLOSING")}),Object.defineProperty(R.prototype,"CLOSING",{enumerable:!0,value:P.indexOf("CLOSING")}),Object.defineProperty(R,"CLOSED",{enumerable:!0,value:P.indexOf("CLOSED")}),Object.defineProperty(R.prototype,"CLOSED",{enumerable:!0,value:P.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((e=>{Object.defineProperty(R.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(R.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[g])return t[v];return null},set(t){for(const t of this.listeners(e))if(t[g]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[g]:!0})}})})),R.prototype.addEventListener=k,R.prototype.removeEventListener=x,e.exports=R},968:e=>{e.exports=require("crypto")},467:e=>{e.exports=require("events")},58:e=>{e.exports=require("fs")},136:e=>{e.exports=require("http")},256:e=>{e.exports=require("https")},872:e=>{e.exports=require("net")},72:e=>{e.exports=require("path")},378:e=>{e.exports=require("stream")},192:e=>{e.exports=require("tls")},716:e=>{e.exports=require("url")},592:e=>{e.exports=require("zlib")}},t={};!function s(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,s),o.exports}(148)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ty9GLFFBQVU4aEIsUUFBUSxPLFVDQXpCL2IsRUFBTy9GLFFBQVU4aEIsUUFBUSxTLFVDQXpCL2IsRUFBTy9GLFFBQVU4aEIsUUFBUSxNLFVDQXpCL2IsRUFBTy9GLFFBQVU4aEIsUUFBUSxNLFVDQXpCL2IsRUFBTy9GLFFBQVU4aEIsUUFBUSxPLEdDQ3JCQyxFQUEyQixDQUFDLEdBR2hDLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUI5Z0IsSUFBakIrZ0IsRUFDSCxPQUFPQSxFQUFhbGlCLFFBR3JCLElBQUkrRixFQUFTZ2MsRUFBeUJFLEdBQVksQ0FHakRqaUIsUUFBUyxDQUFDLEdBT1gsT0FIQW1pQixFQUFvQkYsR0FBVXZmLEtBQUtxRCxFQUFPL0YsUUFBUytGLEVBQVFBLEVBQU8vRixRQUFTZ2lCLEdBR3BFamMsRUFBTy9GLE9BQ2YsQ0NuQjBCZ2lCLENBQW9CLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93c190YXNrLy4vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vd3NfdGFzay8uL3NyYy9kYXRhYmFzZS9wbGF5ZXJzLnRzIiwid2VicGFjazovL3dzX3Rhc2svLi9zcmMvaHR0cF9zZXJ2ZXIvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vd3NfdGFzay8uL3NyYy9zZXJ2aWNlcy9jcmVhdGUtcm9vbS50cyIsIndlYnBhY2s6Ly93c190YXNrLy4vc3JjL3NlcnZpY2VzL2xvZ2luLXJlZ2lzdHJhdGUudHMiLCJ3ZWJwYWNrOi8vd3NfdGFzay8uL3NyYy9zZXJ2aWNlcy9tYWtlLWFjdGlvbi50cyIsIndlYnBhY2s6Ly93c190YXNrLy4vc3JjL3dzX3NlcnZlci9pbmRleC50cyIsIndlYnBhY2s6Ly93c190YXNrLy4vbm9kZV9tb2R1bGVzL3dzL2luZGV4LmpzIiwid2VicGFjazovL3dzX3Rhc2svLi9ub2RlX21vZHVsZXMvd3MvbGliL2J1ZmZlci11dGlsLmpzIiwid2VicGFjazovL3dzX3Rhc2svLi9ub2RlX21vZHVsZXMvd3MvbGliL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93c190YXNrLy4vbm9kZV9tb2R1bGVzL3dzL2xpYi9ldmVudC10YXJnZXQuanMiLCJ3ZWJwYWNrOi8vd3NfdGFzay8uL25vZGVfbW9kdWxlcy93cy9saWIvZXh0ZW5zaW9uLmpzIiwid2VicGFjazovL3dzX3Rhc2svLi9ub2RlX21vZHVsZXMvd3MvbGliL2xpbWl0ZXIuanMiLCJ3ZWJwYWNrOi8vd3NfdGFzay8uL25vZGVfbW9kdWxlcy93cy9saWIvcGVybWVzc2FnZS1kZWZsYXRlLmpzIiwid2VicGFjazovL3dzX3Rhc2svLi9ub2RlX21vZHVsZXMvd3MvbGliL3JlY2VpdmVyLmpzIiwid2VicGFjazovL3dzX3Rhc2svLi9ub2RlX21vZHVsZXMvd3MvbGliL3NlbmRlci5qcyIsIndlYnBhY2s6Ly93c190YXNrLy4vbm9kZV9tb2R1bGVzL3dzL2xpYi9zdHJlYW0uanMiLCJ3ZWJwYWNrOi8vd3NfdGFzay8uL25vZGVfbW9kdWxlcy93cy9saWIvc3VicHJvdG9jb2wuanMiLCJ3ZWJwYWNrOi8vd3NfdGFzay8uL25vZGVfbW9kdWxlcy93cy9saWIvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly93c190YXNrLy4vbm9kZV9tb2R1bGVzL3dzL2xpYi93ZWJzb2NrZXQtc2VydmVyLmpzIiwid2VicGFjazovL3dzX3Rhc2svLi9ub2RlX21vZHVsZXMvd3MvbGliL3dlYnNvY2tldC5qcyIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJjcnlwdG9cIiIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJldmVudHNcIiIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJmc1wiIiwid2VicGFjazovL3dzX3Rhc2svZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcImh0dHBcIiIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJodHRwc1wiIiwid2VicGFjazovL3dzX3Rhc2svZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcIm5ldFwiIiwid2VicGFjazovL3dzX3Rhc2svZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcInBhdGhcIiIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJzdHJlYW1cIiIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJ0bHNcIiIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJ1cmxcIiIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJ6bGliXCIiLCJ3ZWJwYWNrOi8vd3NfdGFzay93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93c190YXNrL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiLi9zcmMvaHR0cF9zZXJ2ZXIvaW5kZXhcIik7XG5jb25zdCBpbmRleF8yID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL3NyYy93c19zZXJ2ZXIvaW5kZXhcIikpO1xuY29uc3QgSFRUUF9QT1JUID0gcHJvY2Vzcy5lbnYuSFRUUF9QT1JUO1xuY29uc29sZS5sb2coYFN0YXJ0IHN0YXRpYyBodHRwIHNlcnZlciBvbiB0aGUgJHtIVFRQX1BPUlR9IHBvcnQhYCk7XG5pbmRleF8xLmh0dHBTZXJ2ZXIubGlzdGVuKEhUVFBfUE9SVCk7XG5pbmRleF8yLmRlZmF1bHQuc3RhcnQoKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXRQbGF5ZXJJbmRleCA9IGV4cG9ydHMuY2hlY2tQbGF5ZXIgPSBleHBvcnRzLmNoZWNrUGFzc3dvcmQgPSBleHBvcnRzLnNob3dQbGF5ZXJzID0gZXhwb3J0cy5hZGRQbGF5ZXIgPSB2b2lkIDA7XG5jb25zdCBwbGF5ZXJzID0gW107XG5jb25zdCBhZGRQbGF5ZXIgPSAocGxheWVyKSA9PiB7XG4gICAgcGxheWVycy5wdXNoKHBsYXllcik7XG59O1xuZXhwb3J0cy5hZGRQbGF5ZXIgPSBhZGRQbGF5ZXI7XG5jb25zdCBzaG93UGxheWVycyA9ICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhwbGF5ZXJzKTtcbn07XG5leHBvcnRzLnNob3dQbGF5ZXJzID0gc2hvd1BsYXllcnM7XG5jb25zdCBjaGVja1BsYXllciA9IChwbGF5ZXIpID0+IHtcbiAgICByZXR1cm4gcGxheWVycy5maW5kKCh2YWx1ZSkgPT4gdmFsdWUubmFtZSA9PT0gcGxheWVyLm5hbWUpICE9PSB1bmRlZmluZWQgPyB0cnVlIDogZmFsc2U7XG59O1xuZXhwb3J0cy5jaGVja1BsYXllciA9IGNoZWNrUGxheWVyO1xuY29uc3QgY2hlY2tQYXNzd29yZCA9IChwbGF5ZXIpID0+IHtcbiAgICByZXR1cm4gcGxheWVycy5maW5kKCh2YWx1ZSkgPT4gdmFsdWUucGFzc3dvcmQgPT09IHBsYXllci5wYXNzd29yZCkgIT09IHVuZGVmaW5lZCA/IHRydWUgOiBmYWxzZTtcbn07XG5leHBvcnRzLmNoZWNrUGFzc3dvcmQgPSBjaGVja1Bhc3N3b3JkO1xuY29uc3QgZ2V0UGxheWVySW5kZXggPSAocGxheWVyKSA9PiB7XG4gICAgcmV0dXJuIHBsYXllcnMuZmluZEluZGV4KCh2YWx1ZSkgPT4gdmFsdWUubmFtZSA9PT0gcGxheWVyLm5hbWUpO1xufTtcbmV4cG9ydHMuZ2V0UGxheWVySW5kZXggPSBnZXRQbGF5ZXJJbmRleDtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmh0dHBTZXJ2ZXIgPSB2b2lkIDA7XG5jb25zdCBmcyA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiZnNcIikpO1xuY29uc3QgcGF0aCA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwicGF0aFwiKSk7XG5jb25zdCBodHRwID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJodHRwXCIpKTtcbmV4cG9ydHMuaHR0cFNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICAgIGNvbnN0IF9fZGlybmFtZSA9IHBhdGgucmVzb2x2ZShwYXRoLmRpcm5hbWUoJycpKTtcbiAgICBjb25zdCBmaWxlX3BhdGggPSBfX2Rpcm5hbWUgKyAocmVxLnVybCA9PT0gJy8nID8gJy9mcm9udC9pbmRleC5odG1sJyA6ICcvZnJvbnQnICsgcmVxLnVybCk7XG4gICAgZnMucmVhZEZpbGUoZmlsZV9wYXRoLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHJlcy53cml0ZUhlYWQoNDA0KTtcbiAgICAgICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkoZXJyKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVzLndyaXRlSGVhZCgyMDApO1xuICAgICAgICByZXMuZW5kKGRhdGEpO1xuICAgIH0pO1xufSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGNyZWF0ZVJvb20gPSAod3NDbGllbnQsIGNodW5rRGF0YSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdSb29tIGlzIGNyZWF0ZWQnKTtcbiAgICB3c0NsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KGNodW5rRGF0YSkpO1xufTtcbmV4cG9ydHMuZGVmYXVsdCA9IGNyZWF0ZVJvb207XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucmVnaXN0cmF0ZU5ld1BsYXllciA9IGV4cG9ydHMubG9naW5XaXRoV3JvbmdQYXNzd29yZCA9IGV4cG9ydHMubG9naW4gPSB2b2lkIDA7XG5jb25zdCBwbGF5ZXJzXzEgPSByZXF1aXJlKFwiLi4vZGF0YWJhc2UvcGxheWVyc1wiKTtcbmNvbnN0IGxvZ2luID0gKHdzQ2xpZW50LCBwbGF5ZXJEYXRhKSA9PiB7XG4gICAgY29uc3QgcGxheWVyRGF0YVRvU2VuZCA9IHtcbiAgICAgICAgbmFtZTogcGxheWVyRGF0YS5uYW1lLFxuICAgICAgICBpbmRleDogKDAsIHBsYXllcnNfMS5nZXRQbGF5ZXJJbmRleCkocGxheWVyRGF0YSksXG4gICAgICAgIGVycm9yOiBmYWxzZSxcbiAgICB9O1xuICAgIGNvbnN0IGRhdGFUb1NlbmQgPSB7XG4gICAgICAgIHR5cGU6IFwicmVnXCIgLyogRGF0YXR5cGUuTE9HSU4gKi8sXG4gICAgICAgIGlkOiAwLFxuICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShwbGF5ZXJEYXRhVG9TZW5kKSxcbiAgICB9O1xuICAgIGNvbnNvbGUubG9nKGBMb2dpbiBmb3IgcGxheWVyICR7cGxheWVyRGF0YS5uYW1lfSBzdWNjZXNzZnVsYCk7XG4gICAgd3NDbGllbnQuc2VuZChKU09OLnN0cmluZ2lmeShkYXRhVG9TZW5kKSk7XG59O1xuZXhwb3J0cy5sb2dpbiA9IGxvZ2luO1xuY29uc3QgbG9naW5XaXRoV3JvbmdQYXNzd29yZCA9ICh3c0NsaWVudCwgcGxheWVyRGF0YSkgPT4ge1xuICAgIGNvbnN0IHBsYXllckRhdGFUb1NlbmQgPSB7XG4gICAgICAgIG5hbWU6IHBsYXllckRhdGEubmFtZSwgaW5kZXg6ICgwLCBwbGF5ZXJzXzEuZ2V0UGxheWVySW5kZXgpKHBsYXllckRhdGEpLCBlcnJvclRleHQ6ICdXcm9uZyBsb2dpbiBuYW1lIG9yIHBhc3N3b3JkJywgZXJyb3I6IHRydWVcbiAgICB9O1xuICAgIGNvbnN0IGRhdGFUb1NlbmQgPSB7XG4gICAgICAgIHR5cGU6IFwicmVnXCIgLyogRGF0YXR5cGUuTE9HSU4gKi8sXG4gICAgICAgIGlkOiAwLFxuICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShwbGF5ZXJEYXRhVG9TZW5kKSxcbiAgICB9O1xuICAgIGNvbnNvbGUubG9nKCdXcm9uZyBjcmVkZW50aWFscycpO1xuICAgIHdzQ2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YVRvU2VuZCkpO1xufTtcbmV4cG9ydHMubG9naW5XaXRoV3JvbmdQYXNzd29yZCA9IGxvZ2luV2l0aFdyb25nUGFzc3dvcmQ7XG5jb25zdCByZWdpc3RyYXRlTmV3UGxheWVyID0gKHdzQ2xpZW50LCBwbGF5ZXJEYXRhKSA9PiB7XG4gICAgY29uc3QgcGxheWVyRGF0YVRvU2VuZCA9IHtcbiAgICAgICAgbmFtZTogcGxheWVyRGF0YS5uYW1lLFxuICAgICAgICBpbmRleDogKDAsIHBsYXllcnNfMS5nZXRQbGF5ZXJJbmRleCkocGxheWVyRGF0YSksXG4gICAgICAgIGVycm9yVGV4dDogJ1RoZSBuZXcgdXNlciBpcyByZWdpc3RyYXRlZCwgcGxlYXNlIHN1Ym1pdCB3aXRoIHRoZSBzYW1lIGNyZWRlbnRpYWxzJyxcbiAgICAgICAgZXJyb3I6IHRydWUsXG4gICAgfTtcbiAgICBjb25zdCBkYXRhVG9TZW5kID0ge1xuICAgICAgICB0eXBlOiBcInJlZ1wiIC8qIERhdGF0eXBlLkxPR0lOICovLFxuICAgICAgICBpZDogMCxcbiAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkocGxheWVyRGF0YVRvU2VuZCksXG4gICAgfTtcbiAgICAoMCwgcGxheWVyc18xLmFkZFBsYXllcikocGxheWVyRGF0YSk7XG4gICAgY29uc29sZS5sb2coYFJlZ2lzdHJhdGlvbiBvZiBwbGF5ZXIgJHtwbGF5ZXJEYXRhLm5hbWV9IGlzIHN1Y2Nlc3NmdWxgKTtcbiAgICB3c0NsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KGRhdGFUb1NlbmQpKTtcbn07XG5leHBvcnRzLnJlZ2lzdHJhdGVOZXdQbGF5ZXIgPSByZWdpc3RyYXRlTmV3UGxheWVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBwbGF5ZXJzXzEgPSByZXF1aXJlKFwiLi4vZGF0YWJhc2UvcGxheWVyc1wiKTtcbmNvbnN0IGxvZ2luX3JlZ2lzdHJhdGVfMSA9IHJlcXVpcmUoXCIuL2xvZ2luLXJlZ2lzdHJhdGVcIik7XG5jb25zdCBjcmVhdGVfcm9vbV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2NyZWF0ZS1yb29tXCIpKTtcbmNvbnN0IG1ha2VBY3Rpb25EZXBlbmRpbmdPbmRhdGFUeXBlID0gKGNodW5rLCB3c0NsaWVudCkgPT4ge1xuICAgIGNvbnN0IGNodW5rRGF0YSA9IEpTT04ucGFyc2UoY2h1bmsudG9TdHJpbmcoKSk7XG4gICAgc3dpdGNoIChnZXREYXRhVHlwZShjaHVua0RhdGEpKSB7XG4gICAgICAgIGNhc2UgXCJyZWdcIiAvKiBEYXRhdHlwZS5MT0dJTiAqLzpcbiAgICAgICAgICAgIGNvbnN0IHBsYXllckRhdGEgPSBKU09OLnBhcnNlKGNodW5rRGF0YS5kYXRhKTtcbiAgICAgICAgICAgIGlmICgoMCwgcGxheWVyc18xLmNoZWNrUGxheWVyKShwbGF5ZXJEYXRhKSkge1xuICAgICAgICAgICAgICAgIGlmICgoMCwgcGxheWVyc18xLmNoZWNrUGFzc3dvcmQpKHBsYXllckRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICgwLCBsb2dpbl9yZWdpc3RyYXRlXzEubG9naW4pKHdzQ2xpZW50LCBwbGF5ZXJEYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoISgwLCBwbGF5ZXJzXzEuY2hlY2tQYXNzd29yZCkocGxheWVyRGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2luX3JlZ2lzdHJhdGVfMS5sb2dpbldpdGhXcm9uZ1Bhc3N3b3JkKSh3c0NsaWVudCwgcGxheWVyRGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgKDAsIGxvZ2luX3JlZ2lzdHJhdGVfMS5yZWdpc3RyYXRlTmV3UGxheWVyKSh3c0NsaWVudCwgcGxheWVyRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImNyZWF0ZV9yb29tXCIgLyogRGF0YXR5cGUuQ1JFQVRFX05FV19ST09NICovOlxuICAgICAgICAgICAgKDAsIGNyZWF0ZV9yb29tXzEuZGVmYXVsdCkod3NDbGllbnQsIGNodW5rRGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInNpbmdsZV9wbGF5XCIgLyogRGF0YXR5cGUuUExBWV9XSVRIX0JPVCAqLzpcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNodW5rRGF0YS50eXBlKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbn07XG5jb25zdCBnZXREYXRhVHlwZSA9IChjaHVua0RhdGEpID0+IGNodW5rRGF0YS50eXBlO1xuZXhwb3J0cy5kZWZhdWx0ID0gbWFrZUFjdGlvbkRlcGVuZGluZ09uZGF0YVR5cGU7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IHdzXzEgPSByZXF1aXJlKFwid3NcIik7XG5jb25zdCBtYWtlX2FjdGlvbl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9zZXJ2aWNlcy9tYWtlLWFjdGlvblwiKSk7XG5jb25zdCBXU1NfUE9SVCA9IE51bWJlcihwcm9jZXNzLmVudi5XU1NfUE9SVCk7XG5leHBvcnRzLmRlZmF1bHQgPSB7XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGNvbnN0IHdzc2VydmVyID0gbmV3IHdzXzEuV2ViU29ja2V0U2VydmVyKHsgcG9ydDogV1NTX1BPUlQgfSk7XG4gICAgICAgIGNvbnN0IG9uQ29ubmVjdCA9ICh3c0NsaWVudCwgcmVxKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgV2Vic29ja2V0IGlzIHN0YXJ0ZWQgb24gJHtPYmplY3QudmFsdWVzKHJlcS5oZWFkZXJzKVswXX0gd2l0aCBzZWN1cml0eSBrZXkgJHtPYmplY3QudmFsdWVzKHJlcS5oZWFkZXJzKVsxMF19YCk7XG4gICAgICAgICAgICB3c0NsaWVudC5vbignbWVzc2FnZScsIChjaHVuaykgPT4ge1xuICAgICAgICAgICAgICAgICgwLCBtYWtlX2FjdGlvbl8xLmRlZmF1bHQpKGNodW5rLCB3c0NsaWVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHdzQ2xpZW50Lm9uKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnV2Vic29ja2V0IGlzIGRpc2Nvbm5lY3RlZCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHdzc2VydmVyLm9uKCdjb25uZWN0aW9uJywgb25Db25uZWN0KTtcbiAgICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBXZWJTb2NrZXQgPSByZXF1aXJlKCcuL2xpYi93ZWJzb2NrZXQnKTtcblxuV2ViU29ja2V0LmNyZWF0ZVdlYlNvY2tldFN0cmVhbSA9IHJlcXVpcmUoJy4vbGliL3N0cmVhbScpO1xuV2ViU29ja2V0LlNlcnZlciA9IHJlcXVpcmUoJy4vbGliL3dlYnNvY2tldC1zZXJ2ZXInKTtcbldlYlNvY2tldC5SZWNlaXZlciA9IHJlcXVpcmUoJy4vbGliL3JlY2VpdmVyJyk7XG5XZWJTb2NrZXQuU2VuZGVyID0gcmVxdWlyZSgnLi9saWIvc2VuZGVyJyk7XG5cbldlYlNvY2tldC5XZWJTb2NrZXQgPSBXZWJTb2NrZXQ7XG5XZWJTb2NrZXQuV2ViU29ja2V0U2VydmVyID0gV2ViU29ja2V0LlNlcnZlcjtcblxubW9kdWxlLmV4cG9ydHMgPSBXZWJTb2NrZXQ7XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHsgRU1QVFlfQlVGRkVSIH0gPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuXG4vKipcbiAqIE1lcmdlcyBhbiBhcnJheSBvZiBidWZmZXJzIGludG8gYSBuZXcgYnVmZmVyLlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyW119IGxpc3QgVGhlIGFycmF5IG9mIGJ1ZmZlcnMgdG8gY29uY2F0XG4gKiBAcGFyYW0ge051bWJlcn0gdG90YWxMZW5ndGggVGhlIHRvdGFsIGxlbmd0aCBvZiBidWZmZXJzIGluIHRoZSBsaXN0XG4gKiBAcmV0dXJuIHtCdWZmZXJ9IFRoZSByZXN1bHRpbmcgYnVmZmVyXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIGNvbmNhdChsaXN0LCB0b3RhbExlbmd0aCkge1xuICBpZiAobGlzdC5sZW5ndGggPT09IDApIHJldHVybiBFTVBUWV9CVUZGRVI7XG4gIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkgcmV0dXJuIGxpc3RbMF07XG5cbiAgY29uc3QgdGFyZ2V0ID0gQnVmZmVyLmFsbG9jVW5zYWZlKHRvdGFsTGVuZ3RoKTtcbiAgbGV0IG9mZnNldCA9IDA7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgYnVmID0gbGlzdFtpXTtcbiAgICB0YXJnZXQuc2V0KGJ1Ziwgb2Zmc2V0KTtcbiAgICBvZmZzZXQgKz0gYnVmLmxlbmd0aDtcbiAgfVxuXG4gIGlmIChvZmZzZXQgPCB0b3RhbExlbmd0aCkgcmV0dXJuIHRhcmdldC5zbGljZSgwLCBvZmZzZXQpO1xuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbi8qKlxuICogTWFza3MgYSBidWZmZXIgdXNpbmcgdGhlIGdpdmVuIG1hc2suXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IHNvdXJjZSBUaGUgYnVmZmVyIHRvIG1hc2tcbiAqIEBwYXJhbSB7QnVmZmVyfSBtYXNrIFRoZSBtYXNrIHRvIHVzZVxuICogQHBhcmFtIHtCdWZmZXJ9IG91dHB1dCBUaGUgYnVmZmVyIHdoZXJlIHRvIHN0b3JlIHRoZSByZXN1bHRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgVGhlIG9mZnNldCBhdCB3aGljaCB0byBzdGFydCB3cml0aW5nXG4gKiBAcGFyYW0ge051bWJlcn0gbGVuZ3RoIFRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gbWFzay5cbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gX21hc2soc291cmNlLCBtYXNrLCBvdXRwdXQsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBvdXRwdXRbb2Zmc2V0ICsgaV0gPSBzb3VyY2VbaV0gXiBtYXNrW2kgJiAzXTtcbiAgfVxufVxuXG4vKipcbiAqIFVubWFza3MgYSBidWZmZXIgdXNpbmcgdGhlIGdpdmVuIG1hc2suXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IGJ1ZmZlciBUaGUgYnVmZmVyIHRvIHVubWFza1xuICogQHBhcmFtIHtCdWZmZXJ9IG1hc2sgVGhlIG1hc2sgdG8gdXNlXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIF91bm1hc2soYnVmZmVyLCBtYXNrKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgYnVmZmVyW2ldIF49IG1hc2tbaSAmIDNdO1xuICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBidWZmZXIgdG8gYW4gYEFycmF5QnVmZmVyYC5cbiAqXG4gKiBAcGFyYW0ge0J1ZmZlcn0gYnVmIFRoZSBidWZmZXIgdG8gY29udmVydFxuICogQHJldHVybiB7QXJyYXlCdWZmZXJ9IENvbnZlcnRlZCBidWZmZXJcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gdG9BcnJheUJ1ZmZlcihidWYpIHtcbiAgaWYgKGJ1Zi5ieXRlTGVuZ3RoID09PSBidWYuYnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICByZXR1cm4gYnVmLmJ1ZmZlcjtcbiAgfVxuXG4gIHJldHVybiBidWYuYnVmZmVyLnNsaWNlKGJ1Zi5ieXRlT2Zmc2V0LCBidWYuYnl0ZU9mZnNldCArIGJ1Zi5ieXRlTGVuZ3RoKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgZGF0YWAgdG8gYSBgQnVmZmVyYC5cbiAqXG4gKiBAcGFyYW0geyp9IGRhdGEgVGhlIGRhdGEgdG8gY29udmVydFxuICogQHJldHVybiB7QnVmZmVyfSBUaGUgYnVmZmVyXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9XG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIHRvQnVmZmVyKGRhdGEpIHtcbiAgdG9CdWZmZXIucmVhZE9ubHkgPSB0cnVlO1xuXG4gIGlmIChCdWZmZXIuaXNCdWZmZXIoZGF0YSkpIHJldHVybiBkYXRhO1xuXG4gIGxldCBidWY7XG5cbiAgaWYgKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIGJ1ZiA9IEJ1ZmZlci5mcm9tKGRhdGEpO1xuICB9IGVsc2UgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSkge1xuICAgIGJ1ZiA9IEJ1ZmZlci5mcm9tKGRhdGEuYnVmZmVyLCBkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZUxlbmd0aCk7XG4gIH0gZWxzZSB7XG4gICAgYnVmID0gQnVmZmVyLmZyb20oZGF0YSk7XG4gICAgdG9CdWZmZXIucmVhZE9ubHkgPSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBidWY7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjb25jYXQsXG4gIG1hc2s6IF9tYXNrLFxuICB0b0FycmF5QnVmZmVyLFxuICB0b0J1ZmZlcixcbiAgdW5tYXNrOiBfdW5tYXNrXG59O1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAgKi9cbmlmICghcHJvY2Vzcy5lbnYuV1NfTk9fQlVGRkVSX1VUSUwpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBidWZmZXJVdGlsID0gcmVxdWlyZSgnYnVmZmVydXRpbCcpO1xuXG4gICAgbW9kdWxlLmV4cG9ydHMubWFzayA9IGZ1bmN0aW9uIChzb3VyY2UsIG1hc2ssIG91dHB1dCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgICAgIGlmIChsZW5ndGggPCA0OCkgX21hc2soc291cmNlLCBtYXNrLCBvdXRwdXQsIG9mZnNldCwgbGVuZ3RoKTtcbiAgICAgIGVsc2UgYnVmZmVyVXRpbC5tYXNrKHNvdXJjZSwgbWFzaywgb3V0cHV0LCBvZmZzZXQsIGxlbmd0aCk7XG4gICAgfTtcblxuICAgIG1vZHVsZS5leHBvcnRzLnVubWFzayA9IGZ1bmN0aW9uIChidWZmZXIsIG1hc2spIHtcbiAgICAgIGlmIChidWZmZXIubGVuZ3RoIDwgMzIpIF91bm1hc2soYnVmZmVyLCBtYXNrKTtcbiAgICAgIGVsc2UgYnVmZmVyVXRpbC51bm1hc2soYnVmZmVyLCBtYXNrKTtcbiAgICB9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gQ29udGludWUgcmVnYXJkbGVzcyBvZiB0aGUgZXJyb3IuXG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEJJTkFSWV9UWVBFUzogWydub2RlYnVmZmVyJywgJ2FycmF5YnVmZmVyJywgJ2ZyYWdtZW50cyddLFxuICBFTVBUWV9CVUZGRVI6IEJ1ZmZlci5hbGxvYygwKSxcbiAgR1VJRDogJzI1OEVBRkE1LUU5MTQtNDdEQS05NUNBLUM1QUIwREM4NUIxMScsXG4gIGtGb3JPbkV2ZW50QXR0cmlidXRlOiBTeW1ib2woJ2tJc0Zvck9uRXZlbnRBdHRyaWJ1dGUnKSxcbiAga0xpc3RlbmVyOiBTeW1ib2woJ2tMaXN0ZW5lcicpLFxuICBrU3RhdHVzQ29kZTogU3ltYm9sKCdzdGF0dXMtY29kZScpLFxuICBrV2ViU29ja2V0OiBTeW1ib2woJ3dlYnNvY2tldCcpLFxuICBOT09QOiAoKSA9PiB7fVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgeyBrRm9yT25FdmVudEF0dHJpYnV0ZSwga0xpc3RlbmVyIH0gPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuXG5jb25zdCBrQ29kZSA9IFN5bWJvbCgna0NvZGUnKTtcbmNvbnN0IGtEYXRhID0gU3ltYm9sKCdrRGF0YScpO1xuY29uc3Qga0Vycm9yID0gU3ltYm9sKCdrRXJyb3InKTtcbmNvbnN0IGtNZXNzYWdlID0gU3ltYm9sKCdrTWVzc2FnZScpO1xuY29uc3Qga1JlYXNvbiA9IFN5bWJvbCgna1JlYXNvbicpO1xuY29uc3Qga1RhcmdldCA9IFN5bWJvbCgna1RhcmdldCcpO1xuY29uc3Qga1R5cGUgPSBTeW1ib2woJ2tUeXBlJyk7XG5jb25zdCBrV2FzQ2xlYW4gPSBTeW1ib2woJ2tXYXNDbGVhbicpO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhbiBldmVudC5cbiAqL1xuY2xhc3MgRXZlbnQge1xuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGBFdmVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBuYW1lIG9mIHRoZSBldmVudFxuICAgKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIHRoZSBgdHlwZWAgYXJndW1lbnQgaXMgbm90IHNwZWNpZmllZFxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSkge1xuICAgIHRoaXNba1RhcmdldF0gPSBudWxsO1xuICAgIHRoaXNba1R5cGVdID0gdHlwZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7Kn1cbiAgICovXG4gIGdldCB0YXJnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXNba1RhcmdldF07XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCB0eXBlKCkge1xuICAgIHJldHVybiB0aGlzW2tUeXBlXTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnQucHJvdG90eXBlLCAndGFyZ2V0JywgeyBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50LnByb3RvdHlwZSwgJ3R5cGUnLCB7IGVudW1lcmFibGU6IHRydWUgfSk7XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgY2xvc2UgZXZlbnQuXG4gKlxuICogQGV4dGVuZHMgRXZlbnRcbiAqL1xuY2xhc3MgQ2xvc2VFdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBgQ2xvc2VFdmVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBuYW1lIG9mIHRoZSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvYmplY3QgdGhhdCBhbGxvd3MgZm9yIHNldHRpbmdcbiAgICogICAgIGF0dHJpYnV0ZXMgdmlhIG9iamVjdCBtZW1iZXJzIG9mIHRoZSBzYW1lIG5hbWVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmNvZGU9MF0gVGhlIHN0YXR1cyBjb2RlIGV4cGxhaW5pbmcgd2h5IHRoZVxuICAgKiAgICAgY29ubmVjdGlvbiB3YXMgY2xvc2VkXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5yZWFzb249JyddIEEgaHVtYW4tcmVhZGFibGUgc3RyaW5nIGV4cGxhaW5pbmcgd2h5XG4gICAqICAgICB0aGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMud2FzQ2xlYW49ZmFsc2VdIEluZGljYXRlcyB3aGV0aGVyIG9yIG5vdCB0aGVcbiAgICogICAgIGNvbm5lY3Rpb24gd2FzIGNsZWFubHkgY2xvc2VkXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBvcHRpb25zID0ge30pIHtcbiAgICBzdXBlcih0eXBlKTtcblxuICAgIHRoaXNba0NvZGVdID0gb3B0aW9ucy5jb2RlID09PSB1bmRlZmluZWQgPyAwIDogb3B0aW9ucy5jb2RlO1xuICAgIHRoaXNba1JlYXNvbl0gPSBvcHRpb25zLnJlYXNvbiA9PT0gdW5kZWZpbmVkID8gJycgOiBvcHRpb25zLnJlYXNvbjtcbiAgICB0aGlzW2tXYXNDbGVhbl0gPSBvcHRpb25zLndhc0NsZWFuID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IG9wdGlvbnMud2FzQ2xlYW47XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGdldCBjb2RlKCkge1xuICAgIHJldHVybiB0aGlzW2tDb2RlXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IHJlYXNvbigpIHtcbiAgICByZXR1cm4gdGhpc1trUmVhc29uXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG4gIGdldCB3YXNDbGVhbigpIHtcbiAgICByZXR1cm4gdGhpc1trV2FzQ2xlYW5dO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShDbG9zZUV2ZW50LnByb3RvdHlwZSwgJ2NvZGUnLCB7IGVudW1lcmFibGU6IHRydWUgfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQ2xvc2VFdmVudC5wcm90b3R5cGUsICdyZWFzb24nLCB7IGVudW1lcmFibGU6IHRydWUgfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQ2xvc2VFdmVudC5wcm90b3R5cGUsICd3YXNDbGVhbicsIHsgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYW4gZXJyb3IgZXZlbnQuXG4gKlxuICogQGV4dGVuZHMgRXZlbnRcbiAqL1xuY2xhc3MgRXJyb3JFdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBgRXJyb3JFdmVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBuYW1lIG9mIHRoZSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvYmplY3QgdGhhdCBhbGxvd3MgZm9yIHNldHRpbmdcbiAgICogICAgIGF0dHJpYnV0ZXMgdmlhIG9iamVjdCBtZW1iZXJzIG9mIHRoZSBzYW1lIG5hbWVcbiAgICogQHBhcmFtIHsqfSBbb3B0aW9ucy5lcnJvcj1udWxsXSBUaGUgZXJyb3IgdGhhdCBnZW5lcmF0ZWQgdGhpcyBldmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMubWVzc2FnZT0nJ10gVGhlIGVycm9yIG1lc3NhZ2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKHR5cGUsIG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKHR5cGUpO1xuXG4gICAgdGhpc1trRXJyb3JdID0gb3B0aW9ucy5lcnJvciA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG9wdGlvbnMuZXJyb3I7XG4gICAgdGhpc1trTWVzc2FnZV0gPSBvcHRpb25zLm1lc3NhZ2UgPT09IHVuZGVmaW5lZCA/ICcnIDogb3B0aW9ucy5tZXNzYWdlO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHsqfVxuICAgKi9cbiAgZ2V0IGVycm9yKCkge1xuICAgIHJldHVybiB0aGlzW2tFcnJvcl07XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBtZXNzYWdlKCkge1xuICAgIHJldHVybiB0aGlzW2tNZXNzYWdlXTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXJyb3JFdmVudC5wcm90b3R5cGUsICdlcnJvcicsIHsgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShFcnJvckV2ZW50LnByb3RvdHlwZSwgJ21lc3NhZ2UnLCB7IGVudW1lcmFibGU6IHRydWUgfSk7XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgbWVzc2FnZSBldmVudC5cbiAqXG4gKiBAZXh0ZW5kcyBFdmVudFxuICovXG5jbGFzcyBNZXNzYWdlRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgYE1lc3NhZ2VFdmVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBuYW1lIG9mIHRoZSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvYmplY3QgdGhhdCBhbGxvd3MgZm9yIHNldHRpbmdcbiAgICogICAgIGF0dHJpYnV0ZXMgdmlhIG9iamVjdCBtZW1iZXJzIG9mIHRoZSBzYW1lIG5hbWVcbiAgICogQHBhcmFtIHsqfSBbb3B0aW9ucy5kYXRhPW51bGxdIFRoZSBtZXNzYWdlIGNvbnRlbnRcbiAgICovXG4gIGNvbnN0cnVjdG9yKHR5cGUsIG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKHR5cGUpO1xuXG4gICAgdGhpc1trRGF0YV0gPSBvcHRpb25zLmRhdGEgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBvcHRpb25zLmRhdGE7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUgeyp9XG4gICAqL1xuICBnZXQgZGF0YSgpIHtcbiAgICByZXR1cm4gdGhpc1trRGF0YV07XG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lc3NhZ2VFdmVudC5wcm90b3R5cGUsICdkYXRhJywgeyBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuXG4vKipcbiAqIFRoaXMgcHJvdmlkZXMgbWV0aG9kcyBmb3IgZW11bGF0aW5nIHRoZSBgRXZlbnRUYXJnZXRgIGludGVyZmFjZS4gSXQncyBub3RcbiAqIG1lYW50IHRvIGJlIHVzZWQgZGlyZWN0bHkuXG4gKlxuICogQG1peGluXG4gKi9cbmNvbnN0IEV2ZW50VGFyZ2V0ID0ge1xuICAvKipcbiAgICogUmVnaXN0ZXIgYW4gZXZlbnQgbGlzdGVuZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZXZlbnQgdHlwZSB0byBsaXN0ZW4gZm9yXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciB0byBhZGRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBBbiBvcHRpb25zIG9iamVjdCBzcGVjaWZpZXMgY2hhcmFjdGVyaXN0aWNzIGFib3V0XG4gICAqICAgICB0aGUgZXZlbnQgbGlzdGVuZXJcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5vbmNlPWZhbHNlXSBBIGBCb29sZWFuYCBpbmRpY2F0aW5nIHRoYXQgdGhlXG4gICAqICAgICBsaXN0ZW5lciBzaG91bGQgYmUgaW52b2tlZCBhdCBtb3N0IG9uY2UgYWZ0ZXIgYmVpbmcgYWRkZWQuIElmIGB0cnVlYCxcbiAgICogICAgIHRoZSBsaXN0ZW5lciB3b3VsZCBiZSBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgd2hlbiBpbnZva2VkLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zID0ge30pIHtcbiAgICBsZXQgd3JhcHBlcjtcblxuICAgIGlmICh0eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgIHdyYXBwZXIgPSBmdW5jdGlvbiBvbk1lc3NhZ2UoZGF0YSwgaXNCaW5hcnkpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgTWVzc2FnZUV2ZW50KCdtZXNzYWdlJywge1xuICAgICAgICAgIGRhdGE6IGlzQmluYXJ5ID8gZGF0YSA6IGRhdGEudG9TdHJpbmcoKVxuICAgICAgICB9KTtcblxuICAgICAgICBldmVudFtrVGFyZ2V0XSA9IHRoaXM7XG4gICAgICAgIGxpc3RlbmVyLmNhbGwodGhpcywgZXZlbnQpO1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdjbG9zZScpIHtcbiAgICAgIHdyYXBwZXIgPSBmdW5jdGlvbiBvbkNsb3NlKGNvZGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ2xvc2VFdmVudCgnY2xvc2UnLCB7XG4gICAgICAgICAgY29kZSxcbiAgICAgICAgICByZWFzb246IG1lc3NhZ2UudG9TdHJpbmcoKSxcbiAgICAgICAgICB3YXNDbGVhbjogdGhpcy5fY2xvc2VGcmFtZVJlY2VpdmVkICYmIHRoaXMuX2Nsb3NlRnJhbWVTZW50XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV2ZW50W2tUYXJnZXRdID0gdGhpcztcbiAgICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgICAgd3JhcHBlciA9IGZ1bmN0aW9uIG9uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgRXJyb3JFdmVudCgnZXJyb3InLCB7XG4gICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICAgICAgICB9KTtcblxuICAgICAgICBldmVudFtrVGFyZ2V0XSA9IHRoaXM7XG4gICAgICAgIGxpc3RlbmVyLmNhbGwodGhpcywgZXZlbnQpO1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdvcGVuJykge1xuICAgICAgd3JhcHBlciA9IGZ1bmN0aW9uIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgRXZlbnQoJ29wZW4nKTtcblxuICAgICAgICBldmVudFtrVGFyZ2V0XSA9IHRoaXM7XG4gICAgICAgIGxpc3RlbmVyLmNhbGwodGhpcywgZXZlbnQpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHdyYXBwZXJba0Zvck9uRXZlbnRBdHRyaWJ1dGVdID0gISFvcHRpb25zW2tGb3JPbkV2ZW50QXR0cmlidXRlXTtcbiAgICB3cmFwcGVyW2tMaXN0ZW5lcl0gPSBsaXN0ZW5lcjtcblxuICAgIGlmIChvcHRpb25zLm9uY2UpIHtcbiAgICAgIHRoaXMub25jZSh0eXBlLCB3cmFwcGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbih0eXBlLCB3cmFwcGVyKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBldmVudCBsaXN0ZW5lci5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBldmVudCB0eXBlIHRvIHJlbW92ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIFRoZSBsaXN0ZW5lciB0byByZW1vdmVcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyKSB7XG4gICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiB0aGlzLmxpc3RlbmVycyh0eXBlKSkge1xuICAgICAgaWYgKGxpc3RlbmVyW2tMaXN0ZW5lcl0gPT09IGhhbmRsZXIgJiYgIWxpc3RlbmVyW2tGb3JPbkV2ZW50QXR0cmlidXRlXSkge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQ2xvc2VFdmVudCxcbiAgRXJyb3JFdmVudCxcbiAgRXZlbnQsXG4gIEV2ZW50VGFyZ2V0LFxuICBNZXNzYWdlRXZlbnRcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHsgdG9rZW5DaGFycyB9ID0gcmVxdWlyZSgnLi92YWxpZGF0aW9uJyk7XG5cbi8qKlxuICogQWRkcyBhbiBvZmZlciB0byB0aGUgbWFwIG9mIGV4dGVuc2lvbiBvZmZlcnMgb3IgYSBwYXJhbWV0ZXIgdG8gdGhlIG1hcCBvZlxuICogcGFyYW1ldGVycy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGVzdCBUaGUgbWFwIG9mIGV4dGVuc2lvbiBvZmZlcnMgb3IgcGFyYW1ldGVyc1xuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIGV4dGVuc2lvbiBvciBwYXJhbWV0ZXIgbmFtZVxuICogQHBhcmFtIHsoT2JqZWN0fEJvb2xlYW58U3RyaW5nKX0gZWxlbSBUaGUgZXh0ZW5zaW9uIHBhcmFtZXRlcnMgb3IgdGhlXG4gKiAgICAgcGFyYW1ldGVyIHZhbHVlXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwdXNoKGRlc3QsIG5hbWUsIGVsZW0pIHtcbiAgaWYgKGRlc3RbbmFtZV0gPT09IHVuZGVmaW5lZCkgZGVzdFtuYW1lXSA9IFtlbGVtXTtcbiAgZWxzZSBkZXN0W25hbWVdLnB1c2goZWxlbSk7XG59XG5cbi8qKlxuICogUGFyc2VzIHRoZSBgU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zYCBoZWFkZXIgaW50byBhbiBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGhlYWRlciBUaGUgZmllbGQgdmFsdWUgb2YgdGhlIGhlYWRlclxuICogQHJldHVybiB7T2JqZWN0fSBUaGUgcGFyc2VkIG9iamVjdFxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBwYXJzZShoZWFkZXIpIHtcbiAgY29uc3Qgb2ZmZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgbGV0IHBhcmFtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGxldCBtdXN0VW5lc2NhcGUgPSBmYWxzZTtcbiAgbGV0IGlzRXNjYXBpbmcgPSBmYWxzZTtcbiAgbGV0IGluUXVvdGVzID0gZmFsc2U7XG4gIGxldCBleHRlbnNpb25OYW1lO1xuICBsZXQgcGFyYW1OYW1lO1xuICBsZXQgc3RhcnQgPSAtMTtcbiAgbGV0IGNvZGUgPSAtMTtcbiAgbGV0IGVuZCA9IC0xO1xuICBsZXQgaSA9IDA7XG5cbiAgZm9yICg7IGkgPCBoZWFkZXIubGVuZ3RoOyBpKyspIHtcbiAgICBjb2RlID0gaGVhZGVyLmNoYXJDb2RlQXQoaSk7XG5cbiAgICBpZiAoZXh0ZW5zaW9uTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoZW5kID09PSAtMSAmJiB0b2tlbkNoYXJzW2NvZGVdID09PSAxKSB7XG4gICAgICAgIGlmIChzdGFydCA9PT0gLTEpIHN0YXJ0ID0gaTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIGkgIT09IDAgJiZcbiAgICAgICAgKGNvZGUgPT09IDB4MjAgLyogJyAnICovIHx8IGNvZGUgPT09IDB4MDkpIC8qICdcXHQnICovXG4gICAgICApIHtcbiAgICAgICAgaWYgKGVuZCA9PT0gLTEgJiYgc3RhcnQgIT09IC0xKSBlbmQgPSBpO1xuICAgICAgfSBlbHNlIGlmIChjb2RlID09PSAweDNiIC8qICc7JyAqLyB8fCBjb2RlID09PSAweDJjIC8qICcsJyAqLykge1xuICAgICAgICBpZiAoc3RhcnQgPT09IC0xKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW5kID09PSAtMSkgZW5kID0gaTtcbiAgICAgICAgY29uc3QgbmFtZSA9IGhlYWRlci5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgICAgaWYgKGNvZGUgPT09IDB4MmMpIHtcbiAgICAgICAgICBwdXNoKG9mZmVycywgbmFtZSwgcGFyYW1zKTtcbiAgICAgICAgICBwYXJhbXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGV4dGVuc2lvbk5hbWUgPSBuYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhcnQgPSBlbmQgPSAtMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVW5leHBlY3RlZCBjaGFyYWN0ZXIgYXQgaW5kZXggJHtpfWApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocGFyYW1OYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChlbmQgPT09IC0xICYmIHRva2VuQ2hhcnNbY29kZV0gPT09IDEpIHtcbiAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSkgc3RhcnQgPSBpO1xuICAgICAgfSBlbHNlIGlmIChjb2RlID09PSAweDIwIHx8IGNvZGUgPT09IDB4MDkpIHtcbiAgICAgICAgaWYgKGVuZCA9PT0gLTEgJiYgc3RhcnQgIT09IC0xKSBlbmQgPSBpO1xuICAgICAgfSBlbHNlIGlmIChjb2RlID09PSAweDNiIHx8IGNvZGUgPT09IDB4MmMpIHtcbiAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSkge1xuICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVW5leHBlY3RlZCBjaGFyYWN0ZXIgYXQgaW5kZXggJHtpfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVuZCA9PT0gLTEpIGVuZCA9IGk7XG4gICAgICAgIHB1c2gocGFyYW1zLCBoZWFkZXIuc2xpY2Uoc3RhcnQsIGVuZCksIHRydWUpO1xuICAgICAgICBpZiAoY29kZSA9PT0gMHgyYykge1xuICAgICAgICAgIHB1c2gob2ZmZXJzLCBleHRlbnNpb25OYW1lLCBwYXJhbXMpO1xuICAgICAgICAgIHBhcmFtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgZXh0ZW5zaW9uTmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXJ0ID0gZW5kID0gLTE7XG4gICAgICB9IGVsc2UgaWYgKGNvZGUgPT09IDB4M2QgLyogJz0nICovICYmIHN0YXJ0ICE9PSAtMSAmJiBlbmQgPT09IC0xKSB7XG4gICAgICAgIHBhcmFtTmFtZSA9IGhlYWRlci5zbGljZShzdGFydCwgaSk7XG4gICAgICAgIHN0YXJ0ID0gZW5kID0gLTE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoYFVuZXhwZWN0ZWQgY2hhcmFjdGVyIGF0IGluZGV4ICR7aX1gKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy9cbiAgICAgIC8vIFRoZSB2YWx1ZSBvZiBhIHF1b3RlZC1zdHJpbmcgYWZ0ZXIgdW5lc2NhcGluZyBtdXN0IGNvbmZvcm0gdG8gdGhlXG4gICAgICAvLyB0b2tlbiBBQk5GLCBzbyBvbmx5IHRva2VuIGNoYXJhY3RlcnMgYXJlIHZhbGlkLlxuICAgICAgLy8gUmVmOiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjQ1NSNzZWN0aW9uLTkuMVxuICAgICAgLy9cbiAgICAgIGlmIChpc0VzY2FwaW5nKSB7XG4gICAgICAgIGlmICh0b2tlbkNoYXJzW2NvZGVdICE9PSAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSkgc3RhcnQgPSBpO1xuICAgICAgICBlbHNlIGlmICghbXVzdFVuZXNjYXBlKSBtdXN0VW5lc2NhcGUgPSB0cnVlO1xuICAgICAgICBpc0VzY2FwaW5nID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGluUXVvdGVzKSB7XG4gICAgICAgIGlmICh0b2tlbkNoYXJzW2NvZGVdID09PSAxKSB7XG4gICAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSkgc3RhcnQgPSBpO1xuICAgICAgICB9IGVsc2UgaWYgKGNvZGUgPT09IDB4MjIgLyogJ1wiJyAqLyAmJiBzdGFydCAhPT0gLTEpIHtcbiAgICAgICAgICBpblF1b3RlcyA9IGZhbHNlO1xuICAgICAgICAgIGVuZCA9IGk7XG4gICAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gMHg1YyAvKiAnXFwnICovKSB7XG4gICAgICAgICAgaXNFc2NhcGluZyA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gMHgyMiAmJiBoZWFkZXIuY2hhckNvZGVBdChpIC0gMSkgPT09IDB4M2QpIHtcbiAgICAgICAgaW5RdW90ZXMgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChlbmQgPT09IC0xICYmIHRva2VuQ2hhcnNbY29kZV0gPT09IDEpIHtcbiAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSkgc3RhcnQgPSBpO1xuICAgICAgfSBlbHNlIGlmIChzdGFydCAhPT0gLTEgJiYgKGNvZGUgPT09IDB4MjAgfHwgY29kZSA9PT0gMHgwOSkpIHtcbiAgICAgICAgaWYgKGVuZCA9PT0gLTEpIGVuZCA9IGk7XG4gICAgICB9IGVsc2UgaWYgKGNvZGUgPT09IDB4M2IgfHwgY29kZSA9PT0gMHgyYykge1xuICAgICAgICBpZiAoc3RhcnQgPT09IC0xKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW5kID09PSAtMSkgZW5kID0gaTtcbiAgICAgICAgbGV0IHZhbHVlID0gaGVhZGVyLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgICBpZiAobXVzdFVuZXNjYXBlKSB7XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXFxcL2csICcnKTtcbiAgICAgICAgICBtdXN0VW5lc2NhcGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBwdXNoKHBhcmFtcywgcGFyYW1OYW1lLCB2YWx1ZSk7XG4gICAgICAgIGlmIChjb2RlID09PSAweDJjKSB7XG4gICAgICAgICAgcHVzaChvZmZlcnMsIGV4dGVuc2lvbk5hbWUsIHBhcmFtcyk7XG4gICAgICAgICAgcGFyYW1zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICBleHRlbnNpb25OYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyYW1OYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICBzdGFydCA9IGVuZCA9IC0xO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXJ0ID09PSAtMSB8fCBpblF1b3RlcyB8fCBjb2RlID09PSAweDIwIHx8IGNvZGUgPT09IDB4MDkpIHtcbiAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ1VuZXhwZWN0ZWQgZW5kIG9mIGlucHV0Jyk7XG4gIH1cblxuICBpZiAoZW5kID09PSAtMSkgZW5kID0gaTtcbiAgY29uc3QgdG9rZW4gPSBoZWFkZXIuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gIGlmIChleHRlbnNpb25OYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICBwdXNoKG9mZmVycywgdG9rZW4sIHBhcmFtcyk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHBhcmFtTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBwdXNoKHBhcmFtcywgdG9rZW4sIHRydWUpO1xuICAgIH0gZWxzZSBpZiAobXVzdFVuZXNjYXBlKSB7XG4gICAgICBwdXNoKHBhcmFtcywgcGFyYW1OYW1lLCB0b2tlbi5yZXBsYWNlKC9cXFxcL2csICcnKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHB1c2gocGFyYW1zLCBwYXJhbU5hbWUsIHRva2VuKTtcbiAgICB9XG4gICAgcHVzaChvZmZlcnMsIGV4dGVuc2lvbk5hbWUsIHBhcmFtcyk7XG4gIH1cblxuICByZXR1cm4gb2ZmZXJzO1xufVxuXG4vKipcbiAqIEJ1aWxkcyB0aGUgYFNlYy1XZWJTb2NrZXQtRXh0ZW5zaW9uc2AgaGVhZGVyIGZpZWxkIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbnNpb25zIFRoZSBtYXAgb2YgZXh0ZW5zaW9ucyBhbmQgcGFyYW1ldGVycyB0byBmb3JtYXRcbiAqIEByZXR1cm4ge1N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBnaXZlbiBvYmplY3RcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gZm9ybWF0KGV4dGVuc2lvbnMpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGV4dGVuc2lvbnMpXG4gICAgLm1hcCgoZXh0ZW5zaW9uKSA9PiB7XG4gICAgICBsZXQgY29uZmlndXJhdGlvbnMgPSBleHRlbnNpb25zW2V4dGVuc2lvbl07XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29uZmlndXJhdGlvbnMpKSBjb25maWd1cmF0aW9ucyA9IFtjb25maWd1cmF0aW9uc107XG4gICAgICByZXR1cm4gY29uZmlndXJhdGlvbnNcbiAgICAgICAgLm1hcCgocGFyYW1zKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIFtleHRlbnNpb25dXG4gICAgICAgICAgICAuY29uY2F0KFxuICAgICAgICAgICAgICBPYmplY3Qua2V5cyhwYXJhbXMpLm1hcCgoaykgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZXMgPSBwYXJhbXNba107XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlcykpIHZhbHVlcyA9IFt2YWx1ZXNdO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgIC5tYXAoKHYpID0+ICh2ID09PSB0cnVlID8gayA6IGAke2t9PSR7dn1gKSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKCc7ICcpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmpvaW4oJzsgJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKCcsICcpO1xuICAgIH0pXG4gICAgLmpvaW4oJywgJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0geyBmb3JtYXQsIHBhcnNlIH07XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGtEb25lID0gU3ltYm9sKCdrRG9uZScpO1xuY29uc3Qga1J1biA9IFN5bWJvbCgna1J1bicpO1xuXG4vKipcbiAqIEEgdmVyeSBzaW1wbGUgam9iIHF1ZXVlIHdpdGggYWRqdXN0YWJsZSBjb25jdXJyZW5jeS4gQWRhcHRlZCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vU1RSTUwvYXN5bmMtbGltaXRlclxuICovXG5jbGFzcyBMaW1pdGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgYExpbWl0ZXJgLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gW2NvbmN1cnJlbmN5PUluZmluaXR5XSBUaGUgbWF4aW11bSBudW1iZXIgb2Ygam9icyBhbGxvd2VkXG4gICAqICAgICB0byBydW4gY29uY3VycmVudGx5XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb25jdXJyZW5jeSkge1xuICAgIHRoaXNba0RvbmVdID0gKCkgPT4ge1xuICAgICAgdGhpcy5wZW5kaW5nLS07XG4gICAgICB0aGlzW2tSdW5dKCk7XG4gICAgfTtcbiAgICB0aGlzLmNvbmN1cnJlbmN5ID0gY29uY3VycmVuY3kgfHwgSW5maW5pdHk7XG4gICAgdGhpcy5qb2JzID0gW107XG4gICAgdGhpcy5wZW5kaW5nID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgam9iIHRvIHRoZSBxdWV1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gam9iIFRoZSBqb2IgdG8gcnVuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFkZChqb2IpIHtcbiAgICB0aGlzLmpvYnMucHVzaChqb2IpO1xuICAgIHRoaXNba1J1bl0oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgam9iIGZyb20gdGhlIHF1ZXVlIGFuZCBydW5zIGl0IGlmIHBvc3NpYmxlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgW2tSdW5dKCkge1xuICAgIGlmICh0aGlzLnBlbmRpbmcgPT09IHRoaXMuY29uY3VycmVuY3kpIHJldHVybjtcblxuICAgIGlmICh0aGlzLmpvYnMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBqb2IgPSB0aGlzLmpvYnMuc2hpZnQoKTtcblxuICAgICAgdGhpcy5wZW5kaW5nKys7XG4gICAgICBqb2IodGhpc1trRG9uZV0pO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IExpbWl0ZXI7XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHpsaWIgPSByZXF1aXJlKCd6bGliJyk7XG5cbmNvbnN0IGJ1ZmZlclV0aWwgPSByZXF1aXJlKCcuL2J1ZmZlci11dGlsJyk7XG5jb25zdCBMaW1pdGVyID0gcmVxdWlyZSgnLi9saW1pdGVyJyk7XG5jb25zdCB7IGtTdGF0dXNDb2RlIH0gPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuXG5jb25zdCBUUkFJTEVSID0gQnVmZmVyLmZyb20oWzB4MDAsIDB4MDAsIDB4ZmYsIDB4ZmZdKTtcbmNvbnN0IGtQZXJNZXNzYWdlRGVmbGF0ZSA9IFN5bWJvbCgncGVybWVzc2FnZS1kZWZsYXRlJyk7XG5jb25zdCBrVG90YWxMZW5ndGggPSBTeW1ib2woJ3RvdGFsLWxlbmd0aCcpO1xuY29uc3Qga0NhbGxiYWNrID0gU3ltYm9sKCdjYWxsYmFjaycpO1xuY29uc3Qga0J1ZmZlcnMgPSBTeW1ib2woJ2J1ZmZlcnMnKTtcbmNvbnN0IGtFcnJvciA9IFN5bWJvbCgnZXJyb3InKTtcblxuLy9cbi8vIFdlIGxpbWl0IHpsaWIgY29uY3VycmVuY3ksIHdoaWNoIHByZXZlbnRzIHNldmVyZSBtZW1vcnkgZnJhZ21lbnRhdGlvblxuLy8gYXMgZG9jdW1lbnRlZCBpbiBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvaXNzdWVzLzg4NzEjaXNzdWVjb21tZW50LTI1MDkxNTkxM1xuLy8gYW5kIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJzb2NrZXRzL3dzL2lzc3Vlcy8xMjAyXG4vL1xuLy8gSW50ZW50aW9uYWxseSBnbG9iYWw7IGl0J3MgdGhlIGdsb2JhbCB0aHJlYWQgcG9vbCB0aGF0J3MgYW4gaXNzdWUuXG4vL1xubGV0IHpsaWJMaW1pdGVyO1xuXG4vKipcbiAqIHBlcm1lc3NhZ2UtZGVmbGF0ZSBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuY2xhc3MgUGVyTWVzc2FnZURlZmxhdGUge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIFBlck1lc3NhZ2VEZWZsYXRlIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0geyhCb29sZWFufE51bWJlcil9IFtvcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHNdIEFkdmVydGlzZSBzdXBwb3J0XG4gICAqICAgICBmb3IsIG9yIHJlcXVlc3QsIGEgY3VzdG9tIGNsaWVudCB3aW5kb3cgc2l6ZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmNsaWVudE5vQ29udGV4dFRha2VvdmVyPWZhbHNlXSBBZHZlcnRpc2UvXG4gICAqICAgICBhY2tub3dsZWRnZSBkaXNhYmxpbmcgb2YgY2xpZW50IGNvbnRleHQgdGFrZW92ZXJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmNvbmN1cnJlbmN5TGltaXQ9MTBdIFRoZSBudW1iZXIgb2YgY29uY3VycmVudFxuICAgKiAgICAgY2FsbHMgdG8gemxpYlxuICAgKiBAcGFyYW0geyhCb29sZWFufE51bWJlcil9IFtvcHRpb25zLnNlcnZlck1heFdpbmRvd0JpdHNdIFJlcXVlc3QvY29uZmlybSB0aGVcbiAgICogICAgIHVzZSBvZiBhIGN1c3RvbSBzZXJ2ZXIgd2luZG93IHNpemVcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5zZXJ2ZXJOb0NvbnRleHRUYWtlb3Zlcj1mYWxzZV0gUmVxdWVzdC9hY2NlcHRcbiAgICogICAgIGRpc2FibGluZyBvZiBzZXJ2ZXIgY29udGV4dCB0YWtlb3ZlclxuICAgKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMudGhyZXNob2xkPTEwMjRdIFNpemUgKGluIGJ5dGVzKSBiZWxvdyB3aGljaFxuICAgKiAgICAgbWVzc2FnZXMgc2hvdWxkIG5vdCBiZSBjb21wcmVzc2VkIGlmIGNvbnRleHQgdGFrZW92ZXIgaXMgZGlzYWJsZWRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnpsaWJEZWZsYXRlT3B0aW9uc10gT3B0aW9ucyB0byBwYXNzIHRvIHpsaWIgb25cbiAgICogICAgIGRlZmxhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnpsaWJJbmZsYXRlT3B0aW9uc10gT3B0aW9ucyB0byBwYXNzIHRvIHpsaWIgb25cbiAgICogICAgIGluZmxhdGVcbiAgICogQHBhcmFtIHtCb29sZWFufSBbaXNTZXJ2ZXI9ZmFsc2VdIENyZWF0ZSB0aGUgaW5zdGFuY2UgaW4gZWl0aGVyIHNlcnZlciBvclxuICAgKiAgICAgY2xpZW50IG1vZGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFttYXhQYXlsb2FkPTBdIFRoZSBtYXhpbXVtIGFsbG93ZWQgbWVzc2FnZSBsZW5ndGhcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGlzU2VydmVyLCBtYXhQYXlsb2FkKSB7XG4gICAgdGhpcy5fbWF4UGF5bG9hZCA9IG1heFBheWxvYWQgfCAwO1xuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHRoaXMuX3RocmVzaG9sZCA9XG4gICAgICB0aGlzLl9vcHRpb25zLnRocmVzaG9sZCAhPT0gdW5kZWZpbmVkID8gdGhpcy5fb3B0aW9ucy50aHJlc2hvbGQgOiAxMDI0O1xuICAgIHRoaXMuX2lzU2VydmVyID0gISFpc1NlcnZlcjtcbiAgICB0aGlzLl9kZWZsYXRlID0gbnVsbDtcbiAgICB0aGlzLl9pbmZsYXRlID0gbnVsbDtcblxuICAgIHRoaXMucGFyYW1zID0gbnVsbDtcblxuICAgIGlmICghemxpYkxpbWl0ZXIpIHtcbiAgICAgIGNvbnN0IGNvbmN1cnJlbmN5ID1cbiAgICAgICAgdGhpcy5fb3B0aW9ucy5jb25jdXJyZW5jeUxpbWl0ICE9PSB1bmRlZmluZWRcbiAgICAgICAgICA/IHRoaXMuX29wdGlvbnMuY29uY3VycmVuY3lMaW1pdFxuICAgICAgICAgIDogMTA7XG4gICAgICB6bGliTGltaXRlciA9IG5ldyBMaW1pdGVyKGNvbmN1cnJlbmN5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgZXh0ZW5zaW9uTmFtZSgpIHtcbiAgICByZXR1cm4gJ3Blcm1lc3NhZ2UtZGVmbGF0ZSc7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGV4dGVuc2lvbiBuZWdvdGlhdGlvbiBvZmZlci5cbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fSBFeHRlbnNpb24gcGFyYW1ldGVyc1xuICAgKiBAcHVibGljXG4gICAqL1xuICBvZmZlcigpIHtcbiAgICBjb25zdCBwYXJhbXMgPSB7fTtcblxuICAgIGlmICh0aGlzLl9vcHRpb25zLnNlcnZlck5vQ29udGV4dFRha2VvdmVyKSB7XG4gICAgICBwYXJhbXMuc2VydmVyX25vX2NvbnRleHRfdGFrZW92ZXIgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodGhpcy5fb3B0aW9ucy5jbGllbnROb0NvbnRleHRUYWtlb3Zlcikge1xuICAgICAgcGFyYW1zLmNsaWVudF9ub19jb250ZXh0X3Rha2VvdmVyID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX29wdGlvbnMuc2VydmVyTWF4V2luZG93Qml0cykge1xuICAgICAgcGFyYW1zLnNlcnZlcl9tYXhfd2luZG93X2JpdHMgPSB0aGlzLl9vcHRpb25zLnNlcnZlck1heFdpbmRvd0JpdHM7XG4gICAgfVxuICAgIGlmICh0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMpIHtcbiAgICAgIHBhcmFtcy5jbGllbnRfbWF4X3dpbmRvd19iaXRzID0gdGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzID09IG51bGwpIHtcbiAgICAgIHBhcmFtcy5jbGllbnRfbWF4X3dpbmRvd19iaXRzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VwdCBhbiBleHRlbnNpb24gbmVnb3RpYXRpb24gb2ZmZXIvcmVzcG9uc2UuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGNvbmZpZ3VyYXRpb25zIFRoZSBleHRlbnNpb24gbmVnb3RpYXRpb24gb2ZmZXJzL3JlcG9uc2VcbiAgICogQHJldHVybiB7T2JqZWN0fSBBY2NlcHRlZCBjb25maWd1cmF0aW9uXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFjY2VwdChjb25maWd1cmF0aW9ucykge1xuICAgIGNvbmZpZ3VyYXRpb25zID0gdGhpcy5ub3JtYWxpemVQYXJhbXMoY29uZmlndXJhdGlvbnMpO1xuXG4gICAgdGhpcy5wYXJhbXMgPSB0aGlzLl9pc1NlcnZlclxuICAgICAgPyB0aGlzLmFjY2VwdEFzU2VydmVyKGNvbmZpZ3VyYXRpb25zKVxuICAgICAgOiB0aGlzLmFjY2VwdEFzQ2xpZW50KGNvbmZpZ3VyYXRpb25zKTtcblxuICAgIHJldHVybiB0aGlzLnBhcmFtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlcyBhbGwgcmVzb3VyY2VzIHVzZWQgYnkgdGhlIGV4dGVuc2lvbi5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2xlYW51cCgpIHtcbiAgICBpZiAodGhpcy5faW5mbGF0ZSkge1xuICAgICAgdGhpcy5faW5mbGF0ZS5jbG9zZSgpO1xuICAgICAgdGhpcy5faW5mbGF0ZSA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2RlZmxhdGUpIHtcbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5fZGVmbGF0ZVtrQ2FsbGJhY2tdO1xuXG4gICAgICB0aGlzLl9kZWZsYXRlLmNsb3NlKCk7XG4gICAgICB0aGlzLl9kZWZsYXRlID0gbnVsbDtcblxuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKFxuICAgICAgICAgIG5ldyBFcnJvcihcbiAgICAgICAgICAgICdUaGUgZGVmbGF0ZSBzdHJlYW0gd2FzIGNsb3NlZCB3aGlsZSBkYXRhIHdhcyBiZWluZyBwcm9jZXNzZWQnXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiAgQWNjZXB0IGFuIGV4dGVuc2lvbiBuZWdvdGlhdGlvbiBvZmZlci5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gb2ZmZXJzIFRoZSBleHRlbnNpb24gbmVnb3RpYXRpb24gb2ZmZXJzXG4gICAqIEByZXR1cm4ge09iamVjdH0gQWNjZXB0ZWQgY29uZmlndXJhdGlvblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYWNjZXB0QXNTZXJ2ZXIob2ZmZXJzKSB7XG4gICAgY29uc3Qgb3B0cyA9IHRoaXMuX29wdGlvbnM7XG4gICAgY29uc3QgYWNjZXB0ZWQgPSBvZmZlcnMuZmluZCgocGFyYW1zKSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIChvcHRzLnNlcnZlck5vQ29udGV4dFRha2VvdmVyID09PSBmYWxzZSAmJlxuICAgICAgICAgIHBhcmFtcy5zZXJ2ZXJfbm9fY29udGV4dF90YWtlb3ZlcikgfHxcbiAgICAgICAgKHBhcmFtcy5zZXJ2ZXJfbWF4X3dpbmRvd19iaXRzICYmXG4gICAgICAgICAgKG9wdHMuc2VydmVyTWF4V2luZG93Qml0cyA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgICh0eXBlb2Ygb3B0cy5zZXJ2ZXJNYXhXaW5kb3dCaXRzID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAgICAgICBvcHRzLnNlcnZlck1heFdpbmRvd0JpdHMgPiBwYXJhbXMuc2VydmVyX21heF93aW5kb3dfYml0cykpKSB8fFxuICAgICAgICAodHlwZW9mIG9wdHMuY2xpZW50TWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgICAhcGFyYW1zLmNsaWVudF9tYXhfd2luZG93X2JpdHMpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGlmICghYWNjZXB0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm9uZSBvZiB0aGUgZXh0ZW5zaW9uIG9mZmVycyBjYW4gYmUgYWNjZXB0ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAob3B0cy5zZXJ2ZXJOb0NvbnRleHRUYWtlb3Zlcikge1xuICAgICAgYWNjZXB0ZWQuc2VydmVyX25vX2NvbnRleHRfdGFrZW92ZXIgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAob3B0cy5jbGllbnROb0NvbnRleHRUYWtlb3Zlcikge1xuICAgICAgYWNjZXB0ZWQuY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXIgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdHMuc2VydmVyTWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicpIHtcbiAgICAgIGFjY2VwdGVkLnNlcnZlcl9tYXhfd2luZG93X2JpdHMgPSBvcHRzLnNlcnZlck1heFdpbmRvd0JpdHM7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0cy5jbGllbnRNYXhXaW5kb3dCaXRzID09PSAnbnVtYmVyJykge1xuICAgICAgYWNjZXB0ZWQuY2xpZW50X21heF93aW5kb3dfYml0cyA9IG9wdHMuY2xpZW50TWF4V2luZG93Qml0cztcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgYWNjZXB0ZWQuY2xpZW50X21heF93aW5kb3dfYml0cyA9PT0gdHJ1ZSB8fFxuICAgICAgb3B0cy5jbGllbnRNYXhXaW5kb3dCaXRzID09PSBmYWxzZVxuICAgICkge1xuICAgICAgZGVsZXRlIGFjY2VwdGVkLmNsaWVudF9tYXhfd2luZG93X2JpdHM7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFjY2VwdGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VwdCB0aGUgZXh0ZW5zaW9uIG5lZ290aWF0aW9uIHJlc3BvbnNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSByZXNwb25zZSBUaGUgZXh0ZW5zaW9uIG5lZ290aWF0aW9uIHJlc3BvbnNlXG4gICAqIEByZXR1cm4ge09iamVjdH0gQWNjZXB0ZWQgY29uZmlndXJhdGlvblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYWNjZXB0QXNDbGllbnQocmVzcG9uc2UpIHtcbiAgICBjb25zdCBwYXJhbXMgPSByZXNwb25zZVswXTtcblxuICAgIGlmIChcbiAgICAgIHRoaXMuX29wdGlvbnMuY2xpZW50Tm9Db250ZXh0VGFrZW92ZXIgPT09IGZhbHNlICYmXG4gICAgICBwYXJhbXMuY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXJcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5leHBlY3RlZCBwYXJhbWV0ZXIgXCJjbGllbnRfbm9fY29udGV4dF90YWtlb3ZlclwiJyk7XG4gICAgfVxuXG4gICAgaWYgKCFwYXJhbXMuY2xpZW50X21heF93aW5kb3dfYml0cykge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHBhcmFtcy5jbGllbnRfbWF4X3dpbmRvd19iaXRzID0gdGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMgPT09IGZhbHNlIHx8XG4gICAgICAodHlwZW9mIHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgcGFyYW1zLmNsaWVudF9tYXhfd2luZG93X2JpdHMgPiB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdVbmV4cGVjdGVkIG9yIGludmFsaWQgcGFyYW1ldGVyIFwiY2xpZW50X21heF93aW5kb3dfYml0c1wiJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZSBwYXJhbWV0ZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBjb25maWd1cmF0aW9ucyBUaGUgZXh0ZW5zaW9uIG5lZ290aWF0aW9uIG9mZmVycy9yZXBvbnNlXG4gICAqIEByZXR1cm4ge0FycmF5fSBUaGUgb2ZmZXJzL3Jlc3BvbnNlIHdpdGggbm9ybWFsaXplZCBwYXJhbWV0ZXJzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBub3JtYWxpemVQYXJhbXMoY29uZmlndXJhdGlvbnMpIHtcbiAgICBjb25maWd1cmF0aW9ucy5mb3JFYWNoKChwYXJhbXMpID0+IHtcbiAgICAgIE9iamVjdC5rZXlzKHBhcmFtcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHBhcmFtc1trZXldO1xuXG4gICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQYXJhbWV0ZXIgXCIke2tleX1cIiBtdXN0IGhhdmUgb25seSBhIHNpbmdsZSB2YWx1ZWApO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWUgPSB2YWx1ZVswXTtcblxuICAgICAgICBpZiAoa2V5ID09PSAnY2xpZW50X21heF93aW5kb3dfYml0cycpIHtcbiAgICAgICAgICBpZiAodmFsdWUgIT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG51bSA9ICt2YWx1ZTtcbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihudW0pIHx8IG51bSA8IDggfHwgbnVtID4gMTUpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICBgSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyIFwiJHtrZXl9XCI6ICR7dmFsdWV9YFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSBudW07XG4gICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5faXNTZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgIGBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgXCIke2tleX1cIjogJHt2YWx1ZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdzZXJ2ZXJfbWF4X3dpbmRvd19iaXRzJykge1xuICAgICAgICAgIGNvbnN0IG51bSA9ICt2YWx1ZTtcbiAgICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIobnVtKSB8fCBudW0gPCA4IHx8IG51bSA+IDE1KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICAgICBgSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyIFwiJHtrZXl9XCI6ICR7dmFsdWV9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBudW07XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAga2V5ID09PSAnY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXInIHx8XG4gICAgICAgICAga2V5ID09PSAnc2VydmVyX25vX2NvbnRleHRfdGFrZW92ZXInXG4gICAgICAgICkge1xuICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgYEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciBcIiR7a2V5fVwiOiAke3ZhbHVlfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBwYXJhbWV0ZXIgXCIke2tleX1cImApO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyYW1zW2tleV0gPSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbmZpZ3VyYXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29tcHJlc3MgZGF0YS4gQ29uY3VycmVuY3kgbGltaXRlZC5cbiAgICpcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGEgQ29tcHJlc3NlZCBkYXRhXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZmluIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGlzIHRoZSBsYXN0IGZyYWdtZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGRlY29tcHJlc3MoZGF0YSwgZmluLCBjYWxsYmFjaykge1xuICAgIHpsaWJMaW1pdGVyLmFkZCgoZG9uZSkgPT4ge1xuICAgICAgdGhpcy5fZGVjb21wcmVzcyhkYXRhLCBmaW4sIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgICBkb25lKCk7XG4gICAgICAgIGNhbGxiYWNrKGVyciwgcmVzdWx0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXByZXNzIGRhdGEuIENvbmN1cnJlbmN5IGxpbWl0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7KEJ1ZmZlcnxTdHJpbmcpfSBkYXRhIERhdGEgdG8gY29tcHJlc3NcbiAgICogQHBhcmFtIHtCb29sZWFufSBmaW4gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRoaXMgaXMgdGhlIGxhc3QgZnJhZ21lbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY29tcHJlc3MoZGF0YSwgZmluLCBjYWxsYmFjaykge1xuICAgIHpsaWJMaW1pdGVyLmFkZCgoZG9uZSkgPT4ge1xuICAgICAgdGhpcy5fY29tcHJlc3MoZGF0YSwgZmluLCAoZXJyLCByZXN1bHQpID0+IHtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgICBjYWxsYmFjayhlcnIsIHJlc3VsdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWNvbXByZXNzIGRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBkYXRhIENvbXByZXNzZWQgZGF0YVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZpbiBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdGhpcyBpcyB0aGUgbGFzdCBmcmFnbWVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2RlY29tcHJlc3MoZGF0YSwgZmluLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGVuZHBvaW50ID0gdGhpcy5faXNTZXJ2ZXIgPyAnY2xpZW50JyA6ICdzZXJ2ZXInO1xuXG4gICAgaWYgKCF0aGlzLl9pbmZsYXRlKSB7XG4gICAgICBjb25zdCBrZXkgPSBgJHtlbmRwb2ludH1fbWF4X3dpbmRvd19iaXRzYDtcbiAgICAgIGNvbnN0IHdpbmRvd0JpdHMgPVxuICAgICAgICB0eXBlb2YgdGhpcy5wYXJhbXNba2V5XSAhPT0gJ251bWJlcidcbiAgICAgICAgICA/IHpsaWIuWl9ERUZBVUxUX1dJTkRPV0JJVFNcbiAgICAgICAgICA6IHRoaXMucGFyYW1zW2tleV07XG5cbiAgICAgIHRoaXMuX2luZmxhdGUgPSB6bGliLmNyZWF0ZUluZmxhdGVSYXcoe1xuICAgICAgICAuLi50aGlzLl9vcHRpb25zLnpsaWJJbmZsYXRlT3B0aW9ucyxcbiAgICAgICAgd2luZG93Qml0c1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9pbmZsYXRlW2tQZXJNZXNzYWdlRGVmbGF0ZV0gPSB0aGlzO1xuICAgICAgdGhpcy5faW5mbGF0ZVtrVG90YWxMZW5ndGhdID0gMDtcbiAgICAgIHRoaXMuX2luZmxhdGVba0J1ZmZlcnNdID0gW107XG4gICAgICB0aGlzLl9pbmZsYXRlLm9uKCdlcnJvcicsIGluZmxhdGVPbkVycm9yKTtcbiAgICAgIHRoaXMuX2luZmxhdGUub24oJ2RhdGEnLCBpbmZsYXRlT25EYXRhKTtcbiAgICB9XG5cbiAgICB0aGlzLl9pbmZsYXRlW2tDYWxsYmFja10gPSBjYWxsYmFjaztcblxuICAgIHRoaXMuX2luZmxhdGUud3JpdGUoZGF0YSk7XG4gICAgaWYgKGZpbikgdGhpcy5faW5mbGF0ZS53cml0ZShUUkFJTEVSKTtcblxuICAgIHRoaXMuX2luZmxhdGUuZmx1c2goKCkgPT4ge1xuICAgICAgY29uc3QgZXJyID0gdGhpcy5faW5mbGF0ZVtrRXJyb3JdO1xuXG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHRoaXMuX2luZmxhdGUuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5faW5mbGF0ZSA9IG51bGw7XG4gICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGJ1ZmZlclV0aWwuY29uY2F0KFxuICAgICAgICB0aGlzLl9pbmZsYXRlW2tCdWZmZXJzXSxcbiAgICAgICAgdGhpcy5faW5mbGF0ZVtrVG90YWxMZW5ndGhdXG4gICAgICApO1xuXG4gICAgICBpZiAodGhpcy5faW5mbGF0ZS5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkKSB7XG4gICAgICAgIHRoaXMuX2luZmxhdGUuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5faW5mbGF0ZSA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9pbmZsYXRlW2tUb3RhbExlbmd0aF0gPSAwO1xuICAgICAgICB0aGlzLl9pbmZsYXRlW2tCdWZmZXJzXSA9IFtdO1xuXG4gICAgICAgIGlmIChmaW4gJiYgdGhpcy5wYXJhbXNbYCR7ZW5kcG9pbnR9X25vX2NvbnRleHRfdGFrZW92ZXJgXSkge1xuICAgICAgICAgIHRoaXMuX2luZmxhdGUucmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wcmVzcyBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0geyhCdWZmZXJ8U3RyaW5nKX0gZGF0YSBEYXRhIHRvIGNvbXByZXNzXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZmluIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGlzIHRoZSBsYXN0IGZyYWdtZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfY29tcHJlc3MoZGF0YSwgZmluLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGVuZHBvaW50ID0gdGhpcy5faXNTZXJ2ZXIgPyAnc2VydmVyJyA6ICdjbGllbnQnO1xuXG4gICAgaWYgKCF0aGlzLl9kZWZsYXRlKSB7XG4gICAgICBjb25zdCBrZXkgPSBgJHtlbmRwb2ludH1fbWF4X3dpbmRvd19iaXRzYDtcbiAgICAgIGNvbnN0IHdpbmRvd0JpdHMgPVxuICAgICAgICB0eXBlb2YgdGhpcy5wYXJhbXNba2V5XSAhPT0gJ251bWJlcidcbiAgICAgICAgICA/IHpsaWIuWl9ERUZBVUxUX1dJTkRPV0JJVFNcbiAgICAgICAgICA6IHRoaXMucGFyYW1zW2tleV07XG5cbiAgICAgIHRoaXMuX2RlZmxhdGUgPSB6bGliLmNyZWF0ZURlZmxhdGVSYXcoe1xuICAgICAgICAuLi50aGlzLl9vcHRpb25zLnpsaWJEZWZsYXRlT3B0aW9ucyxcbiAgICAgICAgd2luZG93Qml0c1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX2RlZmxhdGVba1RvdGFsTGVuZ3RoXSA9IDA7XG4gICAgICB0aGlzLl9kZWZsYXRlW2tCdWZmZXJzXSA9IFtdO1xuXG4gICAgICB0aGlzLl9kZWZsYXRlLm9uKCdkYXRhJywgZGVmbGF0ZU9uRGF0YSk7XG4gICAgfVxuXG4gICAgdGhpcy5fZGVmbGF0ZVtrQ2FsbGJhY2tdID0gY2FsbGJhY2s7XG5cbiAgICB0aGlzLl9kZWZsYXRlLndyaXRlKGRhdGEpO1xuICAgIHRoaXMuX2RlZmxhdGUuZmx1c2goemxpYi5aX1NZTkNfRkxVU0gsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5fZGVmbGF0ZSkge1xuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgZGVmbGF0ZSBzdHJlYW0gd2FzIGNsb3NlZCB3aGlsZSBkYXRhIHdhcyBiZWluZyBwcm9jZXNzZWQuXG4gICAgICAgIC8vXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IGRhdGEgPSBidWZmZXJVdGlsLmNvbmNhdChcbiAgICAgICAgdGhpcy5fZGVmbGF0ZVtrQnVmZmVyc10sXG4gICAgICAgIHRoaXMuX2RlZmxhdGVba1RvdGFsTGVuZ3RoXVxuICAgICAgKTtcblxuICAgICAgaWYgKGZpbikgZGF0YSA9IGRhdGEuc2xpY2UoMCwgZGF0YS5sZW5ndGggLSA0KTtcblxuICAgICAgLy9cbiAgICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBjYWxsYmFjayB3aWxsIG5vdCBiZSBjYWxsZWQgYWdhaW4gaW5cbiAgICAgIC8vIGBQZXJNZXNzYWdlRGVmbGF0ZSNjbGVhbnVwKClgLlxuICAgICAgLy9cbiAgICAgIHRoaXMuX2RlZmxhdGVba0NhbGxiYWNrXSA9IG51bGw7XG5cbiAgICAgIHRoaXMuX2RlZmxhdGVba1RvdGFsTGVuZ3RoXSA9IDA7XG4gICAgICB0aGlzLl9kZWZsYXRlW2tCdWZmZXJzXSA9IFtdO1xuXG4gICAgICBpZiAoZmluICYmIHRoaXMucGFyYW1zW2Ake2VuZHBvaW50fV9ub19jb250ZXh0X3Rha2VvdmVyYF0pIHtcbiAgICAgICAgdGhpcy5fZGVmbGF0ZS5yZXNldCgpO1xuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICB9KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFBlck1lc3NhZ2VEZWZsYXRlO1xuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYHpsaWIuRGVmbGF0ZVJhd2Agc3RyZWFtIGAnZGF0YSdgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBjaHVuayBBIGNodW5rIG9mIGRhdGFcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGRlZmxhdGVPbkRhdGEoY2h1bmspIHtcbiAgdGhpc1trQnVmZmVyc10ucHVzaChjaHVuayk7XG4gIHRoaXNba1RvdGFsTGVuZ3RoXSArPSBjaHVuay5sZW5ndGg7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgemxpYi5JbmZsYXRlUmF3YCBzdHJlYW0gYCdkYXRhJ2AgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IGNodW5rIEEgY2h1bmsgb2YgZGF0YVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaW5mbGF0ZU9uRGF0YShjaHVuaykge1xuICB0aGlzW2tUb3RhbExlbmd0aF0gKz0gY2h1bmsubGVuZ3RoO1xuXG4gIGlmIChcbiAgICB0aGlzW2tQZXJNZXNzYWdlRGVmbGF0ZV0uX21heFBheWxvYWQgPCAxIHx8XG4gICAgdGhpc1trVG90YWxMZW5ndGhdIDw9IHRoaXNba1Blck1lc3NhZ2VEZWZsYXRlXS5fbWF4UGF5bG9hZFxuICApIHtcbiAgICB0aGlzW2tCdWZmZXJzXS5wdXNoKGNodW5rKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzW2tFcnJvcl0gPSBuZXcgUmFuZ2VFcnJvcignTWF4IHBheWxvYWQgc2l6ZSBleGNlZWRlZCcpO1xuICB0aGlzW2tFcnJvcl0uY29kZSA9ICdXU19FUlJfVU5TVVBQT1JURURfTUVTU0FHRV9MRU5HVEgnO1xuICB0aGlzW2tFcnJvcl1ba1N0YXR1c0NvZGVdID0gMTAwOTtcbiAgdGhpcy5yZW1vdmVMaXN0ZW5lcignZGF0YScsIGluZmxhdGVPbkRhdGEpO1xuICB0aGlzLnJlc2V0KCk7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgemxpYi5JbmZsYXRlUmF3YCBzdHJlYW0gYCdlcnJvcidgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVyciBUaGUgZW1pdHRlZCBlcnJvclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaW5mbGF0ZU9uRXJyb3IoZXJyKSB7XG4gIC8vXG4gIC8vIFRoZXJlIGlzIG5vIG5lZWQgdG8gY2FsbCBgWmxpYiNjbG9zZSgpYCBhcyB0aGUgaGFuZGxlIGlzIGF1dG9tYXRpY2FsbHlcbiAgLy8gY2xvc2VkIHdoZW4gYW4gZXJyb3IgaXMgZW1pdHRlZC5cbiAgLy9cbiAgdGhpc1trUGVyTWVzc2FnZURlZmxhdGVdLl9pbmZsYXRlID0gbnVsbDtcbiAgZXJyW2tTdGF0dXNDb2RlXSA9IDEwMDc7XG4gIHRoaXNba0NhbGxiYWNrXShlcnIpO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCB7IFdyaXRhYmxlIH0gPSByZXF1aXJlKCdzdHJlYW0nKTtcblxuY29uc3QgUGVyTWVzc2FnZURlZmxhdGUgPSByZXF1aXJlKCcuL3Blcm1lc3NhZ2UtZGVmbGF0ZScpO1xuY29uc3Qge1xuICBCSU5BUllfVFlQRVMsXG4gIEVNUFRZX0JVRkZFUixcbiAga1N0YXR1c0NvZGUsXG4gIGtXZWJTb2NrZXRcbn0gPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuY29uc3QgeyBjb25jYXQsIHRvQXJyYXlCdWZmZXIsIHVubWFzayB9ID0gcmVxdWlyZSgnLi9idWZmZXItdXRpbCcpO1xuY29uc3QgeyBpc1ZhbGlkU3RhdHVzQ29kZSwgaXNWYWxpZFVURjggfSA9IHJlcXVpcmUoJy4vdmFsaWRhdGlvbicpO1xuXG5jb25zdCBHRVRfSU5GTyA9IDA7XG5jb25zdCBHRVRfUEFZTE9BRF9MRU5HVEhfMTYgPSAxO1xuY29uc3QgR0VUX1BBWUxPQURfTEVOR1RIXzY0ID0gMjtcbmNvbnN0IEdFVF9NQVNLID0gMztcbmNvbnN0IEdFVF9EQVRBID0gNDtcbmNvbnN0IElORkxBVElORyA9IDU7XG5cbi8qKlxuICogSHlCaSBSZWNlaXZlciBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBAZXh0ZW5kcyBXcml0YWJsZVxuICovXG5jbGFzcyBSZWNlaXZlciBleHRlbmRzIFdyaXRhYmxlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBSZWNlaXZlciBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zIG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuYmluYXJ5VHlwZT1ub2RlYnVmZmVyXSBUaGUgdHlwZSBmb3IgYmluYXJ5IGRhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmV4dGVuc2lvbnNdIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBuZWdvdGlhdGVkXG4gICAqICAgICBleHRlbnNpb25zXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuaXNTZXJ2ZXI9ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIHRvIG9wZXJhdGUgaW5cbiAgICogICAgIGNsaWVudCBvciBzZXJ2ZXIgbW9kZVxuICAgKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMubWF4UGF5bG9hZD0wXSBUaGUgbWF4aW11bSBhbGxvd2VkIG1lc3NhZ2UgbGVuZ3RoXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuc2tpcFVURjhWYWxpZGF0aW9uPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvclxuICAgKiAgICAgbm90IHRvIHNraXAgVVRGLTggdmFsaWRhdGlvbiBmb3IgdGV4dCBhbmQgY2xvc2UgbWVzc2FnZXNcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9iaW5hcnlUeXBlID0gb3B0aW9ucy5iaW5hcnlUeXBlIHx8IEJJTkFSWV9UWVBFU1swXTtcbiAgICB0aGlzLl9leHRlbnNpb25zID0gb3B0aW9ucy5leHRlbnNpb25zIHx8IHt9O1xuICAgIHRoaXMuX2lzU2VydmVyID0gISFvcHRpb25zLmlzU2VydmVyO1xuICAgIHRoaXMuX21heFBheWxvYWQgPSBvcHRpb25zLm1heFBheWxvYWQgfCAwO1xuICAgIHRoaXMuX3NraXBVVEY4VmFsaWRhdGlvbiA9ICEhb3B0aW9ucy5za2lwVVRGOFZhbGlkYXRpb247XG4gICAgdGhpc1trV2ViU29ja2V0XSA9IHVuZGVmaW5lZDtcblxuICAgIHRoaXMuX2J1ZmZlcmVkQnl0ZXMgPSAwO1xuICAgIHRoaXMuX2J1ZmZlcnMgPSBbXTtcblxuICAgIHRoaXMuX2NvbXByZXNzZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9wYXlsb2FkTGVuZ3RoID0gMDtcbiAgICB0aGlzLl9tYXNrID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2ZyYWdtZW50ZWQgPSAwO1xuICAgIHRoaXMuX21hc2tlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2ZpbiA9IGZhbHNlO1xuICAgIHRoaXMuX29wY29kZSA9IDA7XG5cbiAgICB0aGlzLl90b3RhbFBheWxvYWRMZW5ndGggPSAwO1xuICAgIHRoaXMuX21lc3NhZ2VMZW5ndGggPSAwO1xuICAgIHRoaXMuX2ZyYWdtZW50cyA9IFtdO1xuXG4gICAgdGhpcy5fc3RhdGUgPSBHRVRfSU5GTztcbiAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogSW1wbGVtZW50cyBgV3JpdGFibGUucHJvdG90eXBlLl93cml0ZSgpYC5cbiAgICpcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGNodW5rIFRoZSBjaHVuayBvZiBkYXRhIHRvIHdyaXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBlbmNvZGluZyBUaGUgY2hhcmFjdGVyIGVuY29kaW5nIG9mIGBjaHVua2BcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2tcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF93cml0ZShjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gICAgaWYgKHRoaXMuX29wY29kZSA9PT0gMHgwOCAmJiB0aGlzLl9zdGF0ZSA9PSBHRVRfSU5GTykgcmV0dXJuIGNiKCk7XG5cbiAgICB0aGlzLl9idWZmZXJlZEJ5dGVzICs9IGNodW5rLmxlbmd0aDtcbiAgICB0aGlzLl9idWZmZXJzLnB1c2goY2h1bmspO1xuICAgIHRoaXMuc3RhcnRMb29wKGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25zdW1lcyBgbmAgYnl0ZXMgZnJvbSB0aGUgYnVmZmVyZWQgZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG4gVGhlIG51bWJlciBvZiBieXRlcyB0byBjb25zdW1lXG4gICAqIEByZXR1cm4ge0J1ZmZlcn0gVGhlIGNvbnN1bWVkIGJ5dGVzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb25zdW1lKG4pIHtcbiAgICB0aGlzLl9idWZmZXJlZEJ5dGVzIC09IG47XG5cbiAgICBpZiAobiA9PT0gdGhpcy5fYnVmZmVyc1swXS5sZW5ndGgpIHJldHVybiB0aGlzLl9idWZmZXJzLnNoaWZ0KCk7XG5cbiAgICBpZiAobiA8IHRoaXMuX2J1ZmZlcnNbMF0ubGVuZ3RoKSB7XG4gICAgICBjb25zdCBidWYgPSB0aGlzLl9idWZmZXJzWzBdO1xuICAgICAgdGhpcy5fYnVmZmVyc1swXSA9IGJ1Zi5zbGljZShuKTtcbiAgICAgIHJldHVybiBidWYuc2xpY2UoMCwgbik7XG4gICAgfVxuXG4gICAgY29uc3QgZHN0ID0gQnVmZmVyLmFsbG9jVW5zYWZlKG4pO1xuXG4gICAgZG8ge1xuICAgICAgY29uc3QgYnVmID0gdGhpcy5fYnVmZmVyc1swXTtcbiAgICAgIGNvbnN0IG9mZnNldCA9IGRzdC5sZW5ndGggLSBuO1xuXG4gICAgICBpZiAobiA+PSBidWYubGVuZ3RoKSB7XG4gICAgICAgIGRzdC5zZXQodGhpcy5fYnVmZmVycy5zaGlmdCgpLCBvZmZzZXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZHN0LnNldChuZXcgVWludDhBcnJheShidWYuYnVmZmVyLCBidWYuYnl0ZU9mZnNldCwgbiksIG9mZnNldCk7XG4gICAgICAgIHRoaXMuX2J1ZmZlcnNbMF0gPSBidWYuc2xpY2Uobik7XG4gICAgICB9XG5cbiAgICAgIG4gLT0gYnVmLmxlbmd0aDtcbiAgICB9IHdoaWxlIChuID4gMCk7XG5cbiAgICByZXR1cm4gZHN0O1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgcGFyc2luZyBsb29wLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhcnRMb29wKGNiKSB7XG4gICAgbGV0IGVycjtcbiAgICB0aGlzLl9sb29wID0gdHJ1ZTtcblxuICAgIGRvIHtcbiAgICAgIHN3aXRjaCAodGhpcy5fc3RhdGUpIHtcbiAgICAgICAgY2FzZSBHRVRfSU5GTzpcbiAgICAgICAgICBlcnIgPSB0aGlzLmdldEluZm8oKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHRVRfUEFZTE9BRF9MRU5HVEhfMTY6XG4gICAgICAgICAgZXJyID0gdGhpcy5nZXRQYXlsb2FkTGVuZ3RoMTYoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHRVRfUEFZTE9BRF9MRU5HVEhfNjQ6XG4gICAgICAgICAgZXJyID0gdGhpcy5nZXRQYXlsb2FkTGVuZ3RoNjQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHRVRfTUFTSzpcbiAgICAgICAgICB0aGlzLmdldE1hc2soKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHRVRfREFUQTpcbiAgICAgICAgICBlcnIgPSB0aGlzLmdldERhdGEoY2IpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIC8vIGBJTkZMQVRJTkdgXG4gICAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IHdoaWxlICh0aGlzLl9sb29wKTtcblxuICAgIGNiKGVycik7XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgdGhlIGZpcnN0IHR3byBieXRlcyBvZiBhIGZyYW1lLlxuICAgKlxuICAgKiBAcmV0dXJuIHsoUmFuZ2VFcnJvcnx1bmRlZmluZWQpfSBBIHBvc3NpYmxlIGVycm9yXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRJbmZvKCkge1xuICAgIGlmICh0aGlzLl9idWZmZXJlZEJ5dGVzIDwgMikge1xuICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1ZiA9IHRoaXMuY29uc3VtZSgyKTtcblxuICAgIGlmICgoYnVmWzBdICYgMHgzMCkgIT09IDB4MDApIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgJ1JTVjIgYW5kIFJTVjMgbXVzdCBiZSBjbGVhcicsXG4gICAgICAgIHRydWUsXG4gICAgICAgIDEwMDIsXG4gICAgICAgICdXU19FUlJfVU5FWFBFQ1RFRF9SU1ZfMl8zJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb21wcmVzc2VkID0gKGJ1ZlswXSAmIDB4NDApID09PSAweDQwO1xuXG4gICAgaWYgKGNvbXByZXNzZWQgJiYgIXRoaXMuX2V4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0pIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgJ1JTVjEgbXVzdCBiZSBjbGVhcicsXG4gICAgICAgIHRydWUsXG4gICAgICAgIDEwMDIsXG4gICAgICAgICdXU19FUlJfVU5FWFBFQ1RFRF9SU1ZfMSdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5fZmluID0gKGJ1ZlswXSAmIDB4ODApID09PSAweDgwO1xuICAgIHRoaXMuX29wY29kZSA9IGJ1ZlswXSAmIDB4MGY7XG4gICAgdGhpcy5fcGF5bG9hZExlbmd0aCA9IGJ1ZlsxXSAmIDB4N2Y7XG5cbiAgICBpZiAodGhpcy5fb3Bjb2RlID09PSAweDAwKSB7XG4gICAgICBpZiAoY29tcHJlc3NlZCkge1xuICAgICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAgICdSU1YxIG11c3QgYmUgY2xlYXInLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgMTAwMixcbiAgICAgICAgICAnV1NfRVJSX1VORVhQRUNURURfUlNWXzEnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5fZnJhZ21lbnRlZCkge1xuICAgICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAgICdpbnZhbGlkIG9wY29kZSAwJyxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIDEwMDIsXG4gICAgICAgICAgJ1dTX0VSUl9JTlZBTElEX09QQ09ERSdcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fb3Bjb2RlID0gdGhpcy5fZnJhZ21lbnRlZDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX29wY29kZSA9PT0gMHgwMSB8fCB0aGlzLl9vcGNvZGUgPT09IDB4MDIpIHtcbiAgICAgIGlmICh0aGlzLl9mcmFnbWVudGVkKSB7XG4gICAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGVycm9yKFxuICAgICAgICAgIFJhbmdlRXJyb3IsXG4gICAgICAgICAgYGludmFsaWQgb3Bjb2RlICR7dGhpcy5fb3Bjb2RlfWAsXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAxMDAyLFxuICAgICAgICAgICdXU19FUlJfSU5WQUxJRF9PUENPREUnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NvbXByZXNzZWQgPSBjb21wcmVzc2VkO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fb3Bjb2RlID4gMHgwNyAmJiB0aGlzLl9vcGNvZGUgPCAweDBiKSB7XG4gICAgICBpZiAoIXRoaXMuX2Zpbikge1xuICAgICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAgICdGSU4gbXVzdCBiZSBzZXQnLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgMTAwMixcbiAgICAgICAgICAnV1NfRVJSX0VYUEVDVEVEX0ZJTidcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbXByZXNzZWQpIHtcbiAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gZXJyb3IoXG4gICAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgICAnUlNWMSBtdXN0IGJlIGNsZWFyJyxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIDEwMDIsXG4gICAgICAgICAgJ1dTX0VSUl9VTkVYUEVDVEVEX1JTVl8xJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fcGF5bG9hZExlbmd0aCA+IDB4N2QpIHtcbiAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gZXJyb3IoXG4gICAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgICBgaW52YWxpZCBwYXlsb2FkIGxlbmd0aCAke3RoaXMuX3BheWxvYWRMZW5ndGh9YCxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIDEwMDIsXG4gICAgICAgICAgJ1dTX0VSUl9JTlZBTElEX0NPTlRST0xfUEFZTE9BRF9MRU5HVEgnXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgYGludmFsaWQgb3Bjb2RlICR7dGhpcy5fb3Bjb2RlfWAsXG4gICAgICAgIHRydWUsXG4gICAgICAgIDEwMDIsXG4gICAgICAgICdXU19FUlJfSU5WQUxJRF9PUENPREUnXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fZmluICYmICF0aGlzLl9mcmFnbWVudGVkKSB0aGlzLl9mcmFnbWVudGVkID0gdGhpcy5fb3Bjb2RlO1xuICAgIHRoaXMuX21hc2tlZCA9IChidWZbMV0gJiAweDgwKSA9PT0gMHg4MDtcblxuICAgIGlmICh0aGlzLl9pc1NlcnZlcikge1xuICAgICAgaWYgKCF0aGlzLl9tYXNrZWQpIHtcbiAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gZXJyb3IoXG4gICAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgICAnTUFTSyBtdXN0IGJlIHNldCcsXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAxMDAyLFxuICAgICAgICAgICdXU19FUlJfRVhQRUNURURfTUFTSydcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuX21hc2tlZCkge1xuICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIGVycm9yKFxuICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAnTUFTSyBtdXN0IGJlIGNsZWFyJyxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgMTAwMixcbiAgICAgICAgJ1dTX0VSUl9VTkVYUEVDVEVEX01BU0snXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9wYXlsb2FkTGVuZ3RoID09PSAxMjYpIHRoaXMuX3N0YXRlID0gR0VUX1BBWUxPQURfTEVOR1RIXzE2O1xuICAgIGVsc2UgaWYgKHRoaXMuX3BheWxvYWRMZW5ndGggPT09IDEyNykgdGhpcy5fc3RhdGUgPSBHRVRfUEFZTE9BRF9MRU5HVEhfNjQ7XG4gICAgZWxzZSByZXR1cm4gdGhpcy5oYXZlTGVuZ3RoKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBleHRlbmRlZCBwYXlsb2FkIGxlbmd0aCAoNysxNikuXG4gICAqXG4gICAqIEByZXR1cm4geyhSYW5nZUVycm9yfHVuZGVmaW5lZCl9IEEgcG9zc2libGUgZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFBheWxvYWRMZW5ndGgxNigpIHtcbiAgICBpZiAodGhpcy5fYnVmZmVyZWRCeXRlcyA8IDIpIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wYXlsb2FkTGVuZ3RoID0gdGhpcy5jb25zdW1lKDIpLnJlYWRVSW50MTZCRSgwKTtcbiAgICByZXR1cm4gdGhpcy5oYXZlTGVuZ3RoKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBleHRlbmRlZCBwYXlsb2FkIGxlbmd0aCAoNys2NCkuXG4gICAqXG4gICAqIEByZXR1cm4geyhSYW5nZUVycm9yfHVuZGVmaW5lZCl9IEEgcG9zc2libGUgZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFBheWxvYWRMZW5ndGg2NCgpIHtcbiAgICBpZiAodGhpcy5fYnVmZmVyZWRCeXRlcyA8IDgpIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBidWYgPSB0aGlzLmNvbnN1bWUoOCk7XG4gICAgY29uc3QgbnVtID0gYnVmLnJlYWRVSW50MzJCRSgwKTtcblxuICAgIC8vXG4gICAgLy8gVGhlIG1heGltdW0gc2FmZSBpbnRlZ2VyIGluIEphdmFTY3JpcHQgaXMgMl41MyAtIDEuIEFuIGVycm9yIGlzIHJldHVybmVkXG4gICAgLy8gaWYgcGF5bG9hZCBsZW5ndGggaXMgZ3JlYXRlciB0aGFuIHRoaXMgbnVtYmVyLlxuICAgIC8vXG4gICAgaWYgKG51bSA+IE1hdGgucG93KDIsIDUzIC0gMzIpIC0gMSkge1xuICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIGVycm9yKFxuICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAnVW5zdXBwb3J0ZWQgV2ViU29ja2V0IGZyYW1lOiBwYXlsb2FkIGxlbmd0aCA+IDJeNTMgLSAxJyxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIDEwMDksXG4gICAgICAgICdXU19FUlJfVU5TVVBQT1JURURfREFUQV9QQVlMT0FEX0xFTkdUSCdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5fcGF5bG9hZExlbmd0aCA9IG51bSAqIE1hdGgucG93KDIsIDMyKSArIGJ1Zi5yZWFkVUludDMyQkUoNCk7XG4gICAgcmV0dXJuIHRoaXMuaGF2ZUxlbmd0aCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBheWxvYWQgbGVuZ3RoIGhhcyBiZWVuIHJlYWQuXG4gICAqXG4gICAqIEByZXR1cm4geyhSYW5nZUVycm9yfHVuZGVmaW5lZCl9IEEgcG9zc2libGUgZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhdmVMZW5ndGgoKSB7XG4gICAgaWYgKHRoaXMuX3BheWxvYWRMZW5ndGggJiYgdGhpcy5fb3Bjb2RlIDwgMHgwOCkge1xuICAgICAgdGhpcy5fdG90YWxQYXlsb2FkTGVuZ3RoICs9IHRoaXMuX3BheWxvYWRMZW5ndGg7XG4gICAgICBpZiAodGhpcy5fdG90YWxQYXlsb2FkTGVuZ3RoID4gdGhpcy5fbWF4UGF5bG9hZCAmJiB0aGlzLl9tYXhQYXlsb2FkID4gMCkge1xuICAgICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAgICdNYXggcGF5bG9hZCBzaXplIGV4Y2VlZGVkJyxcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAxMDA5LFxuICAgICAgICAgICdXU19FUlJfVU5TVVBQT1JURURfTUVTU0FHRV9MRU5HVEgnXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX21hc2tlZCkgdGhpcy5fc3RhdGUgPSBHRVRfTUFTSztcbiAgICBlbHNlIHRoaXMuX3N0YXRlID0gR0VUX0RBVEE7XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgbWFzayBieXRlcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldE1hc2soKSB7XG4gICAgaWYgKHRoaXMuX2J1ZmZlcmVkQnl0ZXMgPCA0KSB7XG4gICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fbWFzayA9IHRoaXMuY29uc3VtZSg0KTtcbiAgICB0aGlzLl9zdGF0ZSA9IEdFVF9EQVRBO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlYWRzIGRhdGEgYnl0ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrXG4gICAqIEByZXR1cm4geyhFcnJvcnxSYW5nZUVycm9yfHVuZGVmaW5lZCl9IEEgcG9zc2libGUgZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldERhdGEoY2IpIHtcbiAgICBsZXQgZGF0YSA9IEVNUFRZX0JVRkZFUjtcblxuICAgIGlmICh0aGlzLl9wYXlsb2FkTGVuZ3RoKSB7XG4gICAgICBpZiAodGhpcy5fYnVmZmVyZWRCeXRlcyA8IHRoaXMuX3BheWxvYWRMZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGRhdGEgPSB0aGlzLmNvbnN1bWUodGhpcy5fcGF5bG9hZExlbmd0aCk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5fbWFza2VkICYmXG4gICAgICAgICh0aGlzLl9tYXNrWzBdIHwgdGhpcy5fbWFza1sxXSB8IHRoaXMuX21hc2tbMl0gfCB0aGlzLl9tYXNrWzNdKSAhPT0gMFxuICAgICAgKSB7XG4gICAgICAgIHVubWFzayhkYXRhLCB0aGlzLl9tYXNrKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5fb3Bjb2RlID4gMHgwNykgcmV0dXJuIHRoaXMuY29udHJvbE1lc3NhZ2UoZGF0YSk7XG5cbiAgICBpZiAodGhpcy5fY29tcHJlc3NlZCkge1xuICAgICAgdGhpcy5fc3RhdGUgPSBJTkZMQVRJTkc7XG4gICAgICB0aGlzLmRlY29tcHJlc3MoZGF0YSwgY2IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChkYXRhLmxlbmd0aCkge1xuICAgICAgLy9cbiAgICAgIC8vIFRoaXMgbWVzc2FnZSBpcyBub3QgY29tcHJlc3NlZCBzbyBpdHMgbGVuZ3RoIGlzIHRoZSBzdW0gb2YgdGhlIHBheWxvYWRcbiAgICAgIC8vIGxlbmd0aCBvZiBhbGwgZnJhZ21lbnRzLlxuICAgICAgLy9cbiAgICAgIHRoaXMuX21lc3NhZ2VMZW5ndGggPSB0aGlzLl90b3RhbFBheWxvYWRMZW5ndGg7XG4gICAgICB0aGlzLl9mcmFnbWVudHMucHVzaChkYXRhKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhTWVzc2FnZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29tcHJlc3NlcyBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YSBDb21wcmVzc2VkIGRhdGFcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2tcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRlY29tcHJlc3MoZGF0YSwgY2IpIHtcbiAgICBjb25zdCBwZXJNZXNzYWdlRGVmbGF0ZSA9IHRoaXMuX2V4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV07XG5cbiAgICBwZXJNZXNzYWdlRGVmbGF0ZS5kZWNvbXByZXNzKGRhdGEsIHRoaXMuX2ZpbiwgKGVyciwgYnVmKSA9PiB7XG4gICAgICBpZiAoZXJyKSByZXR1cm4gY2IoZXJyKTtcblxuICAgICAgaWYgKGJ1Zi5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fbWVzc2FnZUxlbmd0aCArPSBidWYubGVuZ3RoO1xuICAgICAgICBpZiAodGhpcy5fbWVzc2FnZUxlbmd0aCA+IHRoaXMuX21heFBheWxvYWQgJiYgdGhpcy5fbWF4UGF5bG9hZCA+IDApIHtcbiAgICAgICAgICByZXR1cm4gY2IoXG4gICAgICAgICAgICBlcnJvcihcbiAgICAgICAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgICAgICAgJ01heCBwYXlsb2FkIHNpemUgZXhjZWVkZWQnLFxuICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgMTAwOSxcbiAgICAgICAgICAgICAgJ1dTX0VSUl9VTlNVUFBPUlRFRF9NRVNTQUdFX0xFTkdUSCdcbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZnJhZ21lbnRzLnB1c2goYnVmKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZXIgPSB0aGlzLmRhdGFNZXNzYWdlKCk7XG4gICAgICBpZiAoZXIpIHJldHVybiBjYihlcik7XG5cbiAgICAgIHRoaXMuc3RhcnRMb29wKGNiKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGEgZGF0YSBtZXNzYWdlLlxuICAgKlxuICAgKiBAcmV0dXJuIHsoRXJyb3J8dW5kZWZpbmVkKX0gQSBwb3NzaWJsZSBlcnJvclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGF0YU1lc3NhZ2UoKSB7XG4gICAgaWYgKHRoaXMuX2Zpbikge1xuICAgICAgY29uc3QgbWVzc2FnZUxlbmd0aCA9IHRoaXMuX21lc3NhZ2VMZW5ndGg7XG4gICAgICBjb25zdCBmcmFnbWVudHMgPSB0aGlzLl9mcmFnbWVudHM7XG5cbiAgICAgIHRoaXMuX3RvdGFsUGF5bG9hZExlbmd0aCA9IDA7XG4gICAgICB0aGlzLl9tZXNzYWdlTGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuX2ZyYWdtZW50ZWQgPSAwO1xuICAgICAgdGhpcy5fZnJhZ21lbnRzID0gW107XG5cbiAgICAgIGlmICh0aGlzLl9vcGNvZGUgPT09IDIpIHtcbiAgICAgICAgbGV0IGRhdGE7XG5cbiAgICAgICAgaWYgKHRoaXMuX2JpbmFyeVR5cGUgPT09ICdub2RlYnVmZmVyJykge1xuICAgICAgICAgIGRhdGEgPSBjb25jYXQoZnJhZ21lbnRzLCBtZXNzYWdlTGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9iaW5hcnlUeXBlID09PSAnYXJyYXlidWZmZXInKSB7XG4gICAgICAgICAgZGF0YSA9IHRvQXJyYXlCdWZmZXIoY29uY2F0KGZyYWdtZW50cywgbWVzc2FnZUxlbmd0aCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEgPSBmcmFnbWVudHM7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2UnLCBkYXRhLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGJ1ZiA9IGNvbmNhdChmcmFnbWVudHMsIG1lc3NhZ2VMZW5ndGgpO1xuXG4gICAgICAgIGlmICghdGhpcy5fc2tpcFVURjhWYWxpZGF0aW9uICYmICFpc1ZhbGlkVVRGOChidWYpKSB7XG4gICAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgICAgIEVycm9yLFxuICAgICAgICAgICAgJ2ludmFsaWQgVVRGLTggc2VxdWVuY2UnLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIDEwMDcsXG4gICAgICAgICAgICAnV1NfRVJSX0lOVkFMSURfVVRGOCdcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgYnVmLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fc3RhdGUgPSBHRVRfSU5GTztcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGEgY29udHJvbCBtZXNzYWdlLlxuICAgKlxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YSBEYXRhIHRvIGhhbmRsZVxuICAgKiBAcmV0dXJuIHsoRXJyb3J8UmFuZ2VFcnJvcnx1bmRlZmluZWQpfSBBIHBvc3NpYmxlIGVycm9yXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb250cm9sTWVzc2FnZShkYXRhKSB7XG4gICAgaWYgKHRoaXMuX29wY29kZSA9PT0gMHgwOCkge1xuICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuXG4gICAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5lbWl0KCdjb25jbHVkZScsIDEwMDUsIEVNUFRZX0JVRkZFUik7XG4gICAgICAgIHRoaXMuZW5kKCk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAgICdpbnZhbGlkIHBheWxvYWQgbGVuZ3RoIDEnLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgMTAwMixcbiAgICAgICAgICAnV1NfRVJSX0lOVkFMSURfQ09OVFJPTF9QQVlMT0FEX0xFTkdUSCdcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBkYXRhLnJlYWRVSW50MTZCRSgwKTtcblxuICAgICAgICBpZiAoIWlzVmFsaWRTdGF0dXNDb2RlKGNvZGUpKSB7XG4gICAgICAgICAgcmV0dXJuIGVycm9yKFxuICAgICAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgICAgIGBpbnZhbGlkIHN0YXR1cyBjb2RlICR7Y29kZX1gLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIDEwMDIsXG4gICAgICAgICAgICAnV1NfRVJSX0lOVkFMSURfQ0xPU0VfQ09ERSdcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYnVmID0gZGF0YS5zbGljZSgyKTtcblxuICAgICAgICBpZiAoIXRoaXMuX3NraXBVVEY4VmFsaWRhdGlvbiAmJiAhaXNWYWxpZFVURjgoYnVmKSkge1xuICAgICAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgICAgIEVycm9yLFxuICAgICAgICAgICAgJ2ludmFsaWQgVVRGLTggc2VxdWVuY2UnLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIDEwMDcsXG4gICAgICAgICAgICAnV1NfRVJSX0lOVkFMSURfVVRGOCdcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbWl0KCdjb25jbHVkZScsIGNvZGUsIGJ1Zik7XG4gICAgICAgIHRoaXMuZW5kKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLl9vcGNvZGUgPT09IDB4MDkpIHtcbiAgICAgIHRoaXMuZW1pdCgncGluZycsIGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVtaXQoJ3BvbmcnLCBkYXRhKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zdGF0ZSA9IEdFVF9JTkZPO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVjZWl2ZXI7XG5cbi8qKlxuICogQnVpbGRzIGFuIGVycm9yIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpFcnJvcnxSYW5nZUVycm9yKX0gRXJyb3JDdG9yIFRoZSBlcnJvciBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgVGhlIGVycm9yIG1lc3NhZ2VcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcHJlZml4IFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBhZGQgYSBkZWZhdWx0IHByZWZpeCB0b1xuICogICAgIGBtZXNzYWdlYFxuICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c0NvZGUgVGhlIHN0YXR1cyBjb2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gZXJyb3JDb2RlIFRoZSBleHBvc2VkIGVycm9yIGNvZGVcbiAqIEByZXR1cm4geyhFcnJvcnxSYW5nZUVycm9yKX0gVGhlIGVycm9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlcnJvcihFcnJvckN0b3IsIG1lc3NhZ2UsIHByZWZpeCwgc3RhdHVzQ29kZSwgZXJyb3JDb2RlKSB7XG4gIGNvbnN0IGVyciA9IG5ldyBFcnJvckN0b3IoXG4gICAgcHJlZml4ID8gYEludmFsaWQgV2ViU29ja2V0IGZyYW1lOiAke21lc3NhZ2V9YCA6IG1lc3NhZ2VcbiAgKTtcblxuICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZShlcnIsIGVycm9yKTtcbiAgZXJyLmNvZGUgPSBlcnJvckNvZGU7XG4gIGVycltrU3RhdHVzQ29kZV0gPSBzdGF0dXNDb2RlO1xuICByZXR1cm4gZXJyO1xufVxuIiwiLyogZXNsaW50IG5vLXVudXNlZC12YXJzOiBbXCJlcnJvclwiLCB7IFwidmFyc0lnbm9yZVBhdHRlcm5cIjogXCJebmV0fHRscyRcIiB9XSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IG5ldCA9IHJlcXVpcmUoJ25ldCcpO1xuY29uc3QgdGxzID0gcmVxdWlyZSgndGxzJyk7XG5jb25zdCB7IHJhbmRvbUZpbGxTeW5jIH0gPSByZXF1aXJlKCdjcnlwdG8nKTtcblxuY29uc3QgUGVyTWVzc2FnZURlZmxhdGUgPSByZXF1aXJlKCcuL3Blcm1lc3NhZ2UtZGVmbGF0ZScpO1xuY29uc3QgeyBFTVBUWV9CVUZGRVIgfSA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5jb25zdCB7IGlzVmFsaWRTdGF0dXNDb2RlIH0gPSByZXF1aXJlKCcuL3ZhbGlkYXRpb24nKTtcbmNvbnN0IHsgbWFzazogYXBwbHlNYXNrLCB0b0J1ZmZlciB9ID0gcmVxdWlyZSgnLi9idWZmZXItdXRpbCcpO1xuXG5jb25zdCBrQnl0ZUxlbmd0aCA9IFN5bWJvbCgna0J5dGVMZW5ndGgnKTtcbmNvbnN0IG1hc2tCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG5cbi8qKlxuICogSHlCaSBTZW5kZXIgaW1wbGVtZW50YXRpb24uXG4gKi9cbmNsYXNzIFNlbmRlciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgU2VuZGVyIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0geyhuZXQuU29ja2V0fHRscy5Tb2NrZXQpfSBzb2NrZXQgVGhlIGNvbm5lY3Rpb24gc29ja2V0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbZXh0ZW5zaW9uc10gQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG5lZ290aWF0ZWQgZXh0ZW5zaW9uc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZ2VuZXJhdGVNYXNrXSBUaGUgZnVuY3Rpb24gdXNlZCB0byBnZW5lcmF0ZSB0aGUgbWFza2luZ1xuICAgKiAgICAga2V5XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihzb2NrZXQsIGV4dGVuc2lvbnMsIGdlbmVyYXRlTWFzaykge1xuICAgIHRoaXMuX2V4dGVuc2lvbnMgPSBleHRlbnNpb25zIHx8IHt9O1xuXG4gICAgaWYgKGdlbmVyYXRlTWFzaykge1xuICAgICAgdGhpcy5fZ2VuZXJhdGVNYXNrID0gZ2VuZXJhdGVNYXNrO1xuICAgICAgdGhpcy5fbWFza0J1ZmZlciA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgICB9XG5cbiAgICB0aGlzLl9zb2NrZXQgPSBzb2NrZXQ7XG5cbiAgICB0aGlzLl9maXJzdEZyYWdtZW50ID0gdHJ1ZTtcbiAgICB0aGlzLl9jb21wcmVzcyA9IGZhbHNlO1xuXG4gICAgdGhpcy5fYnVmZmVyZWRCeXRlcyA9IDA7XG4gICAgdGhpcy5fZGVmbGF0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5fcXVldWUgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGcmFtZXMgYSBwaWVjZSBvZiBkYXRhIGFjY29yZGluZyB0byB0aGUgSHlCaSBXZWJTb2NrZXQgcHJvdG9jb2wuXG4gICAqXG4gICAqIEBwYXJhbSB7KEJ1ZmZlcnxTdHJpbmcpfSBkYXRhIFRoZSBkYXRhIHRvIGZyYW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0XG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZmluPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gc2V0IHRoZVxuICAgKiAgICAgRklOIGJpdFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5nZW5lcmF0ZU1hc2tdIFRoZSBmdW5jdGlvbiB1c2VkIHRvIGdlbmVyYXRlIHRoZVxuICAgKiAgICAgbWFza2luZyBrZXlcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5tYXNrPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gbWFza1xuICAgKiAgICAgYGRhdGFgXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBbb3B0aW9ucy5tYXNrQnVmZmVyXSBUaGUgYnVmZmVyIHVzZWQgdG8gc3RvcmUgdGhlIG1hc2tpbmdcbiAgICogICAgIGtleVxuICAgKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy5vcGNvZGUgVGhlIG9wY29kZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnJlYWRPbmx5PWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBgZGF0YWAgY2FuIGJlXG4gICAqICAgICBtb2RpZmllZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnJzdjE9ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBzZXQgdGhlXG4gICAqICAgICBSU1YxIGJpdFxuICAgKiBAcmV0dXJuIHsoQnVmZmVyfFN0cmluZylbXX0gVGhlIGZyYW1lZCBkYXRhXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0YXRpYyBmcmFtZShkYXRhLCBvcHRpb25zKSB7XG4gICAgbGV0IG1hc2s7XG4gICAgbGV0IG1lcmdlID0gZmFsc2U7XG4gICAgbGV0IG9mZnNldCA9IDI7XG4gICAgbGV0IHNraXBNYXNraW5nID0gZmFsc2U7XG5cbiAgICBpZiAob3B0aW9ucy5tYXNrKSB7XG4gICAgICBtYXNrID0gb3B0aW9ucy5tYXNrQnVmZmVyIHx8IG1hc2tCdWZmZXI7XG5cbiAgICAgIGlmIChvcHRpb25zLmdlbmVyYXRlTWFzaykge1xuICAgICAgICBvcHRpb25zLmdlbmVyYXRlTWFzayhtYXNrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJhbmRvbUZpbGxTeW5jKG1hc2ssIDAsIDQpO1xuICAgICAgfVxuXG4gICAgICBza2lwTWFza2luZyA9IChtYXNrWzBdIHwgbWFza1sxXSB8IG1hc2tbMl0gfCBtYXNrWzNdKSA9PT0gMDtcbiAgICAgIG9mZnNldCA9IDY7XG4gICAgfVxuXG4gICAgbGV0IGRhdGFMZW5ndGg7XG5cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoXG4gICAgICAgICghb3B0aW9ucy5tYXNrIHx8IHNraXBNYXNraW5nKSAmJlxuICAgICAgICBvcHRpb25zW2tCeXRlTGVuZ3RoXSAhPT0gdW5kZWZpbmVkXG4gICAgICApIHtcbiAgICAgICAgZGF0YUxlbmd0aCA9IG9wdGlvbnNba0J5dGVMZW5ndGhdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YSA9IEJ1ZmZlci5mcm9tKGRhdGEpO1xuICAgICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGg7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aDtcbiAgICAgIG1lcmdlID0gb3B0aW9ucy5tYXNrICYmIG9wdGlvbnMucmVhZE9ubHkgJiYgIXNraXBNYXNraW5nO1xuICAgIH1cblxuICAgIGxldCBwYXlsb2FkTGVuZ3RoID0gZGF0YUxlbmd0aDtcblxuICAgIGlmIChkYXRhTGVuZ3RoID49IDY1NTM2KSB7XG4gICAgICBvZmZzZXQgKz0gODtcbiAgICAgIHBheWxvYWRMZW5ndGggPSAxMjc7XG4gICAgfSBlbHNlIGlmIChkYXRhTGVuZ3RoID4gMTI1KSB7XG4gICAgICBvZmZzZXQgKz0gMjtcbiAgICAgIHBheWxvYWRMZW5ndGggPSAxMjY7XG4gICAgfVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gQnVmZmVyLmFsbG9jVW5zYWZlKG1lcmdlID8gZGF0YUxlbmd0aCArIG9mZnNldCA6IG9mZnNldCk7XG5cbiAgICB0YXJnZXRbMF0gPSBvcHRpb25zLmZpbiA/IG9wdGlvbnMub3Bjb2RlIHwgMHg4MCA6IG9wdGlvbnMub3Bjb2RlO1xuICAgIGlmIChvcHRpb25zLnJzdjEpIHRhcmdldFswXSB8PSAweDQwO1xuXG4gICAgdGFyZ2V0WzFdID0gcGF5bG9hZExlbmd0aDtcblxuICAgIGlmIChwYXlsb2FkTGVuZ3RoID09PSAxMjYpIHtcbiAgICAgIHRhcmdldC53cml0ZVVJbnQxNkJFKGRhdGFMZW5ndGgsIDIpO1xuICAgIH0gZWxzZSBpZiAocGF5bG9hZExlbmd0aCA9PT0gMTI3KSB7XG4gICAgICB0YXJnZXRbMl0gPSB0YXJnZXRbM10gPSAwO1xuICAgICAgdGFyZ2V0LndyaXRlVUludEJFKGRhdGFMZW5ndGgsIDQsIDYpO1xuICAgIH1cblxuICAgIGlmICghb3B0aW9ucy5tYXNrKSByZXR1cm4gW3RhcmdldCwgZGF0YV07XG5cbiAgICB0YXJnZXRbMV0gfD0gMHg4MDtcbiAgICB0YXJnZXRbb2Zmc2V0IC0gNF0gPSBtYXNrWzBdO1xuICAgIHRhcmdldFtvZmZzZXQgLSAzXSA9IG1hc2tbMV07XG4gICAgdGFyZ2V0W29mZnNldCAtIDJdID0gbWFza1syXTtcbiAgICB0YXJnZXRbb2Zmc2V0IC0gMV0gPSBtYXNrWzNdO1xuXG4gICAgaWYgKHNraXBNYXNraW5nKSByZXR1cm4gW3RhcmdldCwgZGF0YV07XG5cbiAgICBpZiAobWVyZ2UpIHtcbiAgICAgIGFwcGx5TWFzayhkYXRhLCBtYXNrLCB0YXJnZXQsIG9mZnNldCwgZGF0YUxlbmd0aCk7XG4gICAgICByZXR1cm4gW3RhcmdldF07XG4gICAgfVxuXG4gICAgYXBwbHlNYXNrKGRhdGEsIG1hc2ssIGRhdGEsIDAsIGRhdGFMZW5ndGgpO1xuICAgIHJldHVybiBbdGFyZ2V0LCBkYXRhXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIGNsb3NlIG1lc3NhZ2UgdG8gdGhlIG90aGVyIHBlZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbY29kZV0gVGhlIHN0YXR1cyBjb2RlIGNvbXBvbmVudCBvZiB0aGUgYm9keVxuICAgKiBAcGFyYW0geyhTdHJpbmd8QnVmZmVyKX0gW2RhdGFdIFRoZSBtZXNzYWdlIGNvbXBvbmVudCBvZiB0aGUgYm9keVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFttYXNrPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gbWFzayB0aGUgbWVzc2FnZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdIENhbGxiYWNrXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNsb3NlKGNvZGUsIGRhdGEsIG1hc2ssIGNiKSB7XG4gICAgbGV0IGJ1ZjtcblxuICAgIGlmIChjb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGJ1ZiA9IEVNUFRZX0JVRkZFUjtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb2RlICE9PSAnbnVtYmVyJyB8fCAhaXNWYWxpZFN0YXR1c0NvZGUoY29kZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSB2YWxpZCBlcnJvciBjb2RlIG51bWJlcicpO1xuICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gdW5kZWZpbmVkIHx8ICFkYXRhLmxlbmd0aCkge1xuICAgICAgYnVmID0gQnVmZmVyLmFsbG9jVW5zYWZlKDIpO1xuICAgICAgYnVmLndyaXRlVUludDE2QkUoY29kZSwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGxlbmd0aCA9IEJ1ZmZlci5ieXRlTGVuZ3RoKGRhdGEpO1xuXG4gICAgICBpZiAobGVuZ3RoID4gMTIzKSB7XG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgbWVzc2FnZSBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gMTIzIGJ5dGVzJyk7XG4gICAgICB9XG5cbiAgICAgIGJ1ZiA9IEJ1ZmZlci5hbGxvY1Vuc2FmZSgyICsgbGVuZ3RoKTtcbiAgICAgIGJ1Zi53cml0ZVVJbnQxNkJFKGNvZGUsIDApO1xuXG4gICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGJ1Zi53cml0ZShkYXRhLCAyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ1Zi5zZXQoZGF0YSwgMik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIFtrQnl0ZUxlbmd0aF06IGJ1Zi5sZW5ndGgsXG4gICAgICBmaW46IHRydWUsXG4gICAgICBnZW5lcmF0ZU1hc2s6IHRoaXMuX2dlbmVyYXRlTWFzayxcbiAgICAgIG1hc2ssXG4gICAgICBtYXNrQnVmZmVyOiB0aGlzLl9tYXNrQnVmZmVyLFxuICAgICAgb3Bjb2RlOiAweDA4LFxuICAgICAgcmVhZE9ubHk6IGZhbHNlLFxuICAgICAgcnN2MTogZmFsc2VcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuX2RlZmxhdGluZykge1xuICAgICAgdGhpcy5lbnF1ZXVlKFt0aGlzLmRpc3BhdGNoLCBidWYsIGZhbHNlLCBvcHRpb25zLCBjYl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbmRGcmFtZShTZW5kZXIuZnJhbWUoYnVmLCBvcHRpb25zKSwgY2IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIHBpbmcgbWVzc2FnZSB0byB0aGUgb3RoZXIgcGVlci5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXNzYWdlIHRvIHNlbmRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbbWFzaz1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgYGRhdGFgXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl0gQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcGluZyhkYXRhLCBtYXNrLCBjYikge1xuICAgIGxldCBieXRlTGVuZ3RoO1xuICAgIGxldCByZWFkT25seTtcblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGJ5dGVMZW5ndGggPSBCdWZmZXIuYnl0ZUxlbmd0aChkYXRhKTtcbiAgICAgIHJlYWRPbmx5ID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEgPSB0b0J1ZmZlcihkYXRhKTtcbiAgICAgIGJ5dGVMZW5ndGggPSBkYXRhLmxlbmd0aDtcbiAgICAgIHJlYWRPbmx5ID0gdG9CdWZmZXIucmVhZE9ubHk7XG4gICAgfVxuXG4gICAgaWYgKGJ5dGVMZW5ndGggPiAxMjUpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgZGF0YSBzaXplIG11c3Qgbm90IGJlIGdyZWF0ZXIgdGhhbiAxMjUgYnl0ZXMnKTtcbiAgICB9XG5cbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgW2tCeXRlTGVuZ3RoXTogYnl0ZUxlbmd0aCxcbiAgICAgIGZpbjogdHJ1ZSxcbiAgICAgIGdlbmVyYXRlTWFzazogdGhpcy5fZ2VuZXJhdGVNYXNrLFxuICAgICAgbWFzayxcbiAgICAgIG1hc2tCdWZmZXI6IHRoaXMuX21hc2tCdWZmZXIsXG4gICAgICBvcGNvZGU6IDB4MDksXG4gICAgICByZWFkT25seSxcbiAgICAgIHJzdjE6IGZhbHNlXG4gICAgfTtcblxuICAgIGlmICh0aGlzLl9kZWZsYXRpbmcpIHtcbiAgICAgIHRoaXMuZW5xdWV1ZShbdGhpcy5kaXNwYXRjaCwgZGF0YSwgZmFsc2UsIG9wdGlvbnMsIGNiXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VuZEZyYW1lKFNlbmRlci5mcmFtZShkYXRhLCBvcHRpb25zKSwgY2IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIHBvbmcgbWVzc2FnZSB0byB0aGUgb3RoZXIgcGVlci5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXNzYWdlIHRvIHNlbmRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbbWFzaz1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgYGRhdGFgXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl0gQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcG9uZyhkYXRhLCBtYXNrLCBjYikge1xuICAgIGxldCBieXRlTGVuZ3RoO1xuICAgIGxldCByZWFkT25seTtcblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGJ5dGVMZW5ndGggPSBCdWZmZXIuYnl0ZUxlbmd0aChkYXRhKTtcbiAgICAgIHJlYWRPbmx5ID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEgPSB0b0J1ZmZlcihkYXRhKTtcbiAgICAgIGJ5dGVMZW5ndGggPSBkYXRhLmxlbmd0aDtcbiAgICAgIHJlYWRPbmx5ID0gdG9CdWZmZXIucmVhZE9ubHk7XG4gICAgfVxuXG4gICAgaWYgKGJ5dGVMZW5ndGggPiAxMjUpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgZGF0YSBzaXplIG11c3Qgbm90IGJlIGdyZWF0ZXIgdGhhbiAxMjUgYnl0ZXMnKTtcbiAgICB9XG5cbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgW2tCeXRlTGVuZ3RoXTogYnl0ZUxlbmd0aCxcbiAgICAgIGZpbjogdHJ1ZSxcbiAgICAgIGdlbmVyYXRlTWFzazogdGhpcy5fZ2VuZXJhdGVNYXNrLFxuICAgICAgbWFzayxcbiAgICAgIG1hc2tCdWZmZXI6IHRoaXMuX21hc2tCdWZmZXIsXG4gICAgICBvcGNvZGU6IDB4MGEsXG4gICAgICByZWFkT25seSxcbiAgICAgIHJzdjE6IGZhbHNlXG4gICAgfTtcblxuICAgIGlmICh0aGlzLl9kZWZsYXRpbmcpIHtcbiAgICAgIHRoaXMuZW5xdWV1ZShbdGhpcy5kaXNwYXRjaCwgZGF0YSwgZmFsc2UsIG9wdGlvbnMsIGNiXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VuZEZyYW1lKFNlbmRlci5mcmFtZShkYXRhLCBvcHRpb25zKSwgY2IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIGRhdGEgbWVzc2FnZSB0byB0aGUgb3RoZXIgcGVlci5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXNzYWdlIHRvIHNlbmRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyBvYmplY3RcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5iaW5hcnk9ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIGBkYXRhYCBpcyBiaW5hcnlcbiAgICogICAgIG9yIHRleHRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5jb21wcmVzcz1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvXG4gICAqICAgICBjb21wcmVzcyBgZGF0YWBcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5maW49ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIHRoZSBmcmFnbWVudCBpcyB0aGVcbiAgICogICAgIGxhc3Qgb25lXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMubWFzaz1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2tcbiAgICogICAgIGBkYXRhYFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdIENhbGxiYWNrXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNlbmQoZGF0YSwgb3B0aW9ucywgY2IpIHtcbiAgICBjb25zdCBwZXJNZXNzYWdlRGVmbGF0ZSA9IHRoaXMuX2V4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV07XG4gICAgbGV0IG9wY29kZSA9IG9wdGlvbnMuYmluYXJ5ID8gMiA6IDE7XG4gICAgbGV0IHJzdjEgPSBvcHRpb25zLmNvbXByZXNzO1xuXG4gICAgbGV0IGJ5dGVMZW5ndGg7XG4gICAgbGV0IHJlYWRPbmx5O1xuXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgYnl0ZUxlbmd0aCA9IEJ1ZmZlci5ieXRlTGVuZ3RoKGRhdGEpO1xuICAgICAgcmVhZE9ubHkgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YSA9IHRvQnVmZmVyKGRhdGEpO1xuICAgICAgYnl0ZUxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuICAgICAgcmVhZE9ubHkgPSB0b0J1ZmZlci5yZWFkT25seTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZmlyc3RGcmFnbWVudCkge1xuICAgICAgdGhpcy5fZmlyc3RGcmFnbWVudCA9IGZhbHNlO1xuICAgICAgaWYgKFxuICAgICAgICByc3YxICYmXG4gICAgICAgIHBlck1lc3NhZ2VEZWZsYXRlICYmXG4gICAgICAgIHBlck1lc3NhZ2VEZWZsYXRlLnBhcmFtc1tcbiAgICAgICAgICBwZXJNZXNzYWdlRGVmbGF0ZS5faXNTZXJ2ZXJcbiAgICAgICAgICAgID8gJ3NlcnZlcl9ub19jb250ZXh0X3Rha2VvdmVyJ1xuICAgICAgICAgICAgOiAnY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXInXG4gICAgICAgIF1cbiAgICAgICkge1xuICAgICAgICByc3YxID0gYnl0ZUxlbmd0aCA+PSBwZXJNZXNzYWdlRGVmbGF0ZS5fdGhyZXNob2xkO1xuICAgICAgfVxuICAgICAgdGhpcy5fY29tcHJlc3MgPSByc3YxO1xuICAgIH0gZWxzZSB7XG4gICAgICByc3YxID0gZmFsc2U7XG4gICAgICBvcGNvZGUgPSAwO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmZpbikgdGhpcy5fZmlyc3RGcmFnbWVudCA9IHRydWU7XG5cbiAgICBpZiAocGVyTWVzc2FnZURlZmxhdGUpIHtcbiAgICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICAgIFtrQnl0ZUxlbmd0aF06IGJ5dGVMZW5ndGgsXG4gICAgICAgIGZpbjogb3B0aW9ucy5maW4sXG4gICAgICAgIGdlbmVyYXRlTWFzazogdGhpcy5fZ2VuZXJhdGVNYXNrLFxuICAgICAgICBtYXNrOiBvcHRpb25zLm1hc2ssXG4gICAgICAgIG1hc2tCdWZmZXI6IHRoaXMuX21hc2tCdWZmZXIsXG4gICAgICAgIG9wY29kZSxcbiAgICAgICAgcmVhZE9ubHksXG4gICAgICAgIHJzdjFcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLl9kZWZsYXRpbmcpIHtcbiAgICAgICAgdGhpcy5lbnF1ZXVlKFt0aGlzLmRpc3BhdGNoLCBkYXRhLCB0aGlzLl9jb21wcmVzcywgb3B0cywgY2JdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2goZGF0YSwgdGhpcy5fY29tcHJlc3MsIG9wdHMsIGNiKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZW5kRnJhbWUoXG4gICAgICAgIFNlbmRlci5mcmFtZShkYXRhLCB7XG4gICAgICAgICAgW2tCeXRlTGVuZ3RoXTogYnl0ZUxlbmd0aCxcbiAgICAgICAgICBmaW46IG9wdGlvbnMuZmluLFxuICAgICAgICAgIGdlbmVyYXRlTWFzazogdGhpcy5fZ2VuZXJhdGVNYXNrLFxuICAgICAgICAgIG1hc2s6IG9wdGlvbnMubWFzayxcbiAgICAgICAgICBtYXNrQnVmZmVyOiB0aGlzLl9tYXNrQnVmZmVyLFxuICAgICAgICAgIG9wY29kZSxcbiAgICAgICAgICByZWFkT25seSxcbiAgICAgICAgICByc3YxOiBmYWxzZVxuICAgICAgICB9KSxcbiAgICAgICAgY2JcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYSBtZXNzYWdlLlxuICAgKlxuICAgKiBAcGFyYW0geyhCdWZmZXJ8U3RyaW5nKX0gZGF0YSBUaGUgbWVzc2FnZSB0byBzZW5kXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2NvbXByZXNzPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gY29tcHJlc3NcbiAgICogICAgIGBkYXRhYFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25zIG9iamVjdFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmZpbj1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIHNldCB0aGVcbiAgICogICAgIEZJTiBiaXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMuZ2VuZXJhdGVNYXNrXSBUaGUgZnVuY3Rpb24gdXNlZCB0byBnZW5lcmF0ZSB0aGVcbiAgICogICAgIG1hc2tpbmcga2V5XG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMubWFzaz1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2tcbiAgICogICAgIGBkYXRhYFxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gW29wdGlvbnMubWFza0J1ZmZlcl0gVGhlIGJ1ZmZlciB1c2VkIHRvIHN0b3JlIHRoZSBtYXNraW5nXG4gICAqICAgICBrZXlcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMub3Bjb2RlIFRoZSBvcGNvZGVcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5yZWFkT25seT1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgYGRhdGFgIGNhbiBiZVxuICAgKiAgICAgbW9kaWZpZWRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5yc3YxPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gc2V0IHRoZVxuICAgKiAgICAgUlNWMSBiaXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXSBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGlzcGF0Y2goZGF0YSwgY29tcHJlc3MsIG9wdGlvbnMsIGNiKSB7XG4gICAgaWYgKCFjb21wcmVzcykge1xuICAgICAgdGhpcy5zZW5kRnJhbWUoU2VuZGVyLmZyYW1lKGRhdGEsIG9wdGlvbnMpLCBjYik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcGVyTWVzc2FnZURlZmxhdGUgPSB0aGlzLl9leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdO1xuXG4gICAgdGhpcy5fYnVmZmVyZWRCeXRlcyArPSBvcHRpb25zW2tCeXRlTGVuZ3RoXTtcbiAgICB0aGlzLl9kZWZsYXRpbmcgPSB0cnVlO1xuICAgIHBlck1lc3NhZ2VEZWZsYXRlLmNvbXByZXNzKGRhdGEsIG9wdGlvbnMuZmluLCAoXywgYnVmKSA9PiB7XG4gICAgICBpZiAodGhpcy5fc29ja2V0LmRlc3Ryb3llZCkge1xuICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoXG4gICAgICAgICAgJ1RoZSBzb2NrZXQgd2FzIGNsb3NlZCB3aGlsZSBkYXRhIHdhcyBiZWluZyBjb21wcmVzc2VkJ1xuICAgICAgICApO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIGNiKGVycik7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9xdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuX3F1ZXVlW2ldO1xuICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gcGFyYW1zW3BhcmFtcy5sZW5ndGggLSAxXTtcblxuICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIGNhbGxiYWNrKGVycik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2J1ZmZlcmVkQnl0ZXMgLT0gb3B0aW9uc1trQnl0ZUxlbmd0aF07XG4gICAgICB0aGlzLl9kZWZsYXRpbmcgPSBmYWxzZTtcbiAgICAgIG9wdGlvbnMucmVhZE9ubHkgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2VuZEZyYW1lKFNlbmRlci5mcmFtZShidWYsIG9wdGlvbnMpLCBjYik7XG4gICAgICB0aGlzLmRlcXVldWUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlcyBxdWV1ZWQgc2VuZCBvcGVyYXRpb25zLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGVxdWV1ZSgpIHtcbiAgICB3aGlsZSAoIXRoaXMuX2RlZmxhdGluZyAmJiB0aGlzLl9xdWV1ZS5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuX3F1ZXVlLnNoaWZ0KCk7XG5cbiAgICAgIHRoaXMuX2J1ZmZlcmVkQnl0ZXMgLT0gcGFyYW1zWzNdW2tCeXRlTGVuZ3RoXTtcbiAgICAgIFJlZmxlY3QuYXBwbHkocGFyYW1zWzBdLCB0aGlzLCBwYXJhbXMuc2xpY2UoMSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbnF1ZXVlcyBhIHNlbmQgb3BlcmF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBwYXJhbXMgU2VuZCBvcGVyYXRpb24gcGFyYW1ldGVycy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGVucXVldWUocGFyYW1zKSB7XG4gICAgdGhpcy5fYnVmZmVyZWRCeXRlcyArPSBwYXJhbXNbM11ba0J5dGVMZW5ndGhdO1xuICAgIHRoaXMuX3F1ZXVlLnB1c2gocGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIGZyYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge0J1ZmZlcltdfSBsaXN0IFRoZSBmcmFtZSB0byBzZW5kXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl0gQ2FsbGJhY2tcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNlbmRGcmFtZShsaXN0LCBjYikge1xuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMikge1xuICAgICAgdGhpcy5fc29ja2V0LmNvcmsoKTtcbiAgICAgIHRoaXMuX3NvY2tldC53cml0ZShsaXN0WzBdKTtcbiAgICAgIHRoaXMuX3NvY2tldC53cml0ZShsaXN0WzFdLCBjYik7XG4gICAgICB0aGlzLl9zb2NrZXQudW5jb3JrKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NvY2tldC53cml0ZShsaXN0WzBdLCBjYik7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gU2VuZGVyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCB7IER1cGxleCB9ID0gcmVxdWlyZSgnc3RyZWFtJyk7XG5cbi8qKlxuICogRW1pdHMgdGhlIGAnY2xvc2UnYCBldmVudCBvbiBhIHN0cmVhbS5cbiAqXG4gKiBAcGFyYW0ge0R1cGxleH0gc3RyZWFtIFRoZSBzdHJlYW0uXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbWl0Q2xvc2Uoc3RyZWFtKSB7XG4gIHN0cmVhbS5lbWl0KCdjbG9zZScpO1xufVxuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYCdlbmQnYCBldmVudC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBkdXBsZXhPbkVuZCgpIHtcbiAgaWYgKCF0aGlzLmRlc3Ryb3llZCAmJiB0aGlzLl93cml0YWJsZVN0YXRlLmZpbmlzaGVkKSB7XG4gICAgdGhpcy5kZXN0cm95KCk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGAnZXJyb3InYCBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnIgVGhlIGVycm9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBkdXBsZXhPbkVycm9yKGVycikge1xuICB0aGlzLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGR1cGxleE9uRXJyb3IpO1xuICB0aGlzLmRlc3Ryb3koKTtcbiAgaWYgKHRoaXMubGlzdGVuZXJDb3VudCgnZXJyb3InKSA9PT0gMCkge1xuICAgIC8vIERvIG5vdCBzdXBwcmVzcyB0aGUgdGhyb3dpbmcgYmVoYXZpb3IuXG4gICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gIH1cbn1cblxuLyoqXG4gKiBXcmFwcyBhIGBXZWJTb2NrZXRgIGluIGEgZHVwbGV4IHN0cmVhbS5cbiAqXG4gKiBAcGFyYW0ge1dlYlNvY2tldH0gd3MgVGhlIGBXZWJTb2NrZXRgIHRvIHdyYXBcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgZm9yIHRoZSBgRHVwbGV4YCBjb25zdHJ1Y3RvclxuICogQHJldHVybiB7RHVwbGV4fSBUaGUgZHVwbGV4IHN0cmVhbVxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBjcmVhdGVXZWJTb2NrZXRTdHJlYW0od3MsIG9wdGlvbnMpIHtcbiAgbGV0IHRlcm1pbmF0ZU9uRGVzdHJveSA9IHRydWU7XG5cbiAgY29uc3QgZHVwbGV4ID0gbmV3IER1cGxleCh7XG4gICAgLi4ub3B0aW9ucyxcbiAgICBhdXRvRGVzdHJveTogZmFsc2UsXG4gICAgZW1pdENsb3NlOiBmYWxzZSxcbiAgICBvYmplY3RNb2RlOiBmYWxzZSxcbiAgICB3cml0YWJsZU9iamVjdE1vZGU6IGZhbHNlXG4gIH0pO1xuXG4gIHdzLm9uKCdtZXNzYWdlJywgZnVuY3Rpb24gbWVzc2FnZShtc2csIGlzQmluYXJ5KSB7XG4gICAgY29uc3QgZGF0YSA9XG4gICAgICAhaXNCaW5hcnkgJiYgZHVwbGV4Ll9yZWFkYWJsZVN0YXRlLm9iamVjdE1vZGUgPyBtc2cudG9TdHJpbmcoKSA6IG1zZztcblxuICAgIGlmICghZHVwbGV4LnB1c2goZGF0YSkpIHdzLnBhdXNlKCk7XG4gIH0pO1xuXG4gIHdzLm9uY2UoJ2Vycm9yJywgZnVuY3Rpb24gZXJyb3IoZXJyKSB7XG4gICAgaWYgKGR1cGxleC5kZXN0cm95ZWQpIHJldHVybjtcblxuICAgIC8vIFByZXZlbnQgYHdzLnRlcm1pbmF0ZSgpYCBmcm9tIGJlaW5nIGNhbGxlZCBieSBgZHVwbGV4Ll9kZXN0cm95KClgLlxuICAgIC8vXG4gICAgLy8gLSBJZiB0aGUgYCdlcnJvcidgIGV2ZW50IGlzIGVtaXR0ZWQgYmVmb3JlIHRoZSBgJ29wZW4nYCBldmVudCwgdGhlblxuICAgIC8vICAgYHdzLnRlcm1pbmF0ZSgpYCBpcyBhIG5vb3AgYXMgbm8gc29ja2V0IGlzIGFzc2lnbmVkLlxuICAgIC8vIC0gT3RoZXJ3aXNlLCB0aGUgZXJyb3IgaXMgcmUtZW1pdHRlZCBieSB0aGUgbGlzdGVuZXIgb2YgdGhlIGAnZXJyb3InYFxuICAgIC8vICAgZXZlbnQgb2YgdGhlIGBSZWNlaXZlcmAgb2JqZWN0LiBUaGUgbGlzdGVuZXIgYWxyZWFkeSBjbG9zZXMgdGhlXG4gICAgLy8gICBjb25uZWN0aW9uIGJ5IGNhbGxpbmcgYHdzLmNsb3NlKClgLiBUaGlzIGFsbG93cyBhIGNsb3NlIGZyYW1lIHRvIGJlXG4gICAgLy8gICBzZW50IHRvIHRoZSBvdGhlciBwZWVyLiBJZiBgd3MudGVybWluYXRlKClgIGlzIGNhbGxlZCByaWdodCBhZnRlciB0aGlzLFxuICAgIC8vICAgdGhlbiB0aGUgY2xvc2UgZnJhbWUgbWlnaHQgbm90IGJlIHNlbnQuXG4gICAgdGVybWluYXRlT25EZXN0cm95ID0gZmFsc2U7XG4gICAgZHVwbGV4LmRlc3Ryb3koZXJyKTtcbiAgfSk7XG5cbiAgd3Mub25jZSgnY2xvc2UnLCBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICBpZiAoZHVwbGV4LmRlc3Ryb3llZCkgcmV0dXJuO1xuXG4gICAgZHVwbGV4LnB1c2gobnVsbCk7XG4gIH0pO1xuXG4gIGR1cGxleC5fZGVzdHJveSA9IGZ1bmN0aW9uIChlcnIsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHdzLnJlYWR5U3RhdGUgPT09IHdzLkNMT1NFRCkge1xuICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlLCBkdXBsZXgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcblxuICAgIHdzLm9uY2UoJ2Vycm9yJywgZnVuY3Rpb24gZXJyb3IoZXJyKSB7XG4gICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICB9KTtcblxuICAgIHdzLm9uY2UoJ2Nsb3NlJywgZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICBpZiAoIWNhbGxlZCkgY2FsbGJhY2soZXJyKTtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlLCBkdXBsZXgpO1xuICAgIH0pO1xuXG4gICAgaWYgKHRlcm1pbmF0ZU9uRGVzdHJveSkgd3MudGVybWluYXRlKCk7XG4gIH07XG5cbiAgZHVwbGV4Ll9maW5hbCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIGlmICh3cy5yZWFkeVN0YXRlID09PSB3cy5DT05ORUNUSU5HKSB7XG4gICAgICB3cy5vbmNlKCdvcGVuJywgZnVuY3Rpb24gb3BlbigpIHtcbiAgICAgICAgZHVwbGV4Ll9maW5hbChjYWxsYmFjayk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgdmFsdWUgb2YgdGhlIGBfc29ja2V0YCBwcm9wZXJ0eSBpcyBgbnVsbGAgaXQgbWVhbnMgdGhhdCBgd3NgIGlzIGFcbiAgICAvLyBjbGllbnQgd2Vic29ja2V0IGFuZCB0aGUgaGFuZHNoYWtlIGZhaWxlZC4gSW4gZmFjdCwgd2hlbiB0aGlzIGhhcHBlbnMsIGFcbiAgICAvLyBzb2NrZXQgaXMgbmV2ZXIgYXNzaWduZWQgdG8gdGhlIHdlYnNvY2tldC4gV2FpdCBmb3IgdGhlIGAnZXJyb3InYCBldmVudFxuICAgIC8vIHRoYXQgd2lsbCBiZSBlbWl0dGVkIGJ5IHRoZSB3ZWJzb2NrZXQuXG4gICAgaWYgKHdzLl9zb2NrZXQgPT09IG51bGwpIHJldHVybjtcblxuICAgIGlmICh3cy5fc29ja2V0Ll93cml0YWJsZVN0YXRlLmZpbmlzaGVkKSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgICAgaWYgKGR1cGxleC5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkKSBkdXBsZXguZGVzdHJveSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3cy5fc29ja2V0Lm9uY2UoJ2ZpbmlzaCcsIGZ1bmN0aW9uIGZpbmlzaCgpIHtcbiAgICAgICAgLy8gYGR1cGxleGAgaXMgbm90IGRlc3Ryb3llZCBoZXJlIGJlY2F1c2UgdGhlIGAnZW5kJ2AgZXZlbnQgd2lsbCBiZVxuICAgICAgICAvLyBlbWl0dGVkIG9uIGBkdXBsZXhgIGFmdGVyIHRoaXMgYCdmaW5pc2gnYCBldmVudC4gVGhlIEVPRiBzaWduYWxpbmdcbiAgICAgICAgLy8gYG51bGxgIGNodW5rIGlzLCBpbiBmYWN0LCBwdXNoZWQgd2hlbiB0aGUgd2Vic29ja2V0IGVtaXRzIGAnY2xvc2UnYC5cbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH0pO1xuICAgICAgd3MuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgZHVwbGV4Ll9yZWFkID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh3cy5pc1BhdXNlZCkgd3MucmVzdW1lKCk7XG4gIH07XG5cbiAgZHVwbGV4Ll93cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHdzLnJlYWR5U3RhdGUgPT09IHdzLkNPTk5FQ1RJTkcpIHtcbiAgICAgIHdzLm9uY2UoJ29wZW4nLCBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICBkdXBsZXguX3dyaXRlKGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd3Muc2VuZChjaHVuaywgY2FsbGJhY2spO1xuICB9O1xuXG4gIGR1cGxleC5vbignZW5kJywgZHVwbGV4T25FbmQpO1xuICBkdXBsZXgub24oJ2Vycm9yJywgZHVwbGV4T25FcnJvcik7XG4gIHJldHVybiBkdXBsZXg7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlV2ViU29ja2V0U3RyZWFtO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCB7IHRva2VuQ2hhcnMgfSA9IHJlcXVpcmUoJy4vdmFsaWRhdGlvbicpO1xuXG4vKipcbiAqIFBhcnNlcyB0aGUgYFNlYy1XZWJTb2NrZXQtUHJvdG9jb2xgIGhlYWRlciBpbnRvIGEgc2V0IG9mIHN1YnByb3RvY29sIG5hbWVzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXIgVGhlIGZpZWxkIHZhbHVlIG9mIHRoZSBoZWFkZXJcbiAqIEByZXR1cm4ge1NldH0gVGhlIHN1YnByb3RvY29sIG5hbWVzXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIHBhcnNlKGhlYWRlcikge1xuICBjb25zdCBwcm90b2NvbHMgPSBuZXcgU2V0KCk7XG4gIGxldCBzdGFydCA9IC0xO1xuICBsZXQgZW5kID0gLTE7XG4gIGxldCBpID0gMDtcblxuICBmb3IgKGk7IGkgPCBoZWFkZXIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjb2RlID0gaGVhZGVyLmNoYXJDb2RlQXQoaSk7XG5cbiAgICBpZiAoZW5kID09PSAtMSAmJiB0b2tlbkNoYXJzW2NvZGVdID09PSAxKSB7XG4gICAgICBpZiAoc3RhcnQgPT09IC0xKSBzdGFydCA9IGk7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGkgIT09IDAgJiZcbiAgICAgIChjb2RlID09PSAweDIwIC8qICcgJyAqLyB8fCBjb2RlID09PSAweDA5KSAvKiAnXFx0JyAqL1xuICAgICkge1xuICAgICAgaWYgKGVuZCA9PT0gLTEgJiYgc3RhcnQgIT09IC0xKSBlbmQgPSBpO1xuICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gMHgyYyAvKiAnLCcgKi8pIHtcbiAgICAgIGlmIChzdGFydCA9PT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbmQgPT09IC0xKSBlbmQgPSBpO1xuXG4gICAgICBjb25zdCBwcm90b2NvbCA9IGhlYWRlci5zbGljZShzdGFydCwgZW5kKTtcblxuICAgICAgaWYgKHByb3RvY29scy5oYXMocHJvdG9jb2wpKSB7XG4gICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVGhlIFwiJHtwcm90b2NvbH1cIiBzdWJwcm90b2NvbCBpcyBkdXBsaWNhdGVkYCk7XG4gICAgICB9XG5cbiAgICAgIHByb3RvY29scy5hZGQocHJvdG9jb2wpO1xuICAgICAgc3RhcnQgPSBlbmQgPSAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXJ0ID09PSAtMSB8fCBlbmQgIT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCdVbmV4cGVjdGVkIGVuZCBvZiBpbnB1dCcpO1xuICB9XG5cbiAgY29uc3QgcHJvdG9jb2wgPSBoZWFkZXIuc2xpY2Uoc3RhcnQsIGkpO1xuXG4gIGlmIChwcm90b2NvbHMuaGFzKHByb3RvY29sKSkge1xuICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVGhlIFwiJHtwcm90b2NvbH1cIiBzdWJwcm90b2NvbCBpcyBkdXBsaWNhdGVkYCk7XG4gIH1cblxuICBwcm90b2NvbHMuYWRkKHByb3RvY29sKTtcbiAgcmV0dXJuIHByb3RvY29scztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7IHBhcnNlIH07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vXG4vLyBBbGxvd2VkIHRva2VuIGNoYXJhY3RlcnM6XG4vL1xuLy8gJyEnLCAnIycsICckJywgJyUnLCAnJicsICcnJywgJyonLCAnKycsICctJyxcbi8vICcuJywgMC05LCBBLVosICdeJywgJ18nLCAnYCcsIGEteiwgJ3wnLCAnfidcbi8vXG4vLyB0b2tlbkNoYXJzWzMyXSA9PT0gMCAvLyAnICdcbi8vIHRva2VuQ2hhcnNbMzNdID09PSAxIC8vICchJ1xuLy8gdG9rZW5DaGFyc1szNF0gPT09IDAgLy8gJ1wiJ1xuLy8gLi4uXG4vL1xuLy8gcHJldHRpZXItaWdub3JlXG5jb25zdCB0b2tlbkNoYXJzID0gW1xuICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAvLyAwIC0gMTVcbiAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgLy8gMTYgLSAzMVxuICAwLCAxLCAwLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAxLCAxLCAwLCAxLCAxLCAwLCAvLyAzMiAtIDQ3XG4gIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDAsIDAsIDAsIC8vIDQ4IC0gNjNcbiAgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgLy8gNjQgLSA3OVxuICAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAxLCAxLCAvLyA4MCAtIDk1XG4gIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIC8vIDk2IC0gMTExXG4gIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDEsIDAsIDEsIDAgLy8gMTEyIC0gMTI3XG5dO1xuXG4vKipcbiAqIENoZWNrcyBpZiBhIHN0YXR1cyBjb2RlIGlzIGFsbG93ZWQgaW4gYSBjbG9zZSBmcmFtZS5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gY29kZSBUaGUgc3RhdHVzIGNvZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgc3RhdHVzIGNvZGUgaXMgdmFsaWQsIGVsc2UgYGZhbHNlYFxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBpc1ZhbGlkU3RhdHVzQ29kZShjb2RlKSB7XG4gIHJldHVybiAoXG4gICAgKGNvZGUgPj0gMTAwMCAmJlxuICAgICAgY29kZSA8PSAxMDE0ICYmXG4gICAgICBjb2RlICE9PSAxMDA0ICYmXG4gICAgICBjb2RlICE9PSAxMDA1ICYmXG4gICAgICBjb2RlICE9PSAxMDA2KSB8fFxuICAgIChjb2RlID49IDMwMDAgJiYgY29kZSA8PSA0OTk5KVxuICApO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIGdpdmVuIGJ1ZmZlciBjb250YWlucyBvbmx5IGNvcnJlY3QgVVRGLTguXG4gKiBQb3J0ZWQgZnJvbSBodHRwczovL3d3dy5jbC5jYW0uYWMudWsvJTdFbWdrMjUvdWNzL3V0ZjhfY2hlY2suYyBieVxuICogTWFya3VzIEt1aG4uXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IGJ1ZiBUaGUgYnVmZmVyIHRvIGNoZWNrXG4gKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgYGJ1ZmAgY29udGFpbnMgb25seSBjb3JyZWN0IFVURi04LCBlbHNlIGBmYWxzZWBcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gX2lzVmFsaWRVVEY4KGJ1Zikge1xuICBjb25zdCBsZW4gPSBidWYubGVuZ3RoO1xuICBsZXQgaSA9IDA7XG5cbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICBpZiAoKGJ1ZltpXSAmIDB4ODApID09PSAwKSB7XG4gICAgICAvLyAweHh4eHh4eFxuICAgICAgaSsrO1xuICAgIH0gZWxzZSBpZiAoKGJ1ZltpXSAmIDB4ZTApID09PSAweGMwKSB7XG4gICAgICAvLyAxMTB4eHh4eCAxMHh4eHh4eFxuICAgICAgaWYgKFxuICAgICAgICBpICsgMSA9PT0gbGVuIHx8XG4gICAgICAgIChidWZbaSArIDFdICYgMHhjMCkgIT09IDB4ODAgfHxcbiAgICAgICAgKGJ1ZltpXSAmIDB4ZmUpID09PSAweGMwIC8vIE92ZXJsb25nXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpICs9IDI7XG4gICAgfSBlbHNlIGlmICgoYnVmW2ldICYgMHhmMCkgPT09IDB4ZTApIHtcbiAgICAgIC8vIDExMTB4eHh4IDEweHh4eHh4IDEweHh4eHh4XG4gICAgICBpZiAoXG4gICAgICAgIGkgKyAyID49IGxlbiB8fFxuICAgICAgICAoYnVmW2kgKyAxXSAmIDB4YzApICE9PSAweDgwIHx8XG4gICAgICAgIChidWZbaSArIDJdICYgMHhjMCkgIT09IDB4ODAgfHxcbiAgICAgICAgKGJ1ZltpXSA9PT0gMHhlMCAmJiAoYnVmW2kgKyAxXSAmIDB4ZTApID09PSAweDgwKSB8fCAvLyBPdmVybG9uZ1xuICAgICAgICAoYnVmW2ldID09PSAweGVkICYmIChidWZbaSArIDFdICYgMHhlMCkgPT09IDB4YTApIC8vIFN1cnJvZ2F0ZSAoVStEODAwIC0gVStERkZGKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaSArPSAzO1xuICAgIH0gZWxzZSBpZiAoKGJ1ZltpXSAmIDB4ZjgpID09PSAweGYwKSB7XG4gICAgICAvLyAxMTExMHh4eCAxMHh4eHh4eCAxMHh4eHh4eCAxMHh4eHh4eFxuICAgICAgaWYgKFxuICAgICAgICBpICsgMyA+PSBsZW4gfHxcbiAgICAgICAgKGJ1ZltpICsgMV0gJiAweGMwKSAhPT0gMHg4MCB8fFxuICAgICAgICAoYnVmW2kgKyAyXSAmIDB4YzApICE9PSAweDgwIHx8XG4gICAgICAgIChidWZbaSArIDNdICYgMHhjMCkgIT09IDB4ODAgfHxcbiAgICAgICAgKGJ1ZltpXSA9PT0gMHhmMCAmJiAoYnVmW2kgKyAxXSAmIDB4ZjApID09PSAweDgwKSB8fCAvLyBPdmVybG9uZ1xuICAgICAgICAoYnVmW2ldID09PSAweGY0ICYmIGJ1ZltpICsgMV0gPiAweDhmKSB8fFxuICAgICAgICBidWZbaV0gPiAweGY0IC8vID4gVSsxMEZGRkZcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGkgKz0gNDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNWYWxpZFN0YXR1c0NvZGUsXG4gIGlzVmFsaWRVVEY4OiBfaXNWYWxpZFVURjgsXG4gIHRva2VuQ2hhcnNcbn07XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICAqL1xuaWYgKCFwcm9jZXNzLmVudi5XU19OT19VVEZfOF9WQUxJREFURSkge1xuICB0cnkge1xuICAgIGNvbnN0IGlzVmFsaWRVVEY4ID0gcmVxdWlyZSgndXRmLTgtdmFsaWRhdGUnKTtcblxuICAgIG1vZHVsZS5leHBvcnRzLmlzVmFsaWRVVEY4ID0gZnVuY3Rpb24gKGJ1Zikge1xuICAgICAgcmV0dXJuIGJ1Zi5sZW5ndGggPCAxNTAgPyBfaXNWYWxpZFVURjgoYnVmKSA6IGlzVmFsaWRVVEY4KGJ1Zik7XG4gICAgfTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIENvbnRpbnVlIHJlZ2FyZGxlc3Mgb2YgdGhlIGVycm9yLlxuICB9XG59XG4iLCIvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IFtcImVycm9yXCIsIHsgXCJ2YXJzSWdub3JlUGF0dGVyblwiOiBcIl5uZXR8dGxzfGh0dHBzJFwiIH1dICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJyk7XG5jb25zdCBodHRwID0gcmVxdWlyZSgnaHR0cCcpO1xuY29uc3QgaHR0cHMgPSByZXF1aXJlKCdodHRwcycpO1xuY29uc3QgbmV0ID0gcmVxdWlyZSgnbmV0Jyk7XG5jb25zdCB0bHMgPSByZXF1aXJlKCd0bHMnKTtcbmNvbnN0IHsgY3JlYXRlSGFzaCB9ID0gcmVxdWlyZSgnY3J5cHRvJyk7XG5cbmNvbnN0IGV4dGVuc2lvbiA9IHJlcXVpcmUoJy4vZXh0ZW5zaW9uJyk7XG5jb25zdCBQZXJNZXNzYWdlRGVmbGF0ZSA9IHJlcXVpcmUoJy4vcGVybWVzc2FnZS1kZWZsYXRlJyk7XG5jb25zdCBzdWJwcm90b2NvbCA9IHJlcXVpcmUoJy4vc3VicHJvdG9jb2wnKTtcbmNvbnN0IFdlYlNvY2tldCA9IHJlcXVpcmUoJy4vd2Vic29ja2V0Jyk7XG5jb25zdCB7IEdVSUQsIGtXZWJTb2NrZXQgfSA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5cbmNvbnN0IGtleVJlZ2V4ID0gL15bKy8wLTlBLVphLXpdezIyfT09JC87XG5cbmNvbnN0IFJVTk5JTkcgPSAwO1xuY29uc3QgQ0xPU0lORyA9IDE7XG5jb25zdCBDTE9TRUQgPSAyO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIFdlYlNvY2tldCBzZXJ2ZXIuXG4gKlxuICogQGV4dGVuZHMgRXZlbnRFbWl0dGVyXG4gKi9cbmNsYXNzIFdlYlNvY2tldFNlcnZlciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBgV2ViU29ja2V0U2VydmVyYCBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQ29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5iYWNrbG9nPTUxMV0gVGhlIG1heGltdW0gbGVuZ3RoIG9mIHRoZSBxdWV1ZSBvZlxuICAgKiAgICAgcGVuZGluZyBjb25uZWN0aW9uc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmNsaWVudFRyYWNraW5nPXRydWVdIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0b1xuICAgKiAgICAgdHJhY2sgY2xpZW50c1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5oYW5kbGVQcm90b2NvbHNdIEEgaG9vayB0byBoYW5kbGUgcHJvdG9jb2xzXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5ob3N0XSBUaGUgaG9zdG5hbWUgd2hlcmUgdG8gYmluZCB0aGUgc2VydmVyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5tYXhQYXlsb2FkPTEwNDg1NzYwMF0gVGhlIG1heGltdW0gYWxsb3dlZCBtZXNzYWdlXG4gICAqICAgICBzaXplXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMubm9TZXJ2ZXI9ZmFsc2VdIEVuYWJsZSBubyBzZXJ2ZXIgbW9kZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMucGF0aF0gQWNjZXB0IG9ubHkgY29ubmVjdGlvbnMgbWF0Y2hpbmcgdGhpcyBwYXRoXG4gICAqIEBwYXJhbSB7KEJvb2xlYW58T2JqZWN0KX0gW29wdGlvbnMucGVyTWVzc2FnZURlZmxhdGU9ZmFsc2VdIEVuYWJsZS9kaXNhYmxlXG4gICAqICAgICBwZXJtZXNzYWdlLWRlZmxhdGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLnBvcnRdIFRoZSBwb3J0IHdoZXJlIHRvIGJpbmQgdGhlIHNlcnZlclxuICAgKiBAcGFyYW0geyhodHRwLlNlcnZlcnxodHRwcy5TZXJ2ZXIpfSBbb3B0aW9ucy5zZXJ2ZXJdIEEgcHJlLWNyZWF0ZWQgSFRUUC9TXG4gICAqICAgICBzZXJ2ZXIgdG8gdXNlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuc2tpcFVURjhWYWxpZGF0aW9uPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvclxuICAgKiAgICAgbm90IHRvIHNraXAgVVRGLTggdmFsaWRhdGlvbiBmb3IgdGV4dCBhbmQgY2xvc2UgbWVzc2FnZXNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMudmVyaWZ5Q2xpZW50XSBBIGhvb2sgdG8gcmVqZWN0IGNvbm5lY3Rpb25zXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLldlYlNvY2tldD1XZWJTb2NrZXRdIFNwZWNpZmllcyB0aGUgYFdlYlNvY2tldGBcbiAgICogICAgIGNsYXNzIHRvIHVzZS4gSXQgbXVzdCBiZSB0aGUgYFdlYlNvY2tldGAgY2xhc3Mgb3IgY2xhc3MgdGhhdCBleHRlbmRzIGl0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gQSBsaXN0ZW5lciBmb3IgdGhlIGBsaXN0ZW5pbmdgIGV2ZW50XG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHN1cGVyKCk7XG5cbiAgICBvcHRpb25zID0ge1xuICAgICAgbWF4UGF5bG9hZDogMTAwICogMTAyNCAqIDEwMjQsXG4gICAgICBza2lwVVRGOFZhbGlkYXRpb246IGZhbHNlLFxuICAgICAgcGVyTWVzc2FnZURlZmxhdGU6IGZhbHNlLFxuICAgICAgaGFuZGxlUHJvdG9jb2xzOiBudWxsLFxuICAgICAgY2xpZW50VHJhY2tpbmc6IHRydWUsXG4gICAgICB2ZXJpZnlDbGllbnQ6IG51bGwsXG4gICAgICBub1NlcnZlcjogZmFsc2UsXG4gICAgICBiYWNrbG9nOiBudWxsLCAvLyB1c2UgZGVmYXVsdCAoNTExIGFzIGltcGxlbWVudGVkIGluIG5ldC5qcylcbiAgICAgIHNlcnZlcjogbnVsbCxcbiAgICAgIGhvc3Q6IG51bGwsXG4gICAgICBwYXRoOiBudWxsLFxuICAgICAgcG9ydDogbnVsbCxcbiAgICAgIFdlYlNvY2tldCxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9O1xuXG4gICAgaWYgKFxuICAgICAgKG9wdGlvbnMucG9ydCA9PSBudWxsICYmICFvcHRpb25zLnNlcnZlciAmJiAhb3B0aW9ucy5ub1NlcnZlcikgfHxcbiAgICAgIChvcHRpb25zLnBvcnQgIT0gbnVsbCAmJiAob3B0aW9ucy5zZXJ2ZXIgfHwgb3B0aW9ucy5ub1NlcnZlcikpIHx8XG4gICAgICAob3B0aW9ucy5zZXJ2ZXIgJiYgb3B0aW9ucy5ub1NlcnZlcilcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICdPbmUgYW5kIG9ubHkgb25lIG9mIHRoZSBcInBvcnRcIiwgXCJzZXJ2ZXJcIiwgb3IgXCJub1NlcnZlclwiIG9wdGlvbnMgJyArXG4gICAgICAgICAgJ211c3QgYmUgc3BlY2lmaWVkJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5wb3J0ICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX3NlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKChyZXEsIHJlcykgPT4ge1xuICAgICAgICBjb25zdCBib2R5ID0gaHR0cC5TVEFUVVNfQ09ERVNbNDI2XTtcblxuICAgICAgICByZXMud3JpdGVIZWFkKDQyNiwge1xuICAgICAgICAgICdDb250ZW50LUxlbmd0aCc6IGJvZHkubGVuZ3RoLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAndGV4dC9wbGFpbidcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy5lbmQoYm9keSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuX3NlcnZlci5saXN0ZW4oXG4gICAgICAgIG9wdGlvbnMucG9ydCxcbiAgICAgICAgb3B0aW9ucy5ob3N0LFxuICAgICAgICBvcHRpb25zLmJhY2tsb2csXG4gICAgICAgIGNhbGxiYWNrXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5zZXJ2ZXIpIHtcbiAgICAgIHRoaXMuX3NlcnZlciA9IG9wdGlvbnMuc2VydmVyO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zZXJ2ZXIpIHtcbiAgICAgIGNvbnN0IGVtaXRDb25uZWN0aW9uID0gdGhpcy5lbWl0LmJpbmQodGhpcywgJ2Nvbm5lY3Rpb24nKTtcblxuICAgICAgdGhpcy5fcmVtb3ZlTGlzdGVuZXJzID0gYWRkTGlzdGVuZXJzKHRoaXMuX3NlcnZlciwge1xuICAgICAgICBsaXN0ZW5pbmc6IHRoaXMuZW1pdC5iaW5kKHRoaXMsICdsaXN0ZW5pbmcnKSxcbiAgICAgICAgZXJyb3I6IHRoaXMuZW1pdC5iaW5kKHRoaXMsICdlcnJvcicpLFxuICAgICAgICB1cGdyYWRlOiAocmVxLCBzb2NrZXQsIGhlYWQpID0+IHtcbiAgICAgICAgICB0aGlzLmhhbmRsZVVwZ3JhZGUocmVxLCBzb2NrZXQsIGhlYWQsIGVtaXRDb25uZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMucGVyTWVzc2FnZURlZmxhdGUgPT09IHRydWUpIG9wdGlvbnMucGVyTWVzc2FnZURlZmxhdGUgPSB7fTtcbiAgICBpZiAob3B0aW9ucy5jbGllbnRUcmFja2luZykge1xuICAgICAgdGhpcy5jbGllbnRzID0gbmV3IFNldCgpO1xuICAgICAgdGhpcy5fc2hvdWxkRW1pdENsb3NlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLl9zdGF0ZSA9IFJVTk5JTkc7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYm91bmQgYWRkcmVzcywgdGhlIGFkZHJlc3MgZmFtaWx5IG5hbWUsIGFuZCBwb3J0IG9mIHRoZSBzZXJ2ZXJcbiAgICogYXMgcmVwb3J0ZWQgYnkgdGhlIG9wZXJhdGluZyBzeXN0ZW0gaWYgbGlzdGVuaW5nIG9uIGFuIElQIHNvY2tldC5cbiAgICogSWYgdGhlIHNlcnZlciBpcyBsaXN0ZW5pbmcgb24gYSBwaXBlIG9yIFVOSVggZG9tYWluIHNvY2tldCwgdGhlIG5hbWUgaXNcbiAgICogcmV0dXJuZWQgYXMgYSBzdHJpbmcuXG4gICAqXG4gICAqIEByZXR1cm4geyhPYmplY3R8U3RyaW5nfG51bGwpfSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VydmVyXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFkZHJlc3MoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5ub1NlcnZlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc2VydmVyIGlzIG9wZXJhdGluZyBpbiBcIm5vU2VydmVyXCIgbW9kZScpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fc2VydmVyKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gdGhpcy5fc2VydmVyLmFkZHJlc3MoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIHRoZSBzZXJ2ZXIgZnJvbSBhY2NlcHRpbmcgbmV3IGNvbm5lY3Rpb25zIGFuZCBlbWl0IHRoZSBgJ2Nsb3NlJ2AgZXZlbnRcbiAgICogd2hlbiBhbGwgZXhpc3RpbmcgY29ubmVjdGlvbnMgYXJlIGNsb3NlZC5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXSBBIG9uZS10aW1lIGxpc3RlbmVyIGZvciB0aGUgYCdjbG9zZSdgIGV2ZW50XG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNsb3NlKGNiKSB7XG4gICAgaWYgKHRoaXMuX3N0YXRlID09PSBDTE9TRUQpIHtcbiAgICAgIGlmIChjYikge1xuICAgICAgICB0aGlzLm9uY2UoJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgIGNiKG5ldyBFcnJvcignVGhlIHNlcnZlciBpcyBub3QgcnVubmluZycpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlLCB0aGlzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoY2IpIHRoaXMub25jZSgnY2xvc2UnLCBjYik7XG5cbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IENMT1NJTkcpIHJldHVybjtcbiAgICB0aGlzLl9zdGF0ZSA9IENMT1NJTkc7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLm5vU2VydmVyIHx8IHRoaXMub3B0aW9ucy5zZXJ2ZXIpIHtcbiAgICAgIGlmICh0aGlzLl9zZXJ2ZXIpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlTGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX3JlbW92ZUxpc3RlbmVycyA9IHRoaXMuX3NlcnZlciA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmNsaWVudHMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudHMuc2l6ZSkge1xuICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlLCB0aGlzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9zaG91bGRFbWl0Q2xvc2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGVtaXRDbG9zZSwgdGhpcyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNlcnZlciA9IHRoaXMuX3NlcnZlcjtcblxuICAgICAgdGhpcy5fcmVtb3ZlTGlzdGVuZXJzKCk7XG4gICAgICB0aGlzLl9yZW1vdmVMaXN0ZW5lcnMgPSB0aGlzLl9zZXJ2ZXIgPSBudWxsO1xuXG4gICAgICAvL1xuICAgICAgLy8gVGhlIEhUVFAvUyBzZXJ2ZXIgd2FzIGNyZWF0ZWQgaW50ZXJuYWxseS4gQ2xvc2UgaXQsIGFuZCByZWx5IG9uIGl0c1xuICAgICAgLy8gYCdjbG9zZSdgIGV2ZW50LlxuICAgICAgLy9cbiAgICAgIHNlcnZlci5jbG9zZSgoKSA9PiB7XG4gICAgICAgIGVtaXRDbG9zZSh0aGlzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZWUgaWYgYSBnaXZlbiByZXF1ZXN0IHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoaXMgc2VydmVyIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge2h0dHAuSW5jb21pbmdNZXNzYWdlfSByZXEgUmVxdWVzdCBvYmplY3QgdG8gaW5zcGVjdFxuICAgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIHJlcXVlc3QgaXMgdmFsaWQsIGVsc2UgYGZhbHNlYFxuICAgKiBAcHVibGljXG4gICAqL1xuICBzaG91bGRIYW5kbGUocmVxKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5wYXRoKSB7XG4gICAgICBjb25zdCBpbmRleCA9IHJlcS51cmwuaW5kZXhPZignPycpO1xuICAgICAgY29uc3QgcGF0aG5hbWUgPSBpbmRleCAhPT0gLTEgPyByZXEudXJsLnNsaWNlKDAsIGluZGV4KSA6IHJlcS51cmw7XG5cbiAgICAgIGlmIChwYXRobmFtZSAhPT0gdGhpcy5vcHRpb25zLnBhdGgpIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgYSBIVFRQIFVwZ3JhZGUgcmVxdWVzdC5cbiAgICpcbiAgICogQHBhcmFtIHtodHRwLkluY29taW5nTWVzc2FnZX0gcmVxIFRoZSByZXF1ZXN0IG9iamVjdFxuICAgKiBAcGFyYW0geyhuZXQuU29ja2V0fHRscy5Tb2NrZXQpfSBzb2NrZXQgVGhlIG5ldHdvcmsgc29ja2V0IGJldHdlZW4gdGhlXG4gICAqICAgICBzZXJ2ZXIgYW5kIGNsaWVudFxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gaGVhZCBUaGUgZmlyc3QgcGFja2V0IG9mIHRoZSB1cGdyYWRlZCBzdHJlYW1cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgaGFuZGxlVXBncmFkZShyZXEsIHNvY2tldCwgaGVhZCwgY2IpIHtcbiAgICBzb2NrZXQub24oJ2Vycm9yJywgc29ja2V0T25FcnJvcik7XG5cbiAgICBjb25zdCBrZXkgPSByZXEuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1rZXknXTtcbiAgICBjb25zdCB2ZXJzaW9uID0gK3JlcS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LXZlcnNpb24nXTtcblxuICAgIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykge1xuICAgICAgY29uc3QgbWVzc2FnZSA9ICdJbnZhbGlkIEhUVFAgbWV0aG9kJztcbiAgICAgIGFib3J0SGFuZHNoYWtlT3JFbWl0d3NDbGllbnRFcnJvcih0aGlzLCByZXEsIHNvY2tldCwgNDA1LCBtZXNzYWdlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAocmVxLmhlYWRlcnMudXBncmFkZS50b0xvd2VyQ2FzZSgpICE9PSAnd2Vic29ja2V0Jykge1xuICAgICAgY29uc3QgbWVzc2FnZSA9ICdJbnZhbGlkIFVwZ3JhZGUgaGVhZGVyJztcbiAgICAgIGFib3J0SGFuZHNoYWtlT3JFbWl0d3NDbGllbnRFcnJvcih0aGlzLCByZXEsIHNvY2tldCwgNDAwLCBtZXNzYWdlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWtleSB8fCAha2V5UmVnZXgudGVzdChrZXkpKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gJ01pc3Npbmcgb3IgaW52YWxpZCBTZWMtV2ViU29ja2V0LUtleSBoZWFkZXInO1xuICAgICAgYWJvcnRIYW5kc2hha2VPckVtaXR3c0NsaWVudEVycm9yKHRoaXMsIHJlcSwgc29ja2V0LCA0MDAsIG1lc3NhZ2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh2ZXJzaW9uICE9PSA4ICYmIHZlcnNpb24gIT09IDEzKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gJ01pc3Npbmcgb3IgaW52YWxpZCBTZWMtV2ViU29ja2V0LVZlcnNpb24gaGVhZGVyJztcbiAgICAgIGFib3J0SGFuZHNoYWtlT3JFbWl0d3NDbGllbnRFcnJvcih0aGlzLCByZXEsIHNvY2tldCwgNDAwLCBtZXNzYWdlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2hvdWxkSGFuZGxlKHJlcSkpIHtcbiAgICAgIGFib3J0SGFuZHNoYWtlKHNvY2tldCwgNDAwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzZWNXZWJTb2NrZXRQcm90b2NvbCA9IHJlcS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LXByb3RvY29sJ107XG4gICAgbGV0IHByb3RvY29scyA9IG5ldyBTZXQoKTtcblxuICAgIGlmIChzZWNXZWJTb2NrZXRQcm90b2NvbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0cnkge1xuICAgICAgICBwcm90b2NvbHMgPSBzdWJwcm90b2NvbC5wYXJzZShzZWNXZWJTb2NrZXRQcm90b2NvbCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9ICdJbnZhbGlkIFNlYy1XZWJTb2NrZXQtUHJvdG9jb2wgaGVhZGVyJztcbiAgICAgICAgYWJvcnRIYW5kc2hha2VPckVtaXR3c0NsaWVudEVycm9yKHRoaXMsIHJlcSwgc29ja2V0LCA0MDAsIG1lc3NhZ2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2VjV2ViU29ja2V0RXh0ZW5zaW9ucyA9IHJlcS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LWV4dGVuc2lvbnMnXTtcbiAgICBjb25zdCBleHRlbnNpb25zID0ge307XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLm9wdGlvbnMucGVyTWVzc2FnZURlZmxhdGUgJiZcbiAgICAgIHNlY1dlYlNvY2tldEV4dGVuc2lvbnMgIT09IHVuZGVmaW5lZFxuICAgICkge1xuICAgICAgY29uc3QgcGVyTWVzc2FnZURlZmxhdGUgPSBuZXcgUGVyTWVzc2FnZURlZmxhdGUoXG4gICAgICAgIHRoaXMub3B0aW9ucy5wZXJNZXNzYWdlRGVmbGF0ZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdGhpcy5vcHRpb25zLm1heFBheWxvYWRcbiAgICAgICk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG9mZmVycyA9IGV4dGVuc2lvbi5wYXJzZShzZWNXZWJTb2NrZXRFeHRlbnNpb25zKTtcblxuICAgICAgICBpZiAob2ZmZXJzW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKSB7XG4gICAgICAgICAgcGVyTWVzc2FnZURlZmxhdGUuYWNjZXB0KG9mZmVyc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSk7XG4gICAgICAgICAgZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSA9IHBlck1lc3NhZ2VEZWZsYXRlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9XG4gICAgICAgICAgJ0ludmFsaWQgb3IgdW5hY2NlcHRhYmxlIFNlYy1XZWJTb2NrZXQtRXh0ZW5zaW9ucyBoZWFkZXInO1xuICAgICAgICBhYm9ydEhhbmRzaGFrZU9yRW1pdHdzQ2xpZW50RXJyb3IodGhpcywgcmVxLCBzb2NrZXQsIDQwMCwgbWVzc2FnZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIE9wdGlvbmFsbHkgY2FsbCBleHRlcm5hbCBjbGllbnQgdmVyaWZpY2F0aW9uIGhhbmRsZXIuXG4gICAgLy9cbiAgICBpZiAodGhpcy5vcHRpb25zLnZlcmlmeUNsaWVudCkge1xuICAgICAgY29uc3QgaW5mbyA9IHtcbiAgICAgICAgb3JpZ2luOlxuICAgICAgICAgIHJlcS5oZWFkZXJzW2Ake3ZlcnNpb24gPT09IDggPyAnc2VjLXdlYnNvY2tldC1vcmlnaW4nIDogJ29yaWdpbid9YF0sXG4gICAgICAgIHNlY3VyZTogISEocmVxLnNvY2tldC5hdXRob3JpemVkIHx8IHJlcS5zb2NrZXQuZW5jcnlwdGVkKSxcbiAgICAgICAgcmVxXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnZlcmlmeUNsaWVudC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnZlcmlmeUNsaWVudChpbmZvLCAodmVyaWZpZWQsIGNvZGUsIG1lc3NhZ2UsIGhlYWRlcnMpID0+IHtcbiAgICAgICAgICBpZiAoIXZlcmlmaWVkKSB7XG4gICAgICAgICAgICByZXR1cm4gYWJvcnRIYW5kc2hha2Uoc29ja2V0LCBjb2RlIHx8IDQwMSwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5jb21wbGV0ZVVwZ3JhZGUoXG4gICAgICAgICAgICBleHRlbnNpb25zLFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgcHJvdG9jb2xzLFxuICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgc29ja2V0LFxuICAgICAgICAgICAgaGVhZCxcbiAgICAgICAgICAgIGNiXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMudmVyaWZ5Q2xpZW50KGluZm8pKSByZXR1cm4gYWJvcnRIYW5kc2hha2Uoc29ja2V0LCA0MDEpO1xuICAgIH1cblxuICAgIHRoaXMuY29tcGxldGVVcGdyYWRlKGV4dGVuc2lvbnMsIGtleSwgcHJvdG9jb2xzLCByZXEsIHNvY2tldCwgaGVhZCwgY2IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZ3JhZGUgdGhlIGNvbm5lY3Rpb24gdG8gV2ViU29ja2V0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZXh0ZW5zaW9ucyBUaGUgYWNjZXB0ZWQgZXh0ZW5zaW9uc1xuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSB2YWx1ZSBvZiB0aGUgYFNlYy1XZWJTb2NrZXQtS2V5YCBoZWFkZXJcbiAgICogQHBhcmFtIHtTZXR9IHByb3RvY29scyBUaGUgc3VicHJvdG9jb2xzXG4gICAqIEBwYXJhbSB7aHR0cC5JbmNvbWluZ01lc3NhZ2V9IHJlcSBUaGUgcmVxdWVzdCBvYmplY3RcbiAgICogQHBhcmFtIHsobmV0LlNvY2tldHx0bHMuU29ja2V0KX0gc29ja2V0IFRoZSBuZXR3b3JrIHNvY2tldCBiZXR3ZWVuIHRoZVxuICAgKiAgICAgc2VydmVyIGFuZCBjbGllbnRcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGhlYWQgVGhlIGZpcnN0IHBhY2tldCBvZiB0aGUgdXBncmFkZWQgc3RyZWFtXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBJZiBjYWxsZWQgbW9yZSB0aGFuIG9uY2Ugd2l0aCB0aGUgc2FtZSBzb2NrZXRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbXBsZXRlVXBncmFkZShleHRlbnNpb25zLCBrZXksIHByb3RvY29scywgcmVxLCBzb2NrZXQsIGhlYWQsIGNiKSB7XG4gICAgLy9cbiAgICAvLyBEZXN0cm95IHRoZSBzb2NrZXQgaWYgdGhlIGNsaWVudCBoYXMgYWxyZWFkeSBzZW50IGEgRklOIHBhY2tldC5cbiAgICAvL1xuICAgIGlmICghc29ja2V0LnJlYWRhYmxlIHx8ICFzb2NrZXQud3JpdGFibGUpIHJldHVybiBzb2NrZXQuZGVzdHJveSgpO1xuXG4gICAgaWYgKHNvY2tldFtrV2ViU29ja2V0XSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnc2VydmVyLmhhbmRsZVVwZ3JhZGUoKSB3YXMgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIHdpdGggdGhlIHNhbWUgJyArXG4gICAgICAgICAgJ3NvY2tldCwgcG9zc2libHkgZHVlIHRvIGEgbWlzY29uZmlndXJhdGlvbidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3N0YXRlID4gUlVOTklORykgcmV0dXJuIGFib3J0SGFuZHNoYWtlKHNvY2tldCwgNTAzKTtcblxuICAgIGNvbnN0IGRpZ2VzdCA9IGNyZWF0ZUhhc2goJ3NoYTEnKVxuICAgICAgLnVwZGF0ZShrZXkgKyBHVUlEKVxuICAgICAgLmRpZ2VzdCgnYmFzZTY0Jyk7XG5cbiAgICBjb25zdCBoZWFkZXJzID0gW1xuICAgICAgJ0hUVFAvMS4xIDEwMSBTd2l0Y2hpbmcgUHJvdG9jb2xzJyxcbiAgICAgICdVcGdyYWRlOiB3ZWJzb2NrZXQnLFxuICAgICAgJ0Nvbm5lY3Rpb246IFVwZ3JhZGUnLFxuICAgICAgYFNlYy1XZWJTb2NrZXQtQWNjZXB0OiAke2RpZ2VzdH1gXG4gICAgXTtcblxuICAgIGNvbnN0IHdzID0gbmV3IHRoaXMub3B0aW9ucy5XZWJTb2NrZXQobnVsbCk7XG5cbiAgICBpZiAocHJvdG9jb2xzLnNpemUpIHtcbiAgICAgIC8vXG4gICAgICAvLyBPcHRpb25hbGx5IGNhbGwgZXh0ZXJuYWwgcHJvdG9jb2wgc2VsZWN0aW9uIGhhbmRsZXIuXG4gICAgICAvL1xuICAgICAgY29uc3QgcHJvdG9jb2wgPSB0aGlzLm9wdGlvbnMuaGFuZGxlUHJvdG9jb2xzXG4gICAgICAgID8gdGhpcy5vcHRpb25zLmhhbmRsZVByb3RvY29scyhwcm90b2NvbHMsIHJlcSlcbiAgICAgICAgOiBwcm90b2NvbHMudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuXG4gICAgICBpZiAocHJvdG9jb2wpIHtcbiAgICAgICAgaGVhZGVycy5wdXNoKGBTZWMtV2ViU29ja2V0LVByb3RvY29sOiAke3Byb3RvY29sfWApO1xuICAgICAgICB3cy5fcHJvdG9jb2wgPSBwcm90b2NvbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSkge1xuICAgICAgY29uc3QgcGFyYW1zID0gZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXS5wYXJhbXM7XG4gICAgICBjb25zdCB2YWx1ZSA9IGV4dGVuc2lvbi5mb3JtYXQoe1xuICAgICAgICBbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV06IFtwYXJhbXNdXG4gICAgICB9KTtcbiAgICAgIGhlYWRlcnMucHVzaChgU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zOiAke3ZhbHVlfWApO1xuICAgICAgd3MuX2V4dGVuc2lvbnMgPSBleHRlbnNpb25zO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy8gQWxsb3cgZXh0ZXJuYWwgbW9kaWZpY2F0aW9uL2luc3BlY3Rpb24gb2YgaGFuZHNoYWtlIGhlYWRlcnMuXG4gICAgLy9cbiAgICB0aGlzLmVtaXQoJ2hlYWRlcnMnLCBoZWFkZXJzLCByZXEpO1xuXG4gICAgc29ja2V0LndyaXRlKGhlYWRlcnMuY29uY2F0KCdcXHJcXG4nKS5qb2luKCdcXHJcXG4nKSk7XG4gICAgc29ja2V0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIHNvY2tldE9uRXJyb3IpO1xuXG4gICAgd3Muc2V0U29ja2V0KHNvY2tldCwgaGVhZCwge1xuICAgICAgbWF4UGF5bG9hZDogdGhpcy5vcHRpb25zLm1heFBheWxvYWQsXG4gICAgICBza2lwVVRGOFZhbGlkYXRpb246IHRoaXMub3B0aW9ucy5za2lwVVRGOFZhbGlkYXRpb25cbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmNsaWVudHMpIHtcbiAgICAgIHRoaXMuY2xpZW50cy5hZGQod3MpO1xuICAgICAgd3Mub24oJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsaWVudHMuZGVsZXRlKHdzKTtcblxuICAgICAgICBpZiAodGhpcy5fc2hvdWxkRW1pdENsb3NlICYmICF0aGlzLmNsaWVudHMuc2l6ZSkge1xuICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2Iod3MsIHJlcSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBXZWJTb2NrZXRTZXJ2ZXI7XG5cbi8qKlxuICogQWRkIGV2ZW50IGxpc3RlbmVycyBvbiBhbiBgRXZlbnRFbWl0dGVyYCB1c2luZyBhIG1hcCBvZiA8ZXZlbnQsIGxpc3RlbmVyPlxuICogcGFpcnMuXG4gKlxuICogQHBhcmFtIHtFdmVudEVtaXR0ZXJ9IHNlcnZlciBUaGUgZXZlbnQgZW1pdHRlclxuICogQHBhcmFtIHtPYmplY3QuPFN0cmluZywgRnVuY3Rpb24+fSBtYXAgVGhlIGxpc3RlbmVycyB0byBhZGRcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRoYXQgd2lsbCByZW1vdmUgdGhlIGFkZGVkIGxpc3RlbmVycyB3aGVuXG4gKiAgICAgY2FsbGVkXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcnMoc2VydmVyLCBtYXApIHtcbiAgZm9yIChjb25zdCBldmVudCBvZiBPYmplY3Qua2V5cyhtYXApKSBzZXJ2ZXIub24oZXZlbnQsIG1hcFtldmVudF0pO1xuXG4gIHJldHVybiBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcnMoKSB7XG4gICAgZm9yIChjb25zdCBldmVudCBvZiBPYmplY3Qua2V5cyhtYXApKSB7XG4gICAgICBzZXJ2ZXIucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIG1hcFtldmVudF0pO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBFbWl0IGEgYCdjbG9zZSdgIGV2ZW50IG9uIGFuIGBFdmVudEVtaXR0ZXJgLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRFbWl0dGVyfSBzZXJ2ZXIgVGhlIGV2ZW50IGVtaXR0ZXJcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGVtaXRDbG9zZShzZXJ2ZXIpIHtcbiAgc2VydmVyLl9zdGF0ZSA9IENMT1NFRDtcbiAgc2VydmVyLmVtaXQoJ2Nsb3NlJyk7XG59XG5cbi8qKlxuICogSGFuZGxlIHNvY2tldCBlcnJvcnMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc29ja2V0T25FcnJvcigpIHtcbiAgdGhpcy5kZXN0cm95KCk7XG59XG5cbi8qKlxuICogQ2xvc2UgdGhlIGNvbm5lY3Rpb24gd2hlbiBwcmVjb25kaXRpb25zIGFyZSBub3QgZnVsZmlsbGVkLlxuICpcbiAqIEBwYXJhbSB7KG5ldC5Tb2NrZXR8dGxzLlNvY2tldCl9IHNvY2tldCBUaGUgc29ja2V0IG9mIHRoZSB1cGdyYWRlIHJlcXVlc3RcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlIFRoZSBIVFRQIHJlc3BvbnNlIHN0YXR1cyBjb2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gW21lc3NhZ2VdIFRoZSBIVFRQIHJlc3BvbnNlIGJvZHlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbaGVhZGVyc10gQWRkaXRpb25hbCBIVFRQIHJlc3BvbnNlIGhlYWRlcnNcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFib3J0SGFuZHNoYWtlKHNvY2tldCwgY29kZSwgbWVzc2FnZSwgaGVhZGVycykge1xuICAvL1xuICAvLyBUaGUgc29ja2V0IGlzIHdyaXRhYmxlIHVubGVzcyB0aGUgdXNlciBkZXN0cm95ZWQgb3IgZW5kZWQgaXQgYmVmb3JlIGNhbGxpbmdcbiAgLy8gYHNlcnZlci5oYW5kbGVVcGdyYWRlKClgIG9yIGluIHRoZSBgdmVyaWZ5Q2xpZW50YCBmdW5jdGlvbiwgd2hpY2ggaXMgYSB1c2VyXG4gIC8vIGVycm9yLiBIYW5kbGluZyB0aGlzIGRvZXMgbm90IG1ha2UgbXVjaCBzZW5zZSBhcyB0aGUgd29yc3QgdGhhdCBjYW4gaGFwcGVuXG4gIC8vIGlzIHRoYXQgc29tZSBvZiB0aGUgZGF0YSB3cml0dGVuIGJ5IHRoZSB1c2VyIG1pZ2h0IGJlIGRpc2NhcmRlZCBkdWUgdG8gdGhlXG4gIC8vIGNhbGwgdG8gYHNvY2tldC5lbmQoKWAgYmVsb3csIHdoaWNoIHRyaWdnZXJzIGFuIGAnZXJyb3InYCBldmVudCB0aGF0IGluXG4gIC8vIHR1cm4gY2F1c2VzIHRoZSBzb2NrZXQgdG8gYmUgZGVzdHJveWVkLlxuICAvL1xuICBtZXNzYWdlID0gbWVzc2FnZSB8fCBodHRwLlNUQVRVU19DT0RFU1tjb2RlXTtcbiAgaGVhZGVycyA9IHtcbiAgICBDb25uZWN0aW9uOiAnY2xvc2UnLFxuICAgICdDb250ZW50LVR5cGUnOiAndGV4dC9odG1sJyxcbiAgICAnQ29udGVudC1MZW5ndGgnOiBCdWZmZXIuYnl0ZUxlbmd0aChtZXNzYWdlKSxcbiAgICAuLi5oZWFkZXJzXG4gIH07XG5cbiAgc29ja2V0Lm9uY2UoJ2ZpbmlzaCcsIHNvY2tldC5kZXN0cm95KTtcblxuICBzb2NrZXQuZW5kKFxuICAgIGBIVFRQLzEuMSAke2NvZGV9ICR7aHR0cC5TVEFUVVNfQ09ERVNbY29kZV19XFxyXFxuYCArXG4gICAgICBPYmplY3Qua2V5cyhoZWFkZXJzKVxuICAgICAgICAubWFwKChoKSA9PiBgJHtofTogJHtoZWFkZXJzW2hdfWApXG4gICAgICAgIC5qb2luKCdcXHJcXG4nKSArXG4gICAgICAnXFxyXFxuXFxyXFxuJyArXG4gICAgICBtZXNzYWdlXG4gICk7XG59XG5cbi8qKlxuICogRW1pdCBhIGAnd3NDbGllbnRFcnJvcidgIGV2ZW50IG9uIGEgYFdlYlNvY2tldFNlcnZlcmAgaWYgdGhlcmUgaXMgYXQgbGVhc3RcbiAqIG9uZSBsaXN0ZW5lciBmb3IgaXQsIG90aGVyd2lzZSBjYWxsIGBhYm9ydEhhbmRzaGFrZSgpYC5cbiAqXG4gKiBAcGFyYW0ge1dlYlNvY2tldFNlcnZlcn0gc2VydmVyIFRoZSBXZWJTb2NrZXQgc2VydmVyXG4gKiBAcGFyYW0ge2h0dHAuSW5jb21pbmdNZXNzYWdlfSByZXEgVGhlIHJlcXVlc3Qgb2JqZWN0XG4gKiBAcGFyYW0geyhuZXQuU29ja2V0fHRscy5Tb2NrZXQpfSBzb2NrZXQgVGhlIHNvY2tldCBvZiB0aGUgdXBncmFkZSByZXF1ZXN0XG4gKiBAcGFyYW0ge051bWJlcn0gY29kZSBUaGUgSFRUUCByZXNwb25zZSBzdGF0dXMgY29kZVxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgVGhlIEhUVFAgcmVzcG9uc2UgYm9keVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWJvcnRIYW5kc2hha2VPckVtaXR3c0NsaWVudEVycm9yKHNlcnZlciwgcmVxLCBzb2NrZXQsIGNvZGUsIG1lc3NhZ2UpIHtcbiAgaWYgKHNlcnZlci5saXN0ZW5lckNvdW50KCd3c0NsaWVudEVycm9yJykpIHtcbiAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoZXJyLCBhYm9ydEhhbmRzaGFrZU9yRW1pdHdzQ2xpZW50RXJyb3IpO1xuXG4gICAgc2VydmVyLmVtaXQoJ3dzQ2xpZW50RXJyb3InLCBlcnIsIHNvY2tldCwgcmVxKTtcbiAgfSBlbHNlIHtcbiAgICBhYm9ydEhhbmRzaGFrZShzb2NrZXQsIGNvZGUsIG1lc3NhZ2UpO1xuICB9XG59XG4iLCIvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IFtcImVycm9yXCIsIHsgXCJ2YXJzSWdub3JlUGF0dGVyblwiOiBcIl5SZWFkYWJsZSRcIiB9XSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpO1xuY29uc3QgaHR0cHMgPSByZXF1aXJlKCdodHRwcycpO1xuY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbmNvbnN0IG5ldCA9IHJlcXVpcmUoJ25ldCcpO1xuY29uc3QgdGxzID0gcmVxdWlyZSgndGxzJyk7XG5jb25zdCB7IHJhbmRvbUJ5dGVzLCBjcmVhdGVIYXNoIH0gPSByZXF1aXJlKCdjcnlwdG8nKTtcbmNvbnN0IHsgUmVhZGFibGUgfSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xuY29uc3QgeyBVUkwgfSA9IHJlcXVpcmUoJ3VybCcpO1xuXG5jb25zdCBQZXJNZXNzYWdlRGVmbGF0ZSA9IHJlcXVpcmUoJy4vcGVybWVzc2FnZS1kZWZsYXRlJyk7XG5jb25zdCBSZWNlaXZlciA9IHJlcXVpcmUoJy4vcmVjZWl2ZXInKTtcbmNvbnN0IFNlbmRlciA9IHJlcXVpcmUoJy4vc2VuZGVyJyk7XG5jb25zdCB7XG4gIEJJTkFSWV9UWVBFUyxcbiAgRU1QVFlfQlVGRkVSLFxuICBHVUlELFxuICBrRm9yT25FdmVudEF0dHJpYnV0ZSxcbiAga0xpc3RlbmVyLFxuICBrU3RhdHVzQ29kZSxcbiAga1dlYlNvY2tldCxcbiAgTk9PUFxufSA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5jb25zdCB7XG4gIEV2ZW50VGFyZ2V0OiB7IGFkZEV2ZW50TGlzdGVuZXIsIHJlbW92ZUV2ZW50TGlzdGVuZXIgfVxufSA9IHJlcXVpcmUoJy4vZXZlbnQtdGFyZ2V0Jyk7XG5jb25zdCB7IGZvcm1hdCwgcGFyc2UgfSA9IHJlcXVpcmUoJy4vZXh0ZW5zaW9uJyk7XG5jb25zdCB7IHRvQnVmZmVyIH0gPSByZXF1aXJlKCcuL2J1ZmZlci11dGlsJyk7XG5cbmNvbnN0IGNsb3NlVGltZW91dCA9IDMwICogMTAwMDtcbmNvbnN0IGtBYm9ydGVkID0gU3ltYm9sKCdrQWJvcnRlZCcpO1xuY29uc3QgcHJvdG9jb2xWZXJzaW9ucyA9IFs4LCAxM107XG5jb25zdCByZWFkeVN0YXRlcyA9IFsnQ09OTkVDVElORycsICdPUEVOJywgJ0NMT1NJTkcnLCAnQ0xPU0VEJ107XG5jb25zdCBzdWJwcm90b2NvbFJlZ2V4ID0gL15bISMkJSYnKitcXC0uMC05QS1aXl9gfGEten5dKyQvO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIFdlYlNvY2tldC5cbiAqXG4gKiBAZXh0ZW5kcyBFdmVudEVtaXR0ZXJcbiAqL1xuY2xhc3MgV2ViU29ja2V0IGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBgV2ViU29ja2V0YC5cbiAgICpcbiAgICogQHBhcmFtIHsoU3RyaW5nfFVSTCl9IGFkZHJlc3MgVGhlIFVSTCB0byB3aGljaCB0byBjb25uZWN0XG4gICAqIEBwYXJhbSB7KFN0cmluZ3xTdHJpbmdbXSl9IFtwcm90b2NvbHNdIFRoZSBzdWJwcm90b2NvbHNcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBDb25uZWN0aW9uIG9wdGlvbnNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGFkZHJlc3MsIHByb3RvY29scywgb3B0aW9ucykge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9iaW5hcnlUeXBlID0gQklOQVJZX1RZUEVTWzBdO1xuICAgIHRoaXMuX2Nsb3NlQ29kZSA9IDEwMDY7XG4gICAgdGhpcy5fY2xvc2VGcmFtZVJlY2VpdmVkID0gZmFsc2U7XG4gICAgdGhpcy5fY2xvc2VGcmFtZVNlbnQgPSBmYWxzZTtcbiAgICB0aGlzLl9jbG9zZU1lc3NhZ2UgPSBFTVBUWV9CVUZGRVI7XG4gICAgdGhpcy5fY2xvc2VUaW1lciA9IG51bGw7XG4gICAgdGhpcy5fZXh0ZW5zaW9ucyA9IHt9O1xuICAgIHRoaXMuX3BhdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3Byb3RvY29sID0gJyc7XG4gICAgdGhpcy5fcmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DT05ORUNUSU5HO1xuICAgIHRoaXMuX3JlY2VpdmVyID0gbnVsbDtcbiAgICB0aGlzLl9zZW5kZXIgPSBudWxsO1xuICAgIHRoaXMuX3NvY2tldCA9IG51bGw7XG5cbiAgICBpZiAoYWRkcmVzcyAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5fYnVmZmVyZWRBbW91bnQgPSAwO1xuICAgICAgdGhpcy5faXNTZXJ2ZXIgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3JlZGlyZWN0cyA9IDA7XG5cbiAgICAgIGlmIChwcm90b2NvbHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm90b2NvbHMgPSBbXTtcbiAgICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkocHJvdG9jb2xzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHByb3RvY29scyA9PT0gJ29iamVjdCcgJiYgcHJvdG9jb2xzICE9PSBudWxsKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IHByb3RvY29scztcbiAgICAgICAgICBwcm90b2NvbHMgPSBbXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm90b2NvbHMgPSBbcHJvdG9jb2xzXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpbml0QXNDbGllbnQodGhpcywgYWRkcmVzcywgcHJvdG9jb2xzLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faXNTZXJ2ZXIgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGRldmlhdGVzIGZyb20gdGhlIFdIQVRXRyBpbnRlcmZhY2Ugc2luY2Ugd3MgZG9lc24ndCBzdXBwb3J0IHRoZVxuICAgKiByZXF1aXJlZCBkZWZhdWx0IFwiYmxvYlwiIHR5cGUgKGluc3RlYWQgd2UgZGVmaW5lIGEgY3VzdG9tIFwibm9kZWJ1ZmZlclwiXG4gICAqIHR5cGUpLlxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGJpbmFyeVR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2JpbmFyeVR5cGU7XG4gIH1cblxuICBzZXQgYmluYXJ5VHlwZSh0eXBlKSB7XG4gICAgaWYgKCFCSU5BUllfVFlQRVMuaW5jbHVkZXModHlwZSkpIHJldHVybjtcblxuICAgIHRoaXMuX2JpbmFyeVR5cGUgPSB0eXBlO1xuXG4gICAgLy9cbiAgICAvLyBBbGxvdyB0byBjaGFuZ2UgYGJpbmFyeVR5cGVgIG9uIHRoZSBmbHkuXG4gICAgLy9cbiAgICBpZiAodGhpcy5fcmVjZWl2ZXIpIHRoaXMuX3JlY2VpdmVyLl9iaW5hcnlUeXBlID0gdHlwZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0IGJ1ZmZlcmVkQW1vdW50KCkge1xuICAgIGlmICghdGhpcy5fc29ja2V0KSByZXR1cm4gdGhpcy5fYnVmZmVyZWRBbW91bnQ7XG5cbiAgICByZXR1cm4gdGhpcy5fc29ja2V0Ll93cml0YWJsZVN0YXRlLmxlbmd0aCArIHRoaXMuX3NlbmRlci5fYnVmZmVyZWRCeXRlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGV4dGVuc2lvbnMoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX2V4dGVuc2lvbnMpLmpvaW4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG4gIGdldCBpc1BhdXNlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGF1c2VkO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGdldCBvbmNsb3NlKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGdldCBvbmVycm9yKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGdldCBvbm9wZW4oKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge0Z1bmN0aW9ufVxuICAgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgZ2V0IG9ubWVzc2FnZSgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IHByb3RvY29sKCkge1xuICAgIHJldHVybiB0aGlzLl9wcm90b2NvbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0IHJlYWR5U3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlYWR5U3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VybDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdXAgdGhlIHNvY2tldCBhbmQgdGhlIGludGVybmFsIHJlc291cmNlcy5cbiAgICpcbiAgICogQHBhcmFtIHsobmV0LlNvY2tldHx0bHMuU29ja2V0KX0gc29ja2V0IFRoZSBuZXR3b3JrIHNvY2tldCBiZXR3ZWVuIHRoZVxuICAgKiAgICAgc2VydmVyIGFuZCBjbGllbnRcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGhlYWQgVGhlIGZpcnN0IHBhY2tldCBvZiB0aGUgdXBncmFkZWQgc3RyZWFtXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmdlbmVyYXRlTWFza10gVGhlIGZ1bmN0aW9uIHVzZWQgdG8gZ2VuZXJhdGUgdGhlXG4gICAqICAgICBtYXNraW5nIGtleVxuICAgKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMubWF4UGF5bG9hZD0wXSBUaGUgbWF4aW11bSBhbGxvd2VkIG1lc3NhZ2Ugc2l6ZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnNraXBVVEY4VmFsaWRhdGlvbj1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3JcbiAgICogICAgIG5vdCB0byBza2lwIFVURi04IHZhbGlkYXRpb24gZm9yIHRleHQgYW5kIGNsb3NlIG1lc3NhZ2VzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzZXRTb2NrZXQoc29ja2V0LCBoZWFkLCBvcHRpb25zKSB7XG4gICAgY29uc3QgcmVjZWl2ZXIgPSBuZXcgUmVjZWl2ZXIoe1xuICAgICAgYmluYXJ5VHlwZTogdGhpcy5iaW5hcnlUeXBlLFxuICAgICAgZXh0ZW5zaW9uczogdGhpcy5fZXh0ZW5zaW9ucyxcbiAgICAgIGlzU2VydmVyOiB0aGlzLl9pc1NlcnZlcixcbiAgICAgIG1heFBheWxvYWQ6IG9wdGlvbnMubWF4UGF5bG9hZCxcbiAgICAgIHNraXBVVEY4VmFsaWRhdGlvbjogb3B0aW9ucy5za2lwVVRGOFZhbGlkYXRpb25cbiAgICB9KTtcblxuICAgIHRoaXMuX3NlbmRlciA9IG5ldyBTZW5kZXIoc29ja2V0LCB0aGlzLl9leHRlbnNpb25zLCBvcHRpb25zLmdlbmVyYXRlTWFzayk7XG4gICAgdGhpcy5fcmVjZWl2ZXIgPSByZWNlaXZlcjtcbiAgICB0aGlzLl9zb2NrZXQgPSBzb2NrZXQ7XG5cbiAgICByZWNlaXZlcltrV2ViU29ja2V0XSA9IHRoaXM7XG4gICAgc29ja2V0W2tXZWJTb2NrZXRdID0gdGhpcztcblxuICAgIHJlY2VpdmVyLm9uKCdjb25jbHVkZScsIHJlY2VpdmVyT25Db25jbHVkZSk7XG4gICAgcmVjZWl2ZXIub24oJ2RyYWluJywgcmVjZWl2ZXJPbkRyYWluKTtcbiAgICByZWNlaXZlci5vbignZXJyb3InLCByZWNlaXZlck9uRXJyb3IpO1xuICAgIHJlY2VpdmVyLm9uKCdtZXNzYWdlJywgcmVjZWl2ZXJPbk1lc3NhZ2UpO1xuICAgIHJlY2VpdmVyLm9uKCdwaW5nJywgcmVjZWl2ZXJPblBpbmcpO1xuICAgIHJlY2VpdmVyLm9uKCdwb25nJywgcmVjZWl2ZXJPblBvbmcpO1xuXG4gICAgc29ja2V0LnNldFRpbWVvdXQoMCk7XG4gICAgc29ja2V0LnNldE5vRGVsYXkoKTtcblxuICAgIGlmIChoZWFkLmxlbmd0aCA+IDApIHNvY2tldC51bnNoaWZ0KGhlYWQpO1xuXG4gICAgc29ja2V0Lm9uKCdjbG9zZScsIHNvY2tldE9uQ2xvc2UpO1xuICAgIHNvY2tldC5vbignZGF0YScsIHNvY2tldE9uRGF0YSk7XG4gICAgc29ja2V0Lm9uKCdlbmQnLCBzb2NrZXRPbkVuZCk7XG4gICAgc29ja2V0Lm9uKCdlcnJvcicsIHNvY2tldE9uRXJyb3IpO1xuXG4gICAgdGhpcy5fcmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5PUEVOO1xuICAgIHRoaXMuZW1pdCgnb3BlbicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVtaXQgdGhlIGAnY2xvc2UnYCBldmVudC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGVtaXRDbG9zZSgpIHtcbiAgICBpZiAoIXRoaXMuX3NvY2tldCkge1xuICAgICAgdGhpcy5fcmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DTE9TRUQ7XG4gICAgICB0aGlzLmVtaXQoJ2Nsb3NlJywgdGhpcy5fY2xvc2VDb2RlLCB0aGlzLl9jbG9zZU1lc3NhZ2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKSB7XG4gICAgICB0aGlzLl9leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdLmNsZWFudXAoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZWNlaXZlci5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9yZWFkeVN0YXRlID0gV2ViU29ja2V0LkNMT1NFRDtcbiAgICB0aGlzLmVtaXQoJ2Nsb3NlJywgdGhpcy5fY2xvc2VDb2RlLCB0aGlzLl9jbG9zZU1lc3NhZ2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGEgY2xvc2luZyBoYW5kc2hha2UuXG4gICAqXG4gICAqICAgICAgICAgICstLS0tLS0tLS0tKyAgICstLS0tLS0tLS0tLSsgICArLS0tLS0tLS0tLStcbiAgICogICAgIC0gLSAtfHdzLmNsb3NlKCl8LS0+fGNsb3NlIGZyYW1lfC0tPnx3cy5jbG9zZSgpfC0gLSAtXG4gICAqICAgIHwgICAgICstLS0tLS0tLS0tKyAgICstLS0tLS0tLS0tLSsgICArLS0tLS0tLS0tLSsgICAgIHxcbiAgICogICAgICAgICAgKy0tLS0tLS0tLS0rICAgKy0tLS0tLS0tLS0tKyAgICAgICAgIHxcbiAgICogQ0xPU0lORyAgfHdzLmNsb3NlKCl8PC0tfGNsb3NlIGZyYW1lfDwtLSstLS0tLSsgICAgICAgQ0xPU0lOR1xuICAgKiAgICAgICAgICArLS0tLS0tLS0tLSsgICArLS0tLS0tLS0tLS0rICAgfFxuICAgKiAgICB8ICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgfCAgICstLS0rICAgICAgICB8XG4gICAqICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rLS0+fGZpbnwgLSAtIC0gLVxuICAgKiAgICB8ICAgICAgICAgKy0tLSsgICAgICAgICAgICAgICAgICAgICAgfCAgICstLS0rXG4gICAqICAgICAtIC0gLSAtIC18ZmlufDwtLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gICAqICAgICAgICAgICAgICArLS0tK1xuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gW2NvZGVdIFN0YXR1cyBjb2RlIGV4cGxhaW5pbmcgd2h5IHRoZSBjb25uZWN0aW9uIGlzIGNsb3NpbmdcbiAgICogQHBhcmFtIHsoU3RyaW5nfEJ1ZmZlcil9IFtkYXRhXSBUaGUgcmVhc29uIHdoeSB0aGUgY29ubmVjdGlvbiBpc1xuICAgKiAgICAgY2xvc2luZ1xuICAgKiBAcHVibGljXG4gICAqL1xuICBjbG9zZShjb2RlLCBkYXRhKSB7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NFRCkgcmV0dXJuO1xuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HKSB7XG4gICAgICBjb25zdCBtc2cgPSAnV2ViU29ja2V0IHdhcyBjbG9zZWQgYmVmb3JlIHRoZSBjb25uZWN0aW9uIHdhcyBlc3RhYmxpc2hlZCc7XG4gICAgICByZXR1cm4gYWJvcnRIYW5kc2hha2UodGhpcywgdGhpcy5fcmVxLCBtc2cpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DTE9TSU5HKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuX2Nsb3NlRnJhbWVTZW50ICYmXG4gICAgICAgICh0aGlzLl9jbG9zZUZyYW1lUmVjZWl2ZWQgfHwgdGhpcy5fcmVjZWl2ZXIuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX3NvY2tldC5lbmQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0lORztcbiAgICB0aGlzLl9zZW5kZXIuY2xvc2UoY29kZSwgZGF0YSwgIXRoaXMuX2lzU2VydmVyLCAoZXJyKSA9PiB7XG4gICAgICAvL1xuICAgICAgLy8gVGhpcyBlcnJvciBpcyBoYW5kbGVkIGJ5IHRoZSBgJ2Vycm9yJ2AgbGlzdGVuZXIgb24gdGhlIHNvY2tldC4gV2Ugb25seVxuICAgICAgLy8gd2FudCB0byBrbm93IGlmIHRoZSBjbG9zZSBmcmFtZSBoYXMgYmVlbiBzZW50IGhlcmUuXG4gICAgICAvL1xuICAgICAgaWYgKGVycikgcmV0dXJuO1xuXG4gICAgICB0aGlzLl9jbG9zZUZyYW1lU2VudCA9IHRydWU7XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5fY2xvc2VGcmFtZVJlY2VpdmVkIHx8XG4gICAgICAgIHRoaXMuX3JlY2VpdmVyLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZFxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX3NvY2tldC5lbmQoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vXG4gICAgLy8gU3BlY2lmeSBhIHRpbWVvdXQgZm9yIHRoZSBjbG9zaW5nIGhhbmRzaGFrZSB0byBjb21wbGV0ZS5cbiAgICAvL1xuICAgIHRoaXMuX2Nsb3NlVGltZXIgPSBzZXRUaW1lb3V0KFxuICAgICAgdGhpcy5fc29ja2V0LmRlc3Ryb3kuYmluZCh0aGlzLl9zb2NrZXQpLFxuICAgICAgY2xvc2VUaW1lb3V0XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXVzZSB0aGUgc29ja2V0LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBwYXVzZSgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HIHx8XG4gICAgICB0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DTE9TRURcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wYXVzZWQgPSB0cnVlO1xuICAgIHRoaXMuX3NvY2tldC5wYXVzZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgYSBwaW5nLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IFtkYXRhXSBUaGUgZGF0YSB0byBzZW5kXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW21hc2tdIEluZGljYXRlcyB3aGV0aGVyIG9yIG5vdCB0byBtYXNrIGBkYXRhYFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdIENhbGxiYWNrIHdoaWNoIGlzIGV4ZWN1dGVkIHdoZW4gdGhlIHBpbmcgaXMgc2VudFxuICAgKiBAcHVibGljXG4gICAqL1xuICBwaW5nKGRhdGEsIG1hc2ssIGNiKSB7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNPTk5FQ1RJTkcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0IGlzIG5vdCBvcGVuOiByZWFkeVN0YXRlIDAgKENPTk5FQ1RJTkcpJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYiA9IGRhdGE7XG4gICAgICBkYXRhID0gbWFzayA9IHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtYXNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYiA9IG1hc2s7XG4gICAgICBtYXNrID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ251bWJlcicpIGRhdGEgPSBkYXRhLnRvU3RyaW5nKCk7XG5cbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgc2VuZEFmdGVyQ2xvc2UodGhpcywgZGF0YSwgY2IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChtYXNrID09PSB1bmRlZmluZWQpIG1hc2sgPSAhdGhpcy5faXNTZXJ2ZXI7XG4gICAgdGhpcy5fc2VuZGVyLnBpbmcoZGF0YSB8fCBFTVBUWV9CVUZGRVIsIG1hc2ssIGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIGEgcG9uZy5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBbZGF0YV0gVGhlIGRhdGEgdG8gc2VuZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFttYXNrXSBJbmRpY2F0ZXMgd2hldGhlciBvciBub3QgdG8gbWFzayBgZGF0YWBcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXSBDYWxsYmFjayB3aGljaCBpcyBleGVjdXRlZCB3aGVuIHRoZSBwb25nIGlzIHNlbnRcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcG9uZyhkYXRhLCBtYXNrLCBjYikge1xuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlNvY2tldCBpcyBub3Qgb3BlbjogcmVhZHlTdGF0ZSAwIChDT05ORUNUSU5HKScpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2IgPSBkYXRhO1xuICAgICAgZGF0YSA9IG1hc2sgPSB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbWFzayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2IgPSBtYXNrO1xuICAgICAgbWFzayA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdudW1iZXInKSBkYXRhID0gZGF0YS50b1N0cmluZygpO1xuXG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgIHNlbmRBZnRlckNsb3NlKHRoaXMsIGRhdGEsIGNiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobWFzayA9PT0gdW5kZWZpbmVkKSBtYXNrID0gIXRoaXMuX2lzU2VydmVyO1xuICAgIHRoaXMuX3NlbmRlci5wb25nKGRhdGEgfHwgRU1QVFlfQlVGRkVSLCBtYXNrLCBjYik7XG4gIH1cblxuICAvKipcbiAgICogUmVzdW1lIHRoZSBzb2NrZXQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHJlc3VtZSgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HIHx8XG4gICAgICB0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DTE9TRURcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wYXVzZWQgPSBmYWxzZTtcbiAgICBpZiAoIXRoaXMuX3JlY2VpdmVyLl93cml0YWJsZVN0YXRlLm5lZWREcmFpbikgdGhpcy5fc29ja2V0LnJlc3VtZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgYSBkYXRhIG1lc3NhZ2UuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZGF0YSBUaGUgbWVzc2FnZSB0byBzZW5kXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucyBvYmplY3RcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5iaW5hcnldIFNwZWNpZmllcyB3aGV0aGVyIGBkYXRhYCBpcyBiaW5hcnkgb3JcbiAgICogICAgIHRleHRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5jb21wcmVzc10gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIGNvbXByZXNzXG4gICAqICAgICBgZGF0YWBcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5maW49dHJ1ZV0gU3BlY2lmaWVzIHdoZXRoZXIgdGhlIGZyYWdtZW50IGlzIHRoZVxuICAgKiAgICAgbGFzdCBvbmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5tYXNrXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gbWFzayBgZGF0YWBcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXSBDYWxsYmFjayB3aGljaCBpcyBleGVjdXRlZCB3aGVuIGRhdGEgaXMgd3JpdHRlbiBvdXRcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2VuZChkYXRhLCBvcHRpb25zLCBjYikge1xuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlNvY2tldCBpcyBub3Qgb3BlbjogcmVhZHlTdGF0ZSAwIChDT05ORUNUSU5HKScpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2IgPSBvcHRpb25zO1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ251bWJlcicpIGRhdGEgPSBkYXRhLnRvU3RyaW5nKCk7XG5cbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgc2VuZEFmdGVyQ2xvc2UodGhpcywgZGF0YSwgY2IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICBiaW5hcnk6IHR5cGVvZiBkYXRhICE9PSAnc3RyaW5nJyxcbiAgICAgIG1hc2s6ICF0aGlzLl9pc1NlcnZlcixcbiAgICAgIGNvbXByZXNzOiB0cnVlLFxuICAgICAgZmluOiB0cnVlLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH07XG5cbiAgICBpZiAoIXRoaXMuX2V4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0pIHtcbiAgICAgIG9wdHMuY29tcHJlc3MgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZW5kZXIuc2VuZChkYXRhIHx8IEVNUFRZX0JVRkZFUiwgb3B0cywgY2IpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcmNpYmx5IGNsb3NlIHRoZSBjb25uZWN0aW9uLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICB0ZXJtaW5hdGUoKSB7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NFRCkgcmV0dXJuO1xuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HKSB7XG4gICAgICBjb25zdCBtc2cgPSAnV2ViU29ja2V0IHdhcyBjbG9zZWQgYmVmb3JlIHRoZSBjb25uZWN0aW9uIHdhcyBlc3RhYmxpc2hlZCc7XG4gICAgICByZXR1cm4gYWJvcnRIYW5kc2hha2UodGhpcywgdGhpcy5fcmVxLCBtc2cpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zb2NrZXQpIHtcbiAgICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0lORztcbiAgICAgIHRoaXMuX3NvY2tldC5kZXN0cm95KCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQGNvbnN0YW50IHtOdW1iZXJ9IENPTk5FQ1RJTkdcbiAqIEBtZW1iZXJvZiBXZWJTb2NrZXRcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFdlYlNvY2tldCwgJ0NPTk5FQ1RJTkcnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIHZhbHVlOiByZWFkeVN0YXRlcy5pbmRleE9mKCdDT05ORUNUSU5HJylcbn0pO1xuXG4vKipcbiAqIEBjb25zdGFudCB7TnVtYmVyfSBDT05ORUNUSU5HXG4gKiBAbWVtYmVyb2YgV2ViU29ja2V0LnByb3RvdHlwZVxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV2ViU29ja2V0LnByb3RvdHlwZSwgJ0NPTk5FQ1RJTkcnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIHZhbHVlOiByZWFkeVN0YXRlcy5pbmRleE9mKCdDT05ORUNUSU5HJylcbn0pO1xuXG4vKipcbiAqIEBjb25zdGFudCB7TnVtYmVyfSBPUEVOXG4gKiBAbWVtYmVyb2YgV2ViU29ja2V0XG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJTb2NrZXQsICdPUEVOJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICB2YWx1ZTogcmVhZHlTdGF0ZXMuaW5kZXhPZignT1BFTicpXG59KTtcblxuLyoqXG4gKiBAY29uc3RhbnQge051bWJlcn0gT1BFTlxuICogQG1lbWJlcm9mIFdlYlNvY2tldC5wcm90b3R5cGVcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFdlYlNvY2tldC5wcm90b3R5cGUsICdPUEVOJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICB2YWx1ZTogcmVhZHlTdGF0ZXMuaW5kZXhPZignT1BFTicpXG59KTtcblxuLyoqXG4gKiBAY29uc3RhbnQge051bWJlcn0gQ0xPU0lOR1xuICogQG1lbWJlcm9mIFdlYlNvY2tldFxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV2ViU29ja2V0LCAnQ0xPU0lORycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgdmFsdWU6IHJlYWR5U3RhdGVzLmluZGV4T2YoJ0NMT1NJTkcnKVxufSk7XG5cbi8qKlxuICogQGNvbnN0YW50IHtOdW1iZXJ9IENMT1NJTkdcbiAqIEBtZW1iZXJvZiBXZWJTb2NrZXQucHJvdG90eXBlXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJTb2NrZXQucHJvdG90eXBlLCAnQ0xPU0lORycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgdmFsdWU6IHJlYWR5U3RhdGVzLmluZGV4T2YoJ0NMT1NJTkcnKVxufSk7XG5cbi8qKlxuICogQGNvbnN0YW50IHtOdW1iZXJ9IENMT1NFRFxuICogQG1lbWJlcm9mIFdlYlNvY2tldFxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV2ViU29ja2V0LCAnQ0xPU0VEJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICB2YWx1ZTogcmVhZHlTdGF0ZXMuaW5kZXhPZignQ0xPU0VEJylcbn0pO1xuXG4vKipcbiAqIEBjb25zdGFudCB7TnVtYmVyfSBDTE9TRURcbiAqIEBtZW1iZXJvZiBXZWJTb2NrZXQucHJvdG90eXBlXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJTb2NrZXQucHJvdG90eXBlLCAnQ0xPU0VEJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICB2YWx1ZTogcmVhZHlTdGF0ZXMuaW5kZXhPZignQ0xPU0VEJylcbn0pO1xuXG5bXG4gICdiaW5hcnlUeXBlJyxcbiAgJ2J1ZmZlcmVkQW1vdW50JyxcbiAgJ2V4dGVuc2lvbnMnLFxuICAnaXNQYXVzZWQnLFxuICAncHJvdG9jb2wnLFxuICAncmVhZHlTdGF0ZScsXG4gICd1cmwnXG5dLmZvckVhY2goKHByb3BlcnR5KSA9PiB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJTb2NrZXQucHJvdG90eXBlLCBwcm9wZXJ0eSwgeyBlbnVtZXJhYmxlOiB0cnVlIH0pO1xufSk7XG5cbi8vXG4vLyBBZGQgdGhlIGBvbm9wZW5gLCBgb25lcnJvcmAsIGBvbmNsb3NlYCwgYW5kIGBvbm1lc3NhZ2VgIGF0dHJpYnV0ZXMuXG4vLyBTZWUgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvY29tbXMuaHRtbCN0aGUtd2Vic29ja2V0LWludGVyZmFjZVxuLy9cblsnb3BlbicsICdlcnJvcicsICdjbG9zZScsICdtZXNzYWdlJ10uZm9yRWFjaCgobWV0aG9kKSA9PiB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJTb2NrZXQucHJvdG90eXBlLCBgb24ke21ldGhvZH1gLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQoKSB7XG4gICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMubGlzdGVuZXJzKG1ldGhvZCkpIHtcbiAgICAgICAgaWYgKGxpc3RlbmVyW2tGb3JPbkV2ZW50QXR0cmlidXRlXSkgcmV0dXJuIGxpc3RlbmVyW2tMaXN0ZW5lcl07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgc2V0KGhhbmRsZXIpIHtcbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5saXN0ZW5lcnMobWV0aG9kKSkge1xuICAgICAgICBpZiAobGlzdGVuZXJba0Zvck9uRXZlbnRBdHRyaWJ1dGVdKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihtZXRob2QsIGxpc3RlbmVyKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHJldHVybjtcblxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKG1ldGhvZCwgaGFuZGxlciwge1xuICAgICAgICBba0Zvck9uRXZlbnRBdHRyaWJ1dGVdOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbldlYlNvY2tldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGFkZEV2ZW50TGlzdGVuZXI7XG5XZWJTb2NrZXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSByZW1vdmVFdmVudExpc3RlbmVyO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFdlYlNvY2tldDtcblxuLyoqXG4gKiBJbml0aWFsaXplIGEgV2ViU29ja2V0IGNsaWVudC5cbiAqXG4gKiBAcGFyYW0ge1dlYlNvY2tldH0gd2Vic29ja2V0IFRoZSBjbGllbnQgdG8gaW5pdGlhbGl6ZVxuICogQHBhcmFtIHsoU3RyaW5nfFVSTCl9IGFkZHJlc3MgVGhlIFVSTCB0byB3aGljaCB0byBjb25uZWN0XG4gKiBAcGFyYW0ge0FycmF5fSBwcm90b2NvbHMgVGhlIHN1YnByb3RvY29sc1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBDb25uZWN0aW9uIG9wdGlvbnNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZm9sbG93UmVkaXJlY3RzPWZhbHNlXSBXaGV0aGVyIG9yIG5vdCB0byBmb2xsb3dcbiAqICAgICByZWRpcmVjdHNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmdlbmVyYXRlTWFza10gVGhlIGZ1bmN0aW9uIHVzZWQgdG8gZ2VuZXJhdGUgdGhlXG4gKiAgICAgbWFza2luZyBrZXlcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5oYW5kc2hha2VUaW1lb3V0XSBUaW1lb3V0IGluIG1pbGxpc2Vjb25kcyBmb3IgdGhlXG4gKiAgICAgaGFuZHNoYWtlIHJlcXVlc3RcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5tYXhQYXlsb2FkPTEwNDg1NzYwMF0gVGhlIG1heGltdW0gYWxsb3dlZCBtZXNzYWdlXG4gKiAgICAgc2l6ZVxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLm1heFJlZGlyZWN0cz0xMF0gVGhlIG1heGltdW0gbnVtYmVyIG9mIHJlZGlyZWN0c1xuICogICAgIGFsbG93ZWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5vcmlnaW5dIFZhbHVlIG9mIHRoZSBgT3JpZ2luYCBvclxuICogICAgIGBTZWMtV2ViU29ja2V0LU9yaWdpbmAgaGVhZGVyXG4gKiBAcGFyYW0geyhCb29sZWFufE9iamVjdCl9IFtvcHRpb25zLnBlck1lc3NhZ2VEZWZsYXRlPXRydWVdIEVuYWJsZS9kaXNhYmxlXG4gKiAgICAgcGVybWVzc2FnZS1kZWZsYXRlXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMucHJvdG9jb2xWZXJzaW9uPTEzXSBWYWx1ZSBvZiB0aGVcbiAqICAgICBgU2VjLVdlYlNvY2tldC1WZXJzaW9uYCBoZWFkZXJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuc2tpcFVURjhWYWxpZGF0aW9uPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvclxuICogICAgIG5vdCB0byBza2lwIFVURi04IHZhbGlkYXRpb24gZm9yIHRleHQgYW5kIGNsb3NlIG1lc3NhZ2VzXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpbml0QXNDbGllbnQod2Vic29ja2V0LCBhZGRyZXNzLCBwcm90b2NvbHMsIG9wdGlvbnMpIHtcbiAgY29uc3Qgb3B0cyA9IHtcbiAgICBwcm90b2NvbFZlcnNpb246IHByb3RvY29sVmVyc2lvbnNbMV0sXG4gICAgbWF4UGF5bG9hZDogMTAwICogMTAyNCAqIDEwMjQsXG4gICAgc2tpcFVURjhWYWxpZGF0aW9uOiBmYWxzZSxcbiAgICBwZXJNZXNzYWdlRGVmbGF0ZTogdHJ1ZSxcbiAgICBmb2xsb3dSZWRpcmVjdHM6IGZhbHNlLFxuICAgIG1heFJlZGlyZWN0czogMTAsXG4gICAgLi4ub3B0aW9ucyxcbiAgICBjcmVhdGVDb25uZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgc29ja2V0UGF0aDogdW5kZWZpbmVkLFxuICAgIGhvc3RuYW1lOiB1bmRlZmluZWQsXG4gICAgcHJvdG9jb2w6IHVuZGVmaW5lZCxcbiAgICB0aW1lb3V0OiB1bmRlZmluZWQsXG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBob3N0OiB1bmRlZmluZWQsXG4gICAgcGF0aDogdW5kZWZpbmVkLFxuICAgIHBvcnQ6IHVuZGVmaW5lZFxuICB9O1xuXG4gIGlmICghcHJvdG9jb2xWZXJzaW9ucy5pbmNsdWRlcyhvcHRzLnByb3RvY29sVmVyc2lvbikpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcbiAgICAgIGBVbnN1cHBvcnRlZCBwcm90b2NvbCB2ZXJzaW9uOiAke29wdHMucHJvdG9jb2xWZXJzaW9ufSBgICtcbiAgICAgICAgYChzdXBwb3J0ZWQgdmVyc2lvbnM6ICR7cHJvdG9jb2xWZXJzaW9ucy5qb2luKCcsICcpfSlgXG4gICAgKTtcbiAgfVxuXG4gIGxldCBwYXJzZWRVcmw7XG5cbiAgaWYgKGFkZHJlc3MgaW5zdGFuY2VvZiBVUkwpIHtcbiAgICBwYXJzZWRVcmwgPSBhZGRyZXNzO1xuICAgIHdlYnNvY2tldC5fdXJsID0gYWRkcmVzcy5ocmVmO1xuICB9IGVsc2Uge1xuICAgIHRyeSB7XG4gICAgICBwYXJzZWRVcmwgPSBuZXcgVVJMKGFkZHJlc3MpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgSW52YWxpZCBVUkw6ICR7YWRkcmVzc31gKTtcbiAgICB9XG5cbiAgICB3ZWJzb2NrZXQuX3VybCA9IGFkZHJlc3M7XG4gIH1cblxuICBjb25zdCBpc1NlY3VyZSA9IHBhcnNlZFVybC5wcm90b2NvbCA9PT0gJ3dzczonO1xuICBjb25zdCBpc1VuaXhTb2NrZXQgPSBwYXJzZWRVcmwucHJvdG9jb2wgPT09ICd3cyt1bml4Oic7XG4gIGxldCBpbnZhbGlkVVJMTWVzc2FnZTtcblxuICBpZiAocGFyc2VkVXJsLnByb3RvY29sICE9PSAnd3M6JyAmJiAhaXNTZWN1cmUgJiYgIWlzVW5peFNvY2tldCkge1xuICAgIGludmFsaWRVUkxNZXNzYWdlID1cbiAgICAgICdUaGUgVVJMXFwncyBwcm90b2NvbCBtdXN0IGJlIG9uZSBvZiBcIndzOlwiLCBcIndzczpcIiwgb3IgXCJ3cyt1bml4OlwiJztcbiAgfSBlbHNlIGlmIChpc1VuaXhTb2NrZXQgJiYgIXBhcnNlZFVybC5wYXRobmFtZSkge1xuICAgIGludmFsaWRVUkxNZXNzYWdlID0gXCJUaGUgVVJMJ3MgcGF0aG5hbWUgaXMgZW1wdHlcIjtcbiAgfSBlbHNlIGlmIChwYXJzZWRVcmwuaGFzaCkge1xuICAgIGludmFsaWRVUkxNZXNzYWdlID0gJ1RoZSBVUkwgY29udGFpbnMgYSBmcmFnbWVudCBpZGVudGlmaWVyJztcbiAgfVxuXG4gIGlmIChpbnZhbGlkVVJMTWVzc2FnZSkge1xuICAgIGNvbnN0IGVyciA9IG5ldyBTeW50YXhFcnJvcihpbnZhbGlkVVJMTWVzc2FnZSk7XG5cbiAgICBpZiAod2Vic29ja2V0Ll9yZWRpcmVjdHMgPT09IDApIHtcbiAgICAgIHRocm93IGVycjtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1pdEVycm9yQW5kQ2xvc2Uod2Vic29ja2V0LCBlcnIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGRlZmF1bHRQb3J0ID0gaXNTZWN1cmUgPyA0NDMgOiA4MDtcbiAgY29uc3Qga2V5ID0gcmFuZG9tQnl0ZXMoMTYpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgY29uc3QgcmVxdWVzdCA9IGlzU2VjdXJlID8gaHR0cHMucmVxdWVzdCA6IGh0dHAucmVxdWVzdDtcbiAgY29uc3QgcHJvdG9jb2xTZXQgPSBuZXcgU2V0KCk7XG4gIGxldCBwZXJNZXNzYWdlRGVmbGF0ZTtcblxuICBvcHRzLmNyZWF0ZUNvbm5lY3Rpb24gPSBpc1NlY3VyZSA/IHRsc0Nvbm5lY3QgOiBuZXRDb25uZWN0O1xuICBvcHRzLmRlZmF1bHRQb3J0ID0gb3B0cy5kZWZhdWx0UG9ydCB8fCBkZWZhdWx0UG9ydDtcbiAgb3B0cy5wb3J0ID0gcGFyc2VkVXJsLnBvcnQgfHwgZGVmYXVsdFBvcnQ7XG4gIG9wdHMuaG9zdCA9IHBhcnNlZFVybC5ob3N0bmFtZS5zdGFydHNXaXRoKCdbJylcbiAgICA/IHBhcnNlZFVybC5ob3N0bmFtZS5zbGljZSgxLCAtMSlcbiAgICA6IHBhcnNlZFVybC5ob3N0bmFtZTtcbiAgb3B0cy5oZWFkZXJzID0ge1xuICAgICdTZWMtV2ViU29ja2V0LVZlcnNpb24nOiBvcHRzLnByb3RvY29sVmVyc2lvbixcbiAgICAnU2VjLVdlYlNvY2tldC1LZXknOiBrZXksXG4gICAgQ29ubmVjdGlvbjogJ1VwZ3JhZGUnLFxuICAgIFVwZ3JhZGU6ICd3ZWJzb2NrZXQnLFxuICAgIC4uLm9wdHMuaGVhZGVyc1xuICB9O1xuICBvcHRzLnBhdGggPSBwYXJzZWRVcmwucGF0aG5hbWUgKyBwYXJzZWRVcmwuc2VhcmNoO1xuICBvcHRzLnRpbWVvdXQgPSBvcHRzLmhhbmRzaGFrZVRpbWVvdXQ7XG5cbiAgaWYgKG9wdHMucGVyTWVzc2FnZURlZmxhdGUpIHtcbiAgICBwZXJNZXNzYWdlRGVmbGF0ZSA9IG5ldyBQZXJNZXNzYWdlRGVmbGF0ZShcbiAgICAgIG9wdHMucGVyTWVzc2FnZURlZmxhdGUgIT09IHRydWUgPyBvcHRzLnBlck1lc3NhZ2VEZWZsYXRlIDoge30sXG4gICAgICBmYWxzZSxcbiAgICAgIG9wdHMubWF4UGF5bG9hZFxuICAgICk7XG4gICAgb3B0cy5oZWFkZXJzWydTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnMnXSA9IGZvcm1hdCh7XG4gICAgICBbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV06IHBlck1lc3NhZ2VEZWZsYXRlLm9mZmVyKClcbiAgICB9KTtcbiAgfVxuICBpZiAocHJvdG9jb2xzLmxlbmd0aCkge1xuICAgIGZvciAoY29uc3QgcHJvdG9jb2wgb2YgcHJvdG9jb2xzKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBwcm90b2NvbCAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgIXN1YnByb3RvY29sUmVnZXgudGVzdChwcm90b2NvbCkgfHxcbiAgICAgICAgcHJvdG9jb2xTZXQuaGFzKHByb3RvY29sKVxuICAgICAgKSB7XG4gICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcbiAgICAgICAgICAnQW4gaW52YWxpZCBvciBkdXBsaWNhdGVkIHN1YnByb3RvY29sIHdhcyBzcGVjaWZpZWQnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHByb3RvY29sU2V0LmFkZChwcm90b2NvbCk7XG4gICAgfVxuXG4gICAgb3B0cy5oZWFkZXJzWydTZWMtV2ViU29ja2V0LVByb3RvY29sJ10gPSBwcm90b2NvbHMuam9pbignLCcpO1xuICB9XG4gIGlmIChvcHRzLm9yaWdpbikge1xuICAgIGlmIChvcHRzLnByb3RvY29sVmVyc2lvbiA8IDEzKSB7XG4gICAgICBvcHRzLmhlYWRlcnNbJ1NlYy1XZWJTb2NrZXQtT3JpZ2luJ10gPSBvcHRzLm9yaWdpbjtcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0cy5oZWFkZXJzLk9yaWdpbiA9IG9wdHMub3JpZ2luO1xuICAgIH1cbiAgfVxuICBpZiAocGFyc2VkVXJsLnVzZXJuYW1lIHx8IHBhcnNlZFVybC5wYXNzd29yZCkge1xuICAgIG9wdHMuYXV0aCA9IGAke3BhcnNlZFVybC51c2VybmFtZX06JHtwYXJzZWRVcmwucGFzc3dvcmR9YDtcbiAgfVxuXG4gIGlmIChpc1VuaXhTb2NrZXQpIHtcbiAgICBjb25zdCBwYXJ0cyA9IG9wdHMucGF0aC5zcGxpdCgnOicpO1xuXG4gICAgb3B0cy5zb2NrZXRQYXRoID0gcGFydHNbMF07XG4gICAgb3B0cy5wYXRoID0gcGFydHNbMV07XG4gIH1cblxuICBsZXQgcmVxO1xuXG4gIGlmIChvcHRzLmZvbGxvd1JlZGlyZWN0cykge1xuICAgIGlmICh3ZWJzb2NrZXQuX3JlZGlyZWN0cyA9PT0gMCkge1xuICAgICAgd2Vic29ja2V0Ll9vcmlnaW5hbFNlY3VyZSA9IGlzU2VjdXJlO1xuICAgICAgd2Vic29ja2V0Ll9vcmlnaW5hbEhvc3QgPSBwYXJzZWRVcmwuaG9zdDtcblxuICAgICAgY29uc3QgaGVhZGVycyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5oZWFkZXJzO1xuXG4gICAgICAvL1xuICAgICAgLy8gU2hhbGxvdyBjb3B5IHRoZSB1c2VyIHByb3ZpZGVkIG9wdGlvbnMgc28gdGhhdCBoZWFkZXJzIGNhbiBiZSBjaGFuZ2VkXG4gICAgICAvLyB3aXRob3V0IG11dGF0aW5nIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAvL1xuICAgICAgb3B0aW9ucyA9IHsgLi4ub3B0aW9ucywgaGVhZGVyczoge30gfTtcblxuICAgICAgaWYgKGhlYWRlcnMpIHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoaGVhZGVycykpIHtcbiAgICAgICAgICBvcHRpb25zLmhlYWRlcnNba2V5LnRvTG93ZXJDYXNlKCldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHdlYnNvY2tldC5saXN0ZW5lckNvdW50KCdyZWRpcmVjdCcpID09PSAwKSB7XG4gICAgICBjb25zdCBpc1NhbWVIb3N0ID0gcGFyc2VkVXJsLmhvc3QgPT09IHdlYnNvY2tldC5fb3JpZ2luYWxIb3N0O1xuXG4gICAgICBpZiAoIWlzU2FtZUhvc3QgfHwgKHdlYnNvY2tldC5fb3JpZ2luYWxTZWN1cmUgJiYgIWlzU2VjdXJlKSkge1xuICAgICAgICAvL1xuICAgICAgICAvLyBNYXRjaCBjdXJsIDcuNzcuMCBiZWhhdmlvciBhbmQgZHJvcCB0aGUgZm9sbG93aW5nIGhlYWRlcnMuIFRoZXNlXG4gICAgICAgIC8vIGhlYWRlcnMgYXJlIGFsc28gZHJvcHBlZCB3aGVuIGZvbGxvd2luZyBhIHJlZGlyZWN0IHRvIGEgc3ViZG9tYWluLlxuICAgICAgICAvL1xuICAgICAgICBkZWxldGUgb3B0cy5oZWFkZXJzLmF1dGhvcml6YXRpb247XG4gICAgICAgIGRlbGV0ZSBvcHRzLmhlYWRlcnMuY29va2llO1xuXG4gICAgICAgIGlmICghaXNTYW1lSG9zdCkgZGVsZXRlIG9wdHMuaGVhZGVycy5ob3N0O1xuXG4gICAgICAgIG9wdHMuYXV0aCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIE1hdGNoIGN1cmwgNy43Ny4wIGJlaGF2aW9yIGFuZCBtYWtlIHRoZSBmaXJzdCBgQXV0aG9yaXphdGlvbmAgaGVhZGVyIHdpbi5cbiAgICAvLyBJZiB0aGUgYEF1dGhvcml6YXRpb25gIGhlYWRlciBpcyBzZXQsIHRoZW4gdGhlcmUgaXMgbm90aGluZyB0byBkbyBhcyBpdFxuICAgIC8vIHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuICAgIC8vXG4gICAgaWYgKG9wdHMuYXV0aCAmJiAhb3B0aW9ucy5oZWFkZXJzLmF1dGhvcml6YXRpb24pIHtcbiAgICAgIG9wdGlvbnMuaGVhZGVycy5hdXRob3JpemF0aW9uID1cbiAgICAgICAgJ0Jhc2ljICcgKyBCdWZmZXIuZnJvbShvcHRzLmF1dGgpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICB9XG5cbiAgICByZXEgPSB3ZWJzb2NrZXQuX3JlcSA9IHJlcXVlc3Qob3B0cyk7XG5cbiAgICBpZiAod2Vic29ja2V0Ll9yZWRpcmVjdHMpIHtcbiAgICAgIC8vXG4gICAgICAvLyBVbmxpa2Ugd2hhdCBpcyBkb25lIGZvciB0aGUgYCd1cGdyYWRlJ2AgZXZlbnQsIG5vIGVhcmx5IGV4aXQgaXNcbiAgICAgIC8vIHRyaWdnZXJlZCBoZXJlIGlmIHRoZSB1c2VyIGNhbGxzIGB3ZWJzb2NrZXQuY2xvc2UoKWAgb3JcbiAgICAgIC8vIGB3ZWJzb2NrZXQudGVybWluYXRlKClgIGZyb20gYSBsaXN0ZW5lciBvZiB0aGUgYCdyZWRpcmVjdCdgIGV2ZW50LiBUaGlzXG4gICAgICAvLyBpcyBiZWNhdXNlIHRoZSB1c2VyIGNhbiBhbHNvIGNhbGwgYHJlcXVlc3QuZGVzdHJveSgpYCB3aXRoIGFuIGVycm9yXG4gICAgICAvLyBiZWZvcmUgY2FsbGluZyBgd2Vic29ja2V0LmNsb3NlKClgIG9yIGB3ZWJzb2NrZXQudGVybWluYXRlKClgIGFuZCB0aGlzXG4gICAgICAvLyB3b3VsZCByZXN1bHQgaW4gYW4gZXJyb3IgYmVpbmcgZW1pdHRlZCBvbiB0aGUgYHJlcXVlc3RgIG9iamVjdCB3aXRoIG5vXG4gICAgICAvLyBgJ2Vycm9yJ2AgZXZlbnQgbGlzdGVuZXJzIGF0dGFjaGVkLlxuICAgICAgLy9cbiAgICAgIHdlYnNvY2tldC5lbWl0KCdyZWRpcmVjdCcsIHdlYnNvY2tldC51cmwsIHJlcSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlcSA9IHdlYnNvY2tldC5fcmVxID0gcmVxdWVzdChvcHRzKTtcbiAgfVxuXG4gIGlmIChvcHRzLnRpbWVvdXQpIHtcbiAgICByZXEub24oJ3RpbWVvdXQnLCAoKSA9PiB7XG4gICAgICBhYm9ydEhhbmRzaGFrZSh3ZWJzb2NrZXQsIHJlcSwgJ09wZW5pbmcgaGFuZHNoYWtlIGhhcyB0aW1lZCBvdXQnKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlcS5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgaWYgKHJlcSA9PT0gbnVsbCB8fCByZXFba0Fib3J0ZWRdKSByZXR1cm47XG5cbiAgICByZXEgPSB3ZWJzb2NrZXQuX3JlcSA9IG51bGw7XG4gICAgZW1pdEVycm9yQW5kQ2xvc2Uod2Vic29ja2V0LCBlcnIpO1xuICB9KTtcblxuICByZXEub24oJ3Jlc3BvbnNlJywgKHJlcykgPT4ge1xuICAgIGNvbnN0IGxvY2F0aW9uID0gcmVzLmhlYWRlcnMubG9jYXRpb247XG4gICAgY29uc3Qgc3RhdHVzQ29kZSA9IHJlcy5zdGF0dXNDb2RlO1xuXG4gICAgaWYgKFxuICAgICAgbG9jYXRpb24gJiZcbiAgICAgIG9wdHMuZm9sbG93UmVkaXJlY3RzICYmXG4gICAgICBzdGF0dXNDb2RlID49IDMwMCAmJlxuICAgICAgc3RhdHVzQ29kZSA8IDQwMFxuICAgICkge1xuICAgICAgaWYgKCsrd2Vic29ja2V0Ll9yZWRpcmVjdHMgPiBvcHRzLm1heFJlZGlyZWN0cykge1xuICAgICAgICBhYm9ydEhhbmRzaGFrZSh3ZWJzb2NrZXQsIHJlcSwgJ01heGltdW0gcmVkaXJlY3RzIGV4Y2VlZGVkJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVxLmFib3J0KCk7XG5cbiAgICAgIGxldCBhZGRyO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhZGRyID0gbmV3IFVSTChsb2NhdGlvbiwgYWRkcmVzcyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnN0IGVyciA9IG5ldyBTeW50YXhFcnJvcihgSW52YWxpZCBVUkw6ICR7bG9jYXRpb259YCk7XG4gICAgICAgIGVtaXRFcnJvckFuZENsb3NlKHdlYnNvY2tldCwgZXJyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpbml0QXNDbGllbnQod2Vic29ja2V0LCBhZGRyLCBwcm90b2NvbHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAoIXdlYnNvY2tldC5lbWl0KCd1bmV4cGVjdGVkLXJlc3BvbnNlJywgcmVxLCByZXMpKSB7XG4gICAgICBhYm9ydEhhbmRzaGFrZShcbiAgICAgICAgd2Vic29ja2V0LFxuICAgICAgICByZXEsXG4gICAgICAgIGBVbmV4cGVjdGVkIHNlcnZlciByZXNwb25zZTogJHtyZXMuc3RhdHVzQ29kZX1gXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgcmVxLm9uKCd1cGdyYWRlJywgKHJlcywgc29ja2V0LCBoZWFkKSA9PiB7XG4gICAgd2Vic29ja2V0LmVtaXQoJ3VwZ3JhZGUnLCByZXMpO1xuXG4gICAgLy9cbiAgICAvLyBUaGUgdXNlciBtYXkgaGF2ZSBjbG9zZWQgdGhlIGNvbm5lY3Rpb24gZnJvbSBhIGxpc3RlbmVyIG9mIHRoZVxuICAgIC8vIGAndXBncmFkZSdgIGV2ZW50LlxuICAgIC8vXG4gICAgaWYgKHdlYnNvY2tldC5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuQ09OTkVDVElORykgcmV0dXJuO1xuXG4gICAgcmVxID0gd2Vic29ja2V0Ll9yZXEgPSBudWxsO1xuXG4gICAgaWYgKHJlcy5oZWFkZXJzLnVwZ3JhZGUudG9Mb3dlckNhc2UoKSAhPT0gJ3dlYnNvY2tldCcpIHtcbiAgICAgIGFib3J0SGFuZHNoYWtlKHdlYnNvY2tldCwgc29ja2V0LCAnSW52YWxpZCBVcGdyYWRlIGhlYWRlcicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGRpZ2VzdCA9IGNyZWF0ZUhhc2goJ3NoYTEnKVxuICAgICAgLnVwZGF0ZShrZXkgKyBHVUlEKVxuICAgICAgLmRpZ2VzdCgnYmFzZTY0Jyk7XG5cbiAgICBpZiAocmVzLmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQtYWNjZXB0J10gIT09IGRpZ2VzdCkge1xuICAgICAgYWJvcnRIYW5kc2hha2Uod2Vic29ja2V0LCBzb2NrZXQsICdJbnZhbGlkIFNlYy1XZWJTb2NrZXQtQWNjZXB0IGhlYWRlcicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNlcnZlclByb3QgPSByZXMuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1wcm90b2NvbCddO1xuICAgIGxldCBwcm90RXJyb3I7XG5cbiAgICBpZiAoc2VydmVyUHJvdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIXByb3RvY29sU2V0LnNpemUpIHtcbiAgICAgICAgcHJvdEVycm9yID0gJ1NlcnZlciBzZW50IGEgc3VicHJvdG9jb2wgYnV0IG5vbmUgd2FzIHJlcXVlc3RlZCc7XG4gICAgICB9IGVsc2UgaWYgKCFwcm90b2NvbFNldC5oYXMoc2VydmVyUHJvdCkpIHtcbiAgICAgICAgcHJvdEVycm9yID0gJ1NlcnZlciBzZW50IGFuIGludmFsaWQgc3VicHJvdG9jb2wnO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocHJvdG9jb2xTZXQuc2l6ZSkge1xuICAgICAgcHJvdEVycm9yID0gJ1NlcnZlciBzZW50IG5vIHN1YnByb3RvY29sJztcbiAgICB9XG5cbiAgICBpZiAocHJvdEVycm9yKSB7XG4gICAgICBhYm9ydEhhbmRzaGFrZSh3ZWJzb2NrZXQsIHNvY2tldCwgcHJvdEVycm9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc2VydmVyUHJvdCkgd2Vic29ja2V0Ll9wcm90b2NvbCA9IHNlcnZlclByb3Q7XG5cbiAgICBjb25zdCBzZWNXZWJTb2NrZXRFeHRlbnNpb25zID0gcmVzLmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQtZXh0ZW5zaW9ucyddO1xuXG4gICAgaWYgKHNlY1dlYlNvY2tldEV4dGVuc2lvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKCFwZXJNZXNzYWdlRGVmbGF0ZSkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgICAnU2VydmVyIHNlbnQgYSBTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnMgaGVhZGVyIGJ1dCBubyBleHRlbnNpb24gJyArXG4gICAgICAgICAgJ3dhcyByZXF1ZXN0ZWQnO1xuICAgICAgICBhYm9ydEhhbmRzaGFrZSh3ZWJzb2NrZXQsIHNvY2tldCwgbWVzc2FnZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IGV4dGVuc2lvbnM7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGV4dGVuc2lvbnMgPSBwYXJzZShzZWNXZWJTb2NrZXRFeHRlbnNpb25zKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gJ0ludmFsaWQgU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zIGhlYWRlcic7XG4gICAgICAgIGFib3J0SGFuZHNoYWtlKHdlYnNvY2tldCwgc29ja2V0LCBtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBleHRlbnNpb25OYW1lcyA9IE9iamVjdC5rZXlzKGV4dGVuc2lvbnMpO1xuXG4gICAgICBpZiAoXG4gICAgICAgIGV4dGVuc2lvbk5hbWVzLmxlbmd0aCAhPT0gMSB8fFxuICAgICAgICBleHRlbnNpb25OYW1lc1swXSAhPT0gUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnU2VydmVyIGluZGljYXRlZCBhbiBleHRlbnNpb24gdGhhdCB3YXMgbm90IHJlcXVlc3RlZCc7XG4gICAgICAgIGFib3J0SGFuZHNoYWtlKHdlYnNvY2tldCwgc29ja2V0LCBtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBwZXJNZXNzYWdlRGVmbGF0ZS5hY2NlcHQoZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9ICdJbnZhbGlkIFNlYy1XZWJTb2NrZXQtRXh0ZW5zaW9ucyBoZWFkZXInO1xuICAgICAgICBhYm9ydEhhbmRzaGFrZSh3ZWJzb2NrZXQsIHNvY2tldCwgbWVzc2FnZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgd2Vic29ja2V0Ll9leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdID1cbiAgICAgICAgcGVyTWVzc2FnZURlZmxhdGU7XG4gICAgfVxuXG4gICAgd2Vic29ja2V0LnNldFNvY2tldChzb2NrZXQsIGhlYWQsIHtcbiAgICAgIGdlbmVyYXRlTWFzazogb3B0cy5nZW5lcmF0ZU1hc2ssXG4gICAgICBtYXhQYXlsb2FkOiBvcHRzLm1heFBheWxvYWQsXG4gICAgICBza2lwVVRGOFZhbGlkYXRpb246IG9wdHMuc2tpcFVURjhWYWxpZGF0aW9uXG4gICAgfSk7XG4gIH0pO1xuXG4gIHJlcS5lbmQoKTtcbn1cblxuLyoqXG4gKiBFbWl0IHRoZSBgJ2Vycm9yJ2AgYW5kIGAnY2xvc2UnYCBldmVudHMuXG4gKlxuICogQHBhcmFtIHtXZWJTb2NrZXR9IHdlYnNvY2tldCBUaGUgV2ViU29ja2V0IGluc3RhbmNlXG4gKiBAcGFyYW0ge0Vycm9yfSBUaGUgZXJyb3IgdG8gZW1pdFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZW1pdEVycm9yQW5kQ2xvc2Uod2Vic29ja2V0LCBlcnIpIHtcbiAgd2Vic29ja2V0Ll9yZWFkeVN0YXRlID0gV2ViU29ja2V0LkNMT1NJTkc7XG4gIHdlYnNvY2tldC5lbWl0KCdlcnJvcicsIGVycik7XG4gIHdlYnNvY2tldC5lbWl0Q2xvc2UoKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBgbmV0LlNvY2tldGAgYW5kIGluaXRpYXRlIGEgY29ubmVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBDb25uZWN0aW9uIG9wdGlvbnNcbiAqIEByZXR1cm4ge25ldC5Tb2NrZXR9IFRoZSBuZXdseSBjcmVhdGVkIHNvY2tldCB1c2VkIHRvIHN0YXJ0IHRoZSBjb25uZWN0aW9uXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBuZXRDb25uZWN0KG9wdGlvbnMpIHtcbiAgb3B0aW9ucy5wYXRoID0gb3B0aW9ucy5zb2NrZXRQYXRoO1xuICByZXR1cm4gbmV0LmNvbm5lY3Qob3B0aW9ucyk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgYHRscy5UTFNTb2NrZXRgIGFuZCBpbml0aWF0ZSBhIGNvbm5lY3Rpb24uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQ29ubmVjdGlvbiBvcHRpb25zXG4gKiBAcmV0dXJuIHt0bHMuVExTU29ja2V0fSBUaGUgbmV3bHkgY3JlYXRlZCBzb2NrZXQgdXNlZCB0byBzdGFydCB0aGUgY29ubmVjdGlvblxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdGxzQ29ubmVjdChvcHRpb25zKSB7XG4gIG9wdGlvbnMucGF0aCA9IHVuZGVmaW5lZDtcblxuICBpZiAoIW9wdGlvbnMuc2VydmVybmFtZSAmJiBvcHRpb25zLnNlcnZlcm5hbWUgIT09ICcnKSB7XG4gICAgb3B0aW9ucy5zZXJ2ZXJuYW1lID0gbmV0LmlzSVAob3B0aW9ucy5ob3N0KSA/ICcnIDogb3B0aW9ucy5ob3N0O1xuICB9XG5cbiAgcmV0dXJuIHRscy5jb25uZWN0KG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIEFib3J0IHRoZSBoYW5kc2hha2UgYW5kIGVtaXQgYW4gZXJyb3IuXG4gKlxuICogQHBhcmFtIHtXZWJTb2NrZXR9IHdlYnNvY2tldCBUaGUgV2ViU29ja2V0IGluc3RhbmNlXG4gKiBAcGFyYW0geyhodHRwLkNsaWVudFJlcXVlc3R8bmV0LlNvY2tldHx0bHMuU29ja2V0KX0gc3RyZWFtIFRoZSByZXF1ZXN0IHRvXG4gKiAgICAgYWJvcnQgb3IgdGhlIHNvY2tldCB0byBkZXN0cm95XG4gKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWJvcnRIYW5kc2hha2Uod2Vic29ja2V0LCBzdHJlYW0sIG1lc3NhZ2UpIHtcbiAgd2Vic29ja2V0Ll9yZWFkeVN0YXRlID0gV2ViU29ja2V0LkNMT1NJTkc7XG5cbiAgY29uc3QgZXJyID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZShlcnIsIGFib3J0SGFuZHNoYWtlKTtcblxuICBpZiAoc3RyZWFtLnNldEhlYWRlcikge1xuICAgIHN0cmVhbVtrQWJvcnRlZF0gPSB0cnVlO1xuICAgIHN0cmVhbS5hYm9ydCgpO1xuXG4gICAgaWYgKHN0cmVhbS5zb2NrZXQgJiYgIXN0cmVhbS5zb2NrZXQuZGVzdHJveWVkKSB7XG4gICAgICAvL1xuICAgICAgLy8gT24gTm9kZS5qcyA+PSAxNC4zLjAgYHJlcXVlc3QuYWJvcnQoKWAgZG9lcyBub3QgZGVzdHJveSB0aGUgc29ja2V0IGlmXG4gICAgICAvLyBjYWxsZWQgYWZ0ZXIgdGhlIHJlcXVlc3QgY29tcGxldGVkLiBTZWVcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJzb2NrZXRzL3dzL2lzc3Vlcy8xODY5LlxuICAgICAgLy9cbiAgICAgIHN0cmVhbS5zb2NrZXQuZGVzdHJveSgpO1xuICAgIH1cblxuICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdEVycm9yQW5kQ2xvc2UsIHdlYnNvY2tldCwgZXJyKTtcbiAgfSBlbHNlIHtcbiAgICBzdHJlYW0uZGVzdHJveShlcnIpO1xuICAgIHN0cmVhbS5vbmNlKCdlcnJvcicsIHdlYnNvY2tldC5lbWl0LmJpbmQod2Vic29ja2V0LCAnZXJyb3InKSk7XG4gICAgc3RyZWFtLm9uY2UoJ2Nsb3NlJywgd2Vic29ja2V0LmVtaXRDbG9zZS5iaW5kKHdlYnNvY2tldCkpO1xuICB9XG59XG5cbi8qKlxuICogSGFuZGxlIGNhc2VzIHdoZXJlIHRoZSBgcGluZygpYCwgYHBvbmcoKWAsIG9yIGBzZW5kKClgIG1ldGhvZHMgYXJlIGNhbGxlZFxuICogd2hlbiB0aGUgYHJlYWR5U3RhdGVgIGF0dHJpYnV0ZSBpcyBgQ0xPU0lOR2Agb3IgYENMT1NFRGAuXG4gKlxuICogQHBhcmFtIHtXZWJTb2NrZXR9IHdlYnNvY2tldCBUaGUgV2ViU29ja2V0IGluc3RhbmNlXG4gKiBAcGFyYW0geyp9IFtkYXRhXSBUaGUgZGF0YSB0byBzZW5kXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdIENhbGxiYWNrXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzZW5kQWZ0ZXJDbG9zZSh3ZWJzb2NrZXQsIGRhdGEsIGNiKSB7XG4gIGlmIChkYXRhKSB7XG4gICAgY29uc3QgbGVuZ3RoID0gdG9CdWZmZXIoZGF0YSkubGVuZ3RoO1xuXG4gICAgLy9cbiAgICAvLyBUaGUgYF9idWZmZXJlZEFtb3VudGAgcHJvcGVydHkgaXMgdXNlZCBvbmx5IHdoZW4gdGhlIHBlZXIgaXMgYSBjbGllbnQgYW5kXG4gICAgLy8gdGhlIG9wZW5pbmcgaGFuZHNoYWtlIGZhaWxzLiBVbmRlciB0aGVzZSBjaXJjdW1zdGFuY2VzLCBpbiBmYWN0LCB0aGVcbiAgICAvLyBgc2V0U29ja2V0KClgIG1ldGhvZCBpcyBub3QgY2FsbGVkLCBzbyB0aGUgYF9zb2NrZXRgIGFuZCBgX3NlbmRlcmBcbiAgICAvLyBwcm9wZXJ0aWVzIGFyZSBzZXQgdG8gYG51bGxgLlxuICAgIC8vXG4gICAgaWYgKHdlYnNvY2tldC5fc29ja2V0KSB3ZWJzb2NrZXQuX3NlbmRlci5fYnVmZmVyZWRCeXRlcyArPSBsZW5ndGg7XG4gICAgZWxzZSB3ZWJzb2NrZXQuX2J1ZmZlcmVkQW1vdW50ICs9IGxlbmd0aDtcbiAgfVxuXG4gIGlmIChjYikge1xuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihcbiAgICAgIGBXZWJTb2NrZXQgaXMgbm90IG9wZW46IHJlYWR5U3RhdGUgJHt3ZWJzb2NrZXQucmVhZHlTdGF0ZX0gYCArXG4gICAgICAgIGAoJHtyZWFkeVN0YXRlc1t3ZWJzb2NrZXQucmVhZHlTdGF0ZV19KWBcbiAgICApO1xuICAgIGNiKGVycik7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBSZWNlaXZlcmAgYCdjb25jbHVkZSdgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlIFRoZSBzdGF0dXMgY29kZVxuICogQHBhcmFtIHtCdWZmZXJ9IHJlYXNvbiBUaGUgcmVhc29uIGZvciBjbG9zaW5nXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZWNlaXZlck9uQ29uY2x1ZGUoY29kZSwgcmVhc29uKSB7XG4gIGNvbnN0IHdlYnNvY2tldCA9IHRoaXNba1dlYlNvY2tldF07XG5cbiAgd2Vic29ja2V0Ll9jbG9zZUZyYW1lUmVjZWl2ZWQgPSB0cnVlO1xuICB3ZWJzb2NrZXQuX2Nsb3NlTWVzc2FnZSA9IHJlYXNvbjtcbiAgd2Vic29ja2V0Ll9jbG9zZUNvZGUgPSBjb2RlO1xuXG4gIGlmICh3ZWJzb2NrZXQuX3NvY2tldFtrV2ViU29ja2V0XSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cbiAgd2Vic29ja2V0Ll9zb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBzb2NrZXRPbkRhdGEpO1xuICBwcm9jZXNzLm5leHRUaWNrKHJlc3VtZSwgd2Vic29ja2V0Ll9zb2NrZXQpO1xuXG4gIGlmIChjb2RlID09PSAxMDA1KSB3ZWJzb2NrZXQuY2xvc2UoKTtcbiAgZWxzZSB3ZWJzb2NrZXQuY2xvc2UoY29kZSwgcmVhc29uKTtcbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBSZWNlaXZlcmAgYCdkcmFpbidgIGV2ZW50LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlY2VpdmVyT25EcmFpbigpIHtcbiAgY29uc3Qgd2Vic29ja2V0ID0gdGhpc1trV2ViU29ja2V0XTtcblxuICBpZiAoIXdlYnNvY2tldC5pc1BhdXNlZCkgd2Vic29ja2V0Ll9zb2NrZXQucmVzdW1lKCk7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgUmVjZWl2ZXJgIGAnZXJyb3InYCBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhSYW5nZUVycm9yfEVycm9yKX0gZXJyIFRoZSBlbWl0dGVkIGVycm9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZWNlaXZlck9uRXJyb3IoZXJyKSB7XG4gIGNvbnN0IHdlYnNvY2tldCA9IHRoaXNba1dlYlNvY2tldF07XG5cbiAgaWYgKHdlYnNvY2tldC5fc29ja2V0W2tXZWJTb2NrZXRdICE9PSB1bmRlZmluZWQpIHtcbiAgICB3ZWJzb2NrZXQuX3NvY2tldC5yZW1vdmVMaXN0ZW5lcignZGF0YScsIHNvY2tldE9uRGF0YSk7XG5cbiAgICAvL1xuICAgIC8vIE9uIE5vZGUuanMgPCAxNC4wLjAgdGhlIGAnZXJyb3InYCBldmVudCBpcyBlbWl0dGVkIHN5bmNocm9ub3VzbHkuIFNlZVxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJzb2NrZXRzL3dzL2lzc3Vlcy8xOTQwLlxuICAgIC8vXG4gICAgcHJvY2Vzcy5uZXh0VGljayhyZXN1bWUsIHdlYnNvY2tldC5fc29ja2V0KTtcblxuICAgIHdlYnNvY2tldC5jbG9zZShlcnJba1N0YXR1c0NvZGVdKTtcbiAgfVxuXG4gIHdlYnNvY2tldC5lbWl0KCdlcnJvcicsIGVycik7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgUmVjZWl2ZXJgIGAnZmluaXNoJ2AgZXZlbnQuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVjZWl2ZXJPbkZpbmlzaCgpIHtcbiAgdGhpc1trV2ViU29ja2V0XS5lbWl0Q2xvc2UoKTtcbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBSZWNlaXZlcmAgYCdtZXNzYWdlJ2AgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ8QXJyYXlCdWZmZXJ8QnVmZmVyW10pfSBkYXRhIFRoZSBtZXNzYWdlXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzQmluYXJ5IFNwZWNpZmllcyB3aGV0aGVyIHRoZSBtZXNzYWdlIGlzIGJpbmFyeSBvciBub3RcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlY2VpdmVyT25NZXNzYWdlKGRhdGEsIGlzQmluYXJ5KSB7XG4gIHRoaXNba1dlYlNvY2tldF0uZW1pdCgnbWVzc2FnZScsIGRhdGEsIGlzQmluYXJ5KTtcbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBSZWNlaXZlcmAgYCdwaW5nJ2AgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IGRhdGEgVGhlIGRhdGEgaW5jbHVkZWQgaW4gdGhlIHBpbmcgZnJhbWVcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlY2VpdmVyT25QaW5nKGRhdGEpIHtcbiAgY29uc3Qgd2Vic29ja2V0ID0gdGhpc1trV2ViU29ja2V0XTtcblxuICB3ZWJzb2NrZXQucG9uZyhkYXRhLCAhd2Vic29ja2V0Ll9pc1NlcnZlciwgTk9PUCk7XG4gIHdlYnNvY2tldC5lbWl0KCdwaW5nJywgZGF0YSk7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgUmVjZWl2ZXJgIGAncG9uZydgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBkYXRhIFRoZSBkYXRhIGluY2x1ZGVkIGluIHRoZSBwb25nIGZyYW1lXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZWNlaXZlck9uUG9uZyhkYXRhKSB7XG4gIHRoaXNba1dlYlNvY2tldF0uZW1pdCgncG9uZycsIGRhdGEpO1xufVxuXG4vKipcbiAqIFJlc3VtZSBhIHJlYWRhYmxlIHN0cmVhbVxuICpcbiAqIEBwYXJhbSB7UmVhZGFibGV9IHN0cmVhbSBUaGUgcmVhZGFibGUgc3RyZWFtXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZXN1bWUoc3RyZWFtKSB7XG4gIHN0cmVhbS5yZXN1bWUoKTtcbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBuZXQuU29ja2V0YCBgJ2Nsb3NlJ2AgZXZlbnQuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc29ja2V0T25DbG9zZSgpIHtcbiAgY29uc3Qgd2Vic29ja2V0ID0gdGhpc1trV2ViU29ja2V0XTtcblxuICB0aGlzLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIHNvY2tldE9uQ2xvc2UpO1xuICB0aGlzLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgc29ja2V0T25EYXRhKTtcbiAgdGhpcy5yZW1vdmVMaXN0ZW5lcignZW5kJywgc29ja2V0T25FbmQpO1xuXG4gIHdlYnNvY2tldC5fcmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DTE9TSU5HO1xuXG4gIGxldCBjaHVuaztcblxuICAvL1xuICAvLyBUaGUgY2xvc2UgZnJhbWUgbWlnaHQgbm90IGhhdmUgYmVlbiByZWNlaXZlZCBvciB0aGUgYCdlbmQnYCBldmVudCBlbWl0dGVkLFxuICAvLyBmb3IgZXhhbXBsZSwgaWYgdGhlIHNvY2tldCB3YXMgZGVzdHJveWVkIGR1ZSB0byBhbiBlcnJvci4gRW5zdXJlIHRoYXQgdGhlXG4gIC8vIGByZWNlaXZlcmAgc3RyZWFtIGlzIGNsb3NlZCBhZnRlciB3cml0aW5nIGFueSByZW1haW5pbmcgYnVmZmVyZWQgZGF0YSB0b1xuICAvLyBpdC4gSWYgdGhlIHJlYWRhYmxlIHNpZGUgb2YgdGhlIHNvY2tldCBpcyBpbiBmbG93aW5nIG1vZGUgdGhlbiB0aGVyZSBpcyBub1xuICAvLyBidWZmZXJlZCBkYXRhIGFzIGV2ZXJ5dGhpbmcgaGFzIGJlZW4gYWxyZWFkeSB3cml0dGVuIGFuZCBgcmVhZGFibGUucmVhZCgpYFxuICAvLyB3aWxsIHJldHVybiBgbnVsbGAuIElmIGluc3RlYWQsIHRoZSBzb2NrZXQgaXMgcGF1c2VkLCBhbnkgcG9zc2libGUgYnVmZmVyZWRcbiAgLy8gZGF0YSB3aWxsIGJlIHJlYWQgYXMgYSBzaW5nbGUgY2h1bmsuXG4gIC8vXG4gIGlmIChcbiAgICAhdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkICYmXG4gICAgIXdlYnNvY2tldC5fY2xvc2VGcmFtZVJlY2VpdmVkICYmXG4gICAgIXdlYnNvY2tldC5fcmVjZWl2ZXIuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkICYmXG4gICAgKGNodW5rID0gd2Vic29ja2V0Ll9zb2NrZXQucmVhZCgpKSAhPT0gbnVsbFxuICApIHtcbiAgICB3ZWJzb2NrZXQuX3JlY2VpdmVyLndyaXRlKGNodW5rKTtcbiAgfVxuXG4gIHdlYnNvY2tldC5fcmVjZWl2ZXIuZW5kKCk7XG5cbiAgdGhpc1trV2ViU29ja2V0XSA9IHVuZGVmaW5lZDtcblxuICBjbGVhclRpbWVvdXQod2Vic29ja2V0Ll9jbG9zZVRpbWVyKTtcblxuICBpZiAoXG4gICAgd2Vic29ja2V0Ll9yZWNlaXZlci5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZCB8fFxuICAgIHdlYnNvY2tldC5fcmVjZWl2ZXIuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkXG4gICkge1xuICAgIHdlYnNvY2tldC5lbWl0Q2xvc2UoKTtcbiAgfSBlbHNlIHtcbiAgICB3ZWJzb2NrZXQuX3JlY2VpdmVyLm9uKCdlcnJvcicsIHJlY2VpdmVyT25GaW5pc2gpO1xuICAgIHdlYnNvY2tldC5fcmVjZWl2ZXIub24oJ2ZpbmlzaCcsIHJlY2VpdmVyT25GaW5pc2gpO1xuICB9XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgbmV0LlNvY2tldGAgYCdkYXRhJ2AgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IGNodW5rIEEgY2h1bmsgb2YgZGF0YVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc29ja2V0T25EYXRhKGNodW5rKSB7XG4gIGlmICghdGhpc1trV2ViU29ja2V0XS5fcmVjZWl2ZXIud3JpdGUoY2h1bmspKSB7XG4gICAgdGhpcy5wYXVzZSgpO1xuICB9XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgbmV0LlNvY2tldGAgYCdlbmQnYCBldmVudC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzb2NrZXRPbkVuZCgpIHtcbiAgY29uc3Qgd2Vic29ja2V0ID0gdGhpc1trV2ViU29ja2V0XTtcblxuICB3ZWJzb2NrZXQuX3JlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0lORztcbiAgd2Vic29ja2V0Ll9yZWNlaXZlci5lbmQoKTtcbiAgdGhpcy5lbmQoKTtcbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBuZXQuU29ja2V0YCBgJ2Vycm9yJ2AgZXZlbnQuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc29ja2V0T25FcnJvcigpIHtcbiAgY29uc3Qgd2Vic29ja2V0ID0gdGhpc1trV2ViU29ja2V0XTtcblxuICB0aGlzLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIHNvY2tldE9uRXJyb3IpO1xuICB0aGlzLm9uKCdlcnJvcicsIE5PT1ApO1xuXG4gIGlmICh3ZWJzb2NrZXQpIHtcbiAgICB3ZWJzb2NrZXQuX3JlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0lORztcbiAgICB0aGlzLmRlc3Ryb3koKTtcbiAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiY3J5cHRvXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImV2ZW50c1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJmc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJodHRwXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImh0dHBzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm5ldFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJwYXRoXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInN0cmVhbVwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJ0bHNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwidXJsXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInpsaWJcIik7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDgpO1xuIl0sIm5hbWVzIjpbIl9faW1wb3J0RGVmYXVsdCIsInRoaXMiLCJtb2QiLCJfX2VzTW9kdWxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJpbmRleF8xIiwiaW5kZXhfMiIsIkhUVFBfUE9SVCIsImNvbnNvbGUiLCJsb2ciLCJodHRwU2VydmVyIiwibGlzdGVuIiwiZGVmYXVsdCIsInN0YXJ0IiwiZ2V0UGxheWVySW5kZXgiLCJjaGVja1BsYXllciIsImNoZWNrUGFzc3dvcmQiLCJzaG93UGxheWVycyIsImFkZFBsYXllciIsInBsYXllcnMiLCJwbGF5ZXIiLCJwdXNoIiwidW5kZWZpbmVkIiwiZmluZCIsIm5hbWUiLCJwYXNzd29yZCIsImZpbmRJbmRleCIsIl9fY3JlYXRlQmluZGluZyIsImNyZWF0ZSIsIm8iLCJtIiwiayIsImsyIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIl9fc2V0TW9kdWxlRGVmYXVsdCIsInYiLCJfX2ltcG9ydFN0YXIiLCJyZXN1bHQiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJmcyIsInBhdGgiLCJodHRwIiwiY3JlYXRlU2VydmVyIiwicmVxIiwicmVzIiwiZmlsZV9wYXRoIiwicmVzb2x2ZSIsImRpcm5hbWUiLCJ1cmwiLCJyZWFkRmlsZSIsImVyciIsImRhdGEiLCJ3cml0ZUhlYWQiLCJlbmQiLCJKU09OIiwic3RyaW5naWZ5Iiwid3NDbGllbnQiLCJjaHVua0RhdGEiLCJzZW5kIiwicmVnaXN0cmF0ZU5ld1BsYXllciIsImxvZ2luV2l0aFdyb25nUGFzc3dvcmQiLCJsb2dpbiIsInBsYXllcnNfMSIsInBsYXllckRhdGEiLCJwbGF5ZXJEYXRhVG9TZW5kIiwiaW5kZXgiLCJlcnJvciIsImRhdGFUb1NlbmQiLCJ0eXBlIiwiaWQiLCJlcnJvclRleHQiLCJsb2dpbl9yZWdpc3RyYXRlXzEiLCJjcmVhdGVfcm9vbV8xIiwiY2h1bmsiLCJwYXJzZSIsInRvU3RyaW5nIiwiZ2V0RGF0YVR5cGUiLCJ3c18xIiwibWFrZV9hY3Rpb25fMSIsIldTU19QT1JUIiwiTnVtYmVyIiwiV2ViU29ja2V0U2VydmVyIiwicG9ydCIsIm9uIiwidmFsdWVzIiwiaGVhZGVycyIsIldlYlNvY2tldCIsImNyZWF0ZVdlYlNvY2tldFN0cmVhbSIsIlNlcnZlciIsIlJlY2VpdmVyIiwiU2VuZGVyIiwibW9kdWxlIiwiRU1QVFlfQlVGRkVSIiwiX21hc2siLCJzb3VyY2UiLCJtYXNrIiwib3V0cHV0Iiwib2Zmc2V0IiwibGVuZ3RoIiwiaSIsIl91bm1hc2siLCJidWZmZXIiLCJjb25jYXQiLCJsaXN0IiwidG90YWxMZW5ndGgiLCJ0YXJnZXQiLCJCdWZmZXIiLCJhbGxvY1Vuc2FmZSIsImJ1ZiIsInNldCIsInNsaWNlIiwidG9BcnJheUJ1ZmZlciIsImJ5dGVMZW5ndGgiLCJieXRlT2Zmc2V0IiwidG9CdWZmZXIiLCJyZWFkT25seSIsImlzQnVmZmVyIiwiQXJyYXlCdWZmZXIiLCJmcm9tIiwiaXNWaWV3IiwidW5tYXNrIiwicHJvY2VzcyIsImVudiIsIldTX05PX0JVRkZFUl9VVElMIiwiYnVmZmVyVXRpbCIsImUiLCJCSU5BUllfVFlQRVMiLCJhbGxvYyIsIkdVSUQiLCJrRm9yT25FdmVudEF0dHJpYnV0ZSIsIlN5bWJvbCIsImtMaXN0ZW5lciIsImtTdGF0dXNDb2RlIiwia1dlYlNvY2tldCIsIk5PT1AiLCJrQ29kZSIsImtEYXRhIiwia0Vycm9yIiwia01lc3NhZ2UiLCJrUmVhc29uIiwia1RhcmdldCIsImtUeXBlIiwia1dhc0NsZWFuIiwiRXZlbnQiLCJjb25zdHJ1Y3RvciIsIkNsb3NlRXZlbnQiLCJvcHRpb25zIiwic3VwZXIiLCJjb2RlIiwicmVhc29uIiwid2FzQ2xlYW4iLCJFcnJvckV2ZW50IiwibWVzc2FnZSIsIk1lc3NhZ2VFdmVudCIsIkV2ZW50VGFyZ2V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImxpc3RlbmVyIiwid3JhcHBlciIsImlzQmluYXJ5IiwiZXZlbnQiLCJfY2xvc2VGcmFtZVJlY2VpdmVkIiwiX2Nsb3NlRnJhbWVTZW50Iiwib25jZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYW5kbGVyIiwibGlzdGVuZXJzIiwicmVtb3ZlTGlzdGVuZXIiLCJ0b2tlbkNoYXJzIiwiZGVzdCIsImVsZW0iLCJmb3JtYXQiLCJleHRlbnNpb25zIiwia2V5cyIsIm1hcCIsImV4dGVuc2lvbiIsImNvbmZpZ3VyYXRpb25zIiwiQXJyYXkiLCJpc0FycmF5IiwicGFyYW1zIiwiam9pbiIsImhlYWRlciIsIm9mZmVycyIsImV4dGVuc2lvbk5hbWUiLCJwYXJhbU5hbWUiLCJtdXN0VW5lc2NhcGUiLCJpc0VzY2FwaW5nIiwiaW5RdW90ZXMiLCJjaGFyQ29kZUF0IiwiU3ludGF4RXJyb3IiLCJyZXBsYWNlIiwidG9rZW4iLCJrRG9uZSIsImtSdW4iLCJjb25jdXJyZW5jeSIsInBlbmRpbmciLCJJbmZpbml0eSIsImpvYnMiLCJhZGQiLCJqb2IiLCJzaGlmdCIsInpsaWIiLCJMaW1pdGVyIiwiVFJBSUxFUiIsImtQZXJNZXNzYWdlRGVmbGF0ZSIsImtUb3RhbExlbmd0aCIsImtDYWxsYmFjayIsImtCdWZmZXJzIiwiemxpYkxpbWl0ZXIiLCJkZWZsYXRlT25EYXRhIiwiaW5mbGF0ZU9uRGF0YSIsIl9tYXhQYXlsb2FkIiwiUmFuZ2VFcnJvciIsInJlc2V0IiwiaW5mbGF0ZU9uRXJyb3IiLCJfaW5mbGF0ZSIsImlzU2VydmVyIiwibWF4UGF5bG9hZCIsIl9vcHRpb25zIiwiX3RocmVzaG9sZCIsInRocmVzaG9sZCIsIl9pc1NlcnZlciIsIl9kZWZsYXRlIiwiY29uY3VycmVuY3lMaW1pdCIsIm9mZmVyIiwic2VydmVyTm9Db250ZXh0VGFrZW92ZXIiLCJzZXJ2ZXJfbm9fY29udGV4dF90YWtlb3ZlciIsImNsaWVudE5vQ29udGV4dFRha2VvdmVyIiwiY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXIiLCJzZXJ2ZXJNYXhXaW5kb3dCaXRzIiwic2VydmVyX21heF93aW5kb3dfYml0cyIsImNsaWVudE1heFdpbmRvd0JpdHMiLCJjbGllbnRfbWF4X3dpbmRvd19iaXRzIiwiYWNjZXB0Iiwibm9ybWFsaXplUGFyYW1zIiwiYWNjZXB0QXNTZXJ2ZXIiLCJhY2NlcHRBc0NsaWVudCIsImNsZWFudXAiLCJjbG9zZSIsImNhbGxiYWNrIiwiRXJyb3IiLCJvcHRzIiwiYWNjZXB0ZWQiLCJyZXNwb25zZSIsImZvckVhY2giLCJrZXkiLCJudW0iLCJpc0ludGVnZXIiLCJUeXBlRXJyb3IiLCJkZWNvbXByZXNzIiwiZmluIiwiZG9uZSIsIl9kZWNvbXByZXNzIiwiY29tcHJlc3MiLCJfY29tcHJlc3MiLCJlbmRwb2ludCIsIndpbmRvd0JpdHMiLCJaX0RFRkFVTFRfV0lORE9XQklUUyIsImNyZWF0ZUluZmxhdGVSYXciLCJ6bGliSW5mbGF0ZU9wdGlvbnMiLCJ3cml0ZSIsImZsdXNoIiwiX3JlYWRhYmxlU3RhdGUiLCJlbmRFbWl0dGVkIiwiY3JlYXRlRGVmbGF0ZVJhdyIsInpsaWJEZWZsYXRlT3B0aW9ucyIsIlpfU1lOQ19GTFVTSCIsIldyaXRhYmxlIiwiUGVyTWVzc2FnZURlZmxhdGUiLCJpc1ZhbGlkU3RhdHVzQ29kZSIsImlzVmFsaWRVVEY4IiwiRXJyb3JDdG9yIiwicHJlZml4Iiwic3RhdHVzQ29kZSIsImVycm9yQ29kZSIsImNhcHR1cmVTdGFja1RyYWNlIiwiX2JpbmFyeVR5cGUiLCJiaW5hcnlUeXBlIiwiX2V4dGVuc2lvbnMiLCJfc2tpcFVURjhWYWxpZGF0aW9uIiwic2tpcFVURjhWYWxpZGF0aW9uIiwiX2J1ZmZlcmVkQnl0ZXMiLCJfYnVmZmVycyIsIl9jb21wcmVzc2VkIiwiX3BheWxvYWRMZW5ndGgiLCJfZnJhZ21lbnRlZCIsIl9tYXNrZWQiLCJfZmluIiwiX29wY29kZSIsIl90b3RhbFBheWxvYWRMZW5ndGgiLCJfbWVzc2FnZUxlbmd0aCIsIl9mcmFnbWVudHMiLCJfc3RhdGUiLCJfbG9vcCIsIl93cml0ZSIsImVuY29kaW5nIiwiY2IiLCJzdGFydExvb3AiLCJjb25zdW1lIiwibiIsImRzdCIsIlVpbnQ4QXJyYXkiLCJnZXRJbmZvIiwiZ2V0UGF5bG9hZExlbmd0aDE2IiwiZ2V0UGF5bG9hZExlbmd0aDY0IiwiZ2V0TWFzayIsImdldERhdGEiLCJjb21wcmVzc2VkIiwiaGF2ZUxlbmd0aCIsInJlYWRVSW50MTZCRSIsInJlYWRVSW50MzJCRSIsIk1hdGgiLCJwb3ciLCJjb250cm9sTWVzc2FnZSIsImRhdGFNZXNzYWdlIiwiZXIiLCJtZXNzYWdlTGVuZ3RoIiwiZnJhZ21lbnRzIiwiZW1pdCIsInJhbmRvbUZpbGxTeW5jIiwiYXBwbHlNYXNrIiwia0J5dGVMZW5ndGgiLCJtYXNrQnVmZmVyIiwic29ja2V0IiwiZ2VuZXJhdGVNYXNrIiwiX2dlbmVyYXRlTWFzayIsIl9tYXNrQnVmZmVyIiwiX3NvY2tldCIsIl9maXJzdEZyYWdtZW50IiwiX2RlZmxhdGluZyIsIl9xdWV1ZSIsImZyYW1lIiwiZGF0YUxlbmd0aCIsIm1lcmdlIiwic2tpcE1hc2tpbmciLCJwYXlsb2FkTGVuZ3RoIiwib3Bjb2RlIiwicnN2MSIsIndyaXRlVUludDE2QkUiLCJ3cml0ZVVJbnRCRSIsImVucXVldWUiLCJkaXNwYXRjaCIsInNlbmRGcmFtZSIsInBpbmciLCJwb25nIiwicGVyTWVzc2FnZURlZmxhdGUiLCJiaW5hcnkiLCJfIiwiZGVzdHJveWVkIiwiZGVxdWV1ZSIsIlJlZmxlY3QiLCJhcHBseSIsImNvcmsiLCJ1bmNvcmsiLCJEdXBsZXgiLCJlbWl0Q2xvc2UiLCJzdHJlYW0iLCJkdXBsZXhPbkVuZCIsIl93cml0YWJsZVN0YXRlIiwiZmluaXNoZWQiLCJkZXN0cm95IiwiZHVwbGV4T25FcnJvciIsImxpc3RlbmVyQ291bnQiLCJ3cyIsInRlcm1pbmF0ZU9uRGVzdHJveSIsImR1cGxleCIsImF1dG9EZXN0cm95Iiwib2JqZWN0TW9kZSIsIndyaXRhYmxlT2JqZWN0TW9kZSIsIm1zZyIsInBhdXNlIiwiX2Rlc3Ryb3kiLCJyZWFkeVN0YXRlIiwiQ0xPU0VEIiwibmV4dFRpY2siLCJjYWxsZWQiLCJ0ZXJtaW5hdGUiLCJfZmluYWwiLCJDT05ORUNUSU5HIiwiX3JlYWQiLCJpc1BhdXNlZCIsInJlc3VtZSIsInByb3RvY29scyIsIlNldCIsInByb3RvY29sIiwiaGFzIiwiX2lzVmFsaWRVVEY4IiwibGVuIiwiV1NfTk9fVVRGXzhfVkFMSURBVEUiLCJFdmVudEVtaXR0ZXIiLCJjcmVhdGVIYXNoIiwic3VicHJvdG9jb2wiLCJrZXlSZWdleCIsInNlcnZlciIsInNvY2tldE9uRXJyb3IiLCJhYm9ydEhhbmRzaGFrZSIsIlNUQVRVU19DT0RFUyIsIkNvbm5lY3Rpb24iLCJoIiwiYWJvcnRIYW5kc2hha2VPckVtaXR3c0NsaWVudEVycm9yIiwiaGFuZGxlUHJvdG9jb2xzIiwiY2xpZW50VHJhY2tpbmciLCJ2ZXJpZnlDbGllbnQiLCJub1NlcnZlciIsImJhY2tsb2ciLCJob3N0IiwiX3NlcnZlciIsImJvZHkiLCJlbWl0Q29ubmVjdGlvbiIsImJpbmQiLCJfcmVtb3ZlTGlzdGVuZXJzIiwiYWRkTGlzdGVuZXJzIiwibGlzdGVuaW5nIiwidXBncmFkZSIsImhlYWQiLCJoYW5kbGVVcGdyYWRlIiwiY2xpZW50cyIsIl9zaG91bGRFbWl0Q2xvc2UiLCJhZGRyZXNzIiwic2l6ZSIsInNob3VsZEhhbmRsZSIsImluZGV4T2YiLCJ2ZXJzaW9uIiwibWV0aG9kIiwidG9Mb3dlckNhc2UiLCJ0ZXN0Iiwic2VjV2ViU29ja2V0UHJvdG9jb2wiLCJzZWNXZWJTb2NrZXRFeHRlbnNpb25zIiwiaW5mbyIsIm9yaWdpbiIsInNlY3VyZSIsImF1dGhvcml6ZWQiLCJlbmNyeXB0ZWQiLCJ2ZXJpZmllZCIsImNvbXBsZXRlVXBncmFkZSIsInJlYWRhYmxlIiwidXBkYXRlIiwiZGlnZXN0IiwibmV4dCIsIl9wcm90b2NvbCIsInNldFNvY2tldCIsImRlbGV0ZSIsImh0dHBzIiwibmV0IiwidGxzIiwicmFuZG9tQnl0ZXMiLCJSZWFkYWJsZSIsIlVSTCIsImtBYm9ydGVkIiwicHJvdG9jb2xWZXJzaW9ucyIsInJlYWR5U3RhdGVzIiwic3VicHJvdG9jb2xSZWdleCIsIl9jbG9zZUNvZGUiLCJfY2xvc2VNZXNzYWdlIiwiX2Nsb3NlVGltZXIiLCJfcGF1c2VkIiwiX3JlYWR5U3RhdGUiLCJfcmVjZWl2ZXIiLCJfc2VuZGVyIiwiX2J1ZmZlcmVkQW1vdW50IiwiX3JlZGlyZWN0cyIsImluaXRBc0NsaWVudCIsImluY2x1ZGVzIiwiYnVmZmVyZWRBbW91bnQiLCJvbmNsb3NlIiwib25lcnJvciIsIm9ub3BlbiIsIm9ubWVzc2FnZSIsIl91cmwiLCJyZWNlaXZlciIsInJlY2VpdmVyT25Db25jbHVkZSIsInJlY2VpdmVyT25EcmFpbiIsInJlY2VpdmVyT25FcnJvciIsInJlY2VpdmVyT25NZXNzYWdlIiwicmVjZWl2ZXJPblBpbmciLCJyZWNlaXZlck9uUG9uZyIsInNldFRpbWVvdXQiLCJzZXROb0RlbGF5IiwidW5zaGlmdCIsInNvY2tldE9uQ2xvc2UiLCJzb2NrZXRPbkRhdGEiLCJzb2NrZXRPbkVuZCIsIk9QRU4iLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJfcmVxIiwiQ0xPU0lORyIsImVycm9yRW1pdHRlZCIsInNlbmRBZnRlckNsb3NlIiwibmVlZERyYWluIiwid2Vic29ja2V0IiwicHJvdG9jb2xWZXJzaW9uIiwiZm9sbG93UmVkaXJlY3RzIiwibWF4UmVkaXJlY3RzIiwiY3JlYXRlQ29ubmVjdGlvbiIsInNvY2tldFBhdGgiLCJob3N0bmFtZSIsInRpbWVvdXQiLCJwYXJzZWRVcmwiLCJocmVmIiwiaXNTZWN1cmUiLCJpc1VuaXhTb2NrZXQiLCJpbnZhbGlkVVJMTWVzc2FnZSIsInBhdGhuYW1lIiwiaGFzaCIsImVtaXRFcnJvckFuZENsb3NlIiwiZGVmYXVsdFBvcnQiLCJyZXF1ZXN0IiwicHJvdG9jb2xTZXQiLCJ0bHNDb25uZWN0IiwibmV0Q29ubmVjdCIsInN0YXJ0c1dpdGgiLCJVcGdyYWRlIiwic2VhcmNoIiwiaGFuZHNoYWtlVGltZW91dCIsIk9yaWdpbiIsInVzZXJuYW1lIiwiYXV0aCIsInBhcnRzIiwic3BsaXQiLCJfb3JpZ2luYWxTZWN1cmUiLCJfb3JpZ2luYWxIb3N0IiwiZW50cmllcyIsImlzU2FtZUhvc3QiLCJhdXRob3JpemF0aW9uIiwiY29va2llIiwibG9jYXRpb24iLCJhZGRyIiwiYWJvcnQiLCJzZXJ2ZXJQcm90IiwicHJvdEVycm9yIiwiZXh0ZW5zaW9uTmFtZXMiLCJjb25uZWN0Iiwic2VydmVybmFtZSIsImlzSVAiLCJzZXRIZWFkZXIiLCJyZWNlaXZlck9uRmluaXNoIiwicmVhZCIsImNsZWFyVGltZW91dCIsInByb3BlcnR5IiwicmVxdWlyZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iXSwic291cmNlUm9vdCI6IiJ9