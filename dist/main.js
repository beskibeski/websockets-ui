(()=>{"use strict";var e={148:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(852),i=r(s(784)),n="8181";console.log(`Start static http server on the ${n} port!`),o.httpServer.listen(n),i.default.start()},287:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentPlayerWithoutPassword=t.getCurrentPlayer=t.setCurrentPlayer=t.getPlayerIndex=t.checkPlayer=t.checkPassword=t.showPlayers=t.addPlayer=void 0;const s=[];let r;t.addPlayer=e=>{s.push(e)},t.showPlayers=()=>{console.log(s)},t.checkPlayer=e=>void 0!==s.find((t=>t.name===e.name)),t.checkPassword=e=>void 0!==s.find((t=>t.password===e.password)),t.getPlayerIndex=e=>{let t="";return s.filter((s=>{if(s.name===e.name)return t=s.index,s.index})),t},t.setCurrentPlayer=e=>{r=e};const o=()=>r;t.getCurrentPlayer=o,t.getCurrentPlayerWithoutPassword=()=>({name:o().name,index:o().index})},424:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentRoom=t.deleteRoom=t.addPlayerToRoom=t.addRoom=t.getRooms=void 0;const r=s(287);let o=[];t.getRooms=()=>o,t.addRoom=e=>{o.push(e)},t.addPlayerToRoom=()=>{o[0].roomUsers.push((0,r.getCurrentPlayerWithoutPassword)())},t.deleteRoom=()=>{o=[],console.log("Room deleted")},t.getCurrentRoom=()=>o[0]},476:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addWinToWinner=t.getWinners=t.addWinner=void 0;let s=[];t.addWinner=e=>{void 0===s.find((t=>t.name===e))&&s.push({name:e,wins:0})},t.addWinToWinner=e=>{s.map((t=>{t.name===e.name&&(t.wins+=1)}))},t.getWinners=()=>s},852:function(e,t,s){var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,o)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.httpServer=void 0;const n=i(s(58)),a=i(s(72)),c=i(s(136));t.httpServer=c.createServer((function(e,t){const s=a.resolve(a.dirname(""))+("/"===e.url?"/front/index.html":"/front"+e.url);n.readFile(s,(function(e,s){if(e)return t.writeHead(404),void t.end(JSON.stringify(e));t.writeHead(200),t.end(s)}))}))},980:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(s(968)),i=s(424),n=s(784);t.default=()=>{const e=[],t=o.default.randomUUID();(0,i.getCurrentRoom)().roomUsers.forEach((t=>{e.push(t.index)})),e.forEach((e=>{n.wsServer.clients.forEach((s=>{if(s.id===e){const r={idGame:t,idPlayer:e},o={type:"create_game",data:JSON.stringify(r),id:0};s.send(JSON.stringify(o))}}))})),console.log("Game created"),(0,i.deleteRoom)()}},448:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.registrateNewPlayer=t.loginWithWrongPassword=t.login=void 0;const o=s(287),i=s(764),n=r(s(960)),a=(e,t)=>{const s={name:t.name,index:e.id,error:!1},r={type:"reg",data:JSON.stringify(s),id:0};console.log(`Login for player ${t.name} successful`),e.send(JSON.stringify(r)),(0,i.updateRoom)(e),(0,n.default)(e),(0,o.setCurrentPlayer)(t)};t.login=a,t.loginWithWrongPassword=(e,t)=>{const s={name:t.name,index:e.id,errorText:"Wrong login name or password",error:!0},r={type:"reg",data:JSON.stringify(s),id:0};console.log("Wrong credentials"),e.send(JSON.stringify(r))},t.registrateNewPlayer=(e,t)=>{t.index=e.id,(0,o.addPlayer)(t),console.log(`Registration of player ${t.name} is successful`),a(e,t)}},404:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=s(287),o=s(448),i=s(764);t.default=(e,t)=>{const s=JSON.parse(e.toString());switch((e=>e.type)(s)){case"reg":const e=JSON.parse(s.data);(0,r.checkPlayer)(e)&&(0,r.checkPassword)(e)?(0,o.login)(t,e):(0,r.checkPlayer)(e)?(0,o.loginWithWrongPassword)(t,e):(0,o.registrateNewPlayer)(t,e);break;case"create_room":(0,i.createRoom)(t);break;case"add_user_to_room":(0,i.addToRoom)(t);break;case"single_play":console.log(s.type)}}},764:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.addToRoom=t.updateRoom=t.createRoom=void 0;const o=s(424),i=r(s(980));t.createRoom=e=>{console.log("Room is created");const t={roomId:crypto.randomUUID(),roomUsers:[]};(0,o.addRoom)(t);const s={type:"update_room",data:JSON.stringify((0,o.getRooms)()),id:0};e.send(JSON.stringify(s))};const n=e=>{console.log("Rooms updated");const t={type:"update_room",data:JSON.stringify((0,o.getRooms)()),id:0};e.send(JSON.stringify(t))};t.updateRoom=n,t.addToRoom=e=>{console.log("Player is added to room"),(0,o.getRooms)()[0].roomUsers.length<1?((0,o.addPlayerToRoom)(),n(e)):((0,o.addPlayerToRoom)(),(0,i.default)())}},960:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=s(476);t.default=e=>{console.log("Winners updated");const t={type:"update_winners",data:JSON.stringify((0,r.getWinners)()),id:0};e.send(JSON.stringify(t))}},784:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.wsServer=void 0;const o=s(472),i=r(s(404)),n=r(s(968)),a=Number("3000");t.default={start(){const e=new o.WebSocketServer({port:a});t.wsServer=e,e.on("connection",((e,t)=>{console.log(`Websocket is started on ${Object.values(t.headers)[0]} with security key ${Object.values(t.headers)[10]}`),e.id=n.default.randomUUID(),e.on("message",(t=>{(0,i.default)(t,e)})),e.on("close",(()=>{console.log("Websocket is disconnected")}))}))}}},472:(e,t,s)=>{const r=s(144);r.createWebSocketStream=s(408),r.Server=s(796),r.Receiver=s(804),r.Sender=s(957),r.WebSocket=r,r.WebSocketServer=r.Server,e.exports=r},92:(e,t,s)=>{const{EMPTY_BUFFER:r}=s(820);function o(e,t,s,r,o){for(let i=0;i<o;i++)s[r+i]=e[i]^t[3&i]}function i(e,t){for(let s=0;s<e.length;s++)e[s]^=t[3&s]}if(e.exports={concat:function(e,t){if(0===e.length)return r;if(1===e.length)return e[0];const s=Buffer.allocUnsafe(t);let o=0;for(let t=0;t<e.length;t++){const r=e[t];s.set(r,o),o+=r.length}return o<t?s.slice(0,o):s},mask:o,toArrayBuffer:function(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)},toBuffer:function e(t){if(e.readOnly=!0,Buffer.isBuffer(t))return t;let s;return t instanceof ArrayBuffer?s=Buffer.from(t):ArrayBuffer.isView(t)?s=Buffer.from(t.buffer,t.byteOffset,t.byteLength):(s=Buffer.from(t),e.readOnly=!1),s},unmask:i},!process.env.WS_NO_BUFFER_UTIL)try{const t=s(Object(function(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.mask=function(e,s,r,i,n){n<48?o(e,s,r,i,n):t.mask(e,s,r,i,n)},e.exports.unmask=function(e,s){e.length<32?i(e,s):t.unmask(e,s)}}catch(e){}},820:e=>{e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},584:(e,t,s)=>{const{kForOnEventAttribute:r,kListener:o}=s(820),i=Symbol("kCode"),n=Symbol("kData"),a=Symbol("kError"),c=Symbol("kMessage"),h=Symbol("kReason"),l=Symbol("kTarget"),d=Symbol("kType"),f=Symbol("kWasClean");class u{constructor(e){this[l]=null,this[d]=e}get target(){return this[l]}get type(){return this[d]}}Object.defineProperty(u.prototype,"target",{enumerable:!0}),Object.defineProperty(u.prototype,"type",{enumerable:!0});class _ extends u{constructor(e,t={}){super(e),this[i]=void 0===t.code?0:t.code,this[h]=void 0===t.reason?"":t.reason,this[f]=void 0!==t.wasClean&&t.wasClean}get code(){return this[i]}get reason(){return this[h]}get wasClean(){return this[f]}}Object.defineProperty(_.prototype,"code",{enumerable:!0}),Object.defineProperty(_.prototype,"reason",{enumerable:!0}),Object.defineProperty(_.prototype,"wasClean",{enumerable:!0});class p extends u{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[c]}}Object.defineProperty(p.prototype,"error",{enumerable:!0}),Object.defineProperty(p.prototype,"message",{enumerable:!0});class m extends u{constructor(e,t={}){super(e),this[n]=void 0===t.data?null:t.data}get data(){return this[n]}}Object.defineProperty(m.prototype,"data",{enumerable:!0});const y={addEventListener(e,t,s={}){let i;if("message"===e)i=function(e,s){const r=new m("message",{data:s?e:e.toString()});r[l]=this,t.call(this,r)};else if("close"===e)i=function(e,s){const r=new _("close",{code:e,reason:s.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});r[l]=this,t.call(this,r)};else if("error"===e)i=function(e){const s=new p("error",{error:e,message:e.message});s[l]=this,t.call(this,s)};else{if("open"!==e)return;i=function(){const e=new u("open");e[l]=this,t.call(this,e)}}i[r]=!!s[r],i[o]=t,s.once?this.once(e,i):this.on(e,i)},removeEventListener(e,t){for(const s of this.listeners(e))if(s[o]===t&&!s[r]){this.removeListener(e,s);break}}};e.exports={CloseEvent:_,ErrorEvent:p,Event:u,EventTarget:y,MessageEvent:m}},56:(e,t,s)=>{const{tokenChars:r}=s(708);function o(e,t,s){void 0===e[t]?e[t]=[s]:e[t].push(s)}e.exports={format:function(e){return Object.keys(e).map((t=>{let s=e[t];return Array.isArray(s)||(s=[s]),s.map((e=>[t].concat(Object.keys(e).map((t=>{let s=e[t];return Array.isArray(s)||(s=[s]),s.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const t=Object.create(null);let s,i,n=Object.create(null),a=!1,c=!1,h=!1,l=-1,d=-1,f=-1,u=0;for(;u<e.length;u++)if(d=e.charCodeAt(u),void 0===s)if(-1===f&&1===r[d])-1===l&&(l=u);else if(0===u||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${u}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${u}`);-1===f&&(f=u);const r=e.slice(l,f);44===d?(o(t,r,n),n=Object.create(null)):s=r,l=f=-1}}else-1===f&&-1!==l&&(f=u);else if(void 0===i)if(-1===f&&1===r[d])-1===l&&(l=u);else if(32===d||9===d)-1===f&&-1!==l&&(f=u);else if(59===d||44===d){if(-1===l)throw new SyntaxError(`Unexpected character at index ${u}`);-1===f&&(f=u),o(n,e.slice(l,f),!0),44===d&&(o(t,s,n),n=Object.create(null),s=void 0),l=f=-1}else{if(61!==d||-1===l||-1!==f)throw new SyntaxError(`Unexpected character at index ${u}`);i=e.slice(l,u),l=f=-1}else if(c){if(1!==r[d])throw new SyntaxError(`Unexpected character at index ${u}`);-1===l?l=u:a||(a=!0),c=!1}else if(h)if(1===r[d])-1===l&&(l=u);else if(34===d&&-1!==l)h=!1,f=u;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${u}`);c=!0}else if(34===d&&61===e.charCodeAt(u-1))h=!0;else if(-1===f&&1===r[d])-1===l&&(l=u);else if(-1===l||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${u}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${u}`);-1===f&&(f=u);let r=e.slice(l,f);a&&(r=r.replace(/\\/g,""),a=!1),o(n,i,r),44===d&&(o(t,s,n),n=Object.create(null),s=void 0),i=void 0,l=f=-1}}else-1===f&&(f=u);if(-1===l||h||32===d||9===d)throw new SyntaxError("Unexpected end of input");-1===f&&(f=u);const _=e.slice(l,f);return void 0===s?o(t,_,n):(void 0===i?o(n,_,!0):o(n,i,a?_.replace(/\\/g,""):_),o(t,s,n)),t}}},156:e=>{const t=Symbol("kDone"),s=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[s]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[s]()}[s](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},516:(e,t,s)=>{const r=s(592),o=s(92),i=s(156),{kStatusCode:n}=s(820),a=Buffer.from([0,0,255,255]),c=Symbol("permessage-deflate"),h=Symbol("total-length"),l=Symbol("callback"),d=Symbol("buffers"),f=Symbol("error");let u;function _(e){this[d].push(e),this[h]+=e.length}function p(e){this[h]+=e.length,this[c]._maxPayload<1||this[h]<=this[c]._maxPayload?this[d].push(e):(this[f]=new RangeError("Max payload size exceeded"),this[f].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[f][n]=1009,this.removeListener("data",p),this.reset())}function m(e){this[c]._inflate=null,e[n]=1007,this[l](e)}e.exports=class{constructor(e,t,s){if(this._maxPayload=0|s,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!u){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;u=new i(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[l];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,s=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!s)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(s.server_no_context_takeover=!0),t.clientNoContextTakeover&&(s.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(s.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?s.client_max_window_bits=t.clientMaxWindowBits:!0!==s.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete s.client_max_window_bits,s}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let s=e[t];if(s.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(s=s[0],"client_max_window_bits"===t){if(!0!==s){const e=+s;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${s}`);s=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${s}`)}else if("server_max_window_bits"===t){const e=+s;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${s}`);s=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==s)throw new TypeError(`Invalid value for parameter "${t}": ${s}`)}e[t]=s}))})),e}decompress(e,t,s){u.add((r=>{this._decompress(e,t,((e,t)=>{r(),s(e,t)}))}))}compress(e,t,s){u.add((r=>{this._compress(e,t,((e,t)=>{r(),s(e,t)}))}))}_decompress(e,t,s){const i=this._isServer?"client":"server";if(!this._inflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?r.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=r.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[c]=this,this._inflate[h]=0,this._inflate[d]=[],this._inflate.on("error",m),this._inflate.on("data",p)}this._inflate[l]=s,this._inflate.write(e),t&&this._inflate.write(a),this._inflate.flush((()=>{const e=this._inflate[f];if(e)return this._inflate.close(),this._inflate=null,void s(e);const r=o.concat(this._inflate[d],this._inflate[h]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[h]=0,this._inflate[d]=[],t&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),s(null,r)}))}_compress(e,t,s){const i=this._isServer?"server":"client";if(!this._deflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?r.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=r.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[h]=0,this._deflate[d]=[],this._deflate.on("data",_)}this._deflate[l]=s,this._deflate.write(e),this._deflate.flush(r.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=o.concat(this._deflate[d],this._deflate[h]);t&&(e=e.slice(0,e.length-4)),this._deflate[l]=null,this._deflate[h]=0,this._deflate[d]=[],t&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),s(null,e)}))}}},804:(e,t,s)=>{const{Writable:r}=s(378),o=s(516),{BINARY_TYPES:i,EMPTY_BUFFER:n,kStatusCode:a,kWebSocket:c}=s(820),{concat:h,toArrayBuffer:l,unmask:d}=s(92),{isValidStatusCode:f,isValidUTF8:u}=s(708);function _(e,t,s,r,o){const i=new e(s?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,_),i.code=o,i[a]=r,i}e.exports=class extends r{constructor(e={}){super(),this._binaryType=e.binaryType||i[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,s){if(8===this._opcode&&0==this._state)return s();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(s)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const s=this._buffers[0],r=t.length-e;e>=s.length?t.set(this._buffers.shift(),r):(t.set(new Uint8Array(s.buffer,s.byteOffset,e),r),this._buffers[0]=s.slice(e)),e-=s.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,_(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const t=64==(64&e[0]);if(t&&!this._extensions[o.extensionName])return this._loop=!1,_(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,_(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,_(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,_(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,_(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,_(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,_(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,_(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,_(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,_(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,_(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,_(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=n;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&0!=(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])&&d(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[o.extensionName].decompress(e,this._fin,((e,s)=>{if(e)return t(e);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(_(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(s)}const r=this.dataMessage();if(r)return t(r);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let s;s="nodebuffer"===this._binaryType?h(t,e):"arraybuffer"===this._binaryType?l(h(t,e)):t,this.emit("message",s,!0)}else{const s=h(t,e);if(!this._skipUTF8Validation&&!u(s))return this._loop=!1,_(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",s,!1)}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,n),this.end();else{if(1===e.length)return _(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{const t=e.readUInt16BE(0);if(!f(t))return _(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const s=e.slice(2);if(!this._skipUTF8Validation&&!u(s))return _(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,s),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},957:(e,t,s)=>{s(872),s(192);const{randomFillSync:r}=s(968),o=s(516),{EMPTY_BUFFER:i}=s(820),{isValidStatusCode:n}=s(708),{mask:a,toBuffer:c}=s(92),h=Symbol("kByteLength"),l=Buffer.alloc(4);class d{constructor(e,t,s){this._extensions=t||{},s&&(this._generateMask=s,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let s,o,i=!1,n=2,c=!1;t.mask&&(s=t.maskBuffer||l,t.generateMask?t.generateMask(s):r(s,0,4),c=0==(s[0]|s[1]|s[2]|s[3]),n=6),"string"==typeof e?o=t.mask&&!c||void 0===t[h]?(e=Buffer.from(e)).length:t[h]:(o=e.length,i=t.mask&&t.readOnly&&!c);let d=o;o>=65536?(n+=8,d=127):o>125&&(n+=2,d=126);const f=Buffer.allocUnsafe(i?o+n:n);return f[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(f[0]|=64),f[1]=d,126===d?f.writeUInt16BE(o,2):127===d&&(f[2]=f[3]=0,f.writeUIntBE(o,4,6)),t.mask?(f[1]|=128,f[n-4]=s[0],f[n-3]=s[1],f[n-2]=s[2],f[n-1]=s[3],c?[f,e]:i?(a(e,s,f,n,o),[f]):(a(e,s,e,0,o),[f,e])):[f,e]}close(e,t,s,r){let o;if(void 0===e)o=i;else{if("number"!=typeof e||!n(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const s=Buffer.byteLength(t);if(s>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+s),o.writeUInt16BE(e,0),"string"==typeof t?o.write(t,2):o.set(t,2)}else o=Buffer.allocUnsafe(2),o.writeUInt16BE(e,0)}const a={[h]:o.length,fin:!0,generateMask:this._generateMask,mask:s,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,o,!1,a,r]):this.sendFrame(d.frame(o,a),r)}ping(e,t,s){let r,o;if("string"==typeof e?(r=Buffer.byteLength(e),o=!1):(r=(e=c(e)).length,o=c.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");const i={[h]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,i,s]):this.sendFrame(d.frame(e,i),s)}pong(e,t,s){let r,o;if("string"==typeof e?(r=Buffer.byteLength(e),o=!1):(r=(e=c(e)).length,o=c.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");const i={[h]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,i,s]):this.sendFrame(d.frame(e,i),s)}send(e,t,s){const r=this._extensions[o.extensionName];let i,n,a=t.binary?2:1,l=t.compress;if("string"==typeof e?(i=Buffer.byteLength(e),n=!1):(i=(e=c(e)).length,n=c.readOnly),this._firstFragment?(this._firstFragment=!1,l&&r&&r.params[r._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(l=i>=r._threshold),this._compress=l):(l=!1,a=0),t.fin&&(this._firstFragment=!0),r){const r={[h]:i,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:n,rsv1:l};this._deflating?this.enqueue([this.dispatch,e,this._compress,r,s]):this.dispatch(e,this._compress,r,s)}else this.sendFrame(d.frame(e,{[h]:i,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:n,rsv1:!1}),s)}dispatch(e,t,s,r){if(!t)return void this.sendFrame(d.frame(e,s),r);const i=this._extensions[o.extensionName];this._bufferedBytes+=s[h],this._deflating=!0,i.compress(e,s.fin,((e,t)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof r&&r(e);for(let t=0;t<this._queue.length;t++){const s=this._queue[t],r=s[s.length-1];"function"==typeof r&&r(e)}}else this._bufferedBytes-=s[h],this._deflating=!1,s.readOnly=!1,this.sendFrame(d.frame(t,s),r),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][h],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][h],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=d},408:(e,t,s)=>{const{Duplex:r}=s(378);function o(e){e.emit("close")}function i(){!this.destroyed&&this._writableState.finished&&this.destroy()}function n(e){this.removeListener("error",n),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let s=!0;const a=new r({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t,s){const r=!s&&a._readableState.objectMode?t.toString():t;a.push(r)||e.pause()})),e.once("error",(function(e){a.destroyed||(s=!1,a.destroy(e))})),e.once("close",(function(){a.destroyed||a.push(null)})),a._destroy=function(t,r){if(e.readyState===e.CLOSED)return r(t),void process.nextTick(o,a);let i=!1;e.once("error",(function(e){i=!0,r(e)})),e.once("close",(function(){i||r(t),process.nextTick(o,a)})),s&&e.terminate()},a._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),a._readableState.endEmitted&&a.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){a._final(t)}))},a._read=function(){e.isPaused&&e.resume()},a._write=function(t,s,r){e.readyState!==e.CONNECTING?e.send(t,r):e.once("open",(function(){a._write(t,s,r)}))},a.on("end",i),a.on("error",n),a}},728:(e,t,s)=>{const{tokenChars:r}=s(708);e.exports={parse:function(e){const t=new Set;let s=-1,o=-1,i=0;for(;i<e.length;i++){const n=e.charCodeAt(i);if(-1===o&&1===r[n])-1===s&&(s=i);else if(0===i||32!==n&&9!==n){if(44!==n)throw new SyntaxError(`Unexpected character at index ${i}`);{if(-1===s)throw new SyntaxError(`Unexpected character at index ${i}`);-1===o&&(o=i);const r=e.slice(s,o);if(t.has(r))throw new SyntaxError(`The "${r}" subprotocol is duplicated`);t.add(r),s=o=-1}}else-1===o&&-1!==s&&(o=i)}if(-1===s||-1!==o)throw new SyntaxError("Unexpected end of input");const n=e.slice(s,i);if(t.has(n))throw new SyntaxError(`The "${n}" subprotocol is duplicated`);return t.add(n),t}}},708:(e,t,s)=>{function r(e){const t=e.length;let s=0;for(;s<t;)if(0==(128&e[s]))s++;else if(192==(224&e[s])){if(s+1===t||128!=(192&e[s+1])||192==(254&e[s]))return!1;s+=2}else if(224==(240&e[s])){if(s+2>=t||128!=(192&e[s+1])||128!=(192&e[s+2])||224===e[s]&&128==(224&e[s+1])||237===e[s]&&160==(224&e[s+1]))return!1;s+=3}else{if(240!=(248&e[s]))return!1;if(s+3>=t||128!=(192&e[s+1])||128!=(192&e[s+2])||128!=(192&e[s+3])||240===e[s]&&128==(240&e[s+1])||244===e[s]&&e[s+1]>143||e[s]>244)return!1;s+=4}return!0}if(e.exports={isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:r,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},!process.env.WS_NO_UTF_8_VALIDATE)try{const t=s(Object(function(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.isValidUTF8=function(e){return e.length<150?r(e):t(e)}}catch(e){}},796:(e,t,s)=>{const r=s(467),o=s(136),{createHash:i}=(s(256),s(872),s(192),s(968)),n=s(56),a=s(516),c=s(728),h=s(144),{GUID:l,kWebSocket:d}=s(820),f=/^[+/0-9A-Za-z]{22}==$/;function u(e){e._state=2,e.emit("close")}function _(){this.destroy()}function p(e,t,s,r){s=s||o.STATUS_CODES[t],r={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(s),...r},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${o.STATUS_CODES[t]}\r\n`+Object.keys(r).map((e=>`${e}: ${r[e]}`)).join("\r\n")+"\r\n\r\n"+s)}function m(e,t,s,r,o){if(e.listenerCount("wsClientError")){const r=new Error(o);Error.captureStackTrace(r,m),e.emit("wsClientError",r,s,t)}else p(s,r,o)}e.exports=class extends r{constructor(e,t){if(super(),null==(e={maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:h,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=o.createServer(((e,t)=>{const s=o.STATUS_CODES[426];t.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),t.end(s)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const s of Object.keys(t))e.on(s,t[s]);return function(){for(const s of Object.keys(t))e.removeListener(s,t[s])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,s,r)=>{this.handleUpgrade(t,s,r,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(u,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(u,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{u(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,s,r){t.on("error",_);const o=e.headers["sec-websocket-key"],i=+e.headers["sec-websocket-version"];if("GET"!==e.method)return void m(this,e,t,405,"Invalid HTTP method");if("websocket"!==e.headers.upgrade.toLowerCase())return void m(this,e,t,400,"Invalid Upgrade header");if(!o||!f.test(o))return void m(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");if(8!==i&&13!==i)return void m(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");if(!this.shouldHandle(e))return void p(t,400);const h=e.headers["sec-websocket-protocol"];let l=new Set;if(void 0!==h)try{l=c.parse(h)}catch(s){return void m(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const d=e.headers["sec-websocket-extensions"],u={};if(this.options.perMessageDeflate&&void 0!==d){const s=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=n.parse(d);e[a.extensionName]&&(s.accept(e[a.extensionName]),u[a.extensionName]=s)}catch(s){return void m(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const n={origin:e.headers[8===i?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(n,((i,n,a,c)=>{if(!i)return p(t,n||401,a,c);this.completeUpgrade(u,o,l,e,t,s,r)}));if(!this.options.verifyClient(n))return p(t,401)}this.completeUpgrade(u,o,l,e,t,s,r)}completeUpgrade(e,t,s,r,o,c,h){if(!o.readable||!o.writable)return o.destroy();if(o[d])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return p(o,503);const f=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${i("sha1").update(t+l).digest("base64")}`],m=new this.options.WebSocket(null);if(s.size){const e=this.options.handleProtocols?this.options.handleProtocols(s,r):s.values().next().value;e&&(f.push(`Sec-WebSocket-Protocol: ${e}`),m._protocol=e)}if(e[a.extensionName]){const t=e[a.extensionName].params,s=n.format({[a.extensionName]:[t]});f.push(`Sec-WebSocket-Extensions: ${s}`),m._extensions=e}this.emit("headers",f,r),o.write(f.concat("\r\n").join("\r\n")),o.removeListener("error",_),m.setSocket(o,c,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(m),m.on("close",(()=>{this.clients.delete(m),this._shouldEmitClose&&!this.clients.size&&process.nextTick(u,this)}))),h(m,r)}}},144:(e,t,s)=>{const r=s(467),o=s(256),i=s(136),n=s(872),a=s(192),{randomBytes:c,createHash:h}=s(968),{Readable:l}=s(378),{URL:d}=s(716),f=s(516),u=s(804),_=s(957),{BINARY_TYPES:p,EMPTY_BUFFER:m,GUID:y,kForOnEventAttribute:g,kListener:v,kStatusCode:b,kWebSocket:S,NOOP:w}=s(820),{EventTarget:{addEventListener:k,removeEventListener:x}}=s(584),{format:E,parse:O}=s(56),{toBuffer:N}=s(92),C=Symbol("kAborted"),T=[8,13],P=["CONNECTING","OPEN","CLOSING","CLOSED"],L=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class R extends r{constructor(e,t,s){super(),this._binaryType=p[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=m,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=R.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(s=t,t=[]):t=[t]),U(this,e,t,s)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){p.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,s){const r=new u({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation});this._sender=new _(e,this._extensions,s.generateMask),this._receiver=r,this._socket=e,r[S]=this,e[S]=this,r.on("conclude",A),r.on("drain",j),r.on("error",F),r.on("message",G),r.on("ping",V),r.on("pong",q),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",H),e.on("data",J),e.on("end",Y),e.on("error",X),this._readyState=R.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=R.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[f.extensionName]&&this._extensions[f.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=R.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==R.CLOSED){if(this.readyState===R.CONNECTING){const e="WebSocket was closed before the connection was established";return I(this,this._req,e)}this.readyState!==R.CLOSING?(this._readyState=R.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end()}}pause(){this.readyState!==R.CONNECTING&&this.readyState!==R.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,s){if(this.readyState===R.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(s=e,e=t=void 0):"function"==typeof t&&(s=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===R.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||m,t,s)):D(this,e,s)}pong(e,t,s){if(this.readyState===R.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(s=e,e=t=void 0):"function"==typeof t&&(s=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===R.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||m,t,s)):D(this,e,s)}resume(){this.readyState!==R.CONNECTING&&this.readyState!==R.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,s){if(this.readyState===R.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(s=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==R.OPEN)return void D(this,e,s);const r={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[f.extensionName]||(r.compress=!1),this._sender.send(e||m,r,s)}terminate(){if(this.readyState!==R.CLOSED){if(this.readyState===R.CONNECTING){const e="WebSocket was closed before the connection was established";return I(this,this._req,e)}this._socket&&(this._readyState=R.CLOSING,this._socket.destroy())}}}function U(e,t,s,r){const n={protocolVersion:T[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...r,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!T.includes(n.protocolVersion))throw new RangeError(`Unsupported protocol version: ${n.protocolVersion} (supported versions: ${T.join(", ")})`);let a;if(t instanceof d)a=t,e._url=t.href;else{try{a=new d(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}e._url=t}const l="wss:"===a.protocol,u="ws+unix:"===a.protocol;let _;if("ws:"===a.protocol||l||u?u&&!a.pathname?_="The URL's pathname is empty":a.hash&&(_="The URL contains a fragment identifier"):_='The URL\'s protocol must be one of "ws:", "wss:", or "ws+unix:"',_){const t=new SyntaxError(_);if(0===e._redirects)throw t;return void W(e,t)}const p=l?443:80,m=c(16).toString("base64"),g=l?o.request:i.request,v=new Set;let b,S;if(n.createConnection=l?M:B,n.defaultPort=n.defaultPort||p,n.port=a.port||p,n.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,n.headers={"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket",...n.headers},n.path=a.pathname+a.search,n.timeout=n.handshakeTimeout,n.perMessageDeflate&&(b=new f(!0!==n.perMessageDeflate?n.perMessageDeflate:{},!1,n.maxPayload),n.headers["Sec-WebSocket-Extensions"]=E({[f.extensionName]:b.offer()})),s.length){for(const e of s){if("string"!=typeof e||!L.test(e)||v.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");v.add(e)}n.headers["Sec-WebSocket-Protocol"]=s.join(",")}if(n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin),(a.username||a.password)&&(n.auth=`${a.username}:${a.password}`),u){const e=n.path.split(":");n.socketPath=e[0],n.path=e[1]}if(n.followRedirects){if(0===e._redirects){e._originalSecure=l,e._originalHost=a.host;const t=r&&r.headers;if(r={...r,headers:{}},t)for(const[e,s]of Object.entries(t))r.headers[e.toLowerCase()]=s}else if(0===e.listenerCount("redirect")){const t=a.host===e._originalHost;(!t||e._originalSecure&&!l)&&(delete n.headers.authorization,delete n.headers.cookie,t||delete n.headers.host,n.auth=void 0)}n.auth&&!r.headers.authorization&&(r.headers.authorization="Basic "+Buffer.from(n.auth).toString("base64")),S=e._req=g(n),e._redirects&&e.emit("redirect",e.url,S)}else S=e._req=g(n);n.timeout&&S.on("timeout",(()=>{I(e,S,"Opening handshake has timed out")})),S.on("error",(t=>{null===S||S[C]||(S=e._req=null,W(e,t))})),S.on("response",(o=>{const i=o.headers.location,a=o.statusCode;if(i&&n.followRedirects&&a>=300&&a<400){if(++e._redirects>n.maxRedirects)return void I(e,S,"Maximum redirects exceeded");let o;S.abort();try{o=new d(i,t)}catch(t){const s=new SyntaxError(`Invalid URL: ${i}`);return void W(e,s)}U(e,o,s,r)}else e.emit("unexpected-response",S,o)||I(e,S,`Unexpected server response: ${o.statusCode}`)})),S.on("upgrade",((t,s,r)=>{if(e.emit("upgrade",t),e.readyState!==R.CONNECTING)return;if(S=e._req=null,"websocket"!==t.headers.upgrade.toLowerCase())return void I(e,s,"Invalid Upgrade header");const o=h("sha1").update(m+y).digest("base64");if(t.headers["sec-websocket-accept"]!==o)return void I(e,s,"Invalid Sec-WebSocket-Accept header");const i=t.headers["sec-websocket-protocol"];let a;if(void 0!==i?v.size?v.has(i)||(a="Server sent an invalid subprotocol"):a="Server sent a subprotocol but none was requested":v.size&&(a="Server sent no subprotocol"),a)return void I(e,s,a);i&&(e._protocol=i);const c=t.headers["sec-websocket-extensions"];if(void 0!==c){if(!b)return void I(e,s,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=O(c)}catch(t){return void I(e,s,"Invalid Sec-WebSocket-Extensions header")}const r=Object.keys(t);if(1!==r.length||r[0]!==f.extensionName)return void I(e,s,"Server indicated an extension that was not requested");try{b.accept(t[f.extensionName])}catch(t){return void I(e,s,"Invalid Sec-WebSocket-Extensions header")}e._extensions[f.extensionName]=b}e.setSocket(s,r,{generateMask:n.generateMask,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation})})),S.end()}function W(e,t){e._readyState=R.CLOSING,e.emit("error",t),e.emitClose()}function B(e){return e.path=e.socketPath,n.connect(e)}function M(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=n.isIP(e.host)?"":e.host),a.connect(e)}function I(e,t,s){e._readyState=R.CLOSING;const r=new Error(s);Error.captureStackTrace(r,I),t.setHeader?(t[C]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(W,e,r)):(t.destroy(r),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function D(e,t,s){if(t){const s=N(t).length;e._socket?e._sender._bufferedBytes+=s:e._bufferedAmount+=s}s&&s(new Error(`WebSocket is not open: readyState ${e.readyState} (${P[e.readyState]})`))}function A(e,t){const s=this[S];s._closeFrameReceived=!0,s._closeMessage=t,s._closeCode=e,void 0!==s._socket[S]&&(s._socket.removeListener("data",J),process.nextTick(z,s._socket),1005===e?s.close():s.close(e,t))}function j(){const e=this[S];e.isPaused||e._socket.resume()}function F(e){const t=this[S];void 0!==t._socket[S]&&(t._socket.removeListener("data",J),process.nextTick(z,t._socket),t.close(e[b])),t.emit("error",e)}function $(){this[S].emitClose()}function G(e,t){this[S].emit("message",e,t)}function V(e){const t=this[S];t.pong(e,!t._isServer,w),t.emit("ping",e)}function q(e){this[S].emit("pong",e)}function z(e){e.resume()}function H(){const e=this[S];let t;this.removeListener("close",H),this.removeListener("data",J),this.removeListener("end",Y),e._readyState=R.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[S]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",$),e._receiver.on("finish",$))}function J(e){this[S]._receiver.write(e)||this.pause()}function Y(){const e=this[S];e._readyState=R.CLOSING,e._receiver.end(),this.end()}function X(){const e=this[S];this.removeListener("error",X),this.on("error",w),e&&(e._readyState=R.CLOSING,this.destroy())}Object.defineProperty(R,"CONNECTING",{enumerable:!0,value:P.indexOf("CONNECTING")}),Object.defineProperty(R.prototype,"CONNECTING",{enumerable:!0,value:P.indexOf("CONNECTING")}),Object.defineProperty(R,"OPEN",{enumerable:!0,value:P.indexOf("OPEN")}),Object.defineProperty(R.prototype,"OPEN",{enumerable:!0,value:P.indexOf("OPEN")}),Object.defineProperty(R,"CLOSING",{enumerable:!0,value:P.indexOf("CLOSING")}),Object.defineProperty(R.prototype,"CLOSING",{enumerable:!0,value:P.indexOf("CLOSING")}),Object.defineProperty(R,"CLOSED",{enumerable:!0,value:P.indexOf("CLOSED")}),Object.defineProperty(R.prototype,"CLOSED",{enumerable:!0,value:P.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((e=>{Object.defineProperty(R.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(R.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[g])return t[v];return null},set(t){for(const t of this.listeners(e))if(t[g]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[g]:!0})}})})),R.prototype.addEventListener=k,R.prototype.removeEventListener=x,e.exports=R},968:e=>{e.exports=require("crypto")},467:e=>{e.exports=require("events")},58:e=>{e.exports=require("fs")},136:e=>{e.exports=require("http")},256:e=>{e.exports=require("https")},872:e=>{e.exports=require("net")},72:e=>{e.exports=require("path")},378:e=>{e.exports=require("stream")},192:e=>{e.exports=require("tls")},716:e=>{e.exports=require("url")},592:e=>{e.exports=require("zlib")}},t={};!function s(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,s),i.exports}(148)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUSxRLFVDQXpCM2IsRUFBT3hJLFFBQVVta0IsUUFBUSxNLFNDQXpCM2IsRUFBT3hJLFFBQVVta0IsUUFBUSxPLFVDQXpCM2IsRUFBT3hJLFFBQVVta0IsUUFBUSxTLFVDQXpCM2IsRUFBT3hJLFFBQVVta0IsUUFBUSxNLFVDQXpCM2IsRUFBT3hJLFFBQVVta0IsUUFBUSxNLFVDQXpCM2IsRUFBT3hJLFFBQVVta0IsUUFBUSxPLEdDQ3JCQyxFQUEyQixDQUFDLEdBR2hDLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUIvaUIsSUFBakJnakIsRUFDSCxPQUFPQSxFQUFhdmtCLFFBR3JCLElBQUl3SSxFQUFTNGIsRUFBeUJFLEdBQVksQ0FHakR0a0IsUUFBUyxDQUFDLEdBT1gsT0FIQXdrQixFQUFvQkYsR0FBVXJnQixLQUFLdUUsRUFBT3hJLFFBQVN3SSxFQUFRQSxFQUFPeEksUUFBU3FrQixHQUdwRTdiLEVBQU94SSxPQUNmLENDbkIwQnFrQixDQUFvQixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3NfdGFzay8uL2luZGV4LnRzIiwid2VicGFjazovL3dzX3Rhc2svLi9zcmMvZGF0YWJhc2UvcGxheWVycy50cyIsIndlYnBhY2s6Ly93c190YXNrLy4vc3JjL2RhdGFiYXNlL3Jvb21zLnRzIiwid2VicGFjazovL3dzX3Rhc2svLi9zcmMvZGF0YWJhc2Uvd2lubmVycy50cyIsIndlYnBhY2s6Ly93c190YXNrLy4vc3JjL2h0dHBfc2VydmVyL2luZGV4LnRzIiwid2VicGFjazovL3dzX3Rhc2svLi9zcmMvc2VydmljZXMvZ2FtZS50cyIsIndlYnBhY2s6Ly93c190YXNrLy4vc3JjL3NlcnZpY2VzL2xvZ2luLXJlZ2lzdHJhdGUudHMiLCJ3ZWJwYWNrOi8vd3NfdGFzay8uL3NyYy9zZXJ2aWNlcy9tYWtlLWFjdGlvbi50cyIsIndlYnBhY2s6Ly93c190YXNrLy4vc3JjL3NlcnZpY2VzL3Jvb21zLnRzIiwid2VicGFjazovL3dzX3Rhc2svLi9zcmMvc2VydmljZXMvd2lubmVycy50cyIsIndlYnBhY2s6Ly93c190YXNrLy4vc3JjL3dzX3NlcnZlci9pbmRleC50cyIsIndlYnBhY2s6Ly93c190YXNrLy4vbm9kZV9tb2R1bGVzL3dzL2luZGV4LmpzIiwid2VicGFjazovL3dzX3Rhc2svLi9ub2RlX21vZHVsZXMvd3MvbGliL2J1ZmZlci11dGlsLmpzIiwid2VicGFjazovL3dzX3Rhc2svLi9ub2RlX21vZHVsZXMvd3MvbGliL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93c190YXNrLy4vbm9kZV9tb2R1bGVzL3dzL2xpYi9ldmVudC10YXJnZXQuanMiLCJ3ZWJwYWNrOi8vd3NfdGFzay8uL25vZGVfbW9kdWxlcy93cy9saWIvZXh0ZW5zaW9uLmpzIiwid2VicGFjazovL3dzX3Rhc2svLi9ub2RlX21vZHVsZXMvd3MvbGliL2xpbWl0ZXIuanMiLCJ3ZWJwYWNrOi8vd3NfdGFzay8uL25vZGVfbW9kdWxlcy93cy9saWIvcGVybWVzc2FnZS1kZWZsYXRlLmpzIiwid2VicGFjazovL3dzX3Rhc2svLi9ub2RlX21vZHVsZXMvd3MvbGliL3JlY2VpdmVyLmpzIiwid2VicGFjazovL3dzX3Rhc2svLi9ub2RlX21vZHVsZXMvd3MvbGliL3NlbmRlci5qcyIsIndlYnBhY2s6Ly93c190YXNrLy4vbm9kZV9tb2R1bGVzL3dzL2xpYi9zdHJlYW0uanMiLCJ3ZWJwYWNrOi8vd3NfdGFzay8uL25vZGVfbW9kdWxlcy93cy9saWIvc3VicHJvdG9jb2wuanMiLCJ3ZWJwYWNrOi8vd3NfdGFzay8uL25vZGVfbW9kdWxlcy93cy9saWIvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly93c190YXNrLy4vbm9kZV9tb2R1bGVzL3dzL2xpYi93ZWJzb2NrZXQtc2VydmVyLmpzIiwid2VicGFjazovL3dzX3Rhc2svLi9ub2RlX21vZHVsZXMvd3MvbGliL3dlYnNvY2tldC5qcyIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJjcnlwdG9cIiIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJldmVudHNcIiIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJmc1wiIiwid2VicGFjazovL3dzX3Rhc2svZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcImh0dHBcIiIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJodHRwc1wiIiwid2VicGFjazovL3dzX3Rhc2svZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcIm5ldFwiIiwid2VicGFjazovL3dzX3Rhc2svZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcInBhdGhcIiIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJzdHJlYW1cIiIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJ0bHNcIiIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJ1cmxcIiIsIndlYnBhY2s6Ly93c190YXNrL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJ6bGliXCIiLCJ3ZWJwYWNrOi8vd3NfdGFzay93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93c190YXNrL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiLi9zcmMvaHR0cF9zZXJ2ZXIvaW5kZXhcIik7XG5jb25zdCBpbmRleF8yID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL3NyYy93c19zZXJ2ZXIvaW5kZXhcIikpO1xuY29uc3QgSFRUUF9QT1JUID0gcHJvY2Vzcy5lbnYuSFRUUF9QT1JUO1xuY29uc29sZS5sb2coYFN0YXJ0IHN0YXRpYyBodHRwIHNlcnZlciBvbiB0aGUgJHtIVFRQX1BPUlR9IHBvcnQhYCk7XG5pbmRleF8xLmh0dHBTZXJ2ZXIubGlzdGVuKEhUVFBfUE9SVCk7XG5pbmRleF8yLmRlZmF1bHQuc3RhcnQoKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXRDdXJyZW50UGxheWVyV2l0aG91dFBhc3N3b3JkID0gZXhwb3J0cy5nZXRDdXJyZW50UGxheWVyID0gZXhwb3J0cy5zZXRDdXJyZW50UGxheWVyID0gZXhwb3J0cy5nZXRQbGF5ZXJJbmRleCA9IGV4cG9ydHMuY2hlY2tQbGF5ZXIgPSBleHBvcnRzLmNoZWNrUGFzc3dvcmQgPSBleHBvcnRzLnNob3dQbGF5ZXJzID0gZXhwb3J0cy5hZGRQbGF5ZXIgPSB2b2lkIDA7XG5jb25zdCBwbGF5ZXJzID0gW107XG5sZXQgY3VycmVudFBsYXllcjtcbmNvbnN0IGFkZFBsYXllciA9IChwbGF5ZXIpID0+IHtcbiAgICBwbGF5ZXJzLnB1c2gocGxheWVyKTtcbn07XG5leHBvcnRzLmFkZFBsYXllciA9IGFkZFBsYXllcjtcbmNvbnN0IHNob3dQbGF5ZXJzID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKHBsYXllcnMpO1xufTtcbmV4cG9ydHMuc2hvd1BsYXllcnMgPSBzaG93UGxheWVycztcbmNvbnN0IGNoZWNrUGxheWVyID0gKHBsYXllcikgPT4ge1xuICAgIHJldHVybiBwbGF5ZXJzLmZpbmQoKHZhbHVlKSA9PiB2YWx1ZS5uYW1lID09PSBwbGF5ZXIubmFtZSkgIT09IHVuZGVmaW5lZCA/IHRydWUgOiBmYWxzZTtcbn07XG5leHBvcnRzLmNoZWNrUGxheWVyID0gY2hlY2tQbGF5ZXI7XG5jb25zdCBjaGVja1Bhc3N3b3JkID0gKHBsYXllcikgPT4ge1xuICAgIHJldHVybiBwbGF5ZXJzLmZpbmQoKHZhbHVlKSA9PiB2YWx1ZS5wYXNzd29yZCA9PT0gcGxheWVyLnBhc3N3b3JkKSAhPT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGZhbHNlO1xufTtcbmV4cG9ydHMuY2hlY2tQYXNzd29yZCA9IGNoZWNrUGFzc3dvcmQ7XG5jb25zdCBnZXRQbGF5ZXJJbmRleCA9IChwbGF5ZXIpID0+IHtcbiAgICBsZXQgaW5kZXggPSAnJztcbiAgICBwbGF5ZXJzLmZpbHRlcigodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKHZhbHVlLm5hbWUgPT09IHBsYXllci5uYW1lKSB7XG4gICAgICAgICAgICBpbmRleCA9IHZhbHVlLmluZGV4O1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmluZGV4O1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGluZGV4O1xufTtcbmV4cG9ydHMuZ2V0UGxheWVySW5kZXggPSBnZXRQbGF5ZXJJbmRleDtcbmNvbnN0IHNldEN1cnJlbnRQbGF5ZXIgPSAocGxheWVyKSA9PiB7XG4gICAgY3VycmVudFBsYXllciA9IHBsYXllcjtcbn07XG5leHBvcnRzLnNldEN1cnJlbnRQbGF5ZXIgPSBzZXRDdXJyZW50UGxheWVyO1xuY29uc3QgZ2V0Q3VycmVudFBsYXllciA9ICgpID0+IHtcbiAgICByZXR1cm4gY3VycmVudFBsYXllcjtcbn07XG5leHBvcnRzLmdldEN1cnJlbnRQbGF5ZXIgPSBnZXRDdXJyZW50UGxheWVyO1xuY29uc3QgZ2V0Q3VycmVudFBsYXllcldpdGhvdXRQYXNzd29yZCA9ICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBnZXRDdXJyZW50UGxheWVyKCkubmFtZSxcbiAgICAgICAgaW5kZXg6IGdldEN1cnJlbnRQbGF5ZXIoKS5pbmRleCxcbiAgICB9O1xufTtcbmV4cG9ydHMuZ2V0Q3VycmVudFBsYXllcldpdGhvdXRQYXNzd29yZCA9IGdldEN1cnJlbnRQbGF5ZXJXaXRob3V0UGFzc3dvcmQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0Q3VycmVudFJvb20gPSBleHBvcnRzLmRlbGV0ZVJvb20gPSBleHBvcnRzLmFkZFBsYXllclRvUm9vbSA9IGV4cG9ydHMuYWRkUm9vbSA9IGV4cG9ydHMuZ2V0Um9vbXMgPSB2b2lkIDA7XG5jb25zdCBwbGF5ZXJzXzEgPSByZXF1aXJlKFwiLi9wbGF5ZXJzXCIpO1xubGV0IHJvb21zID0gW107XG5jb25zdCBnZXRSb29tcyA9ICgpID0+IHtcbiAgICByZXR1cm4gcm9vbXM7XG59O1xuZXhwb3J0cy5nZXRSb29tcyA9IGdldFJvb21zO1xuY29uc3QgYWRkUm9vbSA9IChyb29tKSA9PiB7XG4gICAgcm9vbXMucHVzaChyb29tKTtcbn07XG5leHBvcnRzLmFkZFJvb20gPSBhZGRSb29tO1xuY29uc3QgYWRkUGxheWVyVG9Sb29tID0gKCkgPT4ge1xuICAgIHJvb21zWzBdLnJvb21Vc2Vycy5wdXNoKCgwLCBwbGF5ZXJzXzEuZ2V0Q3VycmVudFBsYXllcldpdGhvdXRQYXNzd29yZCkoKSk7XG59O1xuZXhwb3J0cy5hZGRQbGF5ZXJUb1Jvb20gPSBhZGRQbGF5ZXJUb1Jvb207XG5jb25zdCBkZWxldGVSb29tID0gKCkgPT4ge1xuICAgIHJvb21zID0gW107XG4gICAgY29uc29sZS5sb2coJ1Jvb20gZGVsZXRlZCcpO1xufTtcbmV4cG9ydHMuZGVsZXRlUm9vbSA9IGRlbGV0ZVJvb207XG5jb25zdCBnZXRDdXJyZW50Um9vbSA9ICgpID0+IHtcbiAgICByZXR1cm4gcm9vbXNbMF07XG59O1xuZXhwb3J0cy5nZXRDdXJyZW50Um9vbSA9IGdldEN1cnJlbnRSb29tO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmFkZFdpblRvV2lubmVyID0gZXhwb3J0cy5nZXRXaW5uZXJzID0gZXhwb3J0cy5hZGRXaW5uZXIgPSB2b2lkIDA7XG5sZXQgd2lubmVycyA9IFtdO1xuY29uc3QgYWRkV2lubmVyID0gKHdpbm5lck5hbWUpID0+IHtcbiAgICBpZiAod2lubmVycy5maW5kKChsYXN0V2lubmVyKSA9PiBsYXN0V2lubmVyLm5hbWUgPT09IHdpbm5lck5hbWUpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgd2lubmVycy5wdXNoKHsgbmFtZTogd2lubmVyTmFtZSwgd2luczogMCB9KTtcbiAgICB9XG59O1xuZXhwb3J0cy5hZGRXaW5uZXIgPSBhZGRXaW5uZXI7XG5jb25zdCBhZGRXaW5Ub1dpbm5lciA9ICh3aW5uZXIpID0+IHtcbiAgICB3aW5uZXJzLm1hcCgobGFzdFdpbm5lcikgPT4ge1xuICAgICAgICBpZiAobGFzdFdpbm5lci5uYW1lID09PSB3aW5uZXIubmFtZSkge1xuICAgICAgICAgICAgbGFzdFdpbm5lci53aW5zICs9IDE7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5leHBvcnRzLmFkZFdpblRvV2lubmVyID0gYWRkV2luVG9XaW5uZXI7XG5jb25zdCBnZXRXaW5uZXJzID0gKCkgPT4ge1xuICAgIHJldHVybiB3aW5uZXJzO1xufTtcbmV4cG9ydHMuZ2V0V2lubmVycyA9IGdldFdpbm5lcnM7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5odHRwU2VydmVyID0gdm9pZCAwO1xuY29uc3QgZnMgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcImZzXCIpKTtcbmNvbnN0IHBhdGggPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcInBhdGhcIikpO1xuY29uc3QgaHR0cCA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiaHR0cFwiKSk7XG5leHBvcnRzLmh0dHBTZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgICBjb25zdCBfX2Rpcm5hbWUgPSBwYXRoLnJlc29sdmUocGF0aC5kaXJuYW1lKCcnKSk7XG4gICAgY29uc3QgZmlsZV9wYXRoID0gX19kaXJuYW1lICsgKHJlcS51cmwgPT09ICcvJyA/ICcvZnJvbnQvaW5kZXguaHRtbCcgOiAnL2Zyb250JyArIHJlcS51cmwpO1xuICAgIGZzLnJlYWRGaWxlKGZpbGVfcGF0aCwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICByZXMud3JpdGVIZWFkKDQwNCk7XG4gICAgICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KGVycikpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlcy53cml0ZUhlYWQoMjAwKTtcbiAgICAgICAgcmVzLmVuZChkYXRhKTtcbiAgICB9KTtcbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBjcnlwdG9fMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiY3J5cHRvXCIpKTtcbmNvbnN0IHJvb21zXzEgPSByZXF1aXJlKFwiLi4vZGF0YWJhc2Uvcm9vbXNcIik7XG5jb25zdCB3c19zZXJ2ZXJfMSA9IHJlcXVpcmUoXCIuLi93c19zZXJ2ZXJcIik7XG5jb25zdCBjcmVhdGVHYW1lID0gKCkgPT4ge1xuICAgIGNvbnN0IGlkcyA9IFtdO1xuICAgIGNvbnN0IGdhbWVJZCA9IGNyeXB0b18xLmRlZmF1bHQucmFuZG9tVVVJRCgpO1xuICAgICgwLCByb29tc18xLmdldEN1cnJlbnRSb29tKSgpLnJvb21Vc2Vycy5mb3JFYWNoKChwbGF5ZXIpID0+IHtcbiAgICAgICAgaWRzLnB1c2gocGxheWVyLmluZGV4KTtcbiAgICB9KTtcbiAgICBpZHMuZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgICAgd3Nfc2VydmVyXzEud3NTZXJ2ZXIuY2xpZW50cy5mb3JFYWNoKCh3c0NsaWVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKHdzQ2xpZW50LmlkID09PSBpZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWUgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkR2FtZTogZ2FtZUlkLFxuICAgICAgICAgICAgICAgICAgICBpZFBsYXllcjogaWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNyZWF0ZV9nYW1lXCIgLyogRGF0YXR5cGUuQ1JFQVRFX0dBTUUgKi8sXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGdhbWUpLFxuICAgICAgICAgICAgICAgICAgICBpZDogMCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHdzQ2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygnR2FtZSBjcmVhdGVkJyk7XG4gICAgKDAsIHJvb21zXzEuZGVsZXRlUm9vbSkoKTtcbn07XG5leHBvcnRzLmRlZmF1bHQgPSBjcmVhdGVHYW1lO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnJlZ2lzdHJhdGVOZXdQbGF5ZXIgPSBleHBvcnRzLmxvZ2luV2l0aFdyb25nUGFzc3dvcmQgPSBleHBvcnRzLmxvZ2luID0gdm9pZCAwO1xuY29uc3QgcGxheWVyc18xID0gcmVxdWlyZShcIi4uL2RhdGFiYXNlL3BsYXllcnNcIik7XG5jb25zdCByb29tc18xID0gcmVxdWlyZShcIi4vcm9vbXNcIik7XG5jb25zdCB3aW5uZXJzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vd2lubmVyc1wiKSk7XG5jb25zdCBsb2dpbiA9ICh3c0NsaWVudCwgcGxheWVyRGF0YSkgPT4ge1xuICAgIGNvbnN0IHBsYXllckRhdGFUb1NlbmQgPSB7XG4gICAgICAgIG5hbWU6IHBsYXllckRhdGEubmFtZSxcbiAgICAgICAgaW5kZXg6IHdzQ2xpZW50LmlkLFxuICAgICAgICBlcnJvcjogZmFsc2UsXG4gICAgfTtcbiAgICBjb25zdCBkYXRhVG9TZW5kID0ge1xuICAgICAgICB0eXBlOiBcInJlZ1wiIC8qIERhdGF0eXBlLkxPR0lOICovLFxuICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShwbGF5ZXJEYXRhVG9TZW5kKSxcbiAgICAgICAgaWQ6IDAsXG4gICAgfTtcbiAgICBjb25zb2xlLmxvZyhgTG9naW4gZm9yIHBsYXllciAke3BsYXllckRhdGEubmFtZX0gc3VjY2Vzc2Z1bGApO1xuICAgIHdzQ2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YVRvU2VuZCkpO1xuICAgICgwLCByb29tc18xLnVwZGF0ZVJvb20pKHdzQ2xpZW50KTtcbiAgICAoMCwgd2lubmVyc18xLmRlZmF1bHQpKHdzQ2xpZW50KTtcbiAgICAoMCwgcGxheWVyc18xLnNldEN1cnJlbnRQbGF5ZXIpKHBsYXllckRhdGEpO1xufTtcbmV4cG9ydHMubG9naW4gPSBsb2dpbjtcbmNvbnN0IGxvZ2luV2l0aFdyb25nUGFzc3dvcmQgPSAod3NDbGllbnQsIHBsYXllckRhdGEpID0+IHtcbiAgICBjb25zdCBwbGF5ZXJEYXRhVG9TZW5kID0ge1xuICAgICAgICBuYW1lOiBwbGF5ZXJEYXRhLm5hbWUsIGluZGV4OiB3c0NsaWVudC5pZCwgZXJyb3JUZXh0OiAnV3JvbmcgbG9naW4gbmFtZSBvciBwYXNzd29yZCcsIGVycm9yOiB0cnVlXG4gICAgfTtcbiAgICBjb25zdCBkYXRhVG9TZW5kID0ge1xuICAgICAgICB0eXBlOiBcInJlZ1wiIC8qIERhdGF0eXBlLkxPR0lOICovLFxuICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShwbGF5ZXJEYXRhVG9TZW5kKSxcbiAgICAgICAgaWQ6IDAsXG4gICAgfTtcbiAgICBjb25zb2xlLmxvZygnV3JvbmcgY3JlZGVudGlhbHMnKTtcbiAgICB3c0NsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KGRhdGFUb1NlbmQpKTtcbn07XG5leHBvcnRzLmxvZ2luV2l0aFdyb25nUGFzc3dvcmQgPSBsb2dpbldpdGhXcm9uZ1Bhc3N3b3JkO1xuY29uc3QgcmVnaXN0cmF0ZU5ld1BsYXllciA9ICh3c0NsaWVudCwgcGxheWVyRGF0YSkgPT4ge1xuICAgIHBsYXllckRhdGEuaW5kZXggPSB3c0NsaWVudC5pZDtcbiAgICAoMCwgcGxheWVyc18xLmFkZFBsYXllcikocGxheWVyRGF0YSk7XG4gICAgY29uc29sZS5sb2coYFJlZ2lzdHJhdGlvbiBvZiBwbGF5ZXIgJHtwbGF5ZXJEYXRhLm5hbWV9IGlzIHN1Y2Nlc3NmdWxgKTtcbiAgICBsb2dpbih3c0NsaWVudCwgcGxheWVyRGF0YSk7XG59O1xuZXhwb3J0cy5yZWdpc3RyYXRlTmV3UGxheWVyID0gcmVnaXN0cmF0ZU5ld1BsYXllcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgcGxheWVyc18xID0gcmVxdWlyZShcIi4uL2RhdGFiYXNlL3BsYXllcnNcIik7XG5jb25zdCBsb2dpbl9yZWdpc3RyYXRlXzEgPSByZXF1aXJlKFwiLi9sb2dpbi1yZWdpc3RyYXRlXCIpO1xuY29uc3Qgcm9vbXNfMSA9IHJlcXVpcmUoXCIuL3Jvb21zXCIpO1xuY29uc3QgbWFrZUFjdGlvbkRlcGVuZGluZ09uZGF0YVR5cGUgPSAoY2h1bmssIHdzQ2xpZW50KSA9PiB7XG4gICAgY29uc3QgY2h1bmtEYXRhID0gSlNPTi5wYXJzZShjaHVuay50b1N0cmluZygpKTtcbiAgICBzd2l0Y2ggKGdldERhdGFUeXBlKGNodW5rRGF0YSkpIHtcbiAgICAgICAgY2FzZSBcInJlZ1wiIC8qIERhdGF0eXBlLkxPR0lOICovOlxuICAgICAgICAgICAgY29uc3QgcGxheWVyRGF0YSA9IEpTT04ucGFyc2UoY2h1bmtEYXRhLmRhdGEpO1xuICAgICAgICAgICAgaWYgKCgwLCBwbGF5ZXJzXzEuY2hlY2tQbGF5ZXIpKHBsYXllckRhdGEpICYmICgwLCBwbGF5ZXJzXzEuY2hlY2tQYXNzd29yZCkocGxheWVyRGF0YSkpIHtcbiAgICAgICAgICAgICAgICAoMCwgbG9naW5fcmVnaXN0cmF0ZV8xLmxvZ2luKSh3c0NsaWVudCwgcGxheWVyRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghKDAsIHBsYXllcnNfMS5jaGVja1BsYXllcikocGxheWVyRGF0YSkpIHtcbiAgICAgICAgICAgICAgICAoMCwgbG9naW5fcmVnaXN0cmF0ZV8xLnJlZ2lzdHJhdGVOZXdQbGF5ZXIpKHdzQ2xpZW50LCBwbGF5ZXJEYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICgwLCBsb2dpbl9yZWdpc3RyYXRlXzEubG9naW5XaXRoV3JvbmdQYXNzd29yZCkod3NDbGllbnQsIHBsYXllckRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJjcmVhdGVfcm9vbVwiIC8qIERhdGF0eXBlLkNSRUFURV9ORVdfUk9PTSAqLzpcbiAgICAgICAgICAgICgwLCByb29tc18xLmNyZWF0ZVJvb20pKHdzQ2xpZW50KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYWRkX3VzZXJfdG9fcm9vbVwiIC8qIERhdGF0eXBlLkFERF9VU0VSX1RPX1JPT00gKi86XG4gICAgICAgICAgICAoMCwgcm9vbXNfMS5hZGRUb1Jvb20pKHdzQ2xpZW50KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic2luZ2xlX3BsYXlcIiAvKiBEYXRhdHlwZS5QTEFZX1dJVEhfQk9UICovOlxuICAgICAgICAgICAgY29uc29sZS5sb2coY2h1bmtEYXRhLnR5cGUpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxufTtcbmNvbnN0IGdldERhdGFUeXBlID0gKGNodW5rRGF0YSkgPT4gY2h1bmtEYXRhLnR5cGU7XG5leHBvcnRzLmRlZmF1bHQgPSBtYWtlQWN0aW9uRGVwZW5kaW5nT25kYXRhVHlwZTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5hZGRUb1Jvb20gPSBleHBvcnRzLnVwZGF0ZVJvb20gPSBleHBvcnRzLmNyZWF0ZVJvb20gPSB2b2lkIDA7XG5jb25zdCByb29tc18xID0gcmVxdWlyZShcIi4uL2RhdGFiYXNlL3Jvb21zXCIpO1xuY29uc3QgZ2FtZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2dhbWVcIikpO1xuY29uc3QgY3JlYXRlUm9vbSA9ICh3c0NsaWVudCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdSb29tIGlzIGNyZWF0ZWQnKTtcbiAgICBjb25zdCByb29tID0ge1xuICAgICAgICByb29tSWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgIHJvb21Vc2VyczogW10sXG4gICAgfTtcbiAgICAoMCwgcm9vbXNfMS5hZGRSb29tKShyb29tKTtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICB0eXBlOiBcInVwZGF0ZV9yb29tXCIgLyogRGF0YXR5cGUuVVBEQVRFX1JPT00gKi8sXG4gICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KCgwLCByb29tc18xLmdldFJvb21zKSgpKSxcbiAgICAgICAgaWQ6IDAsXG4gICAgfTtcbiAgICB3c0NsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbn07XG5leHBvcnRzLmNyZWF0ZVJvb20gPSBjcmVhdGVSb29tO1xuY29uc3QgdXBkYXRlUm9vbSA9ICh3c0NsaWVudCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdSb29tcyB1cGRhdGVkJyk7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgdHlwZTogXCJ1cGRhdGVfcm9vbVwiIC8qIERhdGF0eXBlLlVQREFURV9ST09NICovLFxuICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSgoMCwgcm9vbXNfMS5nZXRSb29tcykoKSksXG4gICAgICAgIGlkOiAwLFxuICAgIH07XG4gICAgd3NDbGllbnQuc2VuZChKU09OLnN0cmluZ2lmeShkYXRhKSk7XG59O1xuZXhwb3J0cy51cGRhdGVSb29tID0gdXBkYXRlUm9vbTtcbmNvbnN0IGFkZFRvUm9vbSA9ICh3c0NsaWVudCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdQbGF5ZXIgaXMgYWRkZWQgdG8gcm9vbScpO1xuICAgIGlmICgoMCwgcm9vbXNfMS5nZXRSb29tcykoKVswXS5yb29tVXNlcnMubGVuZ3RoIDwgMSkge1xuICAgICAgICAoMCwgcm9vbXNfMS5hZGRQbGF5ZXJUb1Jvb20pKCk7XG4gICAgICAgIHVwZGF0ZVJvb20od3NDbGllbnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgKDAsIHJvb21zXzEuYWRkUGxheWVyVG9Sb29tKSgpO1xuICAgICAgICAoMCwgZ2FtZV8xLmRlZmF1bHQpKCk7XG4gICAgfVxufTtcbmV4cG9ydHMuYWRkVG9Sb29tID0gYWRkVG9Sb29tO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCB3aW5uZXJzXzEgPSByZXF1aXJlKFwiLi4vZGF0YWJhc2Uvd2lubmVyc1wiKTtcbmNvbnN0IHVwZGF0ZVdpbm5lcnMgPSAod3NDbGllbnQpID0+IHtcbiAgICBjb25zb2xlLmxvZygnV2lubmVycyB1cGRhdGVkJyk7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgdHlwZTogXCJ1cGRhdGVfd2lubmVyc1wiIC8qIERhdGF0eXBlLlVQREFURV9XSU5ORVJTICovLFxuICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSgoMCwgd2lubmVyc18xLmdldFdpbm5lcnMpKCkpLFxuICAgICAgICBpZDogMCxcbiAgICB9O1xuICAgIHdzQ2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xufTtcbmV4cG9ydHMuZGVmYXVsdCA9IHVwZGF0ZVdpbm5lcnM7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMud3NTZXJ2ZXIgPSB2b2lkIDA7XG5jb25zdCB3c18xID0gcmVxdWlyZShcIndzXCIpO1xuY29uc3QgbWFrZV9hY3Rpb25fMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vc2VydmljZXMvbWFrZS1hY3Rpb25cIikpO1xuY29uc3QgY3J5cHRvXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImNyeXB0b1wiKSk7XG5jb25zdCBXU1NfUE9SVCA9IE51bWJlcihwcm9jZXNzLmVudi5XU1NfUE9SVCk7XG5leHBvcnRzLmRlZmF1bHQgPSB7XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGNvbnN0IHdzc2VydmVyID0gbmV3IHdzXzEuV2ViU29ja2V0U2VydmVyKHsgcG9ydDogV1NTX1BPUlQgfSk7XG4gICAgICAgIGV4cG9ydHMud3NTZXJ2ZXIgPSB3c3NlcnZlcjtcbiAgICAgICAgY29uc3Qgb25Db25uZWN0ID0gKHdzQ2xpZW50LCByZXEpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBXZWJzb2NrZXQgaXMgc3RhcnRlZCBvbiAke09iamVjdC52YWx1ZXMocmVxLmhlYWRlcnMpWzBdfSB3aXRoIHNlY3VyaXR5IGtleSAke09iamVjdC52YWx1ZXMocmVxLmhlYWRlcnMpWzEwXX1gKTtcbiAgICAgICAgICAgIHdzQ2xpZW50LmlkID0gY3J5cHRvXzEuZGVmYXVsdC5yYW5kb21VVUlEKCk7XG4gICAgICAgICAgICB3c0NsaWVudC5vbignbWVzc2FnZScsIChjaHVuaykgPT4ge1xuICAgICAgICAgICAgICAgICgwLCBtYWtlX2FjdGlvbl8xLmRlZmF1bHQpKGNodW5rLCB3c0NsaWVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHdzQ2xpZW50Lm9uKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnV2Vic29ja2V0IGlzIGRpc2Nvbm5lY3RlZCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHdzc2VydmVyLm9uKCdjb25uZWN0aW9uJywgb25Db25uZWN0KTtcbiAgICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBXZWJTb2NrZXQgPSByZXF1aXJlKCcuL2xpYi93ZWJzb2NrZXQnKTtcblxuV2ViU29ja2V0LmNyZWF0ZVdlYlNvY2tldFN0cmVhbSA9IHJlcXVpcmUoJy4vbGliL3N0cmVhbScpO1xuV2ViU29ja2V0LlNlcnZlciA9IHJlcXVpcmUoJy4vbGliL3dlYnNvY2tldC1zZXJ2ZXInKTtcbldlYlNvY2tldC5SZWNlaXZlciA9IHJlcXVpcmUoJy4vbGliL3JlY2VpdmVyJyk7XG5XZWJTb2NrZXQuU2VuZGVyID0gcmVxdWlyZSgnLi9saWIvc2VuZGVyJyk7XG5cbldlYlNvY2tldC5XZWJTb2NrZXQgPSBXZWJTb2NrZXQ7XG5XZWJTb2NrZXQuV2ViU29ja2V0U2VydmVyID0gV2ViU29ja2V0LlNlcnZlcjtcblxubW9kdWxlLmV4cG9ydHMgPSBXZWJTb2NrZXQ7XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHsgRU1QVFlfQlVGRkVSIH0gPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuXG4vKipcbiAqIE1lcmdlcyBhbiBhcnJheSBvZiBidWZmZXJzIGludG8gYSBuZXcgYnVmZmVyLlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyW119IGxpc3QgVGhlIGFycmF5IG9mIGJ1ZmZlcnMgdG8gY29uY2F0XG4gKiBAcGFyYW0ge051bWJlcn0gdG90YWxMZW5ndGggVGhlIHRvdGFsIGxlbmd0aCBvZiBidWZmZXJzIGluIHRoZSBsaXN0XG4gKiBAcmV0dXJuIHtCdWZmZXJ9IFRoZSByZXN1bHRpbmcgYnVmZmVyXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIGNvbmNhdChsaXN0LCB0b3RhbExlbmd0aCkge1xuICBpZiAobGlzdC5sZW5ndGggPT09IDApIHJldHVybiBFTVBUWV9CVUZGRVI7XG4gIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkgcmV0dXJuIGxpc3RbMF07XG5cbiAgY29uc3QgdGFyZ2V0ID0gQnVmZmVyLmFsbG9jVW5zYWZlKHRvdGFsTGVuZ3RoKTtcbiAgbGV0IG9mZnNldCA9IDA7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgYnVmID0gbGlzdFtpXTtcbiAgICB0YXJnZXQuc2V0KGJ1Ziwgb2Zmc2V0KTtcbiAgICBvZmZzZXQgKz0gYnVmLmxlbmd0aDtcbiAgfVxuXG4gIGlmIChvZmZzZXQgPCB0b3RhbExlbmd0aCkgcmV0dXJuIHRhcmdldC5zbGljZSgwLCBvZmZzZXQpO1xuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbi8qKlxuICogTWFza3MgYSBidWZmZXIgdXNpbmcgdGhlIGdpdmVuIG1hc2suXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IHNvdXJjZSBUaGUgYnVmZmVyIHRvIG1hc2tcbiAqIEBwYXJhbSB7QnVmZmVyfSBtYXNrIFRoZSBtYXNrIHRvIHVzZVxuICogQHBhcmFtIHtCdWZmZXJ9IG91dHB1dCBUaGUgYnVmZmVyIHdoZXJlIHRvIHN0b3JlIHRoZSByZXN1bHRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgVGhlIG9mZnNldCBhdCB3aGljaCB0byBzdGFydCB3cml0aW5nXG4gKiBAcGFyYW0ge051bWJlcn0gbGVuZ3RoIFRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gbWFzay5cbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gX21hc2soc291cmNlLCBtYXNrLCBvdXRwdXQsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBvdXRwdXRbb2Zmc2V0ICsgaV0gPSBzb3VyY2VbaV0gXiBtYXNrW2kgJiAzXTtcbiAgfVxufVxuXG4vKipcbiAqIFVubWFza3MgYSBidWZmZXIgdXNpbmcgdGhlIGdpdmVuIG1hc2suXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IGJ1ZmZlciBUaGUgYnVmZmVyIHRvIHVubWFza1xuICogQHBhcmFtIHtCdWZmZXJ9IG1hc2sgVGhlIG1hc2sgdG8gdXNlXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIF91bm1hc2soYnVmZmVyLCBtYXNrKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgYnVmZmVyW2ldIF49IG1hc2tbaSAmIDNdO1xuICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBidWZmZXIgdG8gYW4gYEFycmF5QnVmZmVyYC5cbiAqXG4gKiBAcGFyYW0ge0J1ZmZlcn0gYnVmIFRoZSBidWZmZXIgdG8gY29udmVydFxuICogQHJldHVybiB7QXJyYXlCdWZmZXJ9IENvbnZlcnRlZCBidWZmZXJcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gdG9BcnJheUJ1ZmZlcihidWYpIHtcbiAgaWYgKGJ1Zi5ieXRlTGVuZ3RoID09PSBidWYuYnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICByZXR1cm4gYnVmLmJ1ZmZlcjtcbiAgfVxuXG4gIHJldHVybiBidWYuYnVmZmVyLnNsaWNlKGJ1Zi5ieXRlT2Zmc2V0LCBidWYuYnl0ZU9mZnNldCArIGJ1Zi5ieXRlTGVuZ3RoKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgZGF0YWAgdG8gYSBgQnVmZmVyYC5cbiAqXG4gKiBAcGFyYW0geyp9IGRhdGEgVGhlIGRhdGEgdG8gY29udmVydFxuICogQHJldHVybiB7QnVmZmVyfSBUaGUgYnVmZmVyXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9XG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIHRvQnVmZmVyKGRhdGEpIHtcbiAgdG9CdWZmZXIucmVhZE9ubHkgPSB0cnVlO1xuXG4gIGlmIChCdWZmZXIuaXNCdWZmZXIoZGF0YSkpIHJldHVybiBkYXRhO1xuXG4gIGxldCBidWY7XG5cbiAgaWYgKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIGJ1ZiA9IEJ1ZmZlci5mcm9tKGRhdGEpO1xuICB9IGVsc2UgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSkge1xuICAgIGJ1ZiA9IEJ1ZmZlci5mcm9tKGRhdGEuYnVmZmVyLCBkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZUxlbmd0aCk7XG4gIH0gZWxzZSB7XG4gICAgYnVmID0gQnVmZmVyLmZyb20oZGF0YSk7XG4gICAgdG9CdWZmZXIucmVhZE9ubHkgPSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBidWY7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjb25jYXQsXG4gIG1hc2s6IF9tYXNrLFxuICB0b0FycmF5QnVmZmVyLFxuICB0b0J1ZmZlcixcbiAgdW5tYXNrOiBfdW5tYXNrXG59O1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAgKi9cbmlmICghcHJvY2Vzcy5lbnYuV1NfTk9fQlVGRkVSX1VUSUwpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBidWZmZXJVdGlsID0gcmVxdWlyZSgnYnVmZmVydXRpbCcpO1xuXG4gICAgbW9kdWxlLmV4cG9ydHMubWFzayA9IGZ1bmN0aW9uIChzb3VyY2UsIG1hc2ssIG91dHB1dCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgICAgIGlmIChsZW5ndGggPCA0OCkgX21hc2soc291cmNlLCBtYXNrLCBvdXRwdXQsIG9mZnNldCwgbGVuZ3RoKTtcbiAgICAgIGVsc2UgYnVmZmVyVXRpbC5tYXNrKHNvdXJjZSwgbWFzaywgb3V0cHV0LCBvZmZzZXQsIGxlbmd0aCk7XG4gICAgfTtcblxuICAgIG1vZHVsZS5leHBvcnRzLnVubWFzayA9IGZ1bmN0aW9uIChidWZmZXIsIG1hc2spIHtcbiAgICAgIGlmIChidWZmZXIubGVuZ3RoIDwgMzIpIF91bm1hc2soYnVmZmVyLCBtYXNrKTtcbiAgICAgIGVsc2UgYnVmZmVyVXRpbC51bm1hc2soYnVmZmVyLCBtYXNrKTtcbiAgICB9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gQ29udGludWUgcmVnYXJkbGVzcyBvZiB0aGUgZXJyb3IuXG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEJJTkFSWV9UWVBFUzogWydub2RlYnVmZmVyJywgJ2FycmF5YnVmZmVyJywgJ2ZyYWdtZW50cyddLFxuICBFTVBUWV9CVUZGRVI6IEJ1ZmZlci5hbGxvYygwKSxcbiAgR1VJRDogJzI1OEVBRkE1LUU5MTQtNDdEQS05NUNBLUM1QUIwREM4NUIxMScsXG4gIGtGb3JPbkV2ZW50QXR0cmlidXRlOiBTeW1ib2woJ2tJc0Zvck9uRXZlbnRBdHRyaWJ1dGUnKSxcbiAga0xpc3RlbmVyOiBTeW1ib2woJ2tMaXN0ZW5lcicpLFxuICBrU3RhdHVzQ29kZTogU3ltYm9sKCdzdGF0dXMtY29kZScpLFxuICBrV2ViU29ja2V0OiBTeW1ib2woJ3dlYnNvY2tldCcpLFxuICBOT09QOiAoKSA9PiB7fVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgeyBrRm9yT25FdmVudEF0dHJpYnV0ZSwga0xpc3RlbmVyIH0gPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuXG5jb25zdCBrQ29kZSA9IFN5bWJvbCgna0NvZGUnKTtcbmNvbnN0IGtEYXRhID0gU3ltYm9sKCdrRGF0YScpO1xuY29uc3Qga0Vycm9yID0gU3ltYm9sKCdrRXJyb3InKTtcbmNvbnN0IGtNZXNzYWdlID0gU3ltYm9sKCdrTWVzc2FnZScpO1xuY29uc3Qga1JlYXNvbiA9IFN5bWJvbCgna1JlYXNvbicpO1xuY29uc3Qga1RhcmdldCA9IFN5bWJvbCgna1RhcmdldCcpO1xuY29uc3Qga1R5cGUgPSBTeW1ib2woJ2tUeXBlJyk7XG5jb25zdCBrV2FzQ2xlYW4gPSBTeW1ib2woJ2tXYXNDbGVhbicpO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhbiBldmVudC5cbiAqL1xuY2xhc3MgRXZlbnQge1xuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGBFdmVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBuYW1lIG9mIHRoZSBldmVudFxuICAgKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIHRoZSBgdHlwZWAgYXJndW1lbnQgaXMgbm90IHNwZWNpZmllZFxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSkge1xuICAgIHRoaXNba1RhcmdldF0gPSBudWxsO1xuICAgIHRoaXNba1R5cGVdID0gdHlwZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7Kn1cbiAgICovXG4gIGdldCB0YXJnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXNba1RhcmdldF07XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCB0eXBlKCkge1xuICAgIHJldHVybiB0aGlzW2tUeXBlXTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnQucHJvdG90eXBlLCAndGFyZ2V0JywgeyBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50LnByb3RvdHlwZSwgJ3R5cGUnLCB7IGVudW1lcmFibGU6IHRydWUgfSk7XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgY2xvc2UgZXZlbnQuXG4gKlxuICogQGV4dGVuZHMgRXZlbnRcbiAqL1xuY2xhc3MgQ2xvc2VFdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBgQ2xvc2VFdmVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBuYW1lIG9mIHRoZSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvYmplY3QgdGhhdCBhbGxvd3MgZm9yIHNldHRpbmdcbiAgICogICAgIGF0dHJpYnV0ZXMgdmlhIG9iamVjdCBtZW1iZXJzIG9mIHRoZSBzYW1lIG5hbWVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmNvZGU9MF0gVGhlIHN0YXR1cyBjb2RlIGV4cGxhaW5pbmcgd2h5IHRoZVxuICAgKiAgICAgY29ubmVjdGlvbiB3YXMgY2xvc2VkXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5yZWFzb249JyddIEEgaHVtYW4tcmVhZGFibGUgc3RyaW5nIGV4cGxhaW5pbmcgd2h5XG4gICAqICAgICB0aGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMud2FzQ2xlYW49ZmFsc2VdIEluZGljYXRlcyB3aGV0aGVyIG9yIG5vdCB0aGVcbiAgICogICAgIGNvbm5lY3Rpb24gd2FzIGNsZWFubHkgY2xvc2VkXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBvcHRpb25zID0ge30pIHtcbiAgICBzdXBlcih0eXBlKTtcblxuICAgIHRoaXNba0NvZGVdID0gb3B0aW9ucy5jb2RlID09PSB1bmRlZmluZWQgPyAwIDogb3B0aW9ucy5jb2RlO1xuICAgIHRoaXNba1JlYXNvbl0gPSBvcHRpb25zLnJlYXNvbiA9PT0gdW5kZWZpbmVkID8gJycgOiBvcHRpb25zLnJlYXNvbjtcbiAgICB0aGlzW2tXYXNDbGVhbl0gPSBvcHRpb25zLndhc0NsZWFuID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IG9wdGlvbnMud2FzQ2xlYW47XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGdldCBjb2RlKCkge1xuICAgIHJldHVybiB0aGlzW2tDb2RlXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IHJlYXNvbigpIHtcbiAgICByZXR1cm4gdGhpc1trUmVhc29uXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG4gIGdldCB3YXNDbGVhbigpIHtcbiAgICByZXR1cm4gdGhpc1trV2FzQ2xlYW5dO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShDbG9zZUV2ZW50LnByb3RvdHlwZSwgJ2NvZGUnLCB7IGVudW1lcmFibGU6IHRydWUgfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQ2xvc2VFdmVudC5wcm90b3R5cGUsICdyZWFzb24nLCB7IGVudW1lcmFibGU6IHRydWUgfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQ2xvc2VFdmVudC5wcm90b3R5cGUsICd3YXNDbGVhbicsIHsgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYW4gZXJyb3IgZXZlbnQuXG4gKlxuICogQGV4dGVuZHMgRXZlbnRcbiAqL1xuY2xhc3MgRXJyb3JFdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBgRXJyb3JFdmVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBuYW1lIG9mIHRoZSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvYmplY3QgdGhhdCBhbGxvd3MgZm9yIHNldHRpbmdcbiAgICogICAgIGF0dHJpYnV0ZXMgdmlhIG9iamVjdCBtZW1iZXJzIG9mIHRoZSBzYW1lIG5hbWVcbiAgICogQHBhcmFtIHsqfSBbb3B0aW9ucy5lcnJvcj1udWxsXSBUaGUgZXJyb3IgdGhhdCBnZW5lcmF0ZWQgdGhpcyBldmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMubWVzc2FnZT0nJ10gVGhlIGVycm9yIG1lc3NhZ2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKHR5cGUsIG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKHR5cGUpO1xuXG4gICAgdGhpc1trRXJyb3JdID0gb3B0aW9ucy5lcnJvciA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG9wdGlvbnMuZXJyb3I7XG4gICAgdGhpc1trTWVzc2FnZV0gPSBvcHRpb25zLm1lc3NhZ2UgPT09IHVuZGVmaW5lZCA/ICcnIDogb3B0aW9ucy5tZXNzYWdlO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHsqfVxuICAgKi9cbiAgZ2V0IGVycm9yKCkge1xuICAgIHJldHVybiB0aGlzW2tFcnJvcl07XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBtZXNzYWdlKCkge1xuICAgIHJldHVybiB0aGlzW2tNZXNzYWdlXTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXJyb3JFdmVudC5wcm90b3R5cGUsICdlcnJvcicsIHsgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShFcnJvckV2ZW50LnByb3RvdHlwZSwgJ21lc3NhZ2UnLCB7IGVudW1lcmFibGU6IHRydWUgfSk7XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgbWVzc2FnZSBldmVudC5cbiAqXG4gKiBAZXh0ZW5kcyBFdmVudFxuICovXG5jbGFzcyBNZXNzYWdlRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgYE1lc3NhZ2VFdmVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBuYW1lIG9mIHRoZSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvYmplY3QgdGhhdCBhbGxvd3MgZm9yIHNldHRpbmdcbiAgICogICAgIGF0dHJpYnV0ZXMgdmlhIG9iamVjdCBtZW1iZXJzIG9mIHRoZSBzYW1lIG5hbWVcbiAgICogQHBhcmFtIHsqfSBbb3B0aW9ucy5kYXRhPW51bGxdIFRoZSBtZXNzYWdlIGNvbnRlbnRcbiAgICovXG4gIGNvbnN0cnVjdG9yKHR5cGUsIG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKHR5cGUpO1xuXG4gICAgdGhpc1trRGF0YV0gPSBvcHRpb25zLmRhdGEgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBvcHRpb25zLmRhdGE7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUgeyp9XG4gICAqL1xuICBnZXQgZGF0YSgpIHtcbiAgICByZXR1cm4gdGhpc1trRGF0YV07XG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lc3NhZ2VFdmVudC5wcm90b3R5cGUsICdkYXRhJywgeyBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuXG4vKipcbiAqIFRoaXMgcHJvdmlkZXMgbWV0aG9kcyBmb3IgZW11bGF0aW5nIHRoZSBgRXZlbnRUYXJnZXRgIGludGVyZmFjZS4gSXQncyBub3RcbiAqIG1lYW50IHRvIGJlIHVzZWQgZGlyZWN0bHkuXG4gKlxuICogQG1peGluXG4gKi9cbmNvbnN0IEV2ZW50VGFyZ2V0ID0ge1xuICAvKipcbiAgICogUmVnaXN0ZXIgYW4gZXZlbnQgbGlzdGVuZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZXZlbnQgdHlwZSB0byBsaXN0ZW4gZm9yXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciB0byBhZGRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBBbiBvcHRpb25zIG9iamVjdCBzcGVjaWZpZXMgY2hhcmFjdGVyaXN0aWNzIGFib3V0XG4gICAqICAgICB0aGUgZXZlbnQgbGlzdGVuZXJcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5vbmNlPWZhbHNlXSBBIGBCb29sZWFuYCBpbmRpY2F0aW5nIHRoYXQgdGhlXG4gICAqICAgICBsaXN0ZW5lciBzaG91bGQgYmUgaW52b2tlZCBhdCBtb3N0IG9uY2UgYWZ0ZXIgYmVpbmcgYWRkZWQuIElmIGB0cnVlYCxcbiAgICogICAgIHRoZSBsaXN0ZW5lciB3b3VsZCBiZSBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgd2hlbiBpbnZva2VkLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zID0ge30pIHtcbiAgICBsZXQgd3JhcHBlcjtcblxuICAgIGlmICh0eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgIHdyYXBwZXIgPSBmdW5jdGlvbiBvbk1lc3NhZ2UoZGF0YSwgaXNCaW5hcnkpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgTWVzc2FnZUV2ZW50KCdtZXNzYWdlJywge1xuICAgICAgICAgIGRhdGE6IGlzQmluYXJ5ID8gZGF0YSA6IGRhdGEudG9TdHJpbmcoKVxuICAgICAgICB9KTtcblxuICAgICAgICBldmVudFtrVGFyZ2V0XSA9IHRoaXM7XG4gICAgICAgIGxpc3RlbmVyLmNhbGwodGhpcywgZXZlbnQpO1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdjbG9zZScpIHtcbiAgICAgIHdyYXBwZXIgPSBmdW5jdGlvbiBvbkNsb3NlKGNvZGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ2xvc2VFdmVudCgnY2xvc2UnLCB7XG4gICAgICAgICAgY29kZSxcbiAgICAgICAgICByZWFzb246IG1lc3NhZ2UudG9TdHJpbmcoKSxcbiAgICAgICAgICB3YXNDbGVhbjogdGhpcy5fY2xvc2VGcmFtZVJlY2VpdmVkICYmIHRoaXMuX2Nsb3NlRnJhbWVTZW50XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV2ZW50W2tUYXJnZXRdID0gdGhpcztcbiAgICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgICAgd3JhcHBlciA9IGZ1bmN0aW9uIG9uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgRXJyb3JFdmVudCgnZXJyb3InLCB7XG4gICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICAgICAgICB9KTtcblxuICAgICAgICBldmVudFtrVGFyZ2V0XSA9IHRoaXM7XG4gICAgICAgIGxpc3RlbmVyLmNhbGwodGhpcywgZXZlbnQpO1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdvcGVuJykge1xuICAgICAgd3JhcHBlciA9IGZ1bmN0aW9uIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgRXZlbnQoJ29wZW4nKTtcblxuICAgICAgICBldmVudFtrVGFyZ2V0XSA9IHRoaXM7XG4gICAgICAgIGxpc3RlbmVyLmNhbGwodGhpcywgZXZlbnQpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHdyYXBwZXJba0Zvck9uRXZlbnRBdHRyaWJ1dGVdID0gISFvcHRpb25zW2tGb3JPbkV2ZW50QXR0cmlidXRlXTtcbiAgICB3cmFwcGVyW2tMaXN0ZW5lcl0gPSBsaXN0ZW5lcjtcblxuICAgIGlmIChvcHRpb25zLm9uY2UpIHtcbiAgICAgIHRoaXMub25jZSh0eXBlLCB3cmFwcGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbih0eXBlLCB3cmFwcGVyKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBldmVudCBsaXN0ZW5lci5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBldmVudCB0eXBlIHRvIHJlbW92ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIFRoZSBsaXN0ZW5lciB0byByZW1vdmVcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyKSB7XG4gICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiB0aGlzLmxpc3RlbmVycyh0eXBlKSkge1xuICAgICAgaWYgKGxpc3RlbmVyW2tMaXN0ZW5lcl0gPT09IGhhbmRsZXIgJiYgIWxpc3RlbmVyW2tGb3JPbkV2ZW50QXR0cmlidXRlXSkge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQ2xvc2VFdmVudCxcbiAgRXJyb3JFdmVudCxcbiAgRXZlbnQsXG4gIEV2ZW50VGFyZ2V0LFxuICBNZXNzYWdlRXZlbnRcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHsgdG9rZW5DaGFycyB9ID0gcmVxdWlyZSgnLi92YWxpZGF0aW9uJyk7XG5cbi8qKlxuICogQWRkcyBhbiBvZmZlciB0byB0aGUgbWFwIG9mIGV4dGVuc2lvbiBvZmZlcnMgb3IgYSBwYXJhbWV0ZXIgdG8gdGhlIG1hcCBvZlxuICogcGFyYW1ldGVycy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGVzdCBUaGUgbWFwIG9mIGV4dGVuc2lvbiBvZmZlcnMgb3IgcGFyYW1ldGVyc1xuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIGV4dGVuc2lvbiBvciBwYXJhbWV0ZXIgbmFtZVxuICogQHBhcmFtIHsoT2JqZWN0fEJvb2xlYW58U3RyaW5nKX0gZWxlbSBUaGUgZXh0ZW5zaW9uIHBhcmFtZXRlcnMgb3IgdGhlXG4gKiAgICAgcGFyYW1ldGVyIHZhbHVlXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwdXNoKGRlc3QsIG5hbWUsIGVsZW0pIHtcbiAgaWYgKGRlc3RbbmFtZV0gPT09IHVuZGVmaW5lZCkgZGVzdFtuYW1lXSA9IFtlbGVtXTtcbiAgZWxzZSBkZXN0W25hbWVdLnB1c2goZWxlbSk7XG59XG5cbi8qKlxuICogUGFyc2VzIHRoZSBgU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zYCBoZWFkZXIgaW50byBhbiBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGhlYWRlciBUaGUgZmllbGQgdmFsdWUgb2YgdGhlIGhlYWRlclxuICogQHJldHVybiB7T2JqZWN0fSBUaGUgcGFyc2VkIG9iamVjdFxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBwYXJzZShoZWFkZXIpIHtcbiAgY29uc3Qgb2ZmZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgbGV0IHBhcmFtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGxldCBtdXN0VW5lc2NhcGUgPSBmYWxzZTtcbiAgbGV0IGlzRXNjYXBpbmcgPSBmYWxzZTtcbiAgbGV0IGluUXVvdGVzID0gZmFsc2U7XG4gIGxldCBleHRlbnNpb25OYW1lO1xuICBsZXQgcGFyYW1OYW1lO1xuICBsZXQgc3RhcnQgPSAtMTtcbiAgbGV0IGNvZGUgPSAtMTtcbiAgbGV0IGVuZCA9IC0xO1xuICBsZXQgaSA9IDA7XG5cbiAgZm9yICg7IGkgPCBoZWFkZXIubGVuZ3RoOyBpKyspIHtcbiAgICBjb2RlID0gaGVhZGVyLmNoYXJDb2RlQXQoaSk7XG5cbiAgICBpZiAoZXh0ZW5zaW9uTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoZW5kID09PSAtMSAmJiB0b2tlbkNoYXJzW2NvZGVdID09PSAxKSB7XG4gICAgICAgIGlmIChzdGFydCA9PT0gLTEpIHN0YXJ0ID0gaTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIGkgIT09IDAgJiZcbiAgICAgICAgKGNvZGUgPT09IDB4MjAgLyogJyAnICovIHx8IGNvZGUgPT09IDB4MDkpIC8qICdcXHQnICovXG4gICAgICApIHtcbiAgICAgICAgaWYgKGVuZCA9PT0gLTEgJiYgc3RhcnQgIT09IC0xKSBlbmQgPSBpO1xuICAgICAgfSBlbHNlIGlmIChjb2RlID09PSAweDNiIC8qICc7JyAqLyB8fCBjb2RlID09PSAweDJjIC8qICcsJyAqLykge1xuICAgICAgICBpZiAoc3RhcnQgPT09IC0xKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW5kID09PSAtMSkgZW5kID0gaTtcbiAgICAgICAgY29uc3QgbmFtZSA9IGhlYWRlci5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgICAgaWYgKGNvZGUgPT09IDB4MmMpIHtcbiAgICAgICAgICBwdXNoKG9mZmVycywgbmFtZSwgcGFyYW1zKTtcbiAgICAgICAgICBwYXJhbXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGV4dGVuc2lvbk5hbWUgPSBuYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhcnQgPSBlbmQgPSAtMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVW5leHBlY3RlZCBjaGFyYWN0ZXIgYXQgaW5kZXggJHtpfWApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocGFyYW1OYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChlbmQgPT09IC0xICYmIHRva2VuQ2hhcnNbY29kZV0gPT09IDEpIHtcbiAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSkgc3RhcnQgPSBpO1xuICAgICAgfSBlbHNlIGlmIChjb2RlID09PSAweDIwIHx8IGNvZGUgPT09IDB4MDkpIHtcbiAgICAgICAgaWYgKGVuZCA9PT0gLTEgJiYgc3RhcnQgIT09IC0xKSBlbmQgPSBpO1xuICAgICAgfSBlbHNlIGlmIChjb2RlID09PSAweDNiIHx8IGNvZGUgPT09IDB4MmMpIHtcbiAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSkge1xuICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVW5leHBlY3RlZCBjaGFyYWN0ZXIgYXQgaW5kZXggJHtpfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVuZCA9PT0gLTEpIGVuZCA9IGk7XG4gICAgICAgIHB1c2gocGFyYW1zLCBoZWFkZXIuc2xpY2Uoc3RhcnQsIGVuZCksIHRydWUpO1xuICAgICAgICBpZiAoY29kZSA9PT0gMHgyYykge1xuICAgICAgICAgIHB1c2gob2ZmZXJzLCBleHRlbnNpb25OYW1lLCBwYXJhbXMpO1xuICAgICAgICAgIHBhcmFtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgZXh0ZW5zaW9uTmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXJ0ID0gZW5kID0gLTE7XG4gICAgICB9IGVsc2UgaWYgKGNvZGUgPT09IDB4M2QgLyogJz0nICovICYmIHN0YXJ0ICE9PSAtMSAmJiBlbmQgPT09IC0xKSB7XG4gICAgICAgIHBhcmFtTmFtZSA9IGhlYWRlci5zbGljZShzdGFydCwgaSk7XG4gICAgICAgIHN0YXJ0ID0gZW5kID0gLTE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoYFVuZXhwZWN0ZWQgY2hhcmFjdGVyIGF0IGluZGV4ICR7aX1gKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy9cbiAgICAgIC8vIFRoZSB2YWx1ZSBvZiBhIHF1b3RlZC1zdHJpbmcgYWZ0ZXIgdW5lc2NhcGluZyBtdXN0IGNvbmZvcm0gdG8gdGhlXG4gICAgICAvLyB0b2tlbiBBQk5GLCBzbyBvbmx5IHRva2VuIGNoYXJhY3RlcnMgYXJlIHZhbGlkLlxuICAgICAgLy8gUmVmOiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjQ1NSNzZWN0aW9uLTkuMVxuICAgICAgLy9cbiAgICAgIGlmIChpc0VzY2FwaW5nKSB7XG4gICAgICAgIGlmICh0b2tlbkNoYXJzW2NvZGVdICE9PSAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSkgc3RhcnQgPSBpO1xuICAgICAgICBlbHNlIGlmICghbXVzdFVuZXNjYXBlKSBtdXN0VW5lc2NhcGUgPSB0cnVlO1xuICAgICAgICBpc0VzY2FwaW5nID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGluUXVvdGVzKSB7XG4gICAgICAgIGlmICh0b2tlbkNoYXJzW2NvZGVdID09PSAxKSB7XG4gICAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSkgc3RhcnQgPSBpO1xuICAgICAgICB9IGVsc2UgaWYgKGNvZGUgPT09IDB4MjIgLyogJ1wiJyAqLyAmJiBzdGFydCAhPT0gLTEpIHtcbiAgICAgICAgICBpblF1b3RlcyA9IGZhbHNlO1xuICAgICAgICAgIGVuZCA9IGk7XG4gICAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gMHg1YyAvKiAnXFwnICovKSB7XG4gICAgICAgICAgaXNFc2NhcGluZyA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gMHgyMiAmJiBoZWFkZXIuY2hhckNvZGVBdChpIC0gMSkgPT09IDB4M2QpIHtcbiAgICAgICAgaW5RdW90ZXMgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChlbmQgPT09IC0xICYmIHRva2VuQ2hhcnNbY29kZV0gPT09IDEpIHtcbiAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSkgc3RhcnQgPSBpO1xuICAgICAgfSBlbHNlIGlmIChzdGFydCAhPT0gLTEgJiYgKGNvZGUgPT09IDB4MjAgfHwgY29kZSA9PT0gMHgwOSkpIHtcbiAgICAgICAgaWYgKGVuZCA9PT0gLTEpIGVuZCA9IGk7XG4gICAgICB9IGVsc2UgaWYgKGNvZGUgPT09IDB4M2IgfHwgY29kZSA9PT0gMHgyYykge1xuICAgICAgICBpZiAoc3RhcnQgPT09IC0xKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW5kID09PSAtMSkgZW5kID0gaTtcbiAgICAgICAgbGV0IHZhbHVlID0gaGVhZGVyLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgICBpZiAobXVzdFVuZXNjYXBlKSB7XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXFxcL2csICcnKTtcbiAgICAgICAgICBtdXN0VW5lc2NhcGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBwdXNoKHBhcmFtcywgcGFyYW1OYW1lLCB2YWx1ZSk7XG4gICAgICAgIGlmIChjb2RlID09PSAweDJjKSB7XG4gICAgICAgICAgcHVzaChvZmZlcnMsIGV4dGVuc2lvbk5hbWUsIHBhcmFtcyk7XG4gICAgICAgICAgcGFyYW1zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICBleHRlbnNpb25OYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyYW1OYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICBzdGFydCA9IGVuZCA9IC0xO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXJ0ID09PSAtMSB8fCBpblF1b3RlcyB8fCBjb2RlID09PSAweDIwIHx8IGNvZGUgPT09IDB4MDkpIHtcbiAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ1VuZXhwZWN0ZWQgZW5kIG9mIGlucHV0Jyk7XG4gIH1cblxuICBpZiAoZW5kID09PSAtMSkgZW5kID0gaTtcbiAgY29uc3QgdG9rZW4gPSBoZWFkZXIuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gIGlmIChleHRlbnNpb25OYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICBwdXNoKG9mZmVycywgdG9rZW4sIHBhcmFtcyk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHBhcmFtTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBwdXNoKHBhcmFtcywgdG9rZW4sIHRydWUpO1xuICAgIH0gZWxzZSBpZiAobXVzdFVuZXNjYXBlKSB7XG4gICAgICBwdXNoKHBhcmFtcywgcGFyYW1OYW1lLCB0b2tlbi5yZXBsYWNlKC9cXFxcL2csICcnKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHB1c2gocGFyYW1zLCBwYXJhbU5hbWUsIHRva2VuKTtcbiAgICB9XG4gICAgcHVzaChvZmZlcnMsIGV4dGVuc2lvbk5hbWUsIHBhcmFtcyk7XG4gIH1cblxuICByZXR1cm4gb2ZmZXJzO1xufVxuXG4vKipcbiAqIEJ1aWxkcyB0aGUgYFNlYy1XZWJTb2NrZXQtRXh0ZW5zaW9uc2AgaGVhZGVyIGZpZWxkIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbnNpb25zIFRoZSBtYXAgb2YgZXh0ZW5zaW9ucyBhbmQgcGFyYW1ldGVycyB0byBmb3JtYXRcbiAqIEByZXR1cm4ge1N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBnaXZlbiBvYmplY3RcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gZm9ybWF0KGV4dGVuc2lvbnMpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGV4dGVuc2lvbnMpXG4gICAgLm1hcCgoZXh0ZW5zaW9uKSA9PiB7XG4gICAgICBsZXQgY29uZmlndXJhdGlvbnMgPSBleHRlbnNpb25zW2V4dGVuc2lvbl07XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29uZmlndXJhdGlvbnMpKSBjb25maWd1cmF0aW9ucyA9IFtjb25maWd1cmF0aW9uc107XG4gICAgICByZXR1cm4gY29uZmlndXJhdGlvbnNcbiAgICAgICAgLm1hcCgocGFyYW1zKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIFtleHRlbnNpb25dXG4gICAgICAgICAgICAuY29uY2F0KFxuICAgICAgICAgICAgICBPYmplY3Qua2V5cyhwYXJhbXMpLm1hcCgoaykgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZXMgPSBwYXJhbXNba107XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlcykpIHZhbHVlcyA9IFt2YWx1ZXNdO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgIC5tYXAoKHYpID0+ICh2ID09PSB0cnVlID8gayA6IGAke2t9PSR7dn1gKSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKCc7ICcpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmpvaW4oJzsgJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKCcsICcpO1xuICAgIH0pXG4gICAgLmpvaW4oJywgJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0geyBmb3JtYXQsIHBhcnNlIH07XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGtEb25lID0gU3ltYm9sKCdrRG9uZScpO1xuY29uc3Qga1J1biA9IFN5bWJvbCgna1J1bicpO1xuXG4vKipcbiAqIEEgdmVyeSBzaW1wbGUgam9iIHF1ZXVlIHdpdGggYWRqdXN0YWJsZSBjb25jdXJyZW5jeS4gQWRhcHRlZCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vU1RSTUwvYXN5bmMtbGltaXRlclxuICovXG5jbGFzcyBMaW1pdGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgYExpbWl0ZXJgLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gW2NvbmN1cnJlbmN5PUluZmluaXR5XSBUaGUgbWF4aW11bSBudW1iZXIgb2Ygam9icyBhbGxvd2VkXG4gICAqICAgICB0byBydW4gY29uY3VycmVudGx5XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb25jdXJyZW5jeSkge1xuICAgIHRoaXNba0RvbmVdID0gKCkgPT4ge1xuICAgICAgdGhpcy5wZW5kaW5nLS07XG4gICAgICB0aGlzW2tSdW5dKCk7XG4gICAgfTtcbiAgICB0aGlzLmNvbmN1cnJlbmN5ID0gY29uY3VycmVuY3kgfHwgSW5maW5pdHk7XG4gICAgdGhpcy5qb2JzID0gW107XG4gICAgdGhpcy5wZW5kaW5nID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgam9iIHRvIHRoZSBxdWV1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gam9iIFRoZSBqb2IgdG8gcnVuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFkZChqb2IpIHtcbiAgICB0aGlzLmpvYnMucHVzaChqb2IpO1xuICAgIHRoaXNba1J1bl0oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgam9iIGZyb20gdGhlIHF1ZXVlIGFuZCBydW5zIGl0IGlmIHBvc3NpYmxlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgW2tSdW5dKCkge1xuICAgIGlmICh0aGlzLnBlbmRpbmcgPT09IHRoaXMuY29uY3VycmVuY3kpIHJldHVybjtcblxuICAgIGlmICh0aGlzLmpvYnMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBqb2IgPSB0aGlzLmpvYnMuc2hpZnQoKTtcblxuICAgICAgdGhpcy5wZW5kaW5nKys7XG4gICAgICBqb2IodGhpc1trRG9uZV0pO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IExpbWl0ZXI7XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHpsaWIgPSByZXF1aXJlKCd6bGliJyk7XG5cbmNvbnN0IGJ1ZmZlclV0aWwgPSByZXF1aXJlKCcuL2J1ZmZlci11dGlsJyk7XG5jb25zdCBMaW1pdGVyID0gcmVxdWlyZSgnLi9saW1pdGVyJyk7XG5jb25zdCB7IGtTdGF0dXNDb2RlIH0gPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuXG5jb25zdCBUUkFJTEVSID0gQnVmZmVyLmZyb20oWzB4MDAsIDB4MDAsIDB4ZmYsIDB4ZmZdKTtcbmNvbnN0IGtQZXJNZXNzYWdlRGVmbGF0ZSA9IFN5bWJvbCgncGVybWVzc2FnZS1kZWZsYXRlJyk7XG5jb25zdCBrVG90YWxMZW5ndGggPSBTeW1ib2woJ3RvdGFsLWxlbmd0aCcpO1xuY29uc3Qga0NhbGxiYWNrID0gU3ltYm9sKCdjYWxsYmFjaycpO1xuY29uc3Qga0J1ZmZlcnMgPSBTeW1ib2woJ2J1ZmZlcnMnKTtcbmNvbnN0IGtFcnJvciA9IFN5bWJvbCgnZXJyb3InKTtcblxuLy9cbi8vIFdlIGxpbWl0IHpsaWIgY29uY3VycmVuY3ksIHdoaWNoIHByZXZlbnRzIHNldmVyZSBtZW1vcnkgZnJhZ21lbnRhdGlvblxuLy8gYXMgZG9jdW1lbnRlZCBpbiBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvaXNzdWVzLzg4NzEjaXNzdWVjb21tZW50LTI1MDkxNTkxM1xuLy8gYW5kIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJzb2NrZXRzL3dzL2lzc3Vlcy8xMjAyXG4vL1xuLy8gSW50ZW50aW9uYWxseSBnbG9iYWw7IGl0J3MgdGhlIGdsb2JhbCB0aHJlYWQgcG9vbCB0aGF0J3MgYW4gaXNzdWUuXG4vL1xubGV0IHpsaWJMaW1pdGVyO1xuXG4vKipcbiAqIHBlcm1lc3NhZ2UtZGVmbGF0ZSBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuY2xhc3MgUGVyTWVzc2FnZURlZmxhdGUge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIFBlck1lc3NhZ2VEZWZsYXRlIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0geyhCb29sZWFufE51bWJlcil9IFtvcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHNdIEFkdmVydGlzZSBzdXBwb3J0XG4gICAqICAgICBmb3IsIG9yIHJlcXVlc3QsIGEgY3VzdG9tIGNsaWVudCB3aW5kb3cgc2l6ZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmNsaWVudE5vQ29udGV4dFRha2VvdmVyPWZhbHNlXSBBZHZlcnRpc2UvXG4gICAqICAgICBhY2tub3dsZWRnZSBkaXNhYmxpbmcgb2YgY2xpZW50IGNvbnRleHQgdGFrZW92ZXJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmNvbmN1cnJlbmN5TGltaXQ9MTBdIFRoZSBudW1iZXIgb2YgY29uY3VycmVudFxuICAgKiAgICAgY2FsbHMgdG8gemxpYlxuICAgKiBAcGFyYW0geyhCb29sZWFufE51bWJlcil9IFtvcHRpb25zLnNlcnZlck1heFdpbmRvd0JpdHNdIFJlcXVlc3QvY29uZmlybSB0aGVcbiAgICogICAgIHVzZSBvZiBhIGN1c3RvbSBzZXJ2ZXIgd2luZG93IHNpemVcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5zZXJ2ZXJOb0NvbnRleHRUYWtlb3Zlcj1mYWxzZV0gUmVxdWVzdC9hY2NlcHRcbiAgICogICAgIGRpc2FibGluZyBvZiBzZXJ2ZXIgY29udGV4dCB0YWtlb3ZlclxuICAgKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMudGhyZXNob2xkPTEwMjRdIFNpemUgKGluIGJ5dGVzKSBiZWxvdyB3aGljaFxuICAgKiAgICAgbWVzc2FnZXMgc2hvdWxkIG5vdCBiZSBjb21wcmVzc2VkIGlmIGNvbnRleHQgdGFrZW92ZXIgaXMgZGlzYWJsZWRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnpsaWJEZWZsYXRlT3B0aW9uc10gT3B0aW9ucyB0byBwYXNzIHRvIHpsaWIgb25cbiAgICogICAgIGRlZmxhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnpsaWJJbmZsYXRlT3B0aW9uc10gT3B0aW9ucyB0byBwYXNzIHRvIHpsaWIgb25cbiAgICogICAgIGluZmxhdGVcbiAgICogQHBhcmFtIHtCb29sZWFufSBbaXNTZXJ2ZXI9ZmFsc2VdIENyZWF0ZSB0aGUgaW5zdGFuY2UgaW4gZWl0aGVyIHNlcnZlciBvclxuICAgKiAgICAgY2xpZW50IG1vZGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFttYXhQYXlsb2FkPTBdIFRoZSBtYXhpbXVtIGFsbG93ZWQgbWVzc2FnZSBsZW5ndGhcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGlzU2VydmVyLCBtYXhQYXlsb2FkKSB7XG4gICAgdGhpcy5fbWF4UGF5bG9hZCA9IG1heFBheWxvYWQgfCAwO1xuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHRoaXMuX3RocmVzaG9sZCA9XG4gICAgICB0aGlzLl9vcHRpb25zLnRocmVzaG9sZCAhPT0gdW5kZWZpbmVkID8gdGhpcy5fb3B0aW9ucy50aHJlc2hvbGQgOiAxMDI0O1xuICAgIHRoaXMuX2lzU2VydmVyID0gISFpc1NlcnZlcjtcbiAgICB0aGlzLl9kZWZsYXRlID0gbnVsbDtcbiAgICB0aGlzLl9pbmZsYXRlID0gbnVsbDtcblxuICAgIHRoaXMucGFyYW1zID0gbnVsbDtcblxuICAgIGlmICghemxpYkxpbWl0ZXIpIHtcbiAgICAgIGNvbnN0IGNvbmN1cnJlbmN5ID1cbiAgICAgICAgdGhpcy5fb3B0aW9ucy5jb25jdXJyZW5jeUxpbWl0ICE9PSB1bmRlZmluZWRcbiAgICAgICAgICA/IHRoaXMuX29wdGlvbnMuY29uY3VycmVuY3lMaW1pdFxuICAgICAgICAgIDogMTA7XG4gICAgICB6bGliTGltaXRlciA9IG5ldyBMaW1pdGVyKGNvbmN1cnJlbmN5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgZXh0ZW5zaW9uTmFtZSgpIHtcbiAgICByZXR1cm4gJ3Blcm1lc3NhZ2UtZGVmbGF0ZSc7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGV4dGVuc2lvbiBuZWdvdGlhdGlvbiBvZmZlci5cbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fSBFeHRlbnNpb24gcGFyYW1ldGVyc1xuICAgKiBAcHVibGljXG4gICAqL1xuICBvZmZlcigpIHtcbiAgICBjb25zdCBwYXJhbXMgPSB7fTtcblxuICAgIGlmICh0aGlzLl9vcHRpb25zLnNlcnZlck5vQ29udGV4dFRha2VvdmVyKSB7XG4gICAgICBwYXJhbXMuc2VydmVyX25vX2NvbnRleHRfdGFrZW92ZXIgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodGhpcy5fb3B0aW9ucy5jbGllbnROb0NvbnRleHRUYWtlb3Zlcikge1xuICAgICAgcGFyYW1zLmNsaWVudF9ub19jb250ZXh0X3Rha2VvdmVyID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX29wdGlvbnMuc2VydmVyTWF4V2luZG93Qml0cykge1xuICAgICAgcGFyYW1zLnNlcnZlcl9tYXhfd2luZG93X2JpdHMgPSB0aGlzLl9vcHRpb25zLnNlcnZlck1heFdpbmRvd0JpdHM7XG4gICAgfVxuICAgIGlmICh0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMpIHtcbiAgICAgIHBhcmFtcy5jbGllbnRfbWF4X3dpbmRvd19iaXRzID0gdGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzID09IG51bGwpIHtcbiAgICAgIHBhcmFtcy5jbGllbnRfbWF4X3dpbmRvd19iaXRzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VwdCBhbiBleHRlbnNpb24gbmVnb3RpYXRpb24gb2ZmZXIvcmVzcG9uc2UuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGNvbmZpZ3VyYXRpb25zIFRoZSBleHRlbnNpb24gbmVnb3RpYXRpb24gb2ZmZXJzL3JlcG9uc2VcbiAgICogQHJldHVybiB7T2JqZWN0fSBBY2NlcHRlZCBjb25maWd1cmF0aW9uXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFjY2VwdChjb25maWd1cmF0aW9ucykge1xuICAgIGNvbmZpZ3VyYXRpb25zID0gdGhpcy5ub3JtYWxpemVQYXJhbXMoY29uZmlndXJhdGlvbnMpO1xuXG4gICAgdGhpcy5wYXJhbXMgPSB0aGlzLl9pc1NlcnZlclxuICAgICAgPyB0aGlzLmFjY2VwdEFzU2VydmVyKGNvbmZpZ3VyYXRpb25zKVxuICAgICAgOiB0aGlzLmFjY2VwdEFzQ2xpZW50KGNvbmZpZ3VyYXRpb25zKTtcblxuICAgIHJldHVybiB0aGlzLnBhcmFtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlcyBhbGwgcmVzb3VyY2VzIHVzZWQgYnkgdGhlIGV4dGVuc2lvbi5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2xlYW51cCgpIHtcbiAgICBpZiAodGhpcy5faW5mbGF0ZSkge1xuICAgICAgdGhpcy5faW5mbGF0ZS5jbG9zZSgpO1xuICAgICAgdGhpcy5faW5mbGF0ZSA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2RlZmxhdGUpIHtcbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5fZGVmbGF0ZVtrQ2FsbGJhY2tdO1xuXG4gICAgICB0aGlzLl9kZWZsYXRlLmNsb3NlKCk7XG4gICAgICB0aGlzLl9kZWZsYXRlID0gbnVsbDtcblxuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKFxuICAgICAgICAgIG5ldyBFcnJvcihcbiAgICAgICAgICAgICdUaGUgZGVmbGF0ZSBzdHJlYW0gd2FzIGNsb3NlZCB3aGlsZSBkYXRhIHdhcyBiZWluZyBwcm9jZXNzZWQnXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiAgQWNjZXB0IGFuIGV4dGVuc2lvbiBuZWdvdGlhdGlvbiBvZmZlci5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gb2ZmZXJzIFRoZSBleHRlbnNpb24gbmVnb3RpYXRpb24gb2ZmZXJzXG4gICAqIEByZXR1cm4ge09iamVjdH0gQWNjZXB0ZWQgY29uZmlndXJhdGlvblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYWNjZXB0QXNTZXJ2ZXIob2ZmZXJzKSB7XG4gICAgY29uc3Qgb3B0cyA9IHRoaXMuX29wdGlvbnM7XG4gICAgY29uc3QgYWNjZXB0ZWQgPSBvZmZlcnMuZmluZCgocGFyYW1zKSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIChvcHRzLnNlcnZlck5vQ29udGV4dFRha2VvdmVyID09PSBmYWxzZSAmJlxuICAgICAgICAgIHBhcmFtcy5zZXJ2ZXJfbm9fY29udGV4dF90YWtlb3ZlcikgfHxcbiAgICAgICAgKHBhcmFtcy5zZXJ2ZXJfbWF4X3dpbmRvd19iaXRzICYmXG4gICAgICAgICAgKG9wdHMuc2VydmVyTWF4V2luZG93Qml0cyA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgICh0eXBlb2Ygb3B0cy5zZXJ2ZXJNYXhXaW5kb3dCaXRzID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAgICAgICBvcHRzLnNlcnZlck1heFdpbmRvd0JpdHMgPiBwYXJhbXMuc2VydmVyX21heF93aW5kb3dfYml0cykpKSB8fFxuICAgICAgICAodHlwZW9mIG9wdHMuY2xpZW50TWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgICAhcGFyYW1zLmNsaWVudF9tYXhfd2luZG93X2JpdHMpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGlmICghYWNjZXB0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm9uZSBvZiB0aGUgZXh0ZW5zaW9uIG9mZmVycyBjYW4gYmUgYWNjZXB0ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAob3B0cy5zZXJ2ZXJOb0NvbnRleHRUYWtlb3Zlcikge1xuICAgICAgYWNjZXB0ZWQuc2VydmVyX25vX2NvbnRleHRfdGFrZW92ZXIgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAob3B0cy5jbGllbnROb0NvbnRleHRUYWtlb3Zlcikge1xuICAgICAgYWNjZXB0ZWQuY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXIgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdHMuc2VydmVyTWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicpIHtcbiAgICAgIGFjY2VwdGVkLnNlcnZlcl9tYXhfd2luZG93X2JpdHMgPSBvcHRzLnNlcnZlck1heFdpbmRvd0JpdHM7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0cy5jbGllbnRNYXhXaW5kb3dCaXRzID09PSAnbnVtYmVyJykge1xuICAgICAgYWNjZXB0ZWQuY2xpZW50X21heF93aW5kb3dfYml0cyA9IG9wdHMuY2xpZW50TWF4V2luZG93Qml0cztcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgYWNjZXB0ZWQuY2xpZW50X21heF93aW5kb3dfYml0cyA9PT0gdHJ1ZSB8fFxuICAgICAgb3B0cy5jbGllbnRNYXhXaW5kb3dCaXRzID09PSBmYWxzZVxuICAgICkge1xuICAgICAgZGVsZXRlIGFjY2VwdGVkLmNsaWVudF9tYXhfd2luZG93X2JpdHM7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFjY2VwdGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VwdCB0aGUgZXh0ZW5zaW9uIG5lZ290aWF0aW9uIHJlc3BvbnNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSByZXNwb25zZSBUaGUgZXh0ZW5zaW9uIG5lZ290aWF0aW9uIHJlc3BvbnNlXG4gICAqIEByZXR1cm4ge09iamVjdH0gQWNjZXB0ZWQgY29uZmlndXJhdGlvblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYWNjZXB0QXNDbGllbnQocmVzcG9uc2UpIHtcbiAgICBjb25zdCBwYXJhbXMgPSByZXNwb25zZVswXTtcblxuICAgIGlmIChcbiAgICAgIHRoaXMuX29wdGlvbnMuY2xpZW50Tm9Db250ZXh0VGFrZW92ZXIgPT09IGZhbHNlICYmXG4gICAgICBwYXJhbXMuY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXJcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5leHBlY3RlZCBwYXJhbWV0ZXIgXCJjbGllbnRfbm9fY29udGV4dF90YWtlb3ZlclwiJyk7XG4gICAgfVxuXG4gICAgaWYgKCFwYXJhbXMuY2xpZW50X21heF93aW5kb3dfYml0cykge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHBhcmFtcy5jbGllbnRfbWF4X3dpbmRvd19iaXRzID0gdGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMgPT09IGZhbHNlIHx8XG4gICAgICAodHlwZW9mIHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgcGFyYW1zLmNsaWVudF9tYXhfd2luZG93X2JpdHMgPiB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdVbmV4cGVjdGVkIG9yIGludmFsaWQgcGFyYW1ldGVyIFwiY2xpZW50X21heF93aW5kb3dfYml0c1wiJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZSBwYXJhbWV0ZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBjb25maWd1cmF0aW9ucyBUaGUgZXh0ZW5zaW9uIG5lZ290aWF0aW9uIG9mZmVycy9yZXBvbnNlXG4gICAqIEByZXR1cm4ge0FycmF5fSBUaGUgb2ZmZXJzL3Jlc3BvbnNlIHdpdGggbm9ybWFsaXplZCBwYXJhbWV0ZXJzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBub3JtYWxpemVQYXJhbXMoY29uZmlndXJhdGlvbnMpIHtcbiAgICBjb25maWd1cmF0aW9ucy5mb3JFYWNoKChwYXJhbXMpID0+IHtcbiAgICAgIE9iamVjdC5rZXlzKHBhcmFtcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHBhcmFtc1trZXldO1xuXG4gICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQYXJhbWV0ZXIgXCIke2tleX1cIiBtdXN0IGhhdmUgb25seSBhIHNpbmdsZSB2YWx1ZWApO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWUgPSB2YWx1ZVswXTtcblxuICAgICAgICBpZiAoa2V5ID09PSAnY2xpZW50X21heF93aW5kb3dfYml0cycpIHtcbiAgICAgICAgICBpZiAodmFsdWUgIT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG51bSA9ICt2YWx1ZTtcbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihudW0pIHx8IG51bSA8IDggfHwgbnVtID4gMTUpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICBgSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyIFwiJHtrZXl9XCI6ICR7dmFsdWV9YFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSBudW07XG4gICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5faXNTZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgIGBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgXCIke2tleX1cIjogJHt2YWx1ZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdzZXJ2ZXJfbWF4X3dpbmRvd19iaXRzJykge1xuICAgICAgICAgIGNvbnN0IG51bSA9ICt2YWx1ZTtcbiAgICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIobnVtKSB8fCBudW0gPCA4IHx8IG51bSA+IDE1KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICAgICBgSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyIFwiJHtrZXl9XCI6ICR7dmFsdWV9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBudW07XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAga2V5ID09PSAnY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXInIHx8XG4gICAgICAgICAga2V5ID09PSAnc2VydmVyX25vX2NvbnRleHRfdGFrZW92ZXInXG4gICAgICAgICkge1xuICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgYEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciBcIiR7a2V5fVwiOiAke3ZhbHVlfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBwYXJhbWV0ZXIgXCIke2tleX1cImApO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyYW1zW2tleV0gPSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbmZpZ3VyYXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29tcHJlc3MgZGF0YS4gQ29uY3VycmVuY3kgbGltaXRlZC5cbiAgICpcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGEgQ29tcHJlc3NlZCBkYXRhXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZmluIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGlzIHRoZSBsYXN0IGZyYWdtZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGRlY29tcHJlc3MoZGF0YSwgZmluLCBjYWxsYmFjaykge1xuICAgIHpsaWJMaW1pdGVyLmFkZCgoZG9uZSkgPT4ge1xuICAgICAgdGhpcy5fZGVjb21wcmVzcyhkYXRhLCBmaW4sIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgICBkb25lKCk7XG4gICAgICAgIGNhbGxiYWNrKGVyciwgcmVzdWx0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXByZXNzIGRhdGEuIENvbmN1cnJlbmN5IGxpbWl0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7KEJ1ZmZlcnxTdHJpbmcpfSBkYXRhIERhdGEgdG8gY29tcHJlc3NcbiAgICogQHBhcmFtIHtCb29sZWFufSBmaW4gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRoaXMgaXMgdGhlIGxhc3QgZnJhZ21lbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY29tcHJlc3MoZGF0YSwgZmluLCBjYWxsYmFjaykge1xuICAgIHpsaWJMaW1pdGVyLmFkZCgoZG9uZSkgPT4ge1xuICAgICAgdGhpcy5fY29tcHJlc3MoZGF0YSwgZmluLCAoZXJyLCByZXN1bHQpID0+IHtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgICBjYWxsYmFjayhlcnIsIHJlc3VsdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWNvbXByZXNzIGRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBkYXRhIENvbXByZXNzZWQgZGF0YVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZpbiBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdGhpcyBpcyB0aGUgbGFzdCBmcmFnbWVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2RlY29tcHJlc3MoZGF0YSwgZmluLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGVuZHBvaW50ID0gdGhpcy5faXNTZXJ2ZXIgPyAnY2xpZW50JyA6ICdzZXJ2ZXInO1xuXG4gICAgaWYgKCF0aGlzLl9pbmZsYXRlKSB7XG4gICAgICBjb25zdCBrZXkgPSBgJHtlbmRwb2ludH1fbWF4X3dpbmRvd19iaXRzYDtcbiAgICAgIGNvbnN0IHdpbmRvd0JpdHMgPVxuICAgICAgICB0eXBlb2YgdGhpcy5wYXJhbXNba2V5XSAhPT0gJ251bWJlcidcbiAgICAgICAgICA/IHpsaWIuWl9ERUZBVUxUX1dJTkRPV0JJVFNcbiAgICAgICAgICA6IHRoaXMucGFyYW1zW2tleV07XG5cbiAgICAgIHRoaXMuX2luZmxhdGUgPSB6bGliLmNyZWF0ZUluZmxhdGVSYXcoe1xuICAgICAgICAuLi50aGlzLl9vcHRpb25zLnpsaWJJbmZsYXRlT3B0aW9ucyxcbiAgICAgICAgd2luZG93Qml0c1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9pbmZsYXRlW2tQZXJNZXNzYWdlRGVmbGF0ZV0gPSB0aGlzO1xuICAgICAgdGhpcy5faW5mbGF0ZVtrVG90YWxMZW5ndGhdID0gMDtcbiAgICAgIHRoaXMuX2luZmxhdGVba0J1ZmZlcnNdID0gW107XG4gICAgICB0aGlzLl9pbmZsYXRlLm9uKCdlcnJvcicsIGluZmxhdGVPbkVycm9yKTtcbiAgICAgIHRoaXMuX2luZmxhdGUub24oJ2RhdGEnLCBpbmZsYXRlT25EYXRhKTtcbiAgICB9XG5cbiAgICB0aGlzLl9pbmZsYXRlW2tDYWxsYmFja10gPSBjYWxsYmFjaztcblxuICAgIHRoaXMuX2luZmxhdGUud3JpdGUoZGF0YSk7XG4gICAgaWYgKGZpbikgdGhpcy5faW5mbGF0ZS53cml0ZShUUkFJTEVSKTtcblxuICAgIHRoaXMuX2luZmxhdGUuZmx1c2goKCkgPT4ge1xuICAgICAgY29uc3QgZXJyID0gdGhpcy5faW5mbGF0ZVtrRXJyb3JdO1xuXG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHRoaXMuX2luZmxhdGUuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5faW5mbGF0ZSA9IG51bGw7XG4gICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGJ1ZmZlclV0aWwuY29uY2F0KFxuICAgICAgICB0aGlzLl9pbmZsYXRlW2tCdWZmZXJzXSxcbiAgICAgICAgdGhpcy5faW5mbGF0ZVtrVG90YWxMZW5ndGhdXG4gICAgICApO1xuXG4gICAgICBpZiAodGhpcy5faW5mbGF0ZS5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkKSB7XG4gICAgICAgIHRoaXMuX2luZmxhdGUuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5faW5mbGF0ZSA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9pbmZsYXRlW2tUb3RhbExlbmd0aF0gPSAwO1xuICAgICAgICB0aGlzLl9pbmZsYXRlW2tCdWZmZXJzXSA9IFtdO1xuXG4gICAgICAgIGlmIChmaW4gJiYgdGhpcy5wYXJhbXNbYCR7ZW5kcG9pbnR9X25vX2NvbnRleHRfdGFrZW92ZXJgXSkge1xuICAgICAgICAgIHRoaXMuX2luZmxhdGUucmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wcmVzcyBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0geyhCdWZmZXJ8U3RyaW5nKX0gZGF0YSBEYXRhIHRvIGNvbXByZXNzXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZmluIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGlzIHRoZSBsYXN0IGZyYWdtZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfY29tcHJlc3MoZGF0YSwgZmluLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGVuZHBvaW50ID0gdGhpcy5faXNTZXJ2ZXIgPyAnc2VydmVyJyA6ICdjbGllbnQnO1xuXG4gICAgaWYgKCF0aGlzLl9kZWZsYXRlKSB7XG4gICAgICBjb25zdCBrZXkgPSBgJHtlbmRwb2ludH1fbWF4X3dpbmRvd19iaXRzYDtcbiAgICAgIGNvbnN0IHdpbmRvd0JpdHMgPVxuICAgICAgICB0eXBlb2YgdGhpcy5wYXJhbXNba2V5XSAhPT0gJ251bWJlcidcbiAgICAgICAgICA/IHpsaWIuWl9ERUZBVUxUX1dJTkRPV0JJVFNcbiAgICAgICAgICA6IHRoaXMucGFyYW1zW2tleV07XG5cbiAgICAgIHRoaXMuX2RlZmxhdGUgPSB6bGliLmNyZWF0ZURlZmxhdGVSYXcoe1xuICAgICAgICAuLi50aGlzLl9vcHRpb25zLnpsaWJEZWZsYXRlT3B0aW9ucyxcbiAgICAgICAgd2luZG93Qml0c1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX2RlZmxhdGVba1RvdGFsTGVuZ3RoXSA9IDA7XG4gICAgICB0aGlzLl9kZWZsYXRlW2tCdWZmZXJzXSA9IFtdO1xuXG4gICAgICB0aGlzLl9kZWZsYXRlLm9uKCdkYXRhJywgZGVmbGF0ZU9uRGF0YSk7XG4gICAgfVxuXG4gICAgdGhpcy5fZGVmbGF0ZVtrQ2FsbGJhY2tdID0gY2FsbGJhY2s7XG5cbiAgICB0aGlzLl9kZWZsYXRlLndyaXRlKGRhdGEpO1xuICAgIHRoaXMuX2RlZmxhdGUuZmx1c2goemxpYi5aX1NZTkNfRkxVU0gsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5fZGVmbGF0ZSkge1xuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgZGVmbGF0ZSBzdHJlYW0gd2FzIGNsb3NlZCB3aGlsZSBkYXRhIHdhcyBiZWluZyBwcm9jZXNzZWQuXG4gICAgICAgIC8vXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IGRhdGEgPSBidWZmZXJVdGlsLmNvbmNhdChcbiAgICAgICAgdGhpcy5fZGVmbGF0ZVtrQnVmZmVyc10sXG4gICAgICAgIHRoaXMuX2RlZmxhdGVba1RvdGFsTGVuZ3RoXVxuICAgICAgKTtcblxuICAgICAgaWYgKGZpbikgZGF0YSA9IGRhdGEuc2xpY2UoMCwgZGF0YS5sZW5ndGggLSA0KTtcblxuICAgICAgLy9cbiAgICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBjYWxsYmFjayB3aWxsIG5vdCBiZSBjYWxsZWQgYWdhaW4gaW5cbiAgICAgIC8vIGBQZXJNZXNzYWdlRGVmbGF0ZSNjbGVhbnVwKClgLlxuICAgICAgLy9cbiAgICAgIHRoaXMuX2RlZmxhdGVba0NhbGxiYWNrXSA9IG51bGw7XG5cbiAgICAgIHRoaXMuX2RlZmxhdGVba1RvdGFsTGVuZ3RoXSA9IDA7XG4gICAgICB0aGlzLl9kZWZsYXRlW2tCdWZmZXJzXSA9IFtdO1xuXG4gICAgICBpZiAoZmluICYmIHRoaXMucGFyYW1zW2Ake2VuZHBvaW50fV9ub19jb250ZXh0X3Rha2VvdmVyYF0pIHtcbiAgICAgICAgdGhpcy5fZGVmbGF0ZS5yZXNldCgpO1xuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICB9KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFBlck1lc3NhZ2VEZWZsYXRlO1xuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYHpsaWIuRGVmbGF0ZVJhd2Agc3RyZWFtIGAnZGF0YSdgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBjaHVuayBBIGNodW5rIG9mIGRhdGFcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGRlZmxhdGVPbkRhdGEoY2h1bmspIHtcbiAgdGhpc1trQnVmZmVyc10ucHVzaChjaHVuayk7XG4gIHRoaXNba1RvdGFsTGVuZ3RoXSArPSBjaHVuay5sZW5ndGg7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgemxpYi5JbmZsYXRlUmF3YCBzdHJlYW0gYCdkYXRhJ2AgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IGNodW5rIEEgY2h1bmsgb2YgZGF0YVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaW5mbGF0ZU9uRGF0YShjaHVuaykge1xuICB0aGlzW2tUb3RhbExlbmd0aF0gKz0gY2h1bmsubGVuZ3RoO1xuXG4gIGlmIChcbiAgICB0aGlzW2tQZXJNZXNzYWdlRGVmbGF0ZV0uX21heFBheWxvYWQgPCAxIHx8XG4gICAgdGhpc1trVG90YWxMZW5ndGhdIDw9IHRoaXNba1Blck1lc3NhZ2VEZWZsYXRlXS5fbWF4UGF5bG9hZFxuICApIHtcbiAgICB0aGlzW2tCdWZmZXJzXS5wdXNoKGNodW5rKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzW2tFcnJvcl0gPSBuZXcgUmFuZ2VFcnJvcignTWF4IHBheWxvYWQgc2l6ZSBleGNlZWRlZCcpO1xuICB0aGlzW2tFcnJvcl0uY29kZSA9ICdXU19FUlJfVU5TVVBQT1JURURfTUVTU0FHRV9MRU5HVEgnO1xuICB0aGlzW2tFcnJvcl1ba1N0YXR1c0NvZGVdID0gMTAwOTtcbiAgdGhpcy5yZW1vdmVMaXN0ZW5lcignZGF0YScsIGluZmxhdGVPbkRhdGEpO1xuICB0aGlzLnJlc2V0KCk7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgemxpYi5JbmZsYXRlUmF3YCBzdHJlYW0gYCdlcnJvcidgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVyciBUaGUgZW1pdHRlZCBlcnJvclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaW5mbGF0ZU9uRXJyb3IoZXJyKSB7XG4gIC8vXG4gIC8vIFRoZXJlIGlzIG5vIG5lZWQgdG8gY2FsbCBgWmxpYiNjbG9zZSgpYCBhcyB0aGUgaGFuZGxlIGlzIGF1dG9tYXRpY2FsbHlcbiAgLy8gY2xvc2VkIHdoZW4gYW4gZXJyb3IgaXMgZW1pdHRlZC5cbiAgLy9cbiAgdGhpc1trUGVyTWVzc2FnZURlZmxhdGVdLl9pbmZsYXRlID0gbnVsbDtcbiAgZXJyW2tTdGF0dXNDb2RlXSA9IDEwMDc7XG4gIHRoaXNba0NhbGxiYWNrXShlcnIpO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCB7IFdyaXRhYmxlIH0gPSByZXF1aXJlKCdzdHJlYW0nKTtcblxuY29uc3QgUGVyTWVzc2FnZURlZmxhdGUgPSByZXF1aXJlKCcuL3Blcm1lc3NhZ2UtZGVmbGF0ZScpO1xuY29uc3Qge1xuICBCSU5BUllfVFlQRVMsXG4gIEVNUFRZX0JVRkZFUixcbiAga1N0YXR1c0NvZGUsXG4gIGtXZWJTb2NrZXRcbn0gPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuY29uc3QgeyBjb25jYXQsIHRvQXJyYXlCdWZmZXIsIHVubWFzayB9ID0gcmVxdWlyZSgnLi9idWZmZXItdXRpbCcpO1xuY29uc3QgeyBpc1ZhbGlkU3RhdHVzQ29kZSwgaXNWYWxpZFVURjggfSA9IHJlcXVpcmUoJy4vdmFsaWRhdGlvbicpO1xuXG5jb25zdCBHRVRfSU5GTyA9IDA7XG5jb25zdCBHRVRfUEFZTE9BRF9MRU5HVEhfMTYgPSAxO1xuY29uc3QgR0VUX1BBWUxPQURfTEVOR1RIXzY0ID0gMjtcbmNvbnN0IEdFVF9NQVNLID0gMztcbmNvbnN0IEdFVF9EQVRBID0gNDtcbmNvbnN0IElORkxBVElORyA9IDU7XG5cbi8qKlxuICogSHlCaSBSZWNlaXZlciBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBAZXh0ZW5kcyBXcml0YWJsZVxuICovXG5jbGFzcyBSZWNlaXZlciBleHRlbmRzIFdyaXRhYmxlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBSZWNlaXZlciBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zIG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuYmluYXJ5VHlwZT1ub2RlYnVmZmVyXSBUaGUgdHlwZSBmb3IgYmluYXJ5IGRhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmV4dGVuc2lvbnNdIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBuZWdvdGlhdGVkXG4gICAqICAgICBleHRlbnNpb25zXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuaXNTZXJ2ZXI9ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIHRvIG9wZXJhdGUgaW5cbiAgICogICAgIGNsaWVudCBvciBzZXJ2ZXIgbW9kZVxuICAgKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMubWF4UGF5bG9hZD0wXSBUaGUgbWF4aW11bSBhbGxvd2VkIG1lc3NhZ2UgbGVuZ3RoXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuc2tpcFVURjhWYWxpZGF0aW9uPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvclxuICAgKiAgICAgbm90IHRvIHNraXAgVVRGLTggdmFsaWRhdGlvbiBmb3IgdGV4dCBhbmQgY2xvc2UgbWVzc2FnZXNcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9iaW5hcnlUeXBlID0gb3B0aW9ucy5iaW5hcnlUeXBlIHx8IEJJTkFSWV9UWVBFU1swXTtcbiAgICB0aGlzLl9leHRlbnNpb25zID0gb3B0aW9ucy5leHRlbnNpb25zIHx8IHt9O1xuICAgIHRoaXMuX2lzU2VydmVyID0gISFvcHRpb25zLmlzU2VydmVyO1xuICAgIHRoaXMuX21heFBheWxvYWQgPSBvcHRpb25zLm1heFBheWxvYWQgfCAwO1xuICAgIHRoaXMuX3NraXBVVEY4VmFsaWRhdGlvbiA9ICEhb3B0aW9ucy5za2lwVVRGOFZhbGlkYXRpb247XG4gICAgdGhpc1trV2ViU29ja2V0XSA9IHVuZGVmaW5lZDtcblxuICAgIHRoaXMuX2J1ZmZlcmVkQnl0ZXMgPSAwO1xuICAgIHRoaXMuX2J1ZmZlcnMgPSBbXTtcblxuICAgIHRoaXMuX2NvbXByZXNzZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9wYXlsb2FkTGVuZ3RoID0gMDtcbiAgICB0aGlzLl9tYXNrID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2ZyYWdtZW50ZWQgPSAwO1xuICAgIHRoaXMuX21hc2tlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2ZpbiA9IGZhbHNlO1xuICAgIHRoaXMuX29wY29kZSA9IDA7XG5cbiAgICB0aGlzLl90b3RhbFBheWxvYWRMZW5ndGggPSAwO1xuICAgIHRoaXMuX21lc3NhZ2VMZW5ndGggPSAwO1xuICAgIHRoaXMuX2ZyYWdtZW50cyA9IFtdO1xuXG4gICAgdGhpcy5fc3RhdGUgPSBHRVRfSU5GTztcbiAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogSW1wbGVtZW50cyBgV3JpdGFibGUucHJvdG90eXBlLl93cml0ZSgpYC5cbiAgICpcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGNodW5rIFRoZSBjaHVuayBvZiBkYXRhIHRvIHdyaXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBlbmNvZGluZyBUaGUgY2hhcmFjdGVyIGVuY29kaW5nIG9mIGBjaHVua2BcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2tcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF93cml0ZShjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gICAgaWYgKHRoaXMuX29wY29kZSA9PT0gMHgwOCAmJiB0aGlzLl9zdGF0ZSA9PSBHRVRfSU5GTykgcmV0dXJuIGNiKCk7XG5cbiAgICB0aGlzLl9idWZmZXJlZEJ5dGVzICs9IGNodW5rLmxlbmd0aDtcbiAgICB0aGlzLl9idWZmZXJzLnB1c2goY2h1bmspO1xuICAgIHRoaXMuc3RhcnRMb29wKGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25zdW1lcyBgbmAgYnl0ZXMgZnJvbSB0aGUgYnVmZmVyZWQgZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG4gVGhlIG51bWJlciBvZiBieXRlcyB0byBjb25zdW1lXG4gICAqIEByZXR1cm4ge0J1ZmZlcn0gVGhlIGNvbnN1bWVkIGJ5dGVzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb25zdW1lKG4pIHtcbiAgICB0aGlzLl9idWZmZXJlZEJ5dGVzIC09IG47XG5cbiAgICBpZiAobiA9PT0gdGhpcy5fYnVmZmVyc1swXS5sZW5ndGgpIHJldHVybiB0aGlzLl9idWZmZXJzLnNoaWZ0KCk7XG5cbiAgICBpZiAobiA8IHRoaXMuX2J1ZmZlcnNbMF0ubGVuZ3RoKSB7XG4gICAgICBjb25zdCBidWYgPSB0aGlzLl9idWZmZXJzWzBdO1xuICAgICAgdGhpcy5fYnVmZmVyc1swXSA9IGJ1Zi5zbGljZShuKTtcbiAgICAgIHJldHVybiBidWYuc2xpY2UoMCwgbik7XG4gICAgfVxuXG4gICAgY29uc3QgZHN0ID0gQnVmZmVyLmFsbG9jVW5zYWZlKG4pO1xuXG4gICAgZG8ge1xuICAgICAgY29uc3QgYnVmID0gdGhpcy5fYnVmZmVyc1swXTtcbiAgICAgIGNvbnN0IG9mZnNldCA9IGRzdC5sZW5ndGggLSBuO1xuXG4gICAgICBpZiAobiA+PSBidWYubGVuZ3RoKSB7XG4gICAgICAgIGRzdC5zZXQodGhpcy5fYnVmZmVycy5zaGlmdCgpLCBvZmZzZXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZHN0LnNldChuZXcgVWludDhBcnJheShidWYuYnVmZmVyLCBidWYuYnl0ZU9mZnNldCwgbiksIG9mZnNldCk7XG4gICAgICAgIHRoaXMuX2J1ZmZlcnNbMF0gPSBidWYuc2xpY2Uobik7XG4gICAgICB9XG5cbiAgICAgIG4gLT0gYnVmLmxlbmd0aDtcbiAgICB9IHdoaWxlIChuID4gMCk7XG5cbiAgICByZXR1cm4gZHN0O1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgcGFyc2luZyBsb29wLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhcnRMb29wKGNiKSB7XG4gICAgbGV0IGVycjtcbiAgICB0aGlzLl9sb29wID0gdHJ1ZTtcblxuICAgIGRvIHtcbiAgICAgIHN3aXRjaCAodGhpcy5fc3RhdGUpIHtcbiAgICAgICAgY2FzZSBHRVRfSU5GTzpcbiAgICAgICAgICBlcnIgPSB0aGlzLmdldEluZm8oKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHRVRfUEFZTE9BRF9MRU5HVEhfMTY6XG4gICAgICAgICAgZXJyID0gdGhpcy5nZXRQYXlsb2FkTGVuZ3RoMTYoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHRVRfUEFZTE9BRF9MRU5HVEhfNjQ6XG4gICAgICAgICAgZXJyID0gdGhpcy5nZXRQYXlsb2FkTGVuZ3RoNjQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHRVRfTUFTSzpcbiAgICAgICAgICB0aGlzLmdldE1hc2soKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHRVRfREFUQTpcbiAgICAgICAgICBlcnIgPSB0aGlzLmdldERhdGEoY2IpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIC8vIGBJTkZMQVRJTkdgXG4gICAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IHdoaWxlICh0aGlzLl9sb29wKTtcblxuICAgIGNiKGVycik7XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgdGhlIGZpcnN0IHR3byBieXRlcyBvZiBhIGZyYW1lLlxuICAgKlxuICAgKiBAcmV0dXJuIHsoUmFuZ2VFcnJvcnx1bmRlZmluZWQpfSBBIHBvc3NpYmxlIGVycm9yXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRJbmZvKCkge1xuICAgIGlmICh0aGlzLl9idWZmZXJlZEJ5dGVzIDwgMikge1xuICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1ZiA9IHRoaXMuY29uc3VtZSgyKTtcblxuICAgIGlmICgoYnVmWzBdICYgMHgzMCkgIT09IDB4MDApIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgJ1JTVjIgYW5kIFJTVjMgbXVzdCBiZSBjbGVhcicsXG4gICAgICAgIHRydWUsXG4gICAgICAgIDEwMDIsXG4gICAgICAgICdXU19FUlJfVU5FWFBFQ1RFRF9SU1ZfMl8zJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb21wcmVzc2VkID0gKGJ1ZlswXSAmIDB4NDApID09PSAweDQwO1xuXG4gICAgaWYgKGNvbXByZXNzZWQgJiYgIXRoaXMuX2V4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0pIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgJ1JTVjEgbXVzdCBiZSBjbGVhcicsXG4gICAgICAgIHRydWUsXG4gICAgICAgIDEwMDIsXG4gICAgICAgICdXU19FUlJfVU5FWFBFQ1RFRF9SU1ZfMSdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5fZmluID0gKGJ1ZlswXSAmIDB4ODApID09PSAweDgwO1xuICAgIHRoaXMuX29wY29kZSA9IGJ1ZlswXSAmIDB4MGY7XG4gICAgdGhpcy5fcGF5bG9hZExlbmd0aCA9IGJ1ZlsxXSAmIDB4N2Y7XG5cbiAgICBpZiAodGhpcy5fb3Bjb2RlID09PSAweDAwKSB7XG4gICAgICBpZiAoY29tcHJlc3NlZCkge1xuICAgICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAgICdSU1YxIG11c3QgYmUgY2xlYXInLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgMTAwMixcbiAgICAgICAgICAnV1NfRVJSX1VORVhQRUNURURfUlNWXzEnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5fZnJhZ21lbnRlZCkge1xuICAgICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAgICdpbnZhbGlkIG9wY29kZSAwJyxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIDEwMDIsXG4gICAgICAgICAgJ1dTX0VSUl9JTlZBTElEX09QQ09ERSdcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fb3Bjb2RlID0gdGhpcy5fZnJhZ21lbnRlZDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX29wY29kZSA9PT0gMHgwMSB8fCB0aGlzLl9vcGNvZGUgPT09IDB4MDIpIHtcbiAgICAgIGlmICh0aGlzLl9mcmFnbWVudGVkKSB7XG4gICAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGVycm9yKFxuICAgICAgICAgIFJhbmdlRXJyb3IsXG4gICAgICAgICAgYGludmFsaWQgb3Bjb2RlICR7dGhpcy5fb3Bjb2RlfWAsXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAxMDAyLFxuICAgICAgICAgICdXU19FUlJfSU5WQUxJRF9PUENPREUnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NvbXByZXNzZWQgPSBjb21wcmVzc2VkO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fb3Bjb2RlID4gMHgwNyAmJiB0aGlzLl9vcGNvZGUgPCAweDBiKSB7XG4gICAgICBpZiAoIXRoaXMuX2Zpbikge1xuICAgICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAgICdGSU4gbXVzdCBiZSBzZXQnLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgMTAwMixcbiAgICAgICAgICAnV1NfRVJSX0VYUEVDVEVEX0ZJTidcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbXByZXNzZWQpIHtcbiAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gZXJyb3IoXG4gICAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgICAnUlNWMSBtdXN0IGJlIGNsZWFyJyxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIDEwMDIsXG4gICAgICAgICAgJ1dTX0VSUl9VTkVYUEVDVEVEX1JTVl8xJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fcGF5bG9hZExlbmd0aCA+IDB4N2QpIHtcbiAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gZXJyb3IoXG4gICAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgICBgaW52YWxpZCBwYXlsb2FkIGxlbmd0aCAke3RoaXMuX3BheWxvYWRMZW5ndGh9YCxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIDEwMDIsXG4gICAgICAgICAgJ1dTX0VSUl9JTlZBTElEX0NPTlRST0xfUEFZTE9BRF9MRU5HVEgnXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgYGludmFsaWQgb3Bjb2RlICR7dGhpcy5fb3Bjb2RlfWAsXG4gICAgICAgIHRydWUsXG4gICAgICAgIDEwMDIsXG4gICAgICAgICdXU19FUlJfSU5WQUxJRF9PUENPREUnXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fZmluICYmICF0aGlzLl9mcmFnbWVudGVkKSB0aGlzLl9mcmFnbWVudGVkID0gdGhpcy5fb3Bjb2RlO1xuICAgIHRoaXMuX21hc2tlZCA9IChidWZbMV0gJiAweDgwKSA9PT0gMHg4MDtcblxuICAgIGlmICh0aGlzLl9pc1NlcnZlcikge1xuICAgICAgaWYgKCF0aGlzLl9tYXNrZWQpIHtcbiAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gZXJyb3IoXG4gICAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgICAnTUFTSyBtdXN0IGJlIHNldCcsXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAxMDAyLFxuICAgICAgICAgICdXU19FUlJfRVhQRUNURURfTUFTSydcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuX21hc2tlZCkge1xuICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIGVycm9yKFxuICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAnTUFTSyBtdXN0IGJlIGNsZWFyJyxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgMTAwMixcbiAgICAgICAgJ1dTX0VSUl9VTkVYUEVDVEVEX01BU0snXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9wYXlsb2FkTGVuZ3RoID09PSAxMjYpIHRoaXMuX3N0YXRlID0gR0VUX1BBWUxPQURfTEVOR1RIXzE2O1xuICAgIGVsc2UgaWYgKHRoaXMuX3BheWxvYWRMZW5ndGggPT09IDEyNykgdGhpcy5fc3RhdGUgPSBHRVRfUEFZTE9BRF9MRU5HVEhfNjQ7XG4gICAgZWxzZSByZXR1cm4gdGhpcy5oYXZlTGVuZ3RoKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBleHRlbmRlZCBwYXlsb2FkIGxlbmd0aCAoNysxNikuXG4gICAqXG4gICAqIEByZXR1cm4geyhSYW5nZUVycm9yfHVuZGVmaW5lZCl9IEEgcG9zc2libGUgZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFBheWxvYWRMZW5ndGgxNigpIHtcbiAgICBpZiAodGhpcy5fYnVmZmVyZWRCeXRlcyA8IDIpIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wYXlsb2FkTGVuZ3RoID0gdGhpcy5jb25zdW1lKDIpLnJlYWRVSW50MTZCRSgwKTtcbiAgICByZXR1cm4gdGhpcy5oYXZlTGVuZ3RoKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBleHRlbmRlZCBwYXlsb2FkIGxlbmd0aCAoNys2NCkuXG4gICAqXG4gICAqIEByZXR1cm4geyhSYW5nZUVycm9yfHVuZGVmaW5lZCl9IEEgcG9zc2libGUgZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFBheWxvYWRMZW5ndGg2NCgpIHtcbiAgICBpZiAodGhpcy5fYnVmZmVyZWRCeXRlcyA8IDgpIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBidWYgPSB0aGlzLmNvbnN1bWUoOCk7XG4gICAgY29uc3QgbnVtID0gYnVmLnJlYWRVSW50MzJCRSgwKTtcblxuICAgIC8vXG4gICAgLy8gVGhlIG1heGltdW0gc2FmZSBpbnRlZ2VyIGluIEphdmFTY3JpcHQgaXMgMl41MyAtIDEuIEFuIGVycm9yIGlzIHJldHVybmVkXG4gICAgLy8gaWYgcGF5bG9hZCBsZW5ndGggaXMgZ3JlYXRlciB0aGFuIHRoaXMgbnVtYmVyLlxuICAgIC8vXG4gICAgaWYgKG51bSA+IE1hdGgucG93KDIsIDUzIC0gMzIpIC0gMSkge1xuICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIGVycm9yKFxuICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAnVW5zdXBwb3J0ZWQgV2ViU29ja2V0IGZyYW1lOiBwYXlsb2FkIGxlbmd0aCA+IDJeNTMgLSAxJyxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIDEwMDksXG4gICAgICAgICdXU19FUlJfVU5TVVBQT1JURURfREFUQV9QQVlMT0FEX0xFTkdUSCdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5fcGF5bG9hZExlbmd0aCA9IG51bSAqIE1hdGgucG93KDIsIDMyKSArIGJ1Zi5yZWFkVUludDMyQkUoNCk7XG4gICAgcmV0dXJuIHRoaXMuaGF2ZUxlbmd0aCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBheWxvYWQgbGVuZ3RoIGhhcyBiZWVuIHJlYWQuXG4gICAqXG4gICAqIEByZXR1cm4geyhSYW5nZUVycm9yfHVuZGVmaW5lZCl9IEEgcG9zc2libGUgZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhdmVMZW5ndGgoKSB7XG4gICAgaWYgKHRoaXMuX3BheWxvYWRMZW5ndGggJiYgdGhpcy5fb3Bjb2RlIDwgMHgwOCkge1xuICAgICAgdGhpcy5fdG90YWxQYXlsb2FkTGVuZ3RoICs9IHRoaXMuX3BheWxvYWRMZW5ndGg7XG4gICAgICBpZiAodGhpcy5fdG90YWxQYXlsb2FkTGVuZ3RoID4gdGhpcy5fbWF4UGF5bG9hZCAmJiB0aGlzLl9tYXhQYXlsb2FkID4gMCkge1xuICAgICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAgICdNYXggcGF5bG9hZCBzaXplIGV4Y2VlZGVkJyxcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAxMDA5LFxuICAgICAgICAgICdXU19FUlJfVU5TVVBQT1JURURfTUVTU0FHRV9MRU5HVEgnXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX21hc2tlZCkgdGhpcy5fc3RhdGUgPSBHRVRfTUFTSztcbiAgICBlbHNlIHRoaXMuX3N0YXRlID0gR0VUX0RBVEE7XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgbWFzayBieXRlcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldE1hc2soKSB7XG4gICAgaWYgKHRoaXMuX2J1ZmZlcmVkQnl0ZXMgPCA0KSB7XG4gICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fbWFzayA9IHRoaXMuY29uc3VtZSg0KTtcbiAgICB0aGlzLl9zdGF0ZSA9IEdFVF9EQVRBO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlYWRzIGRhdGEgYnl0ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrXG4gICAqIEByZXR1cm4geyhFcnJvcnxSYW5nZUVycm9yfHVuZGVmaW5lZCl9IEEgcG9zc2libGUgZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldERhdGEoY2IpIHtcbiAgICBsZXQgZGF0YSA9IEVNUFRZX0JVRkZFUjtcblxuICAgIGlmICh0aGlzLl9wYXlsb2FkTGVuZ3RoKSB7XG4gICAgICBpZiAodGhpcy5fYnVmZmVyZWRCeXRlcyA8IHRoaXMuX3BheWxvYWRMZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGRhdGEgPSB0aGlzLmNvbnN1bWUodGhpcy5fcGF5bG9hZExlbmd0aCk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5fbWFza2VkICYmXG4gICAgICAgICh0aGlzLl9tYXNrWzBdIHwgdGhpcy5fbWFza1sxXSB8IHRoaXMuX21hc2tbMl0gfCB0aGlzLl9tYXNrWzNdKSAhPT0gMFxuICAgICAgKSB7XG4gICAgICAgIHVubWFzayhkYXRhLCB0aGlzLl9tYXNrKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5fb3Bjb2RlID4gMHgwNykgcmV0dXJuIHRoaXMuY29udHJvbE1lc3NhZ2UoZGF0YSk7XG5cbiAgICBpZiAodGhpcy5fY29tcHJlc3NlZCkge1xuICAgICAgdGhpcy5fc3RhdGUgPSBJTkZMQVRJTkc7XG4gICAgICB0aGlzLmRlY29tcHJlc3MoZGF0YSwgY2IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChkYXRhLmxlbmd0aCkge1xuICAgICAgLy9cbiAgICAgIC8vIFRoaXMgbWVzc2FnZSBpcyBub3QgY29tcHJlc3NlZCBzbyBpdHMgbGVuZ3RoIGlzIHRoZSBzdW0gb2YgdGhlIHBheWxvYWRcbiAgICAgIC8vIGxlbmd0aCBvZiBhbGwgZnJhZ21lbnRzLlxuICAgICAgLy9cbiAgICAgIHRoaXMuX21lc3NhZ2VMZW5ndGggPSB0aGlzLl90b3RhbFBheWxvYWRMZW5ndGg7XG4gICAgICB0aGlzLl9mcmFnbWVudHMucHVzaChkYXRhKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhTWVzc2FnZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29tcHJlc3NlcyBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YSBDb21wcmVzc2VkIGRhdGFcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2tcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRlY29tcHJlc3MoZGF0YSwgY2IpIHtcbiAgICBjb25zdCBwZXJNZXNzYWdlRGVmbGF0ZSA9IHRoaXMuX2V4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV07XG5cbiAgICBwZXJNZXNzYWdlRGVmbGF0ZS5kZWNvbXByZXNzKGRhdGEsIHRoaXMuX2ZpbiwgKGVyciwgYnVmKSA9PiB7XG4gICAgICBpZiAoZXJyKSByZXR1cm4gY2IoZXJyKTtcblxuICAgICAgaWYgKGJ1Zi5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fbWVzc2FnZUxlbmd0aCArPSBidWYubGVuZ3RoO1xuICAgICAgICBpZiAodGhpcy5fbWVzc2FnZUxlbmd0aCA+IHRoaXMuX21heFBheWxvYWQgJiYgdGhpcy5fbWF4UGF5bG9hZCA+IDApIHtcbiAgICAgICAgICByZXR1cm4gY2IoXG4gICAgICAgICAgICBlcnJvcihcbiAgICAgICAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgICAgICAgJ01heCBwYXlsb2FkIHNpemUgZXhjZWVkZWQnLFxuICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgMTAwOSxcbiAgICAgICAgICAgICAgJ1dTX0VSUl9VTlNVUFBPUlRFRF9NRVNTQUdFX0xFTkdUSCdcbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZnJhZ21lbnRzLnB1c2goYnVmKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZXIgPSB0aGlzLmRhdGFNZXNzYWdlKCk7XG4gICAgICBpZiAoZXIpIHJldHVybiBjYihlcik7XG5cbiAgICAgIHRoaXMuc3RhcnRMb29wKGNiKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGEgZGF0YSBtZXNzYWdlLlxuICAgKlxuICAgKiBAcmV0dXJuIHsoRXJyb3J8dW5kZWZpbmVkKX0gQSBwb3NzaWJsZSBlcnJvclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGF0YU1lc3NhZ2UoKSB7XG4gICAgaWYgKHRoaXMuX2Zpbikge1xuICAgICAgY29uc3QgbWVzc2FnZUxlbmd0aCA9IHRoaXMuX21lc3NhZ2VMZW5ndGg7XG4gICAgICBjb25zdCBmcmFnbWVudHMgPSB0aGlzLl9mcmFnbWVudHM7XG5cbiAgICAgIHRoaXMuX3RvdGFsUGF5bG9hZExlbmd0aCA9IDA7XG4gICAgICB0aGlzLl9tZXNzYWdlTGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuX2ZyYWdtZW50ZWQgPSAwO1xuICAgICAgdGhpcy5fZnJhZ21lbnRzID0gW107XG5cbiAgICAgIGlmICh0aGlzLl9vcGNvZGUgPT09IDIpIHtcbiAgICAgICAgbGV0IGRhdGE7XG5cbiAgICAgICAgaWYgKHRoaXMuX2JpbmFyeVR5cGUgPT09ICdub2RlYnVmZmVyJykge1xuICAgICAgICAgIGRhdGEgPSBjb25jYXQoZnJhZ21lbnRzLCBtZXNzYWdlTGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9iaW5hcnlUeXBlID09PSAnYXJyYXlidWZmZXInKSB7XG4gICAgICAgICAgZGF0YSA9IHRvQXJyYXlCdWZmZXIoY29uY2F0KGZyYWdtZW50cywgbWVzc2FnZUxlbmd0aCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEgPSBmcmFnbWVudHM7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2UnLCBkYXRhLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGJ1ZiA9IGNvbmNhdChmcmFnbWVudHMsIG1lc3NhZ2VMZW5ndGgpO1xuXG4gICAgICAgIGlmICghdGhpcy5fc2tpcFVURjhWYWxpZGF0aW9uICYmICFpc1ZhbGlkVVRGOChidWYpKSB7XG4gICAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgICAgIEVycm9yLFxuICAgICAgICAgICAgJ2ludmFsaWQgVVRGLTggc2VxdWVuY2UnLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIDEwMDcsXG4gICAgICAgICAgICAnV1NfRVJSX0lOVkFMSURfVVRGOCdcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgYnVmLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fc3RhdGUgPSBHRVRfSU5GTztcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGEgY29udHJvbCBtZXNzYWdlLlxuICAgKlxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YSBEYXRhIHRvIGhhbmRsZVxuICAgKiBAcmV0dXJuIHsoRXJyb3J8UmFuZ2VFcnJvcnx1bmRlZmluZWQpfSBBIHBvc3NpYmxlIGVycm9yXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb250cm9sTWVzc2FnZShkYXRhKSB7XG4gICAgaWYgKHRoaXMuX29wY29kZSA9PT0gMHgwOCkge1xuICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuXG4gICAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5lbWl0KCdjb25jbHVkZScsIDEwMDUsIEVNUFRZX0JVRkZFUik7XG4gICAgICAgIHRoaXMuZW5kKCk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAgICdpbnZhbGlkIHBheWxvYWQgbGVuZ3RoIDEnLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgMTAwMixcbiAgICAgICAgICAnV1NfRVJSX0lOVkFMSURfQ09OVFJPTF9QQVlMT0FEX0xFTkdUSCdcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBkYXRhLnJlYWRVSW50MTZCRSgwKTtcblxuICAgICAgICBpZiAoIWlzVmFsaWRTdGF0dXNDb2RlKGNvZGUpKSB7XG4gICAgICAgICAgcmV0dXJuIGVycm9yKFxuICAgICAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgICAgIGBpbnZhbGlkIHN0YXR1cyBjb2RlICR7Y29kZX1gLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIDEwMDIsXG4gICAgICAgICAgICAnV1NfRVJSX0lOVkFMSURfQ0xPU0VfQ09ERSdcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYnVmID0gZGF0YS5zbGljZSgyKTtcblxuICAgICAgICBpZiAoIXRoaXMuX3NraXBVVEY4VmFsaWRhdGlvbiAmJiAhaXNWYWxpZFVURjgoYnVmKSkge1xuICAgICAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgICAgIEVycm9yLFxuICAgICAgICAgICAgJ2ludmFsaWQgVVRGLTggc2VxdWVuY2UnLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIDEwMDcsXG4gICAgICAgICAgICAnV1NfRVJSX0lOVkFMSURfVVRGOCdcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbWl0KCdjb25jbHVkZScsIGNvZGUsIGJ1Zik7XG4gICAgICAgIHRoaXMuZW5kKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLl9vcGNvZGUgPT09IDB4MDkpIHtcbiAgICAgIHRoaXMuZW1pdCgncGluZycsIGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVtaXQoJ3BvbmcnLCBkYXRhKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zdGF0ZSA9IEdFVF9JTkZPO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVjZWl2ZXI7XG5cbi8qKlxuICogQnVpbGRzIGFuIGVycm9yIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpFcnJvcnxSYW5nZUVycm9yKX0gRXJyb3JDdG9yIFRoZSBlcnJvciBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgVGhlIGVycm9yIG1lc3NhZ2VcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcHJlZml4IFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBhZGQgYSBkZWZhdWx0IHByZWZpeCB0b1xuICogICAgIGBtZXNzYWdlYFxuICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c0NvZGUgVGhlIHN0YXR1cyBjb2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gZXJyb3JDb2RlIFRoZSBleHBvc2VkIGVycm9yIGNvZGVcbiAqIEByZXR1cm4geyhFcnJvcnxSYW5nZUVycm9yKX0gVGhlIGVycm9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlcnJvcihFcnJvckN0b3IsIG1lc3NhZ2UsIHByZWZpeCwgc3RhdHVzQ29kZSwgZXJyb3JDb2RlKSB7XG4gIGNvbnN0IGVyciA9IG5ldyBFcnJvckN0b3IoXG4gICAgcHJlZml4ID8gYEludmFsaWQgV2ViU29ja2V0IGZyYW1lOiAke21lc3NhZ2V9YCA6IG1lc3NhZ2VcbiAgKTtcblxuICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZShlcnIsIGVycm9yKTtcbiAgZXJyLmNvZGUgPSBlcnJvckNvZGU7XG4gIGVycltrU3RhdHVzQ29kZV0gPSBzdGF0dXNDb2RlO1xuICByZXR1cm4gZXJyO1xufVxuIiwiLyogZXNsaW50IG5vLXVudXNlZC12YXJzOiBbXCJlcnJvclwiLCB7IFwidmFyc0lnbm9yZVBhdHRlcm5cIjogXCJebmV0fHRscyRcIiB9XSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IG5ldCA9IHJlcXVpcmUoJ25ldCcpO1xuY29uc3QgdGxzID0gcmVxdWlyZSgndGxzJyk7XG5jb25zdCB7IHJhbmRvbUZpbGxTeW5jIH0gPSByZXF1aXJlKCdjcnlwdG8nKTtcblxuY29uc3QgUGVyTWVzc2FnZURlZmxhdGUgPSByZXF1aXJlKCcuL3Blcm1lc3NhZ2UtZGVmbGF0ZScpO1xuY29uc3QgeyBFTVBUWV9CVUZGRVIgfSA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5jb25zdCB7IGlzVmFsaWRTdGF0dXNDb2RlIH0gPSByZXF1aXJlKCcuL3ZhbGlkYXRpb24nKTtcbmNvbnN0IHsgbWFzazogYXBwbHlNYXNrLCB0b0J1ZmZlciB9ID0gcmVxdWlyZSgnLi9idWZmZXItdXRpbCcpO1xuXG5jb25zdCBrQnl0ZUxlbmd0aCA9IFN5bWJvbCgna0J5dGVMZW5ndGgnKTtcbmNvbnN0IG1hc2tCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG5cbi8qKlxuICogSHlCaSBTZW5kZXIgaW1wbGVtZW50YXRpb24uXG4gKi9cbmNsYXNzIFNlbmRlciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgU2VuZGVyIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0geyhuZXQuU29ja2V0fHRscy5Tb2NrZXQpfSBzb2NrZXQgVGhlIGNvbm5lY3Rpb24gc29ja2V0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbZXh0ZW5zaW9uc10gQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG5lZ290aWF0ZWQgZXh0ZW5zaW9uc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZ2VuZXJhdGVNYXNrXSBUaGUgZnVuY3Rpb24gdXNlZCB0byBnZW5lcmF0ZSB0aGUgbWFza2luZ1xuICAgKiAgICAga2V5XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihzb2NrZXQsIGV4dGVuc2lvbnMsIGdlbmVyYXRlTWFzaykge1xuICAgIHRoaXMuX2V4dGVuc2lvbnMgPSBleHRlbnNpb25zIHx8IHt9O1xuXG4gICAgaWYgKGdlbmVyYXRlTWFzaykge1xuICAgICAgdGhpcy5fZ2VuZXJhdGVNYXNrID0gZ2VuZXJhdGVNYXNrO1xuICAgICAgdGhpcy5fbWFza0J1ZmZlciA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgICB9XG5cbiAgICB0aGlzLl9zb2NrZXQgPSBzb2NrZXQ7XG5cbiAgICB0aGlzLl9maXJzdEZyYWdtZW50ID0gdHJ1ZTtcbiAgICB0aGlzLl9jb21wcmVzcyA9IGZhbHNlO1xuXG4gICAgdGhpcy5fYnVmZmVyZWRCeXRlcyA9IDA7XG4gICAgdGhpcy5fZGVmbGF0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5fcXVldWUgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGcmFtZXMgYSBwaWVjZSBvZiBkYXRhIGFjY29yZGluZyB0byB0aGUgSHlCaSBXZWJTb2NrZXQgcHJvdG9jb2wuXG4gICAqXG4gICAqIEBwYXJhbSB7KEJ1ZmZlcnxTdHJpbmcpfSBkYXRhIFRoZSBkYXRhIHRvIGZyYW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0XG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZmluPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gc2V0IHRoZVxuICAgKiAgICAgRklOIGJpdFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5nZW5lcmF0ZU1hc2tdIFRoZSBmdW5jdGlvbiB1c2VkIHRvIGdlbmVyYXRlIHRoZVxuICAgKiAgICAgbWFza2luZyBrZXlcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5tYXNrPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gbWFza1xuICAgKiAgICAgYGRhdGFgXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBbb3B0aW9ucy5tYXNrQnVmZmVyXSBUaGUgYnVmZmVyIHVzZWQgdG8gc3RvcmUgdGhlIG1hc2tpbmdcbiAgICogICAgIGtleVxuICAgKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy5vcGNvZGUgVGhlIG9wY29kZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnJlYWRPbmx5PWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBgZGF0YWAgY2FuIGJlXG4gICAqICAgICBtb2RpZmllZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnJzdjE9ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBzZXQgdGhlXG4gICAqICAgICBSU1YxIGJpdFxuICAgKiBAcmV0dXJuIHsoQnVmZmVyfFN0cmluZylbXX0gVGhlIGZyYW1lZCBkYXRhXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0YXRpYyBmcmFtZShkYXRhLCBvcHRpb25zKSB7XG4gICAgbGV0IG1hc2s7XG4gICAgbGV0IG1lcmdlID0gZmFsc2U7XG4gICAgbGV0IG9mZnNldCA9IDI7XG4gICAgbGV0IHNraXBNYXNraW5nID0gZmFsc2U7XG5cbiAgICBpZiAob3B0aW9ucy5tYXNrKSB7XG4gICAgICBtYXNrID0gb3B0aW9ucy5tYXNrQnVmZmVyIHx8IG1hc2tCdWZmZXI7XG5cbiAgICAgIGlmIChvcHRpb25zLmdlbmVyYXRlTWFzaykge1xuICAgICAgICBvcHRpb25zLmdlbmVyYXRlTWFzayhtYXNrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJhbmRvbUZpbGxTeW5jKG1hc2ssIDAsIDQpO1xuICAgICAgfVxuXG4gICAgICBza2lwTWFza2luZyA9IChtYXNrWzBdIHwgbWFza1sxXSB8IG1hc2tbMl0gfCBtYXNrWzNdKSA9PT0gMDtcbiAgICAgIG9mZnNldCA9IDY7XG4gICAgfVxuXG4gICAgbGV0IGRhdGFMZW5ndGg7XG5cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoXG4gICAgICAgICghb3B0aW9ucy5tYXNrIHx8IHNraXBNYXNraW5nKSAmJlxuICAgICAgICBvcHRpb25zW2tCeXRlTGVuZ3RoXSAhPT0gdW5kZWZpbmVkXG4gICAgICApIHtcbiAgICAgICAgZGF0YUxlbmd0aCA9IG9wdGlvbnNba0J5dGVMZW5ndGhdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YSA9IEJ1ZmZlci5mcm9tKGRhdGEpO1xuICAgICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGg7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aDtcbiAgICAgIG1lcmdlID0gb3B0aW9ucy5tYXNrICYmIG9wdGlvbnMucmVhZE9ubHkgJiYgIXNraXBNYXNraW5nO1xuICAgIH1cblxuICAgIGxldCBwYXlsb2FkTGVuZ3RoID0gZGF0YUxlbmd0aDtcblxuICAgIGlmIChkYXRhTGVuZ3RoID49IDY1NTM2KSB7XG4gICAgICBvZmZzZXQgKz0gODtcbiAgICAgIHBheWxvYWRMZW5ndGggPSAxMjc7XG4gICAgfSBlbHNlIGlmIChkYXRhTGVuZ3RoID4gMTI1KSB7XG4gICAgICBvZmZzZXQgKz0gMjtcbiAgICAgIHBheWxvYWRMZW5ndGggPSAxMjY7XG4gICAgfVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gQnVmZmVyLmFsbG9jVW5zYWZlKG1lcmdlID8gZGF0YUxlbmd0aCArIG9mZnNldCA6IG9mZnNldCk7XG5cbiAgICB0YXJnZXRbMF0gPSBvcHRpb25zLmZpbiA/IG9wdGlvbnMub3Bjb2RlIHwgMHg4MCA6IG9wdGlvbnMub3Bjb2RlO1xuICAgIGlmIChvcHRpb25zLnJzdjEpIHRhcmdldFswXSB8PSAweDQwO1xuXG4gICAgdGFyZ2V0WzFdID0gcGF5bG9hZExlbmd0aDtcblxuICAgIGlmIChwYXlsb2FkTGVuZ3RoID09PSAxMjYpIHtcbiAgICAgIHRhcmdldC53cml0ZVVJbnQxNkJFKGRhdGFMZW5ndGgsIDIpO1xuICAgIH0gZWxzZSBpZiAocGF5bG9hZExlbmd0aCA9PT0gMTI3KSB7XG4gICAgICB0YXJnZXRbMl0gPSB0YXJnZXRbM10gPSAwO1xuICAgICAgdGFyZ2V0LndyaXRlVUludEJFKGRhdGFMZW5ndGgsIDQsIDYpO1xuICAgIH1cblxuICAgIGlmICghb3B0aW9ucy5tYXNrKSByZXR1cm4gW3RhcmdldCwgZGF0YV07XG5cbiAgICB0YXJnZXRbMV0gfD0gMHg4MDtcbiAgICB0YXJnZXRbb2Zmc2V0IC0gNF0gPSBtYXNrWzBdO1xuICAgIHRhcmdldFtvZmZzZXQgLSAzXSA9IG1hc2tbMV07XG4gICAgdGFyZ2V0W29mZnNldCAtIDJdID0gbWFza1syXTtcbiAgICB0YXJnZXRbb2Zmc2V0IC0gMV0gPSBtYXNrWzNdO1xuXG4gICAgaWYgKHNraXBNYXNraW5nKSByZXR1cm4gW3RhcmdldCwgZGF0YV07XG5cbiAgICBpZiAobWVyZ2UpIHtcbiAgICAgIGFwcGx5TWFzayhkYXRhLCBtYXNrLCB0YXJnZXQsIG9mZnNldCwgZGF0YUxlbmd0aCk7XG4gICAgICByZXR1cm4gW3RhcmdldF07XG4gICAgfVxuXG4gICAgYXBwbHlNYXNrKGRhdGEsIG1hc2ssIGRhdGEsIDAsIGRhdGFMZW5ndGgpO1xuICAgIHJldHVybiBbdGFyZ2V0LCBkYXRhXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIGNsb3NlIG1lc3NhZ2UgdG8gdGhlIG90aGVyIHBlZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbY29kZV0gVGhlIHN0YXR1cyBjb2RlIGNvbXBvbmVudCBvZiB0aGUgYm9keVxuICAgKiBAcGFyYW0geyhTdHJpbmd8QnVmZmVyKX0gW2RhdGFdIFRoZSBtZXNzYWdlIGNvbXBvbmVudCBvZiB0aGUgYm9keVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFttYXNrPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gbWFzayB0aGUgbWVzc2FnZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdIENhbGxiYWNrXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNsb3NlKGNvZGUsIGRhdGEsIG1hc2ssIGNiKSB7XG4gICAgbGV0IGJ1ZjtcblxuICAgIGlmIChjb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGJ1ZiA9IEVNUFRZX0JVRkZFUjtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb2RlICE9PSAnbnVtYmVyJyB8fCAhaXNWYWxpZFN0YXR1c0NvZGUoY29kZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSB2YWxpZCBlcnJvciBjb2RlIG51bWJlcicpO1xuICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gdW5kZWZpbmVkIHx8ICFkYXRhLmxlbmd0aCkge1xuICAgICAgYnVmID0gQnVmZmVyLmFsbG9jVW5zYWZlKDIpO1xuICAgICAgYnVmLndyaXRlVUludDE2QkUoY29kZSwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGxlbmd0aCA9IEJ1ZmZlci5ieXRlTGVuZ3RoKGRhdGEpO1xuXG4gICAgICBpZiAobGVuZ3RoID4gMTIzKSB7XG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgbWVzc2FnZSBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gMTIzIGJ5dGVzJyk7XG4gICAgICB9XG5cbiAgICAgIGJ1ZiA9IEJ1ZmZlci5hbGxvY1Vuc2FmZSgyICsgbGVuZ3RoKTtcbiAgICAgIGJ1Zi53cml0ZVVJbnQxNkJFKGNvZGUsIDApO1xuXG4gICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGJ1Zi53cml0ZShkYXRhLCAyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ1Zi5zZXQoZGF0YSwgMik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIFtrQnl0ZUxlbmd0aF06IGJ1Zi5sZW5ndGgsXG4gICAgICBmaW46IHRydWUsXG4gICAgICBnZW5lcmF0ZU1hc2s6IHRoaXMuX2dlbmVyYXRlTWFzayxcbiAgICAgIG1hc2ssXG4gICAgICBtYXNrQnVmZmVyOiB0aGlzLl9tYXNrQnVmZmVyLFxuICAgICAgb3Bjb2RlOiAweDA4LFxuICAgICAgcmVhZE9ubHk6IGZhbHNlLFxuICAgICAgcnN2MTogZmFsc2VcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuX2RlZmxhdGluZykge1xuICAgICAgdGhpcy5lbnF1ZXVlKFt0aGlzLmRpc3BhdGNoLCBidWYsIGZhbHNlLCBvcHRpb25zLCBjYl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbmRGcmFtZShTZW5kZXIuZnJhbWUoYnVmLCBvcHRpb25zKSwgY2IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIHBpbmcgbWVzc2FnZSB0byB0aGUgb3RoZXIgcGVlci5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXNzYWdlIHRvIHNlbmRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbbWFzaz1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgYGRhdGFgXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl0gQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcGluZyhkYXRhLCBtYXNrLCBjYikge1xuICAgIGxldCBieXRlTGVuZ3RoO1xuICAgIGxldCByZWFkT25seTtcblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGJ5dGVMZW5ndGggPSBCdWZmZXIuYnl0ZUxlbmd0aChkYXRhKTtcbiAgICAgIHJlYWRPbmx5ID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEgPSB0b0J1ZmZlcihkYXRhKTtcbiAgICAgIGJ5dGVMZW5ndGggPSBkYXRhLmxlbmd0aDtcbiAgICAgIHJlYWRPbmx5ID0gdG9CdWZmZXIucmVhZE9ubHk7XG4gICAgfVxuXG4gICAgaWYgKGJ5dGVMZW5ndGggPiAxMjUpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgZGF0YSBzaXplIG11c3Qgbm90IGJlIGdyZWF0ZXIgdGhhbiAxMjUgYnl0ZXMnKTtcbiAgICB9XG5cbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgW2tCeXRlTGVuZ3RoXTogYnl0ZUxlbmd0aCxcbiAgICAgIGZpbjogdHJ1ZSxcbiAgICAgIGdlbmVyYXRlTWFzazogdGhpcy5fZ2VuZXJhdGVNYXNrLFxuICAgICAgbWFzayxcbiAgICAgIG1hc2tCdWZmZXI6IHRoaXMuX21hc2tCdWZmZXIsXG4gICAgICBvcGNvZGU6IDB4MDksXG4gICAgICByZWFkT25seSxcbiAgICAgIHJzdjE6IGZhbHNlXG4gICAgfTtcblxuICAgIGlmICh0aGlzLl9kZWZsYXRpbmcpIHtcbiAgICAgIHRoaXMuZW5xdWV1ZShbdGhpcy5kaXNwYXRjaCwgZGF0YSwgZmFsc2UsIG9wdGlvbnMsIGNiXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VuZEZyYW1lKFNlbmRlci5mcmFtZShkYXRhLCBvcHRpb25zKSwgY2IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIHBvbmcgbWVzc2FnZSB0byB0aGUgb3RoZXIgcGVlci5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXNzYWdlIHRvIHNlbmRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbbWFzaz1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgYGRhdGFgXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl0gQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcG9uZyhkYXRhLCBtYXNrLCBjYikge1xuICAgIGxldCBieXRlTGVuZ3RoO1xuICAgIGxldCByZWFkT25seTtcblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGJ5dGVMZW5ndGggPSBCdWZmZXIuYnl0ZUxlbmd0aChkYXRhKTtcbiAgICAgIHJlYWRPbmx5ID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEgPSB0b0J1ZmZlcihkYXRhKTtcbiAgICAgIGJ5dGVMZW5ndGggPSBkYXRhLmxlbmd0aDtcbiAgICAgIHJlYWRPbmx5ID0gdG9CdWZmZXIucmVhZE9ubHk7XG4gICAgfVxuXG4gICAgaWYgKGJ5dGVMZW5ndGggPiAxMjUpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgZGF0YSBzaXplIG11c3Qgbm90IGJlIGdyZWF0ZXIgdGhhbiAxMjUgYnl0ZXMnKTtcbiAgICB9XG5cbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgW2tCeXRlTGVuZ3RoXTogYnl0ZUxlbmd0aCxcbiAgICAgIGZpbjogdHJ1ZSxcbiAgICAgIGdlbmVyYXRlTWFzazogdGhpcy5fZ2VuZXJhdGVNYXNrLFxuICAgICAgbWFzayxcbiAgICAgIG1hc2tCdWZmZXI6IHRoaXMuX21hc2tCdWZmZXIsXG4gICAgICBvcGNvZGU6IDB4MGEsXG4gICAgICByZWFkT25seSxcbiAgICAgIHJzdjE6IGZhbHNlXG4gICAgfTtcblxuICAgIGlmICh0aGlzLl9kZWZsYXRpbmcpIHtcbiAgICAgIHRoaXMuZW5xdWV1ZShbdGhpcy5kaXNwYXRjaCwgZGF0YSwgZmFsc2UsIG9wdGlvbnMsIGNiXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VuZEZyYW1lKFNlbmRlci5mcmFtZShkYXRhLCBvcHRpb25zKSwgY2IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIGRhdGEgbWVzc2FnZSB0byB0aGUgb3RoZXIgcGVlci5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXNzYWdlIHRvIHNlbmRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyBvYmplY3RcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5iaW5hcnk9ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIGBkYXRhYCBpcyBiaW5hcnlcbiAgICogICAgIG9yIHRleHRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5jb21wcmVzcz1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvXG4gICAqICAgICBjb21wcmVzcyBgZGF0YWBcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5maW49ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIHRoZSBmcmFnbWVudCBpcyB0aGVcbiAgICogICAgIGxhc3Qgb25lXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMubWFzaz1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2tcbiAgICogICAgIGBkYXRhYFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdIENhbGxiYWNrXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNlbmQoZGF0YSwgb3B0aW9ucywgY2IpIHtcbiAgICBjb25zdCBwZXJNZXNzYWdlRGVmbGF0ZSA9IHRoaXMuX2V4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV07XG4gICAgbGV0IG9wY29kZSA9IG9wdGlvbnMuYmluYXJ5ID8gMiA6IDE7XG4gICAgbGV0IHJzdjEgPSBvcHRpb25zLmNvbXByZXNzO1xuXG4gICAgbGV0IGJ5dGVMZW5ndGg7XG4gICAgbGV0IHJlYWRPbmx5O1xuXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgYnl0ZUxlbmd0aCA9IEJ1ZmZlci5ieXRlTGVuZ3RoKGRhdGEpO1xuICAgICAgcmVhZE9ubHkgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YSA9IHRvQnVmZmVyKGRhdGEpO1xuICAgICAgYnl0ZUxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuICAgICAgcmVhZE9ubHkgPSB0b0J1ZmZlci5yZWFkT25seTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZmlyc3RGcmFnbWVudCkge1xuICAgICAgdGhpcy5fZmlyc3RGcmFnbWVudCA9IGZhbHNlO1xuICAgICAgaWYgKFxuICAgICAgICByc3YxICYmXG4gICAgICAgIHBlck1lc3NhZ2VEZWZsYXRlICYmXG4gICAgICAgIHBlck1lc3NhZ2VEZWZsYXRlLnBhcmFtc1tcbiAgICAgICAgICBwZXJNZXNzYWdlRGVmbGF0ZS5faXNTZXJ2ZXJcbiAgICAgICAgICAgID8gJ3NlcnZlcl9ub19jb250ZXh0X3Rha2VvdmVyJ1xuICAgICAgICAgICAgOiAnY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXInXG4gICAgICAgIF1cbiAgICAgICkge1xuICAgICAgICByc3YxID0gYnl0ZUxlbmd0aCA+PSBwZXJNZXNzYWdlRGVmbGF0ZS5fdGhyZXNob2xkO1xuICAgICAgfVxuICAgICAgdGhpcy5fY29tcHJlc3MgPSByc3YxO1xuICAgIH0gZWxzZSB7XG4gICAgICByc3YxID0gZmFsc2U7XG4gICAgICBvcGNvZGUgPSAwO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmZpbikgdGhpcy5fZmlyc3RGcmFnbWVudCA9IHRydWU7XG5cbiAgICBpZiAocGVyTWVzc2FnZURlZmxhdGUpIHtcbiAgICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICAgIFtrQnl0ZUxlbmd0aF06IGJ5dGVMZW5ndGgsXG4gICAgICAgIGZpbjogb3B0aW9ucy5maW4sXG4gICAgICAgIGdlbmVyYXRlTWFzazogdGhpcy5fZ2VuZXJhdGVNYXNrLFxuICAgICAgICBtYXNrOiBvcHRpb25zLm1hc2ssXG4gICAgICAgIG1hc2tCdWZmZXI6IHRoaXMuX21hc2tCdWZmZXIsXG4gICAgICAgIG9wY29kZSxcbiAgICAgICAgcmVhZE9ubHksXG4gICAgICAgIHJzdjFcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLl9kZWZsYXRpbmcpIHtcbiAgICAgICAgdGhpcy5lbnF1ZXVlKFt0aGlzLmRpc3BhdGNoLCBkYXRhLCB0aGlzLl9jb21wcmVzcywgb3B0cywgY2JdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2goZGF0YSwgdGhpcy5fY29tcHJlc3MsIG9wdHMsIGNiKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZW5kRnJhbWUoXG4gICAgICAgIFNlbmRlci5mcmFtZShkYXRhLCB7XG4gICAgICAgICAgW2tCeXRlTGVuZ3RoXTogYnl0ZUxlbmd0aCxcbiAgICAgICAgICBmaW46IG9wdGlvbnMuZmluLFxuICAgICAgICAgIGdlbmVyYXRlTWFzazogdGhpcy5fZ2VuZXJhdGVNYXNrLFxuICAgICAgICAgIG1hc2s6IG9wdGlvbnMubWFzayxcbiAgICAgICAgICBtYXNrQnVmZmVyOiB0aGlzLl9tYXNrQnVmZmVyLFxuICAgICAgICAgIG9wY29kZSxcbiAgICAgICAgICByZWFkT25seSxcbiAgICAgICAgICByc3YxOiBmYWxzZVxuICAgICAgICB9KSxcbiAgICAgICAgY2JcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYSBtZXNzYWdlLlxuICAgKlxuICAgKiBAcGFyYW0geyhCdWZmZXJ8U3RyaW5nKX0gZGF0YSBUaGUgbWVzc2FnZSB0byBzZW5kXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2NvbXByZXNzPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gY29tcHJlc3NcbiAgICogICAgIGBkYXRhYFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25zIG9iamVjdFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmZpbj1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIHNldCB0aGVcbiAgICogICAgIEZJTiBiaXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMuZ2VuZXJhdGVNYXNrXSBUaGUgZnVuY3Rpb24gdXNlZCB0byBnZW5lcmF0ZSB0aGVcbiAgICogICAgIG1hc2tpbmcga2V5XG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMubWFzaz1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2tcbiAgICogICAgIGBkYXRhYFxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gW29wdGlvbnMubWFza0J1ZmZlcl0gVGhlIGJ1ZmZlciB1c2VkIHRvIHN0b3JlIHRoZSBtYXNraW5nXG4gICAqICAgICBrZXlcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMub3Bjb2RlIFRoZSBvcGNvZGVcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5yZWFkT25seT1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgYGRhdGFgIGNhbiBiZVxuICAgKiAgICAgbW9kaWZpZWRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5yc3YxPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gc2V0IHRoZVxuICAgKiAgICAgUlNWMSBiaXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXSBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGlzcGF0Y2goZGF0YSwgY29tcHJlc3MsIG9wdGlvbnMsIGNiKSB7XG4gICAgaWYgKCFjb21wcmVzcykge1xuICAgICAgdGhpcy5zZW5kRnJhbWUoU2VuZGVyLmZyYW1lKGRhdGEsIG9wdGlvbnMpLCBjYik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcGVyTWVzc2FnZURlZmxhdGUgPSB0aGlzLl9leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdO1xuXG4gICAgdGhpcy5fYnVmZmVyZWRCeXRlcyArPSBvcHRpb25zW2tCeXRlTGVuZ3RoXTtcbiAgICB0aGlzLl9kZWZsYXRpbmcgPSB0cnVlO1xuICAgIHBlck1lc3NhZ2VEZWZsYXRlLmNvbXByZXNzKGRhdGEsIG9wdGlvbnMuZmluLCAoXywgYnVmKSA9PiB7XG4gICAgICBpZiAodGhpcy5fc29ja2V0LmRlc3Ryb3llZCkge1xuICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoXG4gICAgICAgICAgJ1RoZSBzb2NrZXQgd2FzIGNsb3NlZCB3aGlsZSBkYXRhIHdhcyBiZWluZyBjb21wcmVzc2VkJ1xuICAgICAgICApO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIGNiKGVycik7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9xdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuX3F1ZXVlW2ldO1xuICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gcGFyYW1zW3BhcmFtcy5sZW5ndGggLSAxXTtcblxuICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIGNhbGxiYWNrKGVycik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2J1ZmZlcmVkQnl0ZXMgLT0gb3B0aW9uc1trQnl0ZUxlbmd0aF07XG4gICAgICB0aGlzLl9kZWZsYXRpbmcgPSBmYWxzZTtcbiAgICAgIG9wdGlvbnMucmVhZE9ubHkgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2VuZEZyYW1lKFNlbmRlci5mcmFtZShidWYsIG9wdGlvbnMpLCBjYik7XG4gICAgICB0aGlzLmRlcXVldWUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlcyBxdWV1ZWQgc2VuZCBvcGVyYXRpb25zLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGVxdWV1ZSgpIHtcbiAgICB3aGlsZSAoIXRoaXMuX2RlZmxhdGluZyAmJiB0aGlzLl9xdWV1ZS5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuX3F1ZXVlLnNoaWZ0KCk7XG5cbiAgICAgIHRoaXMuX2J1ZmZlcmVkQnl0ZXMgLT0gcGFyYW1zWzNdW2tCeXRlTGVuZ3RoXTtcbiAgICAgIFJlZmxlY3QuYXBwbHkocGFyYW1zWzBdLCB0aGlzLCBwYXJhbXMuc2xpY2UoMSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbnF1ZXVlcyBhIHNlbmQgb3BlcmF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBwYXJhbXMgU2VuZCBvcGVyYXRpb24gcGFyYW1ldGVycy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGVucXVldWUocGFyYW1zKSB7XG4gICAgdGhpcy5fYnVmZmVyZWRCeXRlcyArPSBwYXJhbXNbM11ba0J5dGVMZW5ndGhdO1xuICAgIHRoaXMuX3F1ZXVlLnB1c2gocGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIGZyYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge0J1ZmZlcltdfSBsaXN0IFRoZSBmcmFtZSB0byBzZW5kXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl0gQ2FsbGJhY2tcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNlbmRGcmFtZShsaXN0LCBjYikge1xuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMikge1xuICAgICAgdGhpcy5fc29ja2V0LmNvcmsoKTtcbiAgICAgIHRoaXMuX3NvY2tldC53cml0ZShsaXN0WzBdKTtcbiAgICAgIHRoaXMuX3NvY2tldC53cml0ZShsaXN0WzFdLCBjYik7XG4gICAgICB0aGlzLl9zb2NrZXQudW5jb3JrKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NvY2tldC53cml0ZShsaXN0WzBdLCBjYik7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gU2VuZGVyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCB7IER1cGxleCB9ID0gcmVxdWlyZSgnc3RyZWFtJyk7XG5cbi8qKlxuICogRW1pdHMgdGhlIGAnY2xvc2UnYCBldmVudCBvbiBhIHN0cmVhbS5cbiAqXG4gKiBAcGFyYW0ge0R1cGxleH0gc3RyZWFtIFRoZSBzdHJlYW0uXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbWl0Q2xvc2Uoc3RyZWFtKSB7XG4gIHN0cmVhbS5lbWl0KCdjbG9zZScpO1xufVxuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYCdlbmQnYCBldmVudC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBkdXBsZXhPbkVuZCgpIHtcbiAgaWYgKCF0aGlzLmRlc3Ryb3llZCAmJiB0aGlzLl93cml0YWJsZVN0YXRlLmZpbmlzaGVkKSB7XG4gICAgdGhpcy5kZXN0cm95KCk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGAnZXJyb3InYCBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnIgVGhlIGVycm9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBkdXBsZXhPbkVycm9yKGVycikge1xuICB0aGlzLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGR1cGxleE9uRXJyb3IpO1xuICB0aGlzLmRlc3Ryb3koKTtcbiAgaWYgKHRoaXMubGlzdGVuZXJDb3VudCgnZXJyb3InKSA9PT0gMCkge1xuICAgIC8vIERvIG5vdCBzdXBwcmVzcyB0aGUgdGhyb3dpbmcgYmVoYXZpb3IuXG4gICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gIH1cbn1cblxuLyoqXG4gKiBXcmFwcyBhIGBXZWJTb2NrZXRgIGluIGEgZHVwbGV4IHN0cmVhbS5cbiAqXG4gKiBAcGFyYW0ge1dlYlNvY2tldH0gd3MgVGhlIGBXZWJTb2NrZXRgIHRvIHdyYXBcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgZm9yIHRoZSBgRHVwbGV4YCBjb25zdHJ1Y3RvclxuICogQHJldHVybiB7RHVwbGV4fSBUaGUgZHVwbGV4IHN0cmVhbVxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBjcmVhdGVXZWJTb2NrZXRTdHJlYW0od3MsIG9wdGlvbnMpIHtcbiAgbGV0IHRlcm1pbmF0ZU9uRGVzdHJveSA9IHRydWU7XG5cbiAgY29uc3QgZHVwbGV4ID0gbmV3IER1cGxleCh7XG4gICAgLi4ub3B0aW9ucyxcbiAgICBhdXRvRGVzdHJveTogZmFsc2UsXG4gICAgZW1pdENsb3NlOiBmYWxzZSxcbiAgICBvYmplY3RNb2RlOiBmYWxzZSxcbiAgICB3cml0YWJsZU9iamVjdE1vZGU6IGZhbHNlXG4gIH0pO1xuXG4gIHdzLm9uKCdtZXNzYWdlJywgZnVuY3Rpb24gbWVzc2FnZShtc2csIGlzQmluYXJ5KSB7XG4gICAgY29uc3QgZGF0YSA9XG4gICAgICAhaXNCaW5hcnkgJiYgZHVwbGV4Ll9yZWFkYWJsZVN0YXRlLm9iamVjdE1vZGUgPyBtc2cudG9TdHJpbmcoKSA6IG1zZztcblxuICAgIGlmICghZHVwbGV4LnB1c2goZGF0YSkpIHdzLnBhdXNlKCk7XG4gIH0pO1xuXG4gIHdzLm9uY2UoJ2Vycm9yJywgZnVuY3Rpb24gZXJyb3IoZXJyKSB7XG4gICAgaWYgKGR1cGxleC5kZXN0cm95ZWQpIHJldHVybjtcblxuICAgIC8vIFByZXZlbnQgYHdzLnRlcm1pbmF0ZSgpYCBmcm9tIGJlaW5nIGNhbGxlZCBieSBgZHVwbGV4Ll9kZXN0cm95KClgLlxuICAgIC8vXG4gICAgLy8gLSBJZiB0aGUgYCdlcnJvcidgIGV2ZW50IGlzIGVtaXR0ZWQgYmVmb3JlIHRoZSBgJ29wZW4nYCBldmVudCwgdGhlblxuICAgIC8vICAgYHdzLnRlcm1pbmF0ZSgpYCBpcyBhIG5vb3AgYXMgbm8gc29ja2V0IGlzIGFzc2lnbmVkLlxuICAgIC8vIC0gT3RoZXJ3aXNlLCB0aGUgZXJyb3IgaXMgcmUtZW1pdHRlZCBieSB0aGUgbGlzdGVuZXIgb2YgdGhlIGAnZXJyb3InYFxuICAgIC8vICAgZXZlbnQgb2YgdGhlIGBSZWNlaXZlcmAgb2JqZWN0LiBUaGUgbGlzdGVuZXIgYWxyZWFkeSBjbG9zZXMgdGhlXG4gICAgLy8gICBjb25uZWN0aW9uIGJ5IGNhbGxpbmcgYHdzLmNsb3NlKClgLiBUaGlzIGFsbG93cyBhIGNsb3NlIGZyYW1lIHRvIGJlXG4gICAgLy8gICBzZW50IHRvIHRoZSBvdGhlciBwZWVyLiBJZiBgd3MudGVybWluYXRlKClgIGlzIGNhbGxlZCByaWdodCBhZnRlciB0aGlzLFxuICAgIC8vICAgdGhlbiB0aGUgY2xvc2UgZnJhbWUgbWlnaHQgbm90IGJlIHNlbnQuXG4gICAgdGVybWluYXRlT25EZXN0cm95ID0gZmFsc2U7XG4gICAgZHVwbGV4LmRlc3Ryb3koZXJyKTtcbiAgfSk7XG5cbiAgd3Mub25jZSgnY2xvc2UnLCBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICBpZiAoZHVwbGV4LmRlc3Ryb3llZCkgcmV0dXJuO1xuXG4gICAgZHVwbGV4LnB1c2gobnVsbCk7XG4gIH0pO1xuXG4gIGR1cGxleC5fZGVzdHJveSA9IGZ1bmN0aW9uIChlcnIsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHdzLnJlYWR5U3RhdGUgPT09IHdzLkNMT1NFRCkge1xuICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlLCBkdXBsZXgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcblxuICAgIHdzLm9uY2UoJ2Vycm9yJywgZnVuY3Rpb24gZXJyb3IoZXJyKSB7XG4gICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICB9KTtcblxuICAgIHdzLm9uY2UoJ2Nsb3NlJywgZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICBpZiAoIWNhbGxlZCkgY2FsbGJhY2soZXJyKTtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlLCBkdXBsZXgpO1xuICAgIH0pO1xuXG4gICAgaWYgKHRlcm1pbmF0ZU9uRGVzdHJveSkgd3MudGVybWluYXRlKCk7XG4gIH07XG5cbiAgZHVwbGV4Ll9maW5hbCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIGlmICh3cy5yZWFkeVN0YXRlID09PSB3cy5DT05ORUNUSU5HKSB7XG4gICAgICB3cy5vbmNlKCdvcGVuJywgZnVuY3Rpb24gb3BlbigpIHtcbiAgICAgICAgZHVwbGV4Ll9maW5hbChjYWxsYmFjayk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgdmFsdWUgb2YgdGhlIGBfc29ja2V0YCBwcm9wZXJ0eSBpcyBgbnVsbGAgaXQgbWVhbnMgdGhhdCBgd3NgIGlzIGFcbiAgICAvLyBjbGllbnQgd2Vic29ja2V0IGFuZCB0aGUgaGFuZHNoYWtlIGZhaWxlZC4gSW4gZmFjdCwgd2hlbiB0aGlzIGhhcHBlbnMsIGFcbiAgICAvLyBzb2NrZXQgaXMgbmV2ZXIgYXNzaWduZWQgdG8gdGhlIHdlYnNvY2tldC4gV2FpdCBmb3IgdGhlIGAnZXJyb3InYCBldmVudFxuICAgIC8vIHRoYXQgd2lsbCBiZSBlbWl0dGVkIGJ5IHRoZSB3ZWJzb2NrZXQuXG4gICAgaWYgKHdzLl9zb2NrZXQgPT09IG51bGwpIHJldHVybjtcblxuICAgIGlmICh3cy5fc29ja2V0Ll93cml0YWJsZVN0YXRlLmZpbmlzaGVkKSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgICAgaWYgKGR1cGxleC5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkKSBkdXBsZXguZGVzdHJveSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3cy5fc29ja2V0Lm9uY2UoJ2ZpbmlzaCcsIGZ1bmN0aW9uIGZpbmlzaCgpIHtcbiAgICAgICAgLy8gYGR1cGxleGAgaXMgbm90IGRlc3Ryb3llZCBoZXJlIGJlY2F1c2UgdGhlIGAnZW5kJ2AgZXZlbnQgd2lsbCBiZVxuICAgICAgICAvLyBlbWl0dGVkIG9uIGBkdXBsZXhgIGFmdGVyIHRoaXMgYCdmaW5pc2gnYCBldmVudC4gVGhlIEVPRiBzaWduYWxpbmdcbiAgICAgICAgLy8gYG51bGxgIGNodW5rIGlzLCBpbiBmYWN0LCBwdXNoZWQgd2hlbiB0aGUgd2Vic29ja2V0IGVtaXRzIGAnY2xvc2UnYC5cbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH0pO1xuICAgICAgd3MuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgZHVwbGV4Ll9yZWFkID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh3cy5pc1BhdXNlZCkgd3MucmVzdW1lKCk7XG4gIH07XG5cbiAgZHVwbGV4Ll93cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHdzLnJlYWR5U3RhdGUgPT09IHdzLkNPTk5FQ1RJTkcpIHtcbiAgICAgIHdzLm9uY2UoJ29wZW4nLCBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICBkdXBsZXguX3dyaXRlKGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd3Muc2VuZChjaHVuaywgY2FsbGJhY2spO1xuICB9O1xuXG4gIGR1cGxleC5vbignZW5kJywgZHVwbGV4T25FbmQpO1xuICBkdXBsZXgub24oJ2Vycm9yJywgZHVwbGV4T25FcnJvcik7XG4gIHJldHVybiBkdXBsZXg7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlV2ViU29ja2V0U3RyZWFtO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCB7IHRva2VuQ2hhcnMgfSA9IHJlcXVpcmUoJy4vdmFsaWRhdGlvbicpO1xuXG4vKipcbiAqIFBhcnNlcyB0aGUgYFNlYy1XZWJTb2NrZXQtUHJvdG9jb2xgIGhlYWRlciBpbnRvIGEgc2V0IG9mIHN1YnByb3RvY29sIG5hbWVzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXIgVGhlIGZpZWxkIHZhbHVlIG9mIHRoZSBoZWFkZXJcbiAqIEByZXR1cm4ge1NldH0gVGhlIHN1YnByb3RvY29sIG5hbWVzXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIHBhcnNlKGhlYWRlcikge1xuICBjb25zdCBwcm90b2NvbHMgPSBuZXcgU2V0KCk7XG4gIGxldCBzdGFydCA9IC0xO1xuICBsZXQgZW5kID0gLTE7XG4gIGxldCBpID0gMDtcblxuICBmb3IgKGk7IGkgPCBoZWFkZXIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjb2RlID0gaGVhZGVyLmNoYXJDb2RlQXQoaSk7XG5cbiAgICBpZiAoZW5kID09PSAtMSAmJiB0b2tlbkNoYXJzW2NvZGVdID09PSAxKSB7XG4gICAgICBpZiAoc3RhcnQgPT09IC0xKSBzdGFydCA9IGk7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGkgIT09IDAgJiZcbiAgICAgIChjb2RlID09PSAweDIwIC8qICcgJyAqLyB8fCBjb2RlID09PSAweDA5KSAvKiAnXFx0JyAqL1xuICAgICkge1xuICAgICAgaWYgKGVuZCA9PT0gLTEgJiYgc3RhcnQgIT09IC0xKSBlbmQgPSBpO1xuICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gMHgyYyAvKiAnLCcgKi8pIHtcbiAgICAgIGlmIChzdGFydCA9PT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbmQgPT09IC0xKSBlbmQgPSBpO1xuXG4gICAgICBjb25zdCBwcm90b2NvbCA9IGhlYWRlci5zbGljZShzdGFydCwgZW5kKTtcblxuICAgICAgaWYgKHByb3RvY29scy5oYXMocHJvdG9jb2wpKSB7XG4gICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVGhlIFwiJHtwcm90b2NvbH1cIiBzdWJwcm90b2NvbCBpcyBkdXBsaWNhdGVkYCk7XG4gICAgICB9XG5cbiAgICAgIHByb3RvY29scy5hZGQocHJvdG9jb2wpO1xuICAgICAgc3RhcnQgPSBlbmQgPSAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXJ0ID09PSAtMSB8fCBlbmQgIT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCdVbmV4cGVjdGVkIGVuZCBvZiBpbnB1dCcpO1xuICB9XG5cbiAgY29uc3QgcHJvdG9jb2wgPSBoZWFkZXIuc2xpY2Uoc3RhcnQsIGkpO1xuXG4gIGlmIChwcm90b2NvbHMuaGFzKHByb3RvY29sKSkge1xuICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVGhlIFwiJHtwcm90b2NvbH1cIiBzdWJwcm90b2NvbCBpcyBkdXBsaWNhdGVkYCk7XG4gIH1cblxuICBwcm90b2NvbHMuYWRkKHByb3RvY29sKTtcbiAgcmV0dXJuIHByb3RvY29scztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7IHBhcnNlIH07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vXG4vLyBBbGxvd2VkIHRva2VuIGNoYXJhY3RlcnM6XG4vL1xuLy8gJyEnLCAnIycsICckJywgJyUnLCAnJicsICcnJywgJyonLCAnKycsICctJyxcbi8vICcuJywgMC05LCBBLVosICdeJywgJ18nLCAnYCcsIGEteiwgJ3wnLCAnfidcbi8vXG4vLyB0b2tlbkNoYXJzWzMyXSA9PT0gMCAvLyAnICdcbi8vIHRva2VuQ2hhcnNbMzNdID09PSAxIC8vICchJ1xuLy8gdG9rZW5DaGFyc1szNF0gPT09IDAgLy8gJ1wiJ1xuLy8gLi4uXG4vL1xuLy8gcHJldHRpZXItaWdub3JlXG5jb25zdCB0b2tlbkNoYXJzID0gW1xuICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAvLyAwIC0gMTVcbiAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgLy8gMTYgLSAzMVxuICAwLCAxLCAwLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAxLCAxLCAwLCAxLCAxLCAwLCAvLyAzMiAtIDQ3XG4gIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDAsIDAsIDAsIC8vIDQ4IC0gNjNcbiAgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgLy8gNjQgLSA3OVxuICAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAxLCAxLCAvLyA4MCAtIDk1XG4gIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIC8vIDk2IC0gMTExXG4gIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDEsIDAsIDEsIDAgLy8gMTEyIC0gMTI3XG5dO1xuXG4vKipcbiAqIENoZWNrcyBpZiBhIHN0YXR1cyBjb2RlIGlzIGFsbG93ZWQgaW4gYSBjbG9zZSBmcmFtZS5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gY29kZSBUaGUgc3RhdHVzIGNvZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgc3RhdHVzIGNvZGUgaXMgdmFsaWQsIGVsc2UgYGZhbHNlYFxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBpc1ZhbGlkU3RhdHVzQ29kZShjb2RlKSB7XG4gIHJldHVybiAoXG4gICAgKGNvZGUgPj0gMTAwMCAmJlxuICAgICAgY29kZSA8PSAxMDE0ICYmXG4gICAgICBjb2RlICE9PSAxMDA0ICYmXG4gICAgICBjb2RlICE9PSAxMDA1ICYmXG4gICAgICBjb2RlICE9PSAxMDA2KSB8fFxuICAgIChjb2RlID49IDMwMDAgJiYgY29kZSA8PSA0OTk5KVxuICApO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIGdpdmVuIGJ1ZmZlciBjb250YWlucyBvbmx5IGNvcnJlY3QgVVRGLTguXG4gKiBQb3J0ZWQgZnJvbSBodHRwczovL3d3dy5jbC5jYW0uYWMudWsvJTdFbWdrMjUvdWNzL3V0ZjhfY2hlY2suYyBieVxuICogTWFya3VzIEt1aG4uXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IGJ1ZiBUaGUgYnVmZmVyIHRvIGNoZWNrXG4gKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgYGJ1ZmAgY29udGFpbnMgb25seSBjb3JyZWN0IFVURi04LCBlbHNlIGBmYWxzZWBcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gX2lzVmFsaWRVVEY4KGJ1Zikge1xuICBjb25zdCBsZW4gPSBidWYubGVuZ3RoO1xuICBsZXQgaSA9IDA7XG5cbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICBpZiAoKGJ1ZltpXSAmIDB4ODApID09PSAwKSB7XG4gICAgICAvLyAweHh4eHh4eFxuICAgICAgaSsrO1xuICAgIH0gZWxzZSBpZiAoKGJ1ZltpXSAmIDB4ZTApID09PSAweGMwKSB7XG4gICAgICAvLyAxMTB4eHh4eCAxMHh4eHh4eFxuICAgICAgaWYgKFxuICAgICAgICBpICsgMSA9PT0gbGVuIHx8XG4gICAgICAgIChidWZbaSArIDFdICYgMHhjMCkgIT09IDB4ODAgfHxcbiAgICAgICAgKGJ1ZltpXSAmIDB4ZmUpID09PSAweGMwIC8vIE92ZXJsb25nXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpICs9IDI7XG4gICAgfSBlbHNlIGlmICgoYnVmW2ldICYgMHhmMCkgPT09IDB4ZTApIHtcbiAgICAgIC8vIDExMTB4eHh4IDEweHh4eHh4IDEweHh4eHh4XG4gICAgICBpZiAoXG4gICAgICAgIGkgKyAyID49IGxlbiB8fFxuICAgICAgICAoYnVmW2kgKyAxXSAmIDB4YzApICE9PSAweDgwIHx8XG4gICAgICAgIChidWZbaSArIDJdICYgMHhjMCkgIT09IDB4ODAgfHxcbiAgICAgICAgKGJ1ZltpXSA9PT0gMHhlMCAmJiAoYnVmW2kgKyAxXSAmIDB4ZTApID09PSAweDgwKSB8fCAvLyBPdmVybG9uZ1xuICAgICAgICAoYnVmW2ldID09PSAweGVkICYmIChidWZbaSArIDFdICYgMHhlMCkgPT09IDB4YTApIC8vIFN1cnJvZ2F0ZSAoVStEODAwIC0gVStERkZGKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaSArPSAzO1xuICAgIH0gZWxzZSBpZiAoKGJ1ZltpXSAmIDB4ZjgpID09PSAweGYwKSB7XG4gICAgICAvLyAxMTExMHh4eCAxMHh4eHh4eCAxMHh4eHh4eCAxMHh4eHh4eFxuICAgICAgaWYgKFxuICAgICAgICBpICsgMyA+PSBsZW4gfHxcbiAgICAgICAgKGJ1ZltpICsgMV0gJiAweGMwKSAhPT0gMHg4MCB8fFxuICAgICAgICAoYnVmW2kgKyAyXSAmIDB4YzApICE9PSAweDgwIHx8XG4gICAgICAgIChidWZbaSArIDNdICYgMHhjMCkgIT09IDB4ODAgfHxcbiAgICAgICAgKGJ1ZltpXSA9PT0gMHhmMCAmJiAoYnVmW2kgKyAxXSAmIDB4ZjApID09PSAweDgwKSB8fCAvLyBPdmVybG9uZ1xuICAgICAgICAoYnVmW2ldID09PSAweGY0ICYmIGJ1ZltpICsgMV0gPiAweDhmKSB8fFxuICAgICAgICBidWZbaV0gPiAweGY0IC8vID4gVSsxMEZGRkZcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGkgKz0gNDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNWYWxpZFN0YXR1c0NvZGUsXG4gIGlzVmFsaWRVVEY4OiBfaXNWYWxpZFVURjgsXG4gIHRva2VuQ2hhcnNcbn07XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICAqL1xuaWYgKCFwcm9jZXNzLmVudi5XU19OT19VVEZfOF9WQUxJREFURSkge1xuICB0cnkge1xuICAgIGNvbnN0IGlzVmFsaWRVVEY4ID0gcmVxdWlyZSgndXRmLTgtdmFsaWRhdGUnKTtcblxuICAgIG1vZHVsZS5leHBvcnRzLmlzVmFsaWRVVEY4ID0gZnVuY3Rpb24gKGJ1Zikge1xuICAgICAgcmV0dXJuIGJ1Zi5sZW5ndGggPCAxNTAgPyBfaXNWYWxpZFVURjgoYnVmKSA6IGlzVmFsaWRVVEY4KGJ1Zik7XG4gICAgfTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIENvbnRpbnVlIHJlZ2FyZGxlc3Mgb2YgdGhlIGVycm9yLlxuICB9XG59XG4iLCIvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IFtcImVycm9yXCIsIHsgXCJ2YXJzSWdub3JlUGF0dGVyblwiOiBcIl5uZXR8dGxzfGh0dHBzJFwiIH1dICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJyk7XG5jb25zdCBodHRwID0gcmVxdWlyZSgnaHR0cCcpO1xuY29uc3QgaHR0cHMgPSByZXF1aXJlKCdodHRwcycpO1xuY29uc3QgbmV0ID0gcmVxdWlyZSgnbmV0Jyk7XG5jb25zdCB0bHMgPSByZXF1aXJlKCd0bHMnKTtcbmNvbnN0IHsgY3JlYXRlSGFzaCB9ID0gcmVxdWlyZSgnY3J5cHRvJyk7XG5cbmNvbnN0IGV4dGVuc2lvbiA9IHJlcXVpcmUoJy4vZXh0ZW5zaW9uJyk7XG5jb25zdCBQZXJNZXNzYWdlRGVmbGF0ZSA9IHJlcXVpcmUoJy4vcGVybWVzc2FnZS1kZWZsYXRlJyk7XG5jb25zdCBzdWJwcm90b2NvbCA9IHJlcXVpcmUoJy4vc3VicHJvdG9jb2wnKTtcbmNvbnN0IFdlYlNvY2tldCA9IHJlcXVpcmUoJy4vd2Vic29ja2V0Jyk7XG5jb25zdCB7IEdVSUQsIGtXZWJTb2NrZXQgfSA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5cbmNvbnN0IGtleVJlZ2V4ID0gL15bKy8wLTlBLVphLXpdezIyfT09JC87XG5cbmNvbnN0IFJVTk5JTkcgPSAwO1xuY29uc3QgQ0xPU0lORyA9IDE7XG5jb25zdCBDTE9TRUQgPSAyO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIFdlYlNvY2tldCBzZXJ2ZXIuXG4gKlxuICogQGV4dGVuZHMgRXZlbnRFbWl0dGVyXG4gKi9cbmNsYXNzIFdlYlNvY2tldFNlcnZlciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBgV2ViU29ja2V0U2VydmVyYCBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQ29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5iYWNrbG9nPTUxMV0gVGhlIG1heGltdW0gbGVuZ3RoIG9mIHRoZSBxdWV1ZSBvZlxuICAgKiAgICAgcGVuZGluZyBjb25uZWN0aW9uc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmNsaWVudFRyYWNraW5nPXRydWVdIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0b1xuICAgKiAgICAgdHJhY2sgY2xpZW50c1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5oYW5kbGVQcm90b2NvbHNdIEEgaG9vayB0byBoYW5kbGUgcHJvdG9jb2xzXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5ob3N0XSBUaGUgaG9zdG5hbWUgd2hlcmUgdG8gYmluZCB0aGUgc2VydmVyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5tYXhQYXlsb2FkPTEwNDg1NzYwMF0gVGhlIG1heGltdW0gYWxsb3dlZCBtZXNzYWdlXG4gICAqICAgICBzaXplXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMubm9TZXJ2ZXI9ZmFsc2VdIEVuYWJsZSBubyBzZXJ2ZXIgbW9kZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMucGF0aF0gQWNjZXB0IG9ubHkgY29ubmVjdGlvbnMgbWF0Y2hpbmcgdGhpcyBwYXRoXG4gICAqIEBwYXJhbSB7KEJvb2xlYW58T2JqZWN0KX0gW29wdGlvbnMucGVyTWVzc2FnZURlZmxhdGU9ZmFsc2VdIEVuYWJsZS9kaXNhYmxlXG4gICAqICAgICBwZXJtZXNzYWdlLWRlZmxhdGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLnBvcnRdIFRoZSBwb3J0IHdoZXJlIHRvIGJpbmQgdGhlIHNlcnZlclxuICAgKiBAcGFyYW0geyhodHRwLlNlcnZlcnxodHRwcy5TZXJ2ZXIpfSBbb3B0aW9ucy5zZXJ2ZXJdIEEgcHJlLWNyZWF0ZWQgSFRUUC9TXG4gICAqICAgICBzZXJ2ZXIgdG8gdXNlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuc2tpcFVURjhWYWxpZGF0aW9uPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvclxuICAgKiAgICAgbm90IHRvIHNraXAgVVRGLTggdmFsaWRhdGlvbiBmb3IgdGV4dCBhbmQgY2xvc2UgbWVzc2FnZXNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMudmVyaWZ5Q2xpZW50XSBBIGhvb2sgdG8gcmVqZWN0IGNvbm5lY3Rpb25zXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLldlYlNvY2tldD1XZWJTb2NrZXRdIFNwZWNpZmllcyB0aGUgYFdlYlNvY2tldGBcbiAgICogICAgIGNsYXNzIHRvIHVzZS4gSXQgbXVzdCBiZSB0aGUgYFdlYlNvY2tldGAgY2xhc3Mgb3IgY2xhc3MgdGhhdCBleHRlbmRzIGl0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gQSBsaXN0ZW5lciBmb3IgdGhlIGBsaXN0ZW5pbmdgIGV2ZW50XG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHN1cGVyKCk7XG5cbiAgICBvcHRpb25zID0ge1xuICAgICAgbWF4UGF5bG9hZDogMTAwICogMTAyNCAqIDEwMjQsXG4gICAgICBza2lwVVRGOFZhbGlkYXRpb246IGZhbHNlLFxuICAgICAgcGVyTWVzc2FnZURlZmxhdGU6IGZhbHNlLFxuICAgICAgaGFuZGxlUHJvdG9jb2xzOiBudWxsLFxuICAgICAgY2xpZW50VHJhY2tpbmc6IHRydWUsXG4gICAgICB2ZXJpZnlDbGllbnQ6IG51bGwsXG4gICAgICBub1NlcnZlcjogZmFsc2UsXG4gICAgICBiYWNrbG9nOiBudWxsLCAvLyB1c2UgZGVmYXVsdCAoNTExIGFzIGltcGxlbWVudGVkIGluIG5ldC5qcylcbiAgICAgIHNlcnZlcjogbnVsbCxcbiAgICAgIGhvc3Q6IG51bGwsXG4gICAgICBwYXRoOiBudWxsLFxuICAgICAgcG9ydDogbnVsbCxcbiAgICAgIFdlYlNvY2tldCxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9O1xuXG4gICAgaWYgKFxuICAgICAgKG9wdGlvbnMucG9ydCA9PSBudWxsICYmICFvcHRpb25zLnNlcnZlciAmJiAhb3B0aW9ucy5ub1NlcnZlcikgfHxcbiAgICAgIChvcHRpb25zLnBvcnQgIT0gbnVsbCAmJiAob3B0aW9ucy5zZXJ2ZXIgfHwgb3B0aW9ucy5ub1NlcnZlcikpIHx8XG4gICAgICAob3B0aW9ucy5zZXJ2ZXIgJiYgb3B0aW9ucy5ub1NlcnZlcilcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICdPbmUgYW5kIG9ubHkgb25lIG9mIHRoZSBcInBvcnRcIiwgXCJzZXJ2ZXJcIiwgb3IgXCJub1NlcnZlclwiIG9wdGlvbnMgJyArXG4gICAgICAgICAgJ211c3QgYmUgc3BlY2lmaWVkJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5wb3J0ICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX3NlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKChyZXEsIHJlcykgPT4ge1xuICAgICAgICBjb25zdCBib2R5ID0gaHR0cC5TVEFUVVNfQ09ERVNbNDI2XTtcblxuICAgICAgICByZXMud3JpdGVIZWFkKDQyNiwge1xuICAgICAgICAgICdDb250ZW50LUxlbmd0aCc6IGJvZHkubGVuZ3RoLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAndGV4dC9wbGFpbidcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy5lbmQoYm9keSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuX3NlcnZlci5saXN0ZW4oXG4gICAgICAgIG9wdGlvbnMucG9ydCxcbiAgICAgICAgb3B0aW9ucy5ob3N0LFxuICAgICAgICBvcHRpb25zLmJhY2tsb2csXG4gICAgICAgIGNhbGxiYWNrXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5zZXJ2ZXIpIHtcbiAgICAgIHRoaXMuX3NlcnZlciA9IG9wdGlvbnMuc2VydmVyO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zZXJ2ZXIpIHtcbiAgICAgIGNvbnN0IGVtaXRDb25uZWN0aW9uID0gdGhpcy5lbWl0LmJpbmQodGhpcywgJ2Nvbm5lY3Rpb24nKTtcblxuICAgICAgdGhpcy5fcmVtb3ZlTGlzdGVuZXJzID0gYWRkTGlzdGVuZXJzKHRoaXMuX3NlcnZlciwge1xuICAgICAgICBsaXN0ZW5pbmc6IHRoaXMuZW1pdC5iaW5kKHRoaXMsICdsaXN0ZW5pbmcnKSxcbiAgICAgICAgZXJyb3I6IHRoaXMuZW1pdC5iaW5kKHRoaXMsICdlcnJvcicpLFxuICAgICAgICB1cGdyYWRlOiAocmVxLCBzb2NrZXQsIGhlYWQpID0+IHtcbiAgICAgICAgICB0aGlzLmhhbmRsZVVwZ3JhZGUocmVxLCBzb2NrZXQsIGhlYWQsIGVtaXRDb25uZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMucGVyTWVzc2FnZURlZmxhdGUgPT09IHRydWUpIG9wdGlvbnMucGVyTWVzc2FnZURlZmxhdGUgPSB7fTtcbiAgICBpZiAob3B0aW9ucy5jbGllbnRUcmFja2luZykge1xuICAgICAgdGhpcy5jbGllbnRzID0gbmV3IFNldCgpO1xuICAgICAgdGhpcy5fc2hvdWxkRW1pdENsb3NlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLl9zdGF0ZSA9IFJVTk5JTkc7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYm91bmQgYWRkcmVzcywgdGhlIGFkZHJlc3MgZmFtaWx5IG5hbWUsIGFuZCBwb3J0IG9mIHRoZSBzZXJ2ZXJcbiAgICogYXMgcmVwb3J0ZWQgYnkgdGhlIG9wZXJhdGluZyBzeXN0ZW0gaWYgbGlzdGVuaW5nIG9uIGFuIElQIHNvY2tldC5cbiAgICogSWYgdGhlIHNlcnZlciBpcyBsaXN0ZW5pbmcgb24gYSBwaXBlIG9yIFVOSVggZG9tYWluIHNvY2tldCwgdGhlIG5hbWUgaXNcbiAgICogcmV0dXJuZWQgYXMgYSBzdHJpbmcuXG4gICAqXG4gICAqIEByZXR1cm4geyhPYmplY3R8U3RyaW5nfG51bGwpfSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VydmVyXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFkZHJlc3MoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5ub1NlcnZlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc2VydmVyIGlzIG9wZXJhdGluZyBpbiBcIm5vU2VydmVyXCIgbW9kZScpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fc2VydmVyKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gdGhpcy5fc2VydmVyLmFkZHJlc3MoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIHRoZSBzZXJ2ZXIgZnJvbSBhY2NlcHRpbmcgbmV3IGNvbm5lY3Rpb25zIGFuZCBlbWl0IHRoZSBgJ2Nsb3NlJ2AgZXZlbnRcbiAgICogd2hlbiBhbGwgZXhpc3RpbmcgY29ubmVjdGlvbnMgYXJlIGNsb3NlZC5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXSBBIG9uZS10aW1lIGxpc3RlbmVyIGZvciB0aGUgYCdjbG9zZSdgIGV2ZW50XG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNsb3NlKGNiKSB7XG4gICAgaWYgKHRoaXMuX3N0YXRlID09PSBDTE9TRUQpIHtcbiAgICAgIGlmIChjYikge1xuICAgICAgICB0aGlzLm9uY2UoJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgIGNiKG5ldyBFcnJvcignVGhlIHNlcnZlciBpcyBub3QgcnVubmluZycpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlLCB0aGlzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoY2IpIHRoaXMub25jZSgnY2xvc2UnLCBjYik7XG5cbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IENMT1NJTkcpIHJldHVybjtcbiAgICB0aGlzLl9zdGF0ZSA9IENMT1NJTkc7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLm5vU2VydmVyIHx8IHRoaXMub3B0aW9ucy5zZXJ2ZXIpIHtcbiAgICAgIGlmICh0aGlzLl9zZXJ2ZXIpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlTGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX3JlbW92ZUxpc3RlbmVycyA9IHRoaXMuX3NlcnZlciA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmNsaWVudHMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudHMuc2l6ZSkge1xuICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlLCB0aGlzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9zaG91bGRFbWl0Q2xvc2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGVtaXRDbG9zZSwgdGhpcyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNlcnZlciA9IHRoaXMuX3NlcnZlcjtcblxuICAgICAgdGhpcy5fcmVtb3ZlTGlzdGVuZXJzKCk7XG4gICAgICB0aGlzLl9yZW1vdmVMaXN0ZW5lcnMgPSB0aGlzLl9zZXJ2ZXIgPSBudWxsO1xuXG4gICAgICAvL1xuICAgICAgLy8gVGhlIEhUVFAvUyBzZXJ2ZXIgd2FzIGNyZWF0ZWQgaW50ZXJuYWxseS4gQ2xvc2UgaXQsIGFuZCByZWx5IG9uIGl0c1xuICAgICAgLy8gYCdjbG9zZSdgIGV2ZW50LlxuICAgICAgLy9cbiAgICAgIHNlcnZlci5jbG9zZSgoKSA9PiB7XG4gICAgICAgIGVtaXRDbG9zZSh0aGlzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZWUgaWYgYSBnaXZlbiByZXF1ZXN0IHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoaXMgc2VydmVyIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge2h0dHAuSW5jb21pbmdNZXNzYWdlfSByZXEgUmVxdWVzdCBvYmplY3QgdG8gaW5zcGVjdFxuICAgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIHJlcXVlc3QgaXMgdmFsaWQsIGVsc2UgYGZhbHNlYFxuICAgKiBAcHVibGljXG4gICAqL1xuICBzaG91bGRIYW5kbGUocmVxKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5wYXRoKSB7XG4gICAgICBjb25zdCBpbmRleCA9IHJlcS51cmwuaW5kZXhPZignPycpO1xuICAgICAgY29uc3QgcGF0aG5hbWUgPSBpbmRleCAhPT0gLTEgPyByZXEudXJsLnNsaWNlKDAsIGluZGV4KSA6IHJlcS51cmw7XG5cbiAgICAgIGlmIChwYXRobmFtZSAhPT0gdGhpcy5vcHRpb25zLnBhdGgpIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgYSBIVFRQIFVwZ3JhZGUgcmVxdWVzdC5cbiAgICpcbiAgICogQHBhcmFtIHtodHRwLkluY29taW5nTWVzc2FnZX0gcmVxIFRoZSByZXF1ZXN0IG9iamVjdFxuICAgKiBAcGFyYW0geyhuZXQuU29ja2V0fHRscy5Tb2NrZXQpfSBzb2NrZXQgVGhlIG5ldHdvcmsgc29ja2V0IGJldHdlZW4gdGhlXG4gICAqICAgICBzZXJ2ZXIgYW5kIGNsaWVudFxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gaGVhZCBUaGUgZmlyc3QgcGFja2V0IG9mIHRoZSB1cGdyYWRlZCBzdHJlYW1cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgaGFuZGxlVXBncmFkZShyZXEsIHNvY2tldCwgaGVhZCwgY2IpIHtcbiAgICBzb2NrZXQub24oJ2Vycm9yJywgc29ja2V0T25FcnJvcik7XG5cbiAgICBjb25zdCBrZXkgPSByZXEuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1rZXknXTtcbiAgICBjb25zdCB2ZXJzaW9uID0gK3JlcS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LXZlcnNpb24nXTtcblxuICAgIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykge1xuICAgICAgY29uc3QgbWVzc2FnZSA9ICdJbnZhbGlkIEhUVFAgbWV0aG9kJztcbiAgICAgIGFib3J0SGFuZHNoYWtlT3JFbWl0d3NDbGllbnRFcnJvcih0aGlzLCByZXEsIHNvY2tldCwgNDA1LCBtZXNzYWdlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAocmVxLmhlYWRlcnMudXBncmFkZS50b0xvd2VyQ2FzZSgpICE9PSAnd2Vic29ja2V0Jykge1xuICAgICAgY29uc3QgbWVzc2FnZSA9ICdJbnZhbGlkIFVwZ3JhZGUgaGVhZGVyJztcbiAgICAgIGFib3J0SGFuZHNoYWtlT3JFbWl0d3NDbGllbnRFcnJvcih0aGlzLCByZXEsIHNvY2tldCwgNDAwLCBtZXNzYWdlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWtleSB8fCAha2V5UmVnZXgudGVzdChrZXkpKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gJ01pc3Npbmcgb3IgaW52YWxpZCBTZWMtV2ViU29ja2V0LUtleSBoZWFkZXInO1xuICAgICAgYWJvcnRIYW5kc2hha2VPckVtaXR3c0NsaWVudEVycm9yKHRoaXMsIHJlcSwgc29ja2V0LCA0MDAsIG1lc3NhZ2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh2ZXJzaW9uICE9PSA4ICYmIHZlcnNpb24gIT09IDEzKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gJ01pc3Npbmcgb3IgaW52YWxpZCBTZWMtV2ViU29ja2V0LVZlcnNpb24gaGVhZGVyJztcbiAgICAgIGFib3J0SGFuZHNoYWtlT3JFbWl0d3NDbGllbnRFcnJvcih0aGlzLCByZXEsIHNvY2tldCwgNDAwLCBtZXNzYWdlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2hvdWxkSGFuZGxlKHJlcSkpIHtcbiAgICAgIGFib3J0SGFuZHNoYWtlKHNvY2tldCwgNDAwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzZWNXZWJTb2NrZXRQcm90b2NvbCA9IHJlcS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LXByb3RvY29sJ107XG4gICAgbGV0IHByb3RvY29scyA9IG5ldyBTZXQoKTtcblxuICAgIGlmIChzZWNXZWJTb2NrZXRQcm90b2NvbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0cnkge1xuICAgICAgICBwcm90b2NvbHMgPSBzdWJwcm90b2NvbC5wYXJzZShzZWNXZWJTb2NrZXRQcm90b2NvbCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9ICdJbnZhbGlkIFNlYy1XZWJTb2NrZXQtUHJvdG9jb2wgaGVhZGVyJztcbiAgICAgICAgYWJvcnRIYW5kc2hha2VPckVtaXR3c0NsaWVudEVycm9yKHRoaXMsIHJlcSwgc29ja2V0LCA0MDAsIG1lc3NhZ2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2VjV2ViU29ja2V0RXh0ZW5zaW9ucyA9IHJlcS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LWV4dGVuc2lvbnMnXTtcbiAgICBjb25zdCBleHRlbnNpb25zID0ge307XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLm9wdGlvbnMucGVyTWVzc2FnZURlZmxhdGUgJiZcbiAgICAgIHNlY1dlYlNvY2tldEV4dGVuc2lvbnMgIT09IHVuZGVmaW5lZFxuICAgICkge1xuICAgICAgY29uc3QgcGVyTWVzc2FnZURlZmxhdGUgPSBuZXcgUGVyTWVzc2FnZURlZmxhdGUoXG4gICAgICAgIHRoaXMub3B0aW9ucy5wZXJNZXNzYWdlRGVmbGF0ZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdGhpcy5vcHRpb25zLm1heFBheWxvYWRcbiAgICAgICk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG9mZmVycyA9IGV4dGVuc2lvbi5wYXJzZShzZWNXZWJTb2NrZXRFeHRlbnNpb25zKTtcblxuICAgICAgICBpZiAob2ZmZXJzW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKSB7XG4gICAgICAgICAgcGVyTWVzc2FnZURlZmxhdGUuYWNjZXB0KG9mZmVyc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSk7XG4gICAgICAgICAgZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSA9IHBlck1lc3NhZ2VEZWZsYXRlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9XG4gICAgICAgICAgJ0ludmFsaWQgb3IgdW5hY2NlcHRhYmxlIFNlYy1XZWJTb2NrZXQtRXh0ZW5zaW9ucyBoZWFkZXInO1xuICAgICAgICBhYm9ydEhhbmRzaGFrZU9yRW1pdHdzQ2xpZW50RXJyb3IodGhpcywgcmVxLCBzb2NrZXQsIDQwMCwgbWVzc2FnZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIE9wdGlvbmFsbHkgY2FsbCBleHRlcm5hbCBjbGllbnQgdmVyaWZpY2F0aW9uIGhhbmRsZXIuXG4gICAgLy9cbiAgICBpZiAodGhpcy5vcHRpb25zLnZlcmlmeUNsaWVudCkge1xuICAgICAgY29uc3QgaW5mbyA9IHtcbiAgICAgICAgb3JpZ2luOlxuICAgICAgICAgIHJlcS5oZWFkZXJzW2Ake3ZlcnNpb24gPT09IDggPyAnc2VjLXdlYnNvY2tldC1vcmlnaW4nIDogJ29yaWdpbid9YF0sXG4gICAgICAgIHNlY3VyZTogISEocmVxLnNvY2tldC5hdXRob3JpemVkIHx8IHJlcS5zb2NrZXQuZW5jcnlwdGVkKSxcbiAgICAgICAgcmVxXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnZlcmlmeUNsaWVudC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnZlcmlmeUNsaWVudChpbmZvLCAodmVyaWZpZWQsIGNvZGUsIG1lc3NhZ2UsIGhlYWRlcnMpID0+IHtcbiAgICAgICAgICBpZiAoIXZlcmlmaWVkKSB7XG4gICAgICAgICAgICByZXR1cm4gYWJvcnRIYW5kc2hha2Uoc29ja2V0LCBjb2RlIHx8IDQwMSwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5jb21wbGV0ZVVwZ3JhZGUoXG4gICAgICAgICAgICBleHRlbnNpb25zLFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgcHJvdG9jb2xzLFxuICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgc29ja2V0LFxuICAgICAgICAgICAgaGVhZCxcbiAgICAgICAgICAgIGNiXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMudmVyaWZ5Q2xpZW50KGluZm8pKSByZXR1cm4gYWJvcnRIYW5kc2hha2Uoc29ja2V0LCA0MDEpO1xuICAgIH1cblxuICAgIHRoaXMuY29tcGxldGVVcGdyYWRlKGV4dGVuc2lvbnMsIGtleSwgcHJvdG9jb2xzLCByZXEsIHNvY2tldCwgaGVhZCwgY2IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZ3JhZGUgdGhlIGNvbm5lY3Rpb24gdG8gV2ViU29ja2V0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZXh0ZW5zaW9ucyBUaGUgYWNjZXB0ZWQgZXh0ZW5zaW9uc1xuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSB2YWx1ZSBvZiB0aGUgYFNlYy1XZWJTb2NrZXQtS2V5YCBoZWFkZXJcbiAgICogQHBhcmFtIHtTZXR9IHByb3RvY29scyBUaGUgc3VicHJvdG9jb2xzXG4gICAqIEBwYXJhbSB7aHR0cC5JbmNvbWluZ01lc3NhZ2V9IHJlcSBUaGUgcmVxdWVzdCBvYmplY3RcbiAgICogQHBhcmFtIHsobmV0LlNvY2tldHx0bHMuU29ja2V0KX0gc29ja2V0IFRoZSBuZXR3b3JrIHNvY2tldCBiZXR3ZWVuIHRoZVxuICAgKiAgICAgc2VydmVyIGFuZCBjbGllbnRcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGhlYWQgVGhlIGZpcnN0IHBhY2tldCBvZiB0aGUgdXBncmFkZWQgc3RyZWFtXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBJZiBjYWxsZWQgbW9yZSB0aGFuIG9uY2Ugd2l0aCB0aGUgc2FtZSBzb2NrZXRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbXBsZXRlVXBncmFkZShleHRlbnNpb25zLCBrZXksIHByb3RvY29scywgcmVxLCBzb2NrZXQsIGhlYWQsIGNiKSB7XG4gICAgLy9cbiAgICAvLyBEZXN0cm95IHRoZSBzb2NrZXQgaWYgdGhlIGNsaWVudCBoYXMgYWxyZWFkeSBzZW50IGEgRklOIHBhY2tldC5cbiAgICAvL1xuICAgIGlmICghc29ja2V0LnJlYWRhYmxlIHx8ICFzb2NrZXQud3JpdGFibGUpIHJldHVybiBzb2NrZXQuZGVzdHJveSgpO1xuXG4gICAgaWYgKHNvY2tldFtrV2ViU29ja2V0XSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnc2VydmVyLmhhbmRsZVVwZ3JhZGUoKSB3YXMgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIHdpdGggdGhlIHNhbWUgJyArXG4gICAgICAgICAgJ3NvY2tldCwgcG9zc2libHkgZHVlIHRvIGEgbWlzY29uZmlndXJhdGlvbidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3N0YXRlID4gUlVOTklORykgcmV0dXJuIGFib3J0SGFuZHNoYWtlKHNvY2tldCwgNTAzKTtcblxuICAgIGNvbnN0IGRpZ2VzdCA9IGNyZWF0ZUhhc2goJ3NoYTEnKVxuICAgICAgLnVwZGF0ZShrZXkgKyBHVUlEKVxuICAgICAgLmRpZ2VzdCgnYmFzZTY0Jyk7XG5cbiAgICBjb25zdCBoZWFkZXJzID0gW1xuICAgICAgJ0hUVFAvMS4xIDEwMSBTd2l0Y2hpbmcgUHJvdG9jb2xzJyxcbiAgICAgICdVcGdyYWRlOiB3ZWJzb2NrZXQnLFxuICAgICAgJ0Nvbm5lY3Rpb246IFVwZ3JhZGUnLFxuICAgICAgYFNlYy1XZWJTb2NrZXQtQWNjZXB0OiAke2RpZ2VzdH1gXG4gICAgXTtcblxuICAgIGNvbnN0IHdzID0gbmV3IHRoaXMub3B0aW9ucy5XZWJTb2NrZXQobnVsbCk7XG5cbiAgICBpZiAocHJvdG9jb2xzLnNpemUpIHtcbiAgICAgIC8vXG4gICAgICAvLyBPcHRpb25hbGx5IGNhbGwgZXh0ZXJuYWwgcHJvdG9jb2wgc2VsZWN0aW9uIGhhbmRsZXIuXG4gICAgICAvL1xuICAgICAgY29uc3QgcHJvdG9jb2wgPSB0aGlzLm9wdGlvbnMuaGFuZGxlUHJvdG9jb2xzXG4gICAgICAgID8gdGhpcy5vcHRpb25zLmhhbmRsZVByb3RvY29scyhwcm90b2NvbHMsIHJlcSlcbiAgICAgICAgOiBwcm90b2NvbHMudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuXG4gICAgICBpZiAocHJvdG9jb2wpIHtcbiAgICAgICAgaGVhZGVycy5wdXNoKGBTZWMtV2ViU29ja2V0LVByb3RvY29sOiAke3Byb3RvY29sfWApO1xuICAgICAgICB3cy5fcHJvdG9jb2wgPSBwcm90b2NvbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSkge1xuICAgICAgY29uc3QgcGFyYW1zID0gZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXS5wYXJhbXM7XG4gICAgICBjb25zdCB2YWx1ZSA9IGV4dGVuc2lvbi5mb3JtYXQoe1xuICAgICAgICBbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV06IFtwYXJhbXNdXG4gICAgICB9KTtcbiAgICAgIGhlYWRlcnMucHVzaChgU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zOiAke3ZhbHVlfWApO1xuICAgICAgd3MuX2V4dGVuc2lvbnMgPSBleHRlbnNpb25zO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy8gQWxsb3cgZXh0ZXJuYWwgbW9kaWZpY2F0aW9uL2luc3BlY3Rpb24gb2YgaGFuZHNoYWtlIGhlYWRlcnMuXG4gICAgLy9cbiAgICB0aGlzLmVtaXQoJ2hlYWRlcnMnLCBoZWFkZXJzLCByZXEpO1xuXG4gICAgc29ja2V0LndyaXRlKGhlYWRlcnMuY29uY2F0KCdcXHJcXG4nKS5qb2luKCdcXHJcXG4nKSk7XG4gICAgc29ja2V0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIHNvY2tldE9uRXJyb3IpO1xuXG4gICAgd3Muc2V0U29ja2V0KHNvY2tldCwgaGVhZCwge1xuICAgICAgbWF4UGF5bG9hZDogdGhpcy5vcHRpb25zLm1heFBheWxvYWQsXG4gICAgICBza2lwVVRGOFZhbGlkYXRpb246IHRoaXMub3B0aW9ucy5za2lwVVRGOFZhbGlkYXRpb25cbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmNsaWVudHMpIHtcbiAgICAgIHRoaXMuY2xpZW50cy5hZGQod3MpO1xuICAgICAgd3Mub24oJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsaWVudHMuZGVsZXRlKHdzKTtcblxuICAgICAgICBpZiAodGhpcy5fc2hvdWxkRW1pdENsb3NlICYmICF0aGlzLmNsaWVudHMuc2l6ZSkge1xuICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2Iod3MsIHJlcSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBXZWJTb2NrZXRTZXJ2ZXI7XG5cbi8qKlxuICogQWRkIGV2ZW50IGxpc3RlbmVycyBvbiBhbiBgRXZlbnRFbWl0dGVyYCB1c2luZyBhIG1hcCBvZiA8ZXZlbnQsIGxpc3RlbmVyPlxuICogcGFpcnMuXG4gKlxuICogQHBhcmFtIHtFdmVudEVtaXR0ZXJ9IHNlcnZlciBUaGUgZXZlbnQgZW1pdHRlclxuICogQHBhcmFtIHtPYmplY3QuPFN0cmluZywgRnVuY3Rpb24+fSBtYXAgVGhlIGxpc3RlbmVycyB0byBhZGRcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRoYXQgd2lsbCByZW1vdmUgdGhlIGFkZGVkIGxpc3RlbmVycyB3aGVuXG4gKiAgICAgY2FsbGVkXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcnMoc2VydmVyLCBtYXApIHtcbiAgZm9yIChjb25zdCBldmVudCBvZiBPYmplY3Qua2V5cyhtYXApKSBzZXJ2ZXIub24oZXZlbnQsIG1hcFtldmVudF0pO1xuXG4gIHJldHVybiBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcnMoKSB7XG4gICAgZm9yIChjb25zdCBldmVudCBvZiBPYmplY3Qua2V5cyhtYXApKSB7XG4gICAgICBzZXJ2ZXIucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIG1hcFtldmVudF0pO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBFbWl0IGEgYCdjbG9zZSdgIGV2ZW50IG9uIGFuIGBFdmVudEVtaXR0ZXJgLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRFbWl0dGVyfSBzZXJ2ZXIgVGhlIGV2ZW50IGVtaXR0ZXJcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGVtaXRDbG9zZShzZXJ2ZXIpIHtcbiAgc2VydmVyLl9zdGF0ZSA9IENMT1NFRDtcbiAgc2VydmVyLmVtaXQoJ2Nsb3NlJyk7XG59XG5cbi8qKlxuICogSGFuZGxlIHNvY2tldCBlcnJvcnMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc29ja2V0T25FcnJvcigpIHtcbiAgdGhpcy5kZXN0cm95KCk7XG59XG5cbi8qKlxuICogQ2xvc2UgdGhlIGNvbm5lY3Rpb24gd2hlbiBwcmVjb25kaXRpb25zIGFyZSBub3QgZnVsZmlsbGVkLlxuICpcbiAqIEBwYXJhbSB7KG5ldC5Tb2NrZXR8dGxzLlNvY2tldCl9IHNvY2tldCBUaGUgc29ja2V0IG9mIHRoZSB1cGdyYWRlIHJlcXVlc3RcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlIFRoZSBIVFRQIHJlc3BvbnNlIHN0YXR1cyBjb2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gW21lc3NhZ2VdIFRoZSBIVFRQIHJlc3BvbnNlIGJvZHlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbaGVhZGVyc10gQWRkaXRpb25hbCBIVFRQIHJlc3BvbnNlIGhlYWRlcnNcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFib3J0SGFuZHNoYWtlKHNvY2tldCwgY29kZSwgbWVzc2FnZSwgaGVhZGVycykge1xuICAvL1xuICAvLyBUaGUgc29ja2V0IGlzIHdyaXRhYmxlIHVubGVzcyB0aGUgdXNlciBkZXN0cm95ZWQgb3IgZW5kZWQgaXQgYmVmb3JlIGNhbGxpbmdcbiAgLy8gYHNlcnZlci5oYW5kbGVVcGdyYWRlKClgIG9yIGluIHRoZSBgdmVyaWZ5Q2xpZW50YCBmdW5jdGlvbiwgd2hpY2ggaXMgYSB1c2VyXG4gIC8vIGVycm9yLiBIYW5kbGluZyB0aGlzIGRvZXMgbm90IG1ha2UgbXVjaCBzZW5zZSBhcyB0aGUgd29yc3QgdGhhdCBjYW4gaGFwcGVuXG4gIC8vIGlzIHRoYXQgc29tZSBvZiB0aGUgZGF0YSB3cml0dGVuIGJ5IHRoZSB1c2VyIG1pZ2h0IGJlIGRpc2NhcmRlZCBkdWUgdG8gdGhlXG4gIC8vIGNhbGwgdG8gYHNvY2tldC5lbmQoKWAgYmVsb3csIHdoaWNoIHRyaWdnZXJzIGFuIGAnZXJyb3InYCBldmVudCB0aGF0IGluXG4gIC8vIHR1cm4gY2F1c2VzIHRoZSBzb2NrZXQgdG8gYmUgZGVzdHJveWVkLlxuICAvL1xuICBtZXNzYWdlID0gbWVzc2FnZSB8fCBodHRwLlNUQVRVU19DT0RFU1tjb2RlXTtcbiAgaGVhZGVycyA9IHtcbiAgICBDb25uZWN0aW9uOiAnY2xvc2UnLFxuICAgICdDb250ZW50LVR5cGUnOiAndGV4dC9odG1sJyxcbiAgICAnQ29udGVudC1MZW5ndGgnOiBCdWZmZXIuYnl0ZUxlbmd0aChtZXNzYWdlKSxcbiAgICAuLi5oZWFkZXJzXG4gIH07XG5cbiAgc29ja2V0Lm9uY2UoJ2ZpbmlzaCcsIHNvY2tldC5kZXN0cm95KTtcblxuICBzb2NrZXQuZW5kKFxuICAgIGBIVFRQLzEuMSAke2NvZGV9ICR7aHR0cC5TVEFUVVNfQ09ERVNbY29kZV19XFxyXFxuYCArXG4gICAgICBPYmplY3Qua2V5cyhoZWFkZXJzKVxuICAgICAgICAubWFwKChoKSA9PiBgJHtofTogJHtoZWFkZXJzW2hdfWApXG4gICAgICAgIC5qb2luKCdcXHJcXG4nKSArXG4gICAgICAnXFxyXFxuXFxyXFxuJyArXG4gICAgICBtZXNzYWdlXG4gICk7XG59XG5cbi8qKlxuICogRW1pdCBhIGAnd3NDbGllbnRFcnJvcidgIGV2ZW50IG9uIGEgYFdlYlNvY2tldFNlcnZlcmAgaWYgdGhlcmUgaXMgYXQgbGVhc3RcbiAqIG9uZSBsaXN0ZW5lciBmb3IgaXQsIG90aGVyd2lzZSBjYWxsIGBhYm9ydEhhbmRzaGFrZSgpYC5cbiAqXG4gKiBAcGFyYW0ge1dlYlNvY2tldFNlcnZlcn0gc2VydmVyIFRoZSBXZWJTb2NrZXQgc2VydmVyXG4gKiBAcGFyYW0ge2h0dHAuSW5jb21pbmdNZXNzYWdlfSByZXEgVGhlIHJlcXVlc3Qgb2JqZWN0XG4gKiBAcGFyYW0geyhuZXQuU29ja2V0fHRscy5Tb2NrZXQpfSBzb2NrZXQgVGhlIHNvY2tldCBvZiB0aGUgdXBncmFkZSByZXF1ZXN0XG4gKiBAcGFyYW0ge051bWJlcn0gY29kZSBUaGUgSFRUUCByZXNwb25zZSBzdGF0dXMgY29kZVxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgVGhlIEhUVFAgcmVzcG9uc2UgYm9keVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWJvcnRIYW5kc2hha2VPckVtaXR3c0NsaWVudEVycm9yKHNlcnZlciwgcmVxLCBzb2NrZXQsIGNvZGUsIG1lc3NhZ2UpIHtcbiAgaWYgKHNlcnZlci5saXN0ZW5lckNvdW50KCd3c0NsaWVudEVycm9yJykpIHtcbiAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoZXJyLCBhYm9ydEhhbmRzaGFrZU9yRW1pdHdzQ2xpZW50RXJyb3IpO1xuXG4gICAgc2VydmVyLmVtaXQoJ3dzQ2xpZW50RXJyb3InLCBlcnIsIHNvY2tldCwgcmVxKTtcbiAgfSBlbHNlIHtcbiAgICBhYm9ydEhhbmRzaGFrZShzb2NrZXQsIGNvZGUsIG1lc3NhZ2UpO1xuICB9XG59XG4iLCIvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IFtcImVycm9yXCIsIHsgXCJ2YXJzSWdub3JlUGF0dGVyblwiOiBcIl5SZWFkYWJsZSRcIiB9XSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpO1xuY29uc3QgaHR0cHMgPSByZXF1aXJlKCdodHRwcycpO1xuY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbmNvbnN0IG5ldCA9IHJlcXVpcmUoJ25ldCcpO1xuY29uc3QgdGxzID0gcmVxdWlyZSgndGxzJyk7XG5jb25zdCB7IHJhbmRvbUJ5dGVzLCBjcmVhdGVIYXNoIH0gPSByZXF1aXJlKCdjcnlwdG8nKTtcbmNvbnN0IHsgUmVhZGFibGUgfSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xuY29uc3QgeyBVUkwgfSA9IHJlcXVpcmUoJ3VybCcpO1xuXG5jb25zdCBQZXJNZXNzYWdlRGVmbGF0ZSA9IHJlcXVpcmUoJy4vcGVybWVzc2FnZS1kZWZsYXRlJyk7XG5jb25zdCBSZWNlaXZlciA9IHJlcXVpcmUoJy4vcmVjZWl2ZXInKTtcbmNvbnN0IFNlbmRlciA9IHJlcXVpcmUoJy4vc2VuZGVyJyk7XG5jb25zdCB7XG4gIEJJTkFSWV9UWVBFUyxcbiAgRU1QVFlfQlVGRkVSLFxuICBHVUlELFxuICBrRm9yT25FdmVudEF0dHJpYnV0ZSxcbiAga0xpc3RlbmVyLFxuICBrU3RhdHVzQ29kZSxcbiAga1dlYlNvY2tldCxcbiAgTk9PUFxufSA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5jb25zdCB7XG4gIEV2ZW50VGFyZ2V0OiB7IGFkZEV2ZW50TGlzdGVuZXIsIHJlbW92ZUV2ZW50TGlzdGVuZXIgfVxufSA9IHJlcXVpcmUoJy4vZXZlbnQtdGFyZ2V0Jyk7XG5jb25zdCB7IGZvcm1hdCwgcGFyc2UgfSA9IHJlcXVpcmUoJy4vZXh0ZW5zaW9uJyk7XG5jb25zdCB7IHRvQnVmZmVyIH0gPSByZXF1aXJlKCcuL2J1ZmZlci11dGlsJyk7XG5cbmNvbnN0IGNsb3NlVGltZW91dCA9IDMwICogMTAwMDtcbmNvbnN0IGtBYm9ydGVkID0gU3ltYm9sKCdrQWJvcnRlZCcpO1xuY29uc3QgcHJvdG9jb2xWZXJzaW9ucyA9IFs4LCAxM107XG5jb25zdCByZWFkeVN0YXRlcyA9IFsnQ09OTkVDVElORycsICdPUEVOJywgJ0NMT1NJTkcnLCAnQ0xPU0VEJ107XG5jb25zdCBzdWJwcm90b2NvbFJlZ2V4ID0gL15bISMkJSYnKitcXC0uMC05QS1aXl9gfGEten5dKyQvO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIFdlYlNvY2tldC5cbiAqXG4gKiBAZXh0ZW5kcyBFdmVudEVtaXR0ZXJcbiAqL1xuY2xhc3MgV2ViU29ja2V0IGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBgV2ViU29ja2V0YC5cbiAgICpcbiAgICogQHBhcmFtIHsoU3RyaW5nfFVSTCl9IGFkZHJlc3MgVGhlIFVSTCB0byB3aGljaCB0byBjb25uZWN0XG4gICAqIEBwYXJhbSB7KFN0cmluZ3xTdHJpbmdbXSl9IFtwcm90b2NvbHNdIFRoZSBzdWJwcm90b2NvbHNcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBDb25uZWN0aW9uIG9wdGlvbnNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGFkZHJlc3MsIHByb3RvY29scywgb3B0aW9ucykge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9iaW5hcnlUeXBlID0gQklOQVJZX1RZUEVTWzBdO1xuICAgIHRoaXMuX2Nsb3NlQ29kZSA9IDEwMDY7XG4gICAgdGhpcy5fY2xvc2VGcmFtZVJlY2VpdmVkID0gZmFsc2U7XG4gICAgdGhpcy5fY2xvc2VGcmFtZVNlbnQgPSBmYWxzZTtcbiAgICB0aGlzLl9jbG9zZU1lc3NhZ2UgPSBFTVBUWV9CVUZGRVI7XG4gICAgdGhpcy5fY2xvc2VUaW1lciA9IG51bGw7XG4gICAgdGhpcy5fZXh0ZW5zaW9ucyA9IHt9O1xuICAgIHRoaXMuX3BhdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3Byb3RvY29sID0gJyc7XG4gICAgdGhpcy5fcmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DT05ORUNUSU5HO1xuICAgIHRoaXMuX3JlY2VpdmVyID0gbnVsbDtcbiAgICB0aGlzLl9zZW5kZXIgPSBudWxsO1xuICAgIHRoaXMuX3NvY2tldCA9IG51bGw7XG5cbiAgICBpZiAoYWRkcmVzcyAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5fYnVmZmVyZWRBbW91bnQgPSAwO1xuICAgICAgdGhpcy5faXNTZXJ2ZXIgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3JlZGlyZWN0cyA9IDA7XG5cbiAgICAgIGlmIChwcm90b2NvbHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm90b2NvbHMgPSBbXTtcbiAgICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkocHJvdG9jb2xzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHByb3RvY29scyA9PT0gJ29iamVjdCcgJiYgcHJvdG9jb2xzICE9PSBudWxsKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IHByb3RvY29scztcbiAgICAgICAgICBwcm90b2NvbHMgPSBbXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm90b2NvbHMgPSBbcHJvdG9jb2xzXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpbml0QXNDbGllbnQodGhpcywgYWRkcmVzcywgcHJvdG9jb2xzLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faXNTZXJ2ZXIgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGRldmlhdGVzIGZyb20gdGhlIFdIQVRXRyBpbnRlcmZhY2Ugc2luY2Ugd3MgZG9lc24ndCBzdXBwb3J0IHRoZVxuICAgKiByZXF1aXJlZCBkZWZhdWx0IFwiYmxvYlwiIHR5cGUgKGluc3RlYWQgd2UgZGVmaW5lIGEgY3VzdG9tIFwibm9kZWJ1ZmZlclwiXG4gICAqIHR5cGUpLlxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGJpbmFyeVR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2JpbmFyeVR5cGU7XG4gIH1cblxuICBzZXQgYmluYXJ5VHlwZSh0eXBlKSB7XG4gICAgaWYgKCFCSU5BUllfVFlQRVMuaW5jbHVkZXModHlwZSkpIHJldHVybjtcblxuICAgIHRoaXMuX2JpbmFyeVR5cGUgPSB0eXBlO1xuXG4gICAgLy9cbiAgICAvLyBBbGxvdyB0byBjaGFuZ2UgYGJpbmFyeVR5cGVgIG9uIHRoZSBmbHkuXG4gICAgLy9cbiAgICBpZiAodGhpcy5fcmVjZWl2ZXIpIHRoaXMuX3JlY2VpdmVyLl9iaW5hcnlUeXBlID0gdHlwZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0IGJ1ZmZlcmVkQW1vdW50KCkge1xuICAgIGlmICghdGhpcy5fc29ja2V0KSByZXR1cm4gdGhpcy5fYnVmZmVyZWRBbW91bnQ7XG5cbiAgICByZXR1cm4gdGhpcy5fc29ja2V0Ll93cml0YWJsZVN0YXRlLmxlbmd0aCArIHRoaXMuX3NlbmRlci5fYnVmZmVyZWRCeXRlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGV4dGVuc2lvbnMoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX2V4dGVuc2lvbnMpLmpvaW4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG4gIGdldCBpc1BhdXNlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGF1c2VkO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGdldCBvbmNsb3NlKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGdldCBvbmVycm9yKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGdldCBvbm9wZW4oKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge0Z1bmN0aW9ufVxuICAgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgZ2V0IG9ubWVzc2FnZSgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IHByb3RvY29sKCkge1xuICAgIHJldHVybiB0aGlzLl9wcm90b2NvbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0IHJlYWR5U3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlYWR5U3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VybDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdXAgdGhlIHNvY2tldCBhbmQgdGhlIGludGVybmFsIHJlc291cmNlcy5cbiAgICpcbiAgICogQHBhcmFtIHsobmV0LlNvY2tldHx0bHMuU29ja2V0KX0gc29ja2V0IFRoZSBuZXR3b3JrIHNvY2tldCBiZXR3ZWVuIHRoZVxuICAgKiAgICAgc2VydmVyIGFuZCBjbGllbnRcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGhlYWQgVGhlIGZpcnN0IHBhY2tldCBvZiB0aGUgdXBncmFkZWQgc3RyZWFtXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmdlbmVyYXRlTWFza10gVGhlIGZ1bmN0aW9uIHVzZWQgdG8gZ2VuZXJhdGUgdGhlXG4gICAqICAgICBtYXNraW5nIGtleVxuICAgKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMubWF4UGF5bG9hZD0wXSBUaGUgbWF4aW11bSBhbGxvd2VkIG1lc3NhZ2Ugc2l6ZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnNraXBVVEY4VmFsaWRhdGlvbj1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3JcbiAgICogICAgIG5vdCB0byBza2lwIFVURi04IHZhbGlkYXRpb24gZm9yIHRleHQgYW5kIGNsb3NlIG1lc3NhZ2VzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzZXRTb2NrZXQoc29ja2V0LCBoZWFkLCBvcHRpb25zKSB7XG4gICAgY29uc3QgcmVjZWl2ZXIgPSBuZXcgUmVjZWl2ZXIoe1xuICAgICAgYmluYXJ5VHlwZTogdGhpcy5iaW5hcnlUeXBlLFxuICAgICAgZXh0ZW5zaW9uczogdGhpcy5fZXh0ZW5zaW9ucyxcbiAgICAgIGlzU2VydmVyOiB0aGlzLl9pc1NlcnZlcixcbiAgICAgIG1heFBheWxvYWQ6IG9wdGlvbnMubWF4UGF5bG9hZCxcbiAgICAgIHNraXBVVEY4VmFsaWRhdGlvbjogb3B0aW9ucy5za2lwVVRGOFZhbGlkYXRpb25cbiAgICB9KTtcblxuICAgIHRoaXMuX3NlbmRlciA9IG5ldyBTZW5kZXIoc29ja2V0LCB0aGlzLl9leHRlbnNpb25zLCBvcHRpb25zLmdlbmVyYXRlTWFzayk7XG4gICAgdGhpcy5fcmVjZWl2ZXIgPSByZWNlaXZlcjtcbiAgICB0aGlzLl9zb2NrZXQgPSBzb2NrZXQ7XG5cbiAgICByZWNlaXZlcltrV2ViU29ja2V0XSA9IHRoaXM7XG4gICAgc29ja2V0W2tXZWJTb2NrZXRdID0gdGhpcztcblxuICAgIHJlY2VpdmVyLm9uKCdjb25jbHVkZScsIHJlY2VpdmVyT25Db25jbHVkZSk7XG4gICAgcmVjZWl2ZXIub24oJ2RyYWluJywgcmVjZWl2ZXJPbkRyYWluKTtcbiAgICByZWNlaXZlci5vbignZXJyb3InLCByZWNlaXZlck9uRXJyb3IpO1xuICAgIHJlY2VpdmVyLm9uKCdtZXNzYWdlJywgcmVjZWl2ZXJPbk1lc3NhZ2UpO1xuICAgIHJlY2VpdmVyLm9uKCdwaW5nJywgcmVjZWl2ZXJPblBpbmcpO1xuICAgIHJlY2VpdmVyLm9uKCdwb25nJywgcmVjZWl2ZXJPblBvbmcpO1xuXG4gICAgc29ja2V0LnNldFRpbWVvdXQoMCk7XG4gICAgc29ja2V0LnNldE5vRGVsYXkoKTtcblxuICAgIGlmIChoZWFkLmxlbmd0aCA+IDApIHNvY2tldC51bnNoaWZ0KGhlYWQpO1xuXG4gICAgc29ja2V0Lm9uKCdjbG9zZScsIHNvY2tldE9uQ2xvc2UpO1xuICAgIHNvY2tldC5vbignZGF0YScsIHNvY2tldE9uRGF0YSk7XG4gICAgc29ja2V0Lm9uKCdlbmQnLCBzb2NrZXRPbkVuZCk7XG4gICAgc29ja2V0Lm9uKCdlcnJvcicsIHNvY2tldE9uRXJyb3IpO1xuXG4gICAgdGhpcy5fcmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5PUEVOO1xuICAgIHRoaXMuZW1pdCgnb3BlbicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVtaXQgdGhlIGAnY2xvc2UnYCBldmVudC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGVtaXRDbG9zZSgpIHtcbiAgICBpZiAoIXRoaXMuX3NvY2tldCkge1xuICAgICAgdGhpcy5fcmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DTE9TRUQ7XG4gICAgICB0aGlzLmVtaXQoJ2Nsb3NlJywgdGhpcy5fY2xvc2VDb2RlLCB0aGlzLl9jbG9zZU1lc3NhZ2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKSB7XG4gICAgICB0aGlzLl9leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdLmNsZWFudXAoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZWNlaXZlci5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9yZWFkeVN0YXRlID0gV2ViU29ja2V0LkNMT1NFRDtcbiAgICB0aGlzLmVtaXQoJ2Nsb3NlJywgdGhpcy5fY2xvc2VDb2RlLCB0aGlzLl9jbG9zZU1lc3NhZ2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGEgY2xvc2luZyBoYW5kc2hha2UuXG4gICAqXG4gICAqICAgICAgICAgICstLS0tLS0tLS0tKyAgICstLS0tLS0tLS0tLSsgICArLS0tLS0tLS0tLStcbiAgICogICAgIC0gLSAtfHdzLmNsb3NlKCl8LS0+fGNsb3NlIGZyYW1lfC0tPnx3cy5jbG9zZSgpfC0gLSAtXG4gICAqICAgIHwgICAgICstLS0tLS0tLS0tKyAgICstLS0tLS0tLS0tLSsgICArLS0tLS0tLS0tLSsgICAgIHxcbiAgICogICAgICAgICAgKy0tLS0tLS0tLS0rICAgKy0tLS0tLS0tLS0tKyAgICAgICAgIHxcbiAgICogQ0xPU0lORyAgfHdzLmNsb3NlKCl8PC0tfGNsb3NlIGZyYW1lfDwtLSstLS0tLSsgICAgICAgQ0xPU0lOR1xuICAgKiAgICAgICAgICArLS0tLS0tLS0tLSsgICArLS0tLS0tLS0tLS0rICAgfFxuICAgKiAgICB8ICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgfCAgICstLS0rICAgICAgICB8XG4gICAqICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rLS0+fGZpbnwgLSAtIC0gLVxuICAgKiAgICB8ICAgICAgICAgKy0tLSsgICAgICAgICAgICAgICAgICAgICAgfCAgICstLS0rXG4gICAqICAgICAtIC0gLSAtIC18ZmlufDwtLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gICAqICAgICAgICAgICAgICArLS0tK1xuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gW2NvZGVdIFN0YXR1cyBjb2RlIGV4cGxhaW5pbmcgd2h5IHRoZSBjb25uZWN0aW9uIGlzIGNsb3NpbmdcbiAgICogQHBhcmFtIHsoU3RyaW5nfEJ1ZmZlcil9IFtkYXRhXSBUaGUgcmVhc29uIHdoeSB0aGUgY29ubmVjdGlvbiBpc1xuICAgKiAgICAgY2xvc2luZ1xuICAgKiBAcHVibGljXG4gICAqL1xuICBjbG9zZShjb2RlLCBkYXRhKSB7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NFRCkgcmV0dXJuO1xuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HKSB7XG4gICAgICBjb25zdCBtc2cgPSAnV2ViU29ja2V0IHdhcyBjbG9zZWQgYmVmb3JlIHRoZSBjb25uZWN0aW9uIHdhcyBlc3RhYmxpc2hlZCc7XG4gICAgICByZXR1cm4gYWJvcnRIYW5kc2hha2UodGhpcywgdGhpcy5fcmVxLCBtc2cpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DTE9TSU5HKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuX2Nsb3NlRnJhbWVTZW50ICYmXG4gICAgICAgICh0aGlzLl9jbG9zZUZyYW1lUmVjZWl2ZWQgfHwgdGhpcy5fcmVjZWl2ZXIuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX3NvY2tldC5lbmQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0lORztcbiAgICB0aGlzLl9zZW5kZXIuY2xvc2UoY29kZSwgZGF0YSwgIXRoaXMuX2lzU2VydmVyLCAoZXJyKSA9PiB7XG4gICAgICAvL1xuICAgICAgLy8gVGhpcyBlcnJvciBpcyBoYW5kbGVkIGJ5IHRoZSBgJ2Vycm9yJ2AgbGlzdGVuZXIgb24gdGhlIHNvY2tldC4gV2Ugb25seVxuICAgICAgLy8gd2FudCB0byBrbm93IGlmIHRoZSBjbG9zZSBmcmFtZSBoYXMgYmVlbiBzZW50IGhlcmUuXG4gICAgICAvL1xuICAgICAgaWYgKGVycikgcmV0dXJuO1xuXG4gICAgICB0aGlzLl9jbG9zZUZyYW1lU2VudCA9IHRydWU7XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5fY2xvc2VGcmFtZVJlY2VpdmVkIHx8XG4gICAgICAgIHRoaXMuX3JlY2VpdmVyLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZFxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX3NvY2tldC5lbmQoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vXG4gICAgLy8gU3BlY2lmeSBhIHRpbWVvdXQgZm9yIHRoZSBjbG9zaW5nIGhhbmRzaGFrZSB0byBjb21wbGV0ZS5cbiAgICAvL1xuICAgIHRoaXMuX2Nsb3NlVGltZXIgPSBzZXRUaW1lb3V0KFxuICAgICAgdGhpcy5fc29ja2V0LmRlc3Ryb3kuYmluZCh0aGlzLl9zb2NrZXQpLFxuICAgICAgY2xvc2VUaW1lb3V0XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXVzZSB0aGUgc29ja2V0LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBwYXVzZSgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HIHx8XG4gICAgICB0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DTE9TRURcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wYXVzZWQgPSB0cnVlO1xuICAgIHRoaXMuX3NvY2tldC5wYXVzZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgYSBwaW5nLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IFtkYXRhXSBUaGUgZGF0YSB0byBzZW5kXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW21hc2tdIEluZGljYXRlcyB3aGV0aGVyIG9yIG5vdCB0byBtYXNrIGBkYXRhYFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdIENhbGxiYWNrIHdoaWNoIGlzIGV4ZWN1dGVkIHdoZW4gdGhlIHBpbmcgaXMgc2VudFxuICAgKiBAcHVibGljXG4gICAqL1xuICBwaW5nKGRhdGEsIG1hc2ssIGNiKSB7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNPTk5FQ1RJTkcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0IGlzIG5vdCBvcGVuOiByZWFkeVN0YXRlIDAgKENPTk5FQ1RJTkcpJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYiA9IGRhdGE7XG4gICAgICBkYXRhID0gbWFzayA9IHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtYXNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYiA9IG1hc2s7XG4gICAgICBtYXNrID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ251bWJlcicpIGRhdGEgPSBkYXRhLnRvU3RyaW5nKCk7XG5cbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgc2VuZEFmdGVyQ2xvc2UodGhpcywgZGF0YSwgY2IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChtYXNrID09PSB1bmRlZmluZWQpIG1hc2sgPSAhdGhpcy5faXNTZXJ2ZXI7XG4gICAgdGhpcy5fc2VuZGVyLnBpbmcoZGF0YSB8fCBFTVBUWV9CVUZGRVIsIG1hc2ssIGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIGEgcG9uZy5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBbZGF0YV0gVGhlIGRhdGEgdG8gc2VuZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFttYXNrXSBJbmRpY2F0ZXMgd2hldGhlciBvciBub3QgdG8gbWFzayBgZGF0YWBcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXSBDYWxsYmFjayB3aGljaCBpcyBleGVjdXRlZCB3aGVuIHRoZSBwb25nIGlzIHNlbnRcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcG9uZyhkYXRhLCBtYXNrLCBjYikge1xuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlNvY2tldCBpcyBub3Qgb3BlbjogcmVhZHlTdGF0ZSAwIChDT05ORUNUSU5HKScpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2IgPSBkYXRhO1xuICAgICAgZGF0YSA9IG1hc2sgPSB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbWFzayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2IgPSBtYXNrO1xuICAgICAgbWFzayA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdudW1iZXInKSBkYXRhID0gZGF0YS50b1N0cmluZygpO1xuXG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgIHNlbmRBZnRlckNsb3NlKHRoaXMsIGRhdGEsIGNiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobWFzayA9PT0gdW5kZWZpbmVkKSBtYXNrID0gIXRoaXMuX2lzU2VydmVyO1xuICAgIHRoaXMuX3NlbmRlci5wb25nKGRhdGEgfHwgRU1QVFlfQlVGRkVSLCBtYXNrLCBjYik7XG4gIH1cblxuICAvKipcbiAgICogUmVzdW1lIHRoZSBzb2NrZXQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHJlc3VtZSgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HIHx8XG4gICAgICB0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DTE9TRURcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wYXVzZWQgPSBmYWxzZTtcbiAgICBpZiAoIXRoaXMuX3JlY2VpdmVyLl93cml0YWJsZVN0YXRlLm5lZWREcmFpbikgdGhpcy5fc29ja2V0LnJlc3VtZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgYSBkYXRhIG1lc3NhZ2UuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZGF0YSBUaGUgbWVzc2FnZSB0byBzZW5kXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucyBvYmplY3RcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5iaW5hcnldIFNwZWNpZmllcyB3aGV0aGVyIGBkYXRhYCBpcyBiaW5hcnkgb3JcbiAgICogICAgIHRleHRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5jb21wcmVzc10gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIGNvbXByZXNzXG4gICAqICAgICBgZGF0YWBcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5maW49dHJ1ZV0gU3BlY2lmaWVzIHdoZXRoZXIgdGhlIGZyYWdtZW50IGlzIHRoZVxuICAgKiAgICAgbGFzdCBvbmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5tYXNrXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gbWFzayBgZGF0YWBcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXSBDYWxsYmFjayB3aGljaCBpcyBleGVjdXRlZCB3aGVuIGRhdGEgaXMgd3JpdHRlbiBvdXRcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2VuZChkYXRhLCBvcHRpb25zLCBjYikge1xuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlNvY2tldCBpcyBub3Qgb3BlbjogcmVhZHlTdGF0ZSAwIChDT05ORUNUSU5HKScpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2IgPSBvcHRpb25zO1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ251bWJlcicpIGRhdGEgPSBkYXRhLnRvU3RyaW5nKCk7XG5cbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgc2VuZEFmdGVyQ2xvc2UodGhpcywgZGF0YSwgY2IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICBiaW5hcnk6IHR5cGVvZiBkYXRhICE9PSAnc3RyaW5nJyxcbiAgICAgIG1hc2s6ICF0aGlzLl9pc1NlcnZlcixcbiAgICAgIGNvbXByZXNzOiB0cnVlLFxuICAgICAgZmluOiB0cnVlLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH07XG5cbiAgICBpZiAoIXRoaXMuX2V4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0pIHtcbiAgICAgIG9wdHMuY29tcHJlc3MgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZW5kZXIuc2VuZChkYXRhIHx8IEVNUFRZX0JVRkZFUiwgb3B0cywgY2IpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcmNpYmx5IGNsb3NlIHRoZSBjb25uZWN0aW9uLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICB0ZXJtaW5hdGUoKSB7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NFRCkgcmV0dXJuO1xuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HKSB7XG4gICAgICBjb25zdCBtc2cgPSAnV2ViU29ja2V0IHdhcyBjbG9zZWQgYmVmb3JlIHRoZSBjb25uZWN0aW9uIHdhcyBlc3RhYmxpc2hlZCc7XG4gICAgICByZXR1cm4gYWJvcnRIYW5kc2hha2UodGhpcywgdGhpcy5fcmVxLCBtc2cpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zb2NrZXQpIHtcbiAgICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0lORztcbiAgICAgIHRoaXMuX3NvY2tldC5kZXN0cm95KCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQGNvbnN0YW50IHtOdW1iZXJ9IENPTk5FQ1RJTkdcbiAqIEBtZW1iZXJvZiBXZWJTb2NrZXRcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFdlYlNvY2tldCwgJ0NPTk5FQ1RJTkcnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIHZhbHVlOiByZWFkeVN0YXRlcy5pbmRleE9mKCdDT05ORUNUSU5HJylcbn0pO1xuXG4vKipcbiAqIEBjb25zdGFudCB7TnVtYmVyfSBDT05ORUNUSU5HXG4gKiBAbWVtYmVyb2YgV2ViU29ja2V0LnByb3RvdHlwZVxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV2ViU29ja2V0LnByb3RvdHlwZSwgJ0NPTk5FQ1RJTkcnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIHZhbHVlOiByZWFkeVN0YXRlcy5pbmRleE9mKCdDT05ORUNUSU5HJylcbn0pO1xuXG4vKipcbiAqIEBjb25zdGFudCB7TnVtYmVyfSBPUEVOXG4gKiBAbWVtYmVyb2YgV2ViU29ja2V0XG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJTb2NrZXQsICdPUEVOJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICB2YWx1ZTogcmVhZHlTdGF0ZXMuaW5kZXhPZignT1BFTicpXG59KTtcblxuLyoqXG4gKiBAY29uc3RhbnQge051bWJlcn0gT1BFTlxuICogQG1lbWJlcm9mIFdlYlNvY2tldC5wcm90b3R5cGVcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFdlYlNvY2tldC5wcm90b3R5cGUsICdPUEVOJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICB2YWx1ZTogcmVhZHlTdGF0ZXMuaW5kZXhPZignT1BFTicpXG59KTtcblxuLyoqXG4gKiBAY29uc3RhbnQge051bWJlcn0gQ0xPU0lOR1xuICogQG1lbWJlcm9mIFdlYlNvY2tldFxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV2ViU29ja2V0LCAnQ0xPU0lORycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgdmFsdWU6IHJlYWR5U3RhdGVzLmluZGV4T2YoJ0NMT1NJTkcnKVxufSk7XG5cbi8qKlxuICogQGNvbnN0YW50IHtOdW1iZXJ9IENMT1NJTkdcbiAqIEBtZW1iZXJvZiBXZWJTb2NrZXQucHJvdG90eXBlXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJTb2NrZXQucHJvdG90eXBlLCAnQ0xPU0lORycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgdmFsdWU6IHJlYWR5U3RhdGVzLmluZGV4T2YoJ0NMT1NJTkcnKVxufSk7XG5cbi8qKlxuICogQGNvbnN0YW50IHtOdW1iZXJ9IENMT1NFRFxuICogQG1lbWJlcm9mIFdlYlNvY2tldFxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV2ViU29ja2V0LCAnQ0xPU0VEJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICB2YWx1ZTogcmVhZHlTdGF0ZXMuaW5kZXhPZignQ0xPU0VEJylcbn0pO1xuXG4vKipcbiAqIEBjb25zdGFudCB7TnVtYmVyfSBDTE9TRURcbiAqIEBtZW1iZXJvZiBXZWJTb2NrZXQucHJvdG90eXBlXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJTb2NrZXQucHJvdG90eXBlLCAnQ0xPU0VEJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICB2YWx1ZTogcmVhZHlTdGF0ZXMuaW5kZXhPZignQ0xPU0VEJylcbn0pO1xuXG5bXG4gICdiaW5hcnlUeXBlJyxcbiAgJ2J1ZmZlcmVkQW1vdW50JyxcbiAgJ2V4dGVuc2lvbnMnLFxuICAnaXNQYXVzZWQnLFxuICAncHJvdG9jb2wnLFxuICAncmVhZHlTdGF0ZScsXG4gICd1cmwnXG5dLmZvckVhY2goKHByb3BlcnR5KSA9PiB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJTb2NrZXQucHJvdG90eXBlLCBwcm9wZXJ0eSwgeyBlbnVtZXJhYmxlOiB0cnVlIH0pO1xufSk7XG5cbi8vXG4vLyBBZGQgdGhlIGBvbm9wZW5gLCBgb25lcnJvcmAsIGBvbmNsb3NlYCwgYW5kIGBvbm1lc3NhZ2VgIGF0dHJpYnV0ZXMuXG4vLyBTZWUgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvY29tbXMuaHRtbCN0aGUtd2Vic29ja2V0LWludGVyZmFjZVxuLy9cblsnb3BlbicsICdlcnJvcicsICdjbG9zZScsICdtZXNzYWdlJ10uZm9yRWFjaCgobWV0aG9kKSA9PiB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJTb2NrZXQucHJvdG90eXBlLCBgb24ke21ldGhvZH1gLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQoKSB7XG4gICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMubGlzdGVuZXJzKG1ldGhvZCkpIHtcbiAgICAgICAgaWYgKGxpc3RlbmVyW2tGb3JPbkV2ZW50QXR0cmlidXRlXSkgcmV0dXJuIGxpc3RlbmVyW2tMaXN0ZW5lcl07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgc2V0KGhhbmRsZXIpIHtcbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5saXN0ZW5lcnMobWV0aG9kKSkge1xuICAgICAgICBpZiAobGlzdGVuZXJba0Zvck9uRXZlbnRBdHRyaWJ1dGVdKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihtZXRob2QsIGxpc3RlbmVyKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHJldHVybjtcblxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKG1ldGhvZCwgaGFuZGxlciwge1xuICAgICAgICBba0Zvck9uRXZlbnRBdHRyaWJ1dGVdOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbldlYlNvY2tldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGFkZEV2ZW50TGlzdGVuZXI7XG5XZWJTb2NrZXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSByZW1vdmVFdmVudExpc3RlbmVyO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFdlYlNvY2tldDtcblxuLyoqXG4gKiBJbml0aWFsaXplIGEgV2ViU29ja2V0IGNsaWVudC5cbiAqXG4gKiBAcGFyYW0ge1dlYlNvY2tldH0gd2Vic29ja2V0IFRoZSBjbGllbnQgdG8gaW5pdGlhbGl6ZVxuICogQHBhcmFtIHsoU3RyaW5nfFVSTCl9IGFkZHJlc3MgVGhlIFVSTCB0byB3aGljaCB0byBjb25uZWN0XG4gKiBAcGFyYW0ge0FycmF5fSBwcm90b2NvbHMgVGhlIHN1YnByb3RvY29sc1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBDb25uZWN0aW9uIG9wdGlvbnNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZm9sbG93UmVkaXJlY3RzPWZhbHNlXSBXaGV0aGVyIG9yIG5vdCB0byBmb2xsb3dcbiAqICAgICByZWRpcmVjdHNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmdlbmVyYXRlTWFza10gVGhlIGZ1bmN0aW9uIHVzZWQgdG8gZ2VuZXJhdGUgdGhlXG4gKiAgICAgbWFza2luZyBrZXlcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5oYW5kc2hha2VUaW1lb3V0XSBUaW1lb3V0IGluIG1pbGxpc2Vjb25kcyBmb3IgdGhlXG4gKiAgICAgaGFuZHNoYWtlIHJlcXVlc3RcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5tYXhQYXlsb2FkPTEwNDg1NzYwMF0gVGhlIG1heGltdW0gYWxsb3dlZCBtZXNzYWdlXG4gKiAgICAgc2l6ZVxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLm1heFJlZGlyZWN0cz0xMF0gVGhlIG1heGltdW0gbnVtYmVyIG9mIHJlZGlyZWN0c1xuICogICAgIGFsbG93ZWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5vcmlnaW5dIFZhbHVlIG9mIHRoZSBgT3JpZ2luYCBvclxuICogICAgIGBTZWMtV2ViU29ja2V0LU9yaWdpbmAgaGVhZGVyXG4gKiBAcGFyYW0geyhCb29sZWFufE9iamVjdCl9IFtvcHRpb25zLnBlck1lc3NhZ2VEZWZsYXRlPXRydWVdIEVuYWJsZS9kaXNhYmxlXG4gKiAgICAgcGVybWVzc2FnZS1kZWZsYXRlXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMucHJvdG9jb2xWZXJzaW9uPTEzXSBWYWx1ZSBvZiB0aGVcbiAqICAgICBgU2VjLVdlYlNvY2tldC1WZXJzaW9uYCBoZWFkZXJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuc2tpcFVURjhWYWxpZGF0aW9uPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvclxuICogICAgIG5vdCB0byBza2lwIFVURi04IHZhbGlkYXRpb24gZm9yIHRleHQgYW5kIGNsb3NlIG1lc3NhZ2VzXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpbml0QXNDbGllbnQod2Vic29ja2V0LCBhZGRyZXNzLCBwcm90b2NvbHMsIG9wdGlvbnMpIHtcbiAgY29uc3Qgb3B0cyA9IHtcbiAgICBwcm90b2NvbFZlcnNpb246IHByb3RvY29sVmVyc2lvbnNbMV0sXG4gICAgbWF4UGF5bG9hZDogMTAwICogMTAyNCAqIDEwMjQsXG4gICAgc2tpcFVURjhWYWxpZGF0aW9uOiBmYWxzZSxcbiAgICBwZXJNZXNzYWdlRGVmbGF0ZTogdHJ1ZSxcbiAgICBmb2xsb3dSZWRpcmVjdHM6IGZhbHNlLFxuICAgIG1heFJlZGlyZWN0czogMTAsXG4gICAgLi4ub3B0aW9ucyxcbiAgICBjcmVhdGVDb25uZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgc29ja2V0UGF0aDogdW5kZWZpbmVkLFxuICAgIGhvc3RuYW1lOiB1bmRlZmluZWQsXG4gICAgcHJvdG9jb2w6IHVuZGVmaW5lZCxcbiAgICB0aW1lb3V0OiB1bmRlZmluZWQsXG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBob3N0OiB1bmRlZmluZWQsXG4gICAgcGF0aDogdW5kZWZpbmVkLFxuICAgIHBvcnQ6IHVuZGVmaW5lZFxuICB9O1xuXG4gIGlmICghcHJvdG9jb2xWZXJzaW9ucy5pbmNsdWRlcyhvcHRzLnByb3RvY29sVmVyc2lvbikpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcbiAgICAgIGBVbnN1cHBvcnRlZCBwcm90b2NvbCB2ZXJzaW9uOiAke29wdHMucHJvdG9jb2xWZXJzaW9ufSBgICtcbiAgICAgICAgYChzdXBwb3J0ZWQgdmVyc2lvbnM6ICR7cHJvdG9jb2xWZXJzaW9ucy5qb2luKCcsICcpfSlgXG4gICAgKTtcbiAgfVxuXG4gIGxldCBwYXJzZWRVcmw7XG5cbiAgaWYgKGFkZHJlc3MgaW5zdGFuY2VvZiBVUkwpIHtcbiAgICBwYXJzZWRVcmwgPSBhZGRyZXNzO1xuICAgIHdlYnNvY2tldC5fdXJsID0gYWRkcmVzcy5ocmVmO1xuICB9IGVsc2Uge1xuICAgIHRyeSB7XG4gICAgICBwYXJzZWRVcmwgPSBuZXcgVVJMKGFkZHJlc3MpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgSW52YWxpZCBVUkw6ICR7YWRkcmVzc31gKTtcbiAgICB9XG5cbiAgICB3ZWJzb2NrZXQuX3VybCA9IGFkZHJlc3M7XG4gIH1cblxuICBjb25zdCBpc1NlY3VyZSA9IHBhcnNlZFVybC5wcm90b2NvbCA9PT0gJ3dzczonO1xuICBjb25zdCBpc1VuaXhTb2NrZXQgPSBwYXJzZWRVcmwucHJvdG9jb2wgPT09ICd3cyt1bml4Oic7XG4gIGxldCBpbnZhbGlkVVJMTWVzc2FnZTtcblxuICBpZiAocGFyc2VkVXJsLnByb3RvY29sICE9PSAnd3M6JyAmJiAhaXNTZWN1cmUgJiYgIWlzVW5peFNvY2tldCkge1xuICAgIGludmFsaWRVUkxNZXNzYWdlID1cbiAgICAgICdUaGUgVVJMXFwncyBwcm90b2NvbCBtdXN0IGJlIG9uZSBvZiBcIndzOlwiLCBcIndzczpcIiwgb3IgXCJ3cyt1bml4OlwiJztcbiAgfSBlbHNlIGlmIChpc1VuaXhTb2NrZXQgJiYgIXBhcnNlZFVybC5wYXRobmFtZSkge1xuICAgIGludmFsaWRVUkxNZXNzYWdlID0gXCJUaGUgVVJMJ3MgcGF0aG5hbWUgaXMgZW1wdHlcIjtcbiAgfSBlbHNlIGlmIChwYXJzZWRVcmwuaGFzaCkge1xuICAgIGludmFsaWRVUkxNZXNzYWdlID0gJ1RoZSBVUkwgY29udGFpbnMgYSBmcmFnbWVudCBpZGVudGlmaWVyJztcbiAgfVxuXG4gIGlmIChpbnZhbGlkVVJMTWVzc2FnZSkge1xuICAgIGNvbnN0IGVyciA9IG5ldyBTeW50YXhFcnJvcihpbnZhbGlkVVJMTWVzc2FnZSk7XG5cbiAgICBpZiAod2Vic29ja2V0Ll9yZWRpcmVjdHMgPT09IDApIHtcbiAgICAgIHRocm93IGVycjtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1pdEVycm9yQW5kQ2xvc2Uod2Vic29ja2V0LCBlcnIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGRlZmF1bHRQb3J0ID0gaXNTZWN1cmUgPyA0NDMgOiA4MDtcbiAgY29uc3Qga2V5ID0gcmFuZG9tQnl0ZXMoMTYpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgY29uc3QgcmVxdWVzdCA9IGlzU2VjdXJlID8gaHR0cHMucmVxdWVzdCA6IGh0dHAucmVxdWVzdDtcbiAgY29uc3QgcHJvdG9jb2xTZXQgPSBuZXcgU2V0KCk7XG4gIGxldCBwZXJNZXNzYWdlRGVmbGF0ZTtcblxuICBvcHRzLmNyZWF0ZUNvbm5lY3Rpb24gPSBpc1NlY3VyZSA/IHRsc0Nvbm5lY3QgOiBuZXRDb25uZWN0O1xuICBvcHRzLmRlZmF1bHRQb3J0ID0gb3B0cy5kZWZhdWx0UG9ydCB8fCBkZWZhdWx0UG9ydDtcbiAgb3B0cy5wb3J0ID0gcGFyc2VkVXJsLnBvcnQgfHwgZGVmYXVsdFBvcnQ7XG4gIG9wdHMuaG9zdCA9IHBhcnNlZFVybC5ob3N0bmFtZS5zdGFydHNXaXRoKCdbJylcbiAgICA/IHBhcnNlZFVybC5ob3N0bmFtZS5zbGljZSgxLCAtMSlcbiAgICA6IHBhcnNlZFVybC5ob3N0bmFtZTtcbiAgb3B0cy5oZWFkZXJzID0ge1xuICAgICdTZWMtV2ViU29ja2V0LVZlcnNpb24nOiBvcHRzLnByb3RvY29sVmVyc2lvbixcbiAgICAnU2VjLVdlYlNvY2tldC1LZXknOiBrZXksXG4gICAgQ29ubmVjdGlvbjogJ1VwZ3JhZGUnLFxuICAgIFVwZ3JhZGU6ICd3ZWJzb2NrZXQnLFxuICAgIC4uLm9wdHMuaGVhZGVyc1xuICB9O1xuICBvcHRzLnBhdGggPSBwYXJzZWRVcmwucGF0aG5hbWUgKyBwYXJzZWRVcmwuc2VhcmNoO1xuICBvcHRzLnRpbWVvdXQgPSBvcHRzLmhhbmRzaGFrZVRpbWVvdXQ7XG5cbiAgaWYgKG9wdHMucGVyTWVzc2FnZURlZmxhdGUpIHtcbiAgICBwZXJNZXNzYWdlRGVmbGF0ZSA9IG5ldyBQZXJNZXNzYWdlRGVmbGF0ZShcbiAgICAgIG9wdHMucGVyTWVzc2FnZURlZmxhdGUgIT09IHRydWUgPyBvcHRzLnBlck1lc3NhZ2VEZWZsYXRlIDoge30sXG4gICAgICBmYWxzZSxcbiAgICAgIG9wdHMubWF4UGF5bG9hZFxuICAgICk7XG4gICAgb3B0cy5oZWFkZXJzWydTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnMnXSA9IGZvcm1hdCh7XG4gICAgICBbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV06IHBlck1lc3NhZ2VEZWZsYXRlLm9mZmVyKClcbiAgICB9KTtcbiAgfVxuICBpZiAocHJvdG9jb2xzLmxlbmd0aCkge1xuICAgIGZvciAoY29uc3QgcHJvdG9jb2wgb2YgcHJvdG9jb2xzKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBwcm90b2NvbCAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgIXN1YnByb3RvY29sUmVnZXgudGVzdChwcm90b2NvbCkgfHxcbiAgICAgICAgcHJvdG9jb2xTZXQuaGFzKHByb3RvY29sKVxuICAgICAgKSB7XG4gICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcbiAgICAgICAgICAnQW4gaW52YWxpZCBvciBkdXBsaWNhdGVkIHN1YnByb3RvY29sIHdhcyBzcGVjaWZpZWQnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHByb3RvY29sU2V0LmFkZChwcm90b2NvbCk7XG4gICAgfVxuXG4gICAgb3B0cy5oZWFkZXJzWydTZWMtV2ViU29ja2V0LVByb3RvY29sJ10gPSBwcm90b2NvbHMuam9pbignLCcpO1xuICB9XG4gIGlmIChvcHRzLm9yaWdpbikge1xuICAgIGlmIChvcHRzLnByb3RvY29sVmVyc2lvbiA8IDEzKSB7XG4gICAgICBvcHRzLmhlYWRlcnNbJ1NlYy1XZWJTb2NrZXQtT3JpZ2luJ10gPSBvcHRzLm9yaWdpbjtcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0cy5oZWFkZXJzLk9yaWdpbiA9IG9wdHMub3JpZ2luO1xuICAgIH1cbiAgfVxuICBpZiAocGFyc2VkVXJsLnVzZXJuYW1lIHx8IHBhcnNlZFVybC5wYXNzd29yZCkge1xuICAgIG9wdHMuYXV0aCA9IGAke3BhcnNlZFVybC51c2VybmFtZX06JHtwYXJzZWRVcmwucGFzc3dvcmR9YDtcbiAgfVxuXG4gIGlmIChpc1VuaXhTb2NrZXQpIHtcbiAgICBjb25zdCBwYXJ0cyA9IG9wdHMucGF0aC5zcGxpdCgnOicpO1xuXG4gICAgb3B0cy5zb2NrZXRQYXRoID0gcGFydHNbMF07XG4gICAgb3B0cy5wYXRoID0gcGFydHNbMV07XG4gIH1cblxuICBsZXQgcmVxO1xuXG4gIGlmIChvcHRzLmZvbGxvd1JlZGlyZWN0cykge1xuICAgIGlmICh3ZWJzb2NrZXQuX3JlZGlyZWN0cyA9PT0gMCkge1xuICAgICAgd2Vic29ja2V0Ll9vcmlnaW5hbFNlY3VyZSA9IGlzU2VjdXJlO1xuICAgICAgd2Vic29ja2V0Ll9vcmlnaW5hbEhvc3QgPSBwYXJzZWRVcmwuaG9zdDtcblxuICAgICAgY29uc3QgaGVhZGVycyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5oZWFkZXJzO1xuXG4gICAgICAvL1xuICAgICAgLy8gU2hhbGxvdyBjb3B5IHRoZSB1c2VyIHByb3ZpZGVkIG9wdGlvbnMgc28gdGhhdCBoZWFkZXJzIGNhbiBiZSBjaGFuZ2VkXG4gICAgICAvLyB3aXRob3V0IG11dGF0aW5nIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAvL1xuICAgICAgb3B0aW9ucyA9IHsgLi4ub3B0aW9ucywgaGVhZGVyczoge30gfTtcblxuICAgICAgaWYgKGhlYWRlcnMpIHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoaGVhZGVycykpIHtcbiAgICAgICAgICBvcHRpb25zLmhlYWRlcnNba2V5LnRvTG93ZXJDYXNlKCldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHdlYnNvY2tldC5saXN0ZW5lckNvdW50KCdyZWRpcmVjdCcpID09PSAwKSB7XG4gICAgICBjb25zdCBpc1NhbWVIb3N0ID0gcGFyc2VkVXJsLmhvc3QgPT09IHdlYnNvY2tldC5fb3JpZ2luYWxIb3N0O1xuXG4gICAgICBpZiAoIWlzU2FtZUhvc3QgfHwgKHdlYnNvY2tldC5fb3JpZ2luYWxTZWN1cmUgJiYgIWlzU2VjdXJlKSkge1xuICAgICAgICAvL1xuICAgICAgICAvLyBNYXRjaCBjdXJsIDcuNzcuMCBiZWhhdmlvciBhbmQgZHJvcCB0aGUgZm9sbG93aW5nIGhlYWRlcnMuIFRoZXNlXG4gICAgICAgIC8vIGhlYWRlcnMgYXJlIGFsc28gZHJvcHBlZCB3aGVuIGZvbGxvd2luZyBhIHJlZGlyZWN0IHRvIGEgc3ViZG9tYWluLlxuICAgICAgICAvL1xuICAgICAgICBkZWxldGUgb3B0cy5oZWFkZXJzLmF1dGhvcml6YXRpb247XG4gICAgICAgIGRlbGV0ZSBvcHRzLmhlYWRlcnMuY29va2llO1xuXG4gICAgICAgIGlmICghaXNTYW1lSG9zdCkgZGVsZXRlIG9wdHMuaGVhZGVycy5ob3N0O1xuXG4gICAgICAgIG9wdHMuYXV0aCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIE1hdGNoIGN1cmwgNy43Ny4wIGJlaGF2aW9yIGFuZCBtYWtlIHRoZSBmaXJzdCBgQXV0aG9yaXphdGlvbmAgaGVhZGVyIHdpbi5cbiAgICAvLyBJZiB0aGUgYEF1dGhvcml6YXRpb25gIGhlYWRlciBpcyBzZXQsIHRoZW4gdGhlcmUgaXMgbm90aGluZyB0byBkbyBhcyBpdFxuICAgIC8vIHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuICAgIC8vXG4gICAgaWYgKG9wdHMuYXV0aCAmJiAhb3B0aW9ucy5oZWFkZXJzLmF1dGhvcml6YXRpb24pIHtcbiAgICAgIG9wdGlvbnMuaGVhZGVycy5hdXRob3JpemF0aW9uID1cbiAgICAgICAgJ0Jhc2ljICcgKyBCdWZmZXIuZnJvbShvcHRzLmF1dGgpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICB9XG5cbiAgICByZXEgPSB3ZWJzb2NrZXQuX3JlcSA9IHJlcXVlc3Qob3B0cyk7XG5cbiAgICBpZiAod2Vic29ja2V0Ll9yZWRpcmVjdHMpIHtcbiAgICAgIC8vXG4gICAgICAvLyBVbmxpa2Ugd2hhdCBpcyBkb25lIGZvciB0aGUgYCd1cGdyYWRlJ2AgZXZlbnQsIG5vIGVhcmx5IGV4aXQgaXNcbiAgICAgIC8vIHRyaWdnZXJlZCBoZXJlIGlmIHRoZSB1c2VyIGNhbGxzIGB3ZWJzb2NrZXQuY2xvc2UoKWAgb3JcbiAgICAgIC8vIGB3ZWJzb2NrZXQudGVybWluYXRlKClgIGZyb20gYSBsaXN0ZW5lciBvZiB0aGUgYCdyZWRpcmVjdCdgIGV2ZW50LiBUaGlzXG4gICAgICAvLyBpcyBiZWNhdXNlIHRoZSB1c2VyIGNhbiBhbHNvIGNhbGwgYHJlcXVlc3QuZGVzdHJveSgpYCB3aXRoIGFuIGVycm9yXG4gICAgICAvLyBiZWZvcmUgY2FsbGluZyBgd2Vic29ja2V0LmNsb3NlKClgIG9yIGB3ZWJzb2NrZXQudGVybWluYXRlKClgIGFuZCB0aGlzXG4gICAgICAvLyB3b3VsZCByZXN1bHQgaW4gYW4gZXJyb3IgYmVpbmcgZW1pdHRlZCBvbiB0aGUgYHJlcXVlc3RgIG9iamVjdCB3aXRoIG5vXG4gICAgICAvLyBgJ2Vycm9yJ2AgZXZlbnQgbGlzdGVuZXJzIGF0dGFjaGVkLlxuICAgICAgLy9cbiAgICAgIHdlYnNvY2tldC5lbWl0KCdyZWRpcmVjdCcsIHdlYnNvY2tldC51cmwsIHJlcSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlcSA9IHdlYnNvY2tldC5fcmVxID0gcmVxdWVzdChvcHRzKTtcbiAgfVxuXG4gIGlmIChvcHRzLnRpbWVvdXQpIHtcbiAgICByZXEub24oJ3RpbWVvdXQnLCAoKSA9PiB7XG4gICAgICBhYm9ydEhhbmRzaGFrZSh3ZWJzb2NrZXQsIHJlcSwgJ09wZW5pbmcgaGFuZHNoYWtlIGhhcyB0aW1lZCBvdXQnKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlcS5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgaWYgKHJlcSA9PT0gbnVsbCB8fCByZXFba0Fib3J0ZWRdKSByZXR1cm47XG5cbiAgICByZXEgPSB3ZWJzb2NrZXQuX3JlcSA9IG51bGw7XG4gICAgZW1pdEVycm9yQW5kQ2xvc2Uod2Vic29ja2V0LCBlcnIpO1xuICB9KTtcblxuICByZXEub24oJ3Jlc3BvbnNlJywgKHJlcykgPT4ge1xuICAgIGNvbnN0IGxvY2F0aW9uID0gcmVzLmhlYWRlcnMubG9jYXRpb247XG4gICAgY29uc3Qgc3RhdHVzQ29kZSA9IHJlcy5zdGF0dXNDb2RlO1xuXG4gICAgaWYgKFxuICAgICAgbG9jYXRpb24gJiZcbiAgICAgIG9wdHMuZm9sbG93UmVkaXJlY3RzICYmXG4gICAgICBzdGF0dXNDb2RlID49IDMwMCAmJlxuICAgICAgc3RhdHVzQ29kZSA8IDQwMFxuICAgICkge1xuICAgICAgaWYgKCsrd2Vic29ja2V0Ll9yZWRpcmVjdHMgPiBvcHRzLm1heFJlZGlyZWN0cykge1xuICAgICAgICBhYm9ydEhhbmRzaGFrZSh3ZWJzb2NrZXQsIHJlcSwgJ01heGltdW0gcmVkaXJlY3RzIGV4Y2VlZGVkJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVxLmFib3J0KCk7XG5cbiAgICAgIGxldCBhZGRyO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhZGRyID0gbmV3IFVSTChsb2NhdGlvbiwgYWRkcmVzcyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnN0IGVyciA9IG5ldyBTeW50YXhFcnJvcihgSW52YWxpZCBVUkw6ICR7bG9jYXRpb259YCk7XG4gICAgICAgIGVtaXRFcnJvckFuZENsb3NlKHdlYnNvY2tldCwgZXJyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpbml0QXNDbGllbnQod2Vic29ja2V0LCBhZGRyLCBwcm90b2NvbHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAoIXdlYnNvY2tldC5lbWl0KCd1bmV4cGVjdGVkLXJlc3BvbnNlJywgcmVxLCByZXMpKSB7XG4gICAgICBhYm9ydEhhbmRzaGFrZShcbiAgICAgICAgd2Vic29ja2V0LFxuICAgICAgICByZXEsXG4gICAgICAgIGBVbmV4cGVjdGVkIHNlcnZlciByZXNwb25zZTogJHtyZXMuc3RhdHVzQ29kZX1gXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgcmVxLm9uKCd1cGdyYWRlJywgKHJlcywgc29ja2V0LCBoZWFkKSA9PiB7XG4gICAgd2Vic29ja2V0LmVtaXQoJ3VwZ3JhZGUnLCByZXMpO1xuXG4gICAgLy9cbiAgICAvLyBUaGUgdXNlciBtYXkgaGF2ZSBjbG9zZWQgdGhlIGNvbm5lY3Rpb24gZnJvbSBhIGxpc3RlbmVyIG9mIHRoZVxuICAgIC8vIGAndXBncmFkZSdgIGV2ZW50LlxuICAgIC8vXG4gICAgaWYgKHdlYnNvY2tldC5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuQ09OTkVDVElORykgcmV0dXJuO1xuXG4gICAgcmVxID0gd2Vic29ja2V0Ll9yZXEgPSBudWxsO1xuXG4gICAgaWYgKHJlcy5oZWFkZXJzLnVwZ3JhZGUudG9Mb3dlckNhc2UoKSAhPT0gJ3dlYnNvY2tldCcpIHtcbiAgICAgIGFib3J0SGFuZHNoYWtlKHdlYnNvY2tldCwgc29ja2V0LCAnSW52YWxpZCBVcGdyYWRlIGhlYWRlcicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGRpZ2VzdCA9IGNyZWF0ZUhhc2goJ3NoYTEnKVxuICAgICAgLnVwZGF0ZShrZXkgKyBHVUlEKVxuICAgICAgLmRpZ2VzdCgnYmFzZTY0Jyk7XG5cbiAgICBpZiAocmVzLmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQtYWNjZXB0J10gIT09IGRpZ2VzdCkge1xuICAgICAgYWJvcnRIYW5kc2hha2Uod2Vic29ja2V0LCBzb2NrZXQsICdJbnZhbGlkIFNlYy1XZWJTb2NrZXQtQWNjZXB0IGhlYWRlcicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNlcnZlclByb3QgPSByZXMuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1wcm90b2NvbCddO1xuICAgIGxldCBwcm90RXJyb3I7XG5cbiAgICBpZiAoc2VydmVyUHJvdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIXByb3RvY29sU2V0LnNpemUpIHtcbiAgICAgICAgcHJvdEVycm9yID0gJ1NlcnZlciBzZW50IGEgc3VicHJvdG9jb2wgYnV0IG5vbmUgd2FzIHJlcXVlc3RlZCc7XG4gICAgICB9IGVsc2UgaWYgKCFwcm90b2NvbFNldC5oYXMoc2VydmVyUHJvdCkpIHtcbiAgICAgICAgcHJvdEVycm9yID0gJ1NlcnZlciBzZW50IGFuIGludmFsaWQgc3VicHJvdG9jb2wnO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocHJvdG9jb2xTZXQuc2l6ZSkge1xuICAgICAgcHJvdEVycm9yID0gJ1NlcnZlciBzZW50IG5vIHN1YnByb3RvY29sJztcbiAgICB9XG5cbiAgICBpZiAocHJvdEVycm9yKSB7XG4gICAgICBhYm9ydEhhbmRzaGFrZSh3ZWJzb2NrZXQsIHNvY2tldCwgcHJvdEVycm9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc2VydmVyUHJvdCkgd2Vic29ja2V0Ll9wcm90b2NvbCA9IHNlcnZlclByb3Q7XG5cbiAgICBjb25zdCBzZWNXZWJTb2NrZXRFeHRlbnNpb25zID0gcmVzLmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQtZXh0ZW5zaW9ucyddO1xuXG4gICAgaWYgKHNlY1dlYlNvY2tldEV4dGVuc2lvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKCFwZXJNZXNzYWdlRGVmbGF0ZSkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgICAnU2VydmVyIHNlbnQgYSBTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnMgaGVhZGVyIGJ1dCBubyBleHRlbnNpb24gJyArXG4gICAgICAgICAgJ3dhcyByZXF1ZXN0ZWQnO1xuICAgICAgICBhYm9ydEhhbmRzaGFrZSh3ZWJzb2NrZXQsIHNvY2tldCwgbWVzc2FnZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IGV4dGVuc2lvbnM7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGV4dGVuc2lvbnMgPSBwYXJzZShzZWNXZWJTb2NrZXRFeHRlbnNpb25zKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gJ0ludmFsaWQgU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zIGhlYWRlcic7XG4gICAgICAgIGFib3J0SGFuZHNoYWtlKHdlYnNvY2tldCwgc29ja2V0LCBtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBleHRlbnNpb25OYW1lcyA9IE9iamVjdC5rZXlzKGV4dGVuc2lvbnMpO1xuXG4gICAgICBpZiAoXG4gICAgICAgIGV4dGVuc2lvbk5hbWVzLmxlbmd0aCAhPT0gMSB8fFxuICAgICAgICBleHRlbnNpb25OYW1lc1swXSAhPT0gUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnU2VydmVyIGluZGljYXRlZCBhbiBleHRlbnNpb24gdGhhdCB3YXMgbm90IHJlcXVlc3RlZCc7XG4gICAgICAgIGFib3J0SGFuZHNoYWtlKHdlYnNvY2tldCwgc29ja2V0LCBtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBwZXJNZXNzYWdlRGVmbGF0ZS5hY2NlcHQoZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9ICdJbnZhbGlkIFNlYy1XZWJTb2NrZXQtRXh0ZW5zaW9ucyBoZWFkZXInO1xuICAgICAgICBhYm9ydEhhbmRzaGFrZSh3ZWJzb2NrZXQsIHNvY2tldCwgbWVzc2FnZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgd2Vic29ja2V0Ll9leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdID1cbiAgICAgICAgcGVyTWVzc2FnZURlZmxhdGU7XG4gICAgfVxuXG4gICAgd2Vic29ja2V0LnNldFNvY2tldChzb2NrZXQsIGhlYWQsIHtcbiAgICAgIGdlbmVyYXRlTWFzazogb3B0cy5nZW5lcmF0ZU1hc2ssXG4gICAgICBtYXhQYXlsb2FkOiBvcHRzLm1heFBheWxvYWQsXG4gICAgICBza2lwVVRGOFZhbGlkYXRpb246IG9wdHMuc2tpcFVURjhWYWxpZGF0aW9uXG4gICAgfSk7XG4gIH0pO1xuXG4gIHJlcS5lbmQoKTtcbn1cblxuLyoqXG4gKiBFbWl0IHRoZSBgJ2Vycm9yJ2AgYW5kIGAnY2xvc2UnYCBldmVudHMuXG4gKlxuICogQHBhcmFtIHtXZWJTb2NrZXR9IHdlYnNvY2tldCBUaGUgV2ViU29ja2V0IGluc3RhbmNlXG4gKiBAcGFyYW0ge0Vycm9yfSBUaGUgZXJyb3IgdG8gZW1pdFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZW1pdEVycm9yQW5kQ2xvc2Uod2Vic29ja2V0LCBlcnIpIHtcbiAgd2Vic29ja2V0Ll9yZWFkeVN0YXRlID0gV2ViU29ja2V0LkNMT1NJTkc7XG4gIHdlYnNvY2tldC5lbWl0KCdlcnJvcicsIGVycik7XG4gIHdlYnNvY2tldC5lbWl0Q2xvc2UoKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBgbmV0LlNvY2tldGAgYW5kIGluaXRpYXRlIGEgY29ubmVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBDb25uZWN0aW9uIG9wdGlvbnNcbiAqIEByZXR1cm4ge25ldC5Tb2NrZXR9IFRoZSBuZXdseSBjcmVhdGVkIHNvY2tldCB1c2VkIHRvIHN0YXJ0IHRoZSBjb25uZWN0aW9uXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBuZXRDb25uZWN0KG9wdGlvbnMpIHtcbiAgb3B0aW9ucy5wYXRoID0gb3B0aW9ucy5zb2NrZXRQYXRoO1xuICByZXR1cm4gbmV0LmNvbm5lY3Qob3B0aW9ucyk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgYHRscy5UTFNTb2NrZXRgIGFuZCBpbml0aWF0ZSBhIGNvbm5lY3Rpb24uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQ29ubmVjdGlvbiBvcHRpb25zXG4gKiBAcmV0dXJuIHt0bHMuVExTU29ja2V0fSBUaGUgbmV3bHkgY3JlYXRlZCBzb2NrZXQgdXNlZCB0byBzdGFydCB0aGUgY29ubmVjdGlvblxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdGxzQ29ubmVjdChvcHRpb25zKSB7XG4gIG9wdGlvbnMucGF0aCA9IHVuZGVmaW5lZDtcblxuICBpZiAoIW9wdGlvbnMuc2VydmVybmFtZSAmJiBvcHRpb25zLnNlcnZlcm5hbWUgIT09ICcnKSB7XG4gICAgb3B0aW9ucy5zZXJ2ZXJuYW1lID0gbmV0LmlzSVAob3B0aW9ucy5ob3N0KSA/ICcnIDogb3B0aW9ucy5ob3N0O1xuICB9XG5cbiAgcmV0dXJuIHRscy5jb25uZWN0KG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIEFib3J0IHRoZSBoYW5kc2hha2UgYW5kIGVtaXQgYW4gZXJyb3IuXG4gKlxuICogQHBhcmFtIHtXZWJTb2NrZXR9IHdlYnNvY2tldCBUaGUgV2ViU29ja2V0IGluc3RhbmNlXG4gKiBAcGFyYW0geyhodHRwLkNsaWVudFJlcXVlc3R8bmV0LlNvY2tldHx0bHMuU29ja2V0KX0gc3RyZWFtIFRoZSByZXF1ZXN0IHRvXG4gKiAgICAgYWJvcnQgb3IgdGhlIHNvY2tldCB0byBkZXN0cm95XG4gKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWJvcnRIYW5kc2hha2Uod2Vic29ja2V0LCBzdHJlYW0sIG1lc3NhZ2UpIHtcbiAgd2Vic29ja2V0Ll9yZWFkeVN0YXRlID0gV2ViU29ja2V0LkNMT1NJTkc7XG5cbiAgY29uc3QgZXJyID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZShlcnIsIGFib3J0SGFuZHNoYWtlKTtcblxuICBpZiAoc3RyZWFtLnNldEhlYWRlcikge1xuICAgIHN0cmVhbVtrQWJvcnRlZF0gPSB0cnVlO1xuICAgIHN0cmVhbS5hYm9ydCgpO1xuXG4gICAgaWYgKHN0cmVhbS5zb2NrZXQgJiYgIXN0cmVhbS5zb2NrZXQuZGVzdHJveWVkKSB7XG4gICAgICAvL1xuICAgICAgLy8gT24gTm9kZS5qcyA+PSAxNC4zLjAgYHJlcXVlc3QuYWJvcnQoKWAgZG9lcyBub3QgZGVzdHJveSB0aGUgc29ja2V0IGlmXG4gICAgICAvLyBjYWxsZWQgYWZ0ZXIgdGhlIHJlcXVlc3QgY29tcGxldGVkLiBTZWVcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJzb2NrZXRzL3dzL2lzc3Vlcy8xODY5LlxuICAgICAgLy9cbiAgICAgIHN0cmVhbS5zb2NrZXQuZGVzdHJveSgpO1xuICAgIH1cblxuICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdEVycm9yQW5kQ2xvc2UsIHdlYnNvY2tldCwgZXJyKTtcbiAgfSBlbHNlIHtcbiAgICBzdHJlYW0uZGVzdHJveShlcnIpO1xuICAgIHN0cmVhbS5vbmNlKCdlcnJvcicsIHdlYnNvY2tldC5lbWl0LmJpbmQod2Vic29ja2V0LCAnZXJyb3InKSk7XG4gICAgc3RyZWFtLm9uY2UoJ2Nsb3NlJywgd2Vic29ja2V0LmVtaXRDbG9zZS5iaW5kKHdlYnNvY2tldCkpO1xuICB9XG59XG5cbi8qKlxuICogSGFuZGxlIGNhc2VzIHdoZXJlIHRoZSBgcGluZygpYCwgYHBvbmcoKWAsIG9yIGBzZW5kKClgIG1ldGhvZHMgYXJlIGNhbGxlZFxuICogd2hlbiB0aGUgYHJlYWR5U3RhdGVgIGF0dHJpYnV0ZSBpcyBgQ0xPU0lOR2Agb3IgYENMT1NFRGAuXG4gKlxuICogQHBhcmFtIHtXZWJTb2NrZXR9IHdlYnNvY2tldCBUaGUgV2ViU29ja2V0IGluc3RhbmNlXG4gKiBAcGFyYW0geyp9IFtkYXRhXSBUaGUgZGF0YSB0byBzZW5kXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdIENhbGxiYWNrXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzZW5kQWZ0ZXJDbG9zZSh3ZWJzb2NrZXQsIGRhdGEsIGNiKSB7XG4gIGlmIChkYXRhKSB7XG4gICAgY29uc3QgbGVuZ3RoID0gdG9CdWZmZXIoZGF0YSkubGVuZ3RoO1xuXG4gICAgLy9cbiAgICAvLyBUaGUgYF9idWZmZXJlZEFtb3VudGAgcHJvcGVydHkgaXMgdXNlZCBvbmx5IHdoZW4gdGhlIHBlZXIgaXMgYSBjbGllbnQgYW5kXG4gICAgLy8gdGhlIG9wZW5pbmcgaGFuZHNoYWtlIGZhaWxzLiBVbmRlciB0aGVzZSBjaXJjdW1zdGFuY2VzLCBpbiBmYWN0LCB0aGVcbiAgICAvLyBgc2V0U29ja2V0KClgIG1ldGhvZCBpcyBub3QgY2FsbGVkLCBzbyB0aGUgYF9zb2NrZXRgIGFuZCBgX3NlbmRlcmBcbiAgICAvLyBwcm9wZXJ0aWVzIGFyZSBzZXQgdG8gYG51bGxgLlxuICAgIC8vXG4gICAgaWYgKHdlYnNvY2tldC5fc29ja2V0KSB3ZWJzb2NrZXQuX3NlbmRlci5fYnVmZmVyZWRCeXRlcyArPSBsZW5ndGg7XG4gICAgZWxzZSB3ZWJzb2NrZXQuX2J1ZmZlcmVkQW1vdW50ICs9IGxlbmd0aDtcbiAgfVxuXG4gIGlmIChjYikge1xuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihcbiAgICAgIGBXZWJTb2NrZXQgaXMgbm90IG9wZW46IHJlYWR5U3RhdGUgJHt3ZWJzb2NrZXQucmVhZHlTdGF0ZX0gYCArXG4gICAgICAgIGAoJHtyZWFkeVN0YXRlc1t3ZWJzb2NrZXQucmVhZHlTdGF0ZV19KWBcbiAgICApO1xuICAgIGNiKGVycik7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBSZWNlaXZlcmAgYCdjb25jbHVkZSdgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlIFRoZSBzdGF0dXMgY29kZVxuICogQHBhcmFtIHtCdWZmZXJ9IHJlYXNvbiBUaGUgcmVhc29uIGZvciBjbG9zaW5nXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZWNlaXZlck9uQ29uY2x1ZGUoY29kZSwgcmVhc29uKSB7XG4gIGNvbnN0IHdlYnNvY2tldCA9IHRoaXNba1dlYlNvY2tldF07XG5cbiAgd2Vic29ja2V0Ll9jbG9zZUZyYW1lUmVjZWl2ZWQgPSB0cnVlO1xuICB3ZWJzb2NrZXQuX2Nsb3NlTWVzc2FnZSA9IHJlYXNvbjtcbiAgd2Vic29ja2V0Ll9jbG9zZUNvZGUgPSBjb2RlO1xuXG4gIGlmICh3ZWJzb2NrZXQuX3NvY2tldFtrV2ViU29ja2V0XSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cbiAgd2Vic29ja2V0Ll9zb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBzb2NrZXRPbkRhdGEpO1xuICBwcm9jZXNzLm5leHRUaWNrKHJlc3VtZSwgd2Vic29ja2V0Ll9zb2NrZXQpO1xuXG4gIGlmIChjb2RlID09PSAxMDA1KSB3ZWJzb2NrZXQuY2xvc2UoKTtcbiAgZWxzZSB3ZWJzb2NrZXQuY2xvc2UoY29kZSwgcmVhc29uKTtcbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBSZWNlaXZlcmAgYCdkcmFpbidgIGV2ZW50LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlY2VpdmVyT25EcmFpbigpIHtcbiAgY29uc3Qgd2Vic29ja2V0ID0gdGhpc1trV2ViU29ja2V0XTtcblxuICBpZiAoIXdlYnNvY2tldC5pc1BhdXNlZCkgd2Vic29ja2V0Ll9zb2NrZXQucmVzdW1lKCk7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgUmVjZWl2ZXJgIGAnZXJyb3InYCBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhSYW5nZUVycm9yfEVycm9yKX0gZXJyIFRoZSBlbWl0dGVkIGVycm9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZWNlaXZlck9uRXJyb3IoZXJyKSB7XG4gIGNvbnN0IHdlYnNvY2tldCA9IHRoaXNba1dlYlNvY2tldF07XG5cbiAgaWYgKHdlYnNvY2tldC5fc29ja2V0W2tXZWJTb2NrZXRdICE9PSB1bmRlZmluZWQpIHtcbiAgICB3ZWJzb2NrZXQuX3NvY2tldC5yZW1vdmVMaXN0ZW5lcignZGF0YScsIHNvY2tldE9uRGF0YSk7XG5cbiAgICAvL1xuICAgIC8vIE9uIE5vZGUuanMgPCAxNC4wLjAgdGhlIGAnZXJyb3InYCBldmVudCBpcyBlbWl0dGVkIHN5bmNocm9ub3VzbHkuIFNlZVxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJzb2NrZXRzL3dzL2lzc3Vlcy8xOTQwLlxuICAgIC8vXG4gICAgcHJvY2Vzcy5uZXh0VGljayhyZXN1bWUsIHdlYnNvY2tldC5fc29ja2V0KTtcblxuICAgIHdlYnNvY2tldC5jbG9zZShlcnJba1N0YXR1c0NvZGVdKTtcbiAgfVxuXG4gIHdlYnNvY2tldC5lbWl0KCdlcnJvcicsIGVycik7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgUmVjZWl2ZXJgIGAnZmluaXNoJ2AgZXZlbnQuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVjZWl2ZXJPbkZpbmlzaCgpIHtcbiAgdGhpc1trV2ViU29ja2V0XS5lbWl0Q2xvc2UoKTtcbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBSZWNlaXZlcmAgYCdtZXNzYWdlJ2AgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ8QXJyYXlCdWZmZXJ8QnVmZmVyW10pfSBkYXRhIFRoZSBtZXNzYWdlXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzQmluYXJ5IFNwZWNpZmllcyB3aGV0aGVyIHRoZSBtZXNzYWdlIGlzIGJpbmFyeSBvciBub3RcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlY2VpdmVyT25NZXNzYWdlKGRhdGEsIGlzQmluYXJ5KSB7XG4gIHRoaXNba1dlYlNvY2tldF0uZW1pdCgnbWVzc2FnZScsIGRhdGEsIGlzQmluYXJ5KTtcbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBSZWNlaXZlcmAgYCdwaW5nJ2AgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IGRhdGEgVGhlIGRhdGEgaW5jbHVkZWQgaW4gdGhlIHBpbmcgZnJhbWVcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlY2VpdmVyT25QaW5nKGRhdGEpIHtcbiAgY29uc3Qgd2Vic29ja2V0ID0gdGhpc1trV2ViU29ja2V0XTtcblxuICB3ZWJzb2NrZXQucG9uZyhkYXRhLCAhd2Vic29ja2V0Ll9pc1NlcnZlciwgTk9PUCk7XG4gIHdlYnNvY2tldC5lbWl0KCdwaW5nJywgZGF0YSk7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgUmVjZWl2ZXJgIGAncG9uZydgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBkYXRhIFRoZSBkYXRhIGluY2x1ZGVkIGluIHRoZSBwb25nIGZyYW1lXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZWNlaXZlck9uUG9uZyhkYXRhKSB7XG4gIHRoaXNba1dlYlNvY2tldF0uZW1pdCgncG9uZycsIGRhdGEpO1xufVxuXG4vKipcbiAqIFJlc3VtZSBhIHJlYWRhYmxlIHN0cmVhbVxuICpcbiAqIEBwYXJhbSB7UmVhZGFibGV9IHN0cmVhbSBUaGUgcmVhZGFibGUgc3RyZWFtXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZXN1bWUoc3RyZWFtKSB7XG4gIHN0cmVhbS5yZXN1bWUoKTtcbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBuZXQuU29ja2V0YCBgJ2Nsb3NlJ2AgZXZlbnQuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc29ja2V0T25DbG9zZSgpIHtcbiAgY29uc3Qgd2Vic29ja2V0ID0gdGhpc1trV2ViU29ja2V0XTtcblxuICB0aGlzLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIHNvY2tldE9uQ2xvc2UpO1xuICB0aGlzLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgc29ja2V0T25EYXRhKTtcbiAgdGhpcy5yZW1vdmVMaXN0ZW5lcignZW5kJywgc29ja2V0T25FbmQpO1xuXG4gIHdlYnNvY2tldC5fcmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DTE9TSU5HO1xuXG4gIGxldCBjaHVuaztcblxuICAvL1xuICAvLyBUaGUgY2xvc2UgZnJhbWUgbWlnaHQgbm90IGhhdmUgYmVlbiByZWNlaXZlZCBvciB0aGUgYCdlbmQnYCBldmVudCBlbWl0dGVkLFxuICAvLyBmb3IgZXhhbXBsZSwgaWYgdGhlIHNvY2tldCB3YXMgZGVzdHJveWVkIGR1ZSB0byBhbiBlcnJvci4gRW5zdXJlIHRoYXQgdGhlXG4gIC8vIGByZWNlaXZlcmAgc3RyZWFtIGlzIGNsb3NlZCBhZnRlciB3cml0aW5nIGFueSByZW1haW5pbmcgYnVmZmVyZWQgZGF0YSB0b1xuICAvLyBpdC4gSWYgdGhlIHJlYWRhYmxlIHNpZGUgb2YgdGhlIHNvY2tldCBpcyBpbiBmbG93aW5nIG1vZGUgdGhlbiB0aGVyZSBpcyBub1xuICAvLyBidWZmZXJlZCBkYXRhIGFzIGV2ZXJ5dGhpbmcgaGFzIGJlZW4gYWxyZWFkeSB3cml0dGVuIGFuZCBgcmVhZGFibGUucmVhZCgpYFxuICAvLyB3aWxsIHJldHVybiBgbnVsbGAuIElmIGluc3RlYWQsIHRoZSBzb2NrZXQgaXMgcGF1c2VkLCBhbnkgcG9zc2libGUgYnVmZmVyZWRcbiAgLy8gZGF0YSB3aWxsIGJlIHJlYWQgYXMgYSBzaW5nbGUgY2h1bmsuXG4gIC8vXG4gIGlmIChcbiAgICAhdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkICYmXG4gICAgIXdlYnNvY2tldC5fY2xvc2VGcmFtZVJlY2VpdmVkICYmXG4gICAgIXdlYnNvY2tldC5fcmVjZWl2ZXIuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkICYmXG4gICAgKGNodW5rID0gd2Vic29ja2V0Ll9zb2NrZXQucmVhZCgpKSAhPT0gbnVsbFxuICApIHtcbiAgICB3ZWJzb2NrZXQuX3JlY2VpdmVyLndyaXRlKGNodW5rKTtcbiAgfVxuXG4gIHdlYnNvY2tldC5fcmVjZWl2ZXIuZW5kKCk7XG5cbiAgdGhpc1trV2ViU29ja2V0XSA9IHVuZGVmaW5lZDtcblxuICBjbGVhclRpbWVvdXQod2Vic29ja2V0Ll9jbG9zZVRpbWVyKTtcblxuICBpZiAoXG4gICAgd2Vic29ja2V0Ll9yZWNlaXZlci5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZCB8fFxuICAgIHdlYnNvY2tldC5fcmVjZWl2ZXIuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkXG4gICkge1xuICAgIHdlYnNvY2tldC5lbWl0Q2xvc2UoKTtcbiAgfSBlbHNlIHtcbiAgICB3ZWJzb2NrZXQuX3JlY2VpdmVyLm9uKCdlcnJvcicsIHJlY2VpdmVyT25GaW5pc2gpO1xuICAgIHdlYnNvY2tldC5fcmVjZWl2ZXIub24oJ2ZpbmlzaCcsIHJlY2VpdmVyT25GaW5pc2gpO1xuICB9XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgbmV0LlNvY2tldGAgYCdkYXRhJ2AgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IGNodW5rIEEgY2h1bmsgb2YgZGF0YVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc29ja2V0T25EYXRhKGNodW5rKSB7XG4gIGlmICghdGhpc1trV2ViU29ja2V0XS5fcmVjZWl2ZXIud3JpdGUoY2h1bmspKSB7XG4gICAgdGhpcy5wYXVzZSgpO1xuICB9XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgbmV0LlNvY2tldGAgYCdlbmQnYCBldmVudC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzb2NrZXRPbkVuZCgpIHtcbiAgY29uc3Qgd2Vic29ja2V0ID0gdGhpc1trV2ViU29ja2V0XTtcblxuICB3ZWJzb2NrZXQuX3JlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0lORztcbiAgd2Vic29ja2V0Ll9yZWNlaXZlci5lbmQoKTtcbiAgdGhpcy5lbmQoKTtcbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBuZXQuU29ja2V0YCBgJ2Vycm9yJ2AgZXZlbnQuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc29ja2V0T25FcnJvcigpIHtcbiAgY29uc3Qgd2Vic29ja2V0ID0gdGhpc1trV2ViU29ja2V0XTtcblxuICB0aGlzLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIHNvY2tldE9uRXJyb3IpO1xuICB0aGlzLm9uKCdlcnJvcicsIE5PT1ApO1xuXG4gIGlmICh3ZWJzb2NrZXQpIHtcbiAgICB3ZWJzb2NrZXQuX3JlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0lORztcbiAgICB0aGlzLmRlc3Ryb3koKTtcbiAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiY3J5cHRvXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImV2ZW50c1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJmc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJodHRwXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImh0dHBzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm5ldFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJwYXRoXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInN0cmVhbVwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJ0bHNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwidXJsXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInpsaWJcIik7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDgpO1xuIl0sIm5hbWVzIjpbIl9faW1wb3J0RGVmYXVsdCIsInRoaXMiLCJtb2QiLCJfX2VzTW9kdWxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJpbmRleF8xIiwiaW5kZXhfMiIsIkhUVFBfUE9SVCIsImNvbnNvbGUiLCJsb2ciLCJodHRwU2VydmVyIiwibGlzdGVuIiwiZGVmYXVsdCIsInN0YXJ0IiwiZ2V0Q3VycmVudFBsYXllcldpdGhvdXRQYXNzd29yZCIsImdldEN1cnJlbnRQbGF5ZXIiLCJzZXRDdXJyZW50UGxheWVyIiwiZ2V0UGxheWVySW5kZXgiLCJjaGVja1BsYXllciIsImNoZWNrUGFzc3dvcmQiLCJzaG93UGxheWVycyIsImFkZFBsYXllciIsInBsYXllcnMiLCJjdXJyZW50UGxheWVyIiwicGxheWVyIiwicHVzaCIsInVuZGVmaW5lZCIsImZpbmQiLCJuYW1lIiwicGFzc3dvcmQiLCJpbmRleCIsImZpbHRlciIsImdldEN1cnJlbnRSb29tIiwiZGVsZXRlUm9vbSIsImFkZFBsYXllclRvUm9vbSIsImFkZFJvb20iLCJnZXRSb29tcyIsInBsYXllcnNfMSIsInJvb21zIiwicm9vbSIsInJvb21Vc2VycyIsImFkZFdpblRvV2lubmVyIiwiZ2V0V2lubmVycyIsImFkZFdpbm5lciIsIndpbm5lcnMiLCJ3aW5uZXJOYW1lIiwibGFzdFdpbm5lciIsIndpbnMiLCJ3aW5uZXIiLCJtYXAiLCJfX2NyZWF0ZUJpbmRpbmciLCJjcmVhdGUiLCJvIiwibSIsImsiLCJrMiIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJfX3NldE1vZHVsZURlZmF1bHQiLCJ2IiwiX19pbXBvcnRTdGFyIiwicmVzdWx0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZnMiLCJwYXRoIiwiaHR0cCIsImNyZWF0ZVNlcnZlciIsInJlcSIsInJlcyIsImZpbGVfcGF0aCIsInJlc29sdmUiLCJkaXJuYW1lIiwidXJsIiwicmVhZEZpbGUiLCJlcnIiLCJkYXRhIiwid3JpdGVIZWFkIiwiZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImNyeXB0b18xIiwicm9vbXNfMSIsIndzX3NlcnZlcl8xIiwiaWRzIiwiZ2FtZUlkIiwicmFuZG9tVVVJRCIsImZvckVhY2giLCJpZCIsIndzU2VydmVyIiwiY2xpZW50cyIsIndzQ2xpZW50IiwiZ2FtZSIsImlkR2FtZSIsImlkUGxheWVyIiwidHlwZSIsInNlbmQiLCJyZWdpc3RyYXRlTmV3UGxheWVyIiwibG9naW5XaXRoV3JvbmdQYXNzd29yZCIsImxvZ2luIiwid2lubmVyc18xIiwicGxheWVyRGF0YSIsInBsYXllckRhdGFUb1NlbmQiLCJlcnJvciIsImRhdGFUb1NlbmQiLCJ1cGRhdGVSb29tIiwiZXJyb3JUZXh0IiwibG9naW5fcmVnaXN0cmF0ZV8xIiwiY2h1bmsiLCJjaHVua0RhdGEiLCJwYXJzZSIsInRvU3RyaW5nIiwiZ2V0RGF0YVR5cGUiLCJjcmVhdGVSb29tIiwiYWRkVG9Sb29tIiwiZ2FtZV8xIiwicm9vbUlkIiwiY3J5cHRvIiwibGVuZ3RoIiwid3NfMSIsIm1ha2VfYWN0aW9uXzEiLCJXU1NfUE9SVCIsIk51bWJlciIsIndzc2VydmVyIiwiV2ViU29ja2V0U2VydmVyIiwicG9ydCIsIm9uIiwidmFsdWVzIiwiaGVhZGVycyIsIldlYlNvY2tldCIsImNyZWF0ZVdlYlNvY2tldFN0cmVhbSIsIlNlcnZlciIsIlJlY2VpdmVyIiwiU2VuZGVyIiwibW9kdWxlIiwiRU1QVFlfQlVGRkVSIiwiX21hc2siLCJzb3VyY2UiLCJtYXNrIiwib3V0cHV0Iiwib2Zmc2V0IiwiaSIsIl91bm1hc2siLCJidWZmZXIiLCJjb25jYXQiLCJsaXN0IiwidG90YWxMZW5ndGgiLCJ0YXJnZXQiLCJCdWZmZXIiLCJhbGxvY1Vuc2FmZSIsImJ1ZiIsInNldCIsInNsaWNlIiwidG9BcnJheUJ1ZmZlciIsImJ5dGVMZW5ndGgiLCJieXRlT2Zmc2V0IiwidG9CdWZmZXIiLCJyZWFkT25seSIsImlzQnVmZmVyIiwiQXJyYXlCdWZmZXIiLCJmcm9tIiwiaXNWaWV3IiwidW5tYXNrIiwicHJvY2VzcyIsImVudiIsIldTX05PX0JVRkZFUl9VVElMIiwiYnVmZmVyVXRpbCIsImUiLCJCSU5BUllfVFlQRVMiLCJhbGxvYyIsIkdVSUQiLCJrRm9yT25FdmVudEF0dHJpYnV0ZSIsIlN5bWJvbCIsImtMaXN0ZW5lciIsImtTdGF0dXNDb2RlIiwia1dlYlNvY2tldCIsIk5PT1AiLCJrQ29kZSIsImtEYXRhIiwia0Vycm9yIiwia01lc3NhZ2UiLCJrUmVhc29uIiwia1RhcmdldCIsImtUeXBlIiwia1dhc0NsZWFuIiwiRXZlbnQiLCJjb25zdHJ1Y3RvciIsIkNsb3NlRXZlbnQiLCJvcHRpb25zIiwic3VwZXIiLCJjb2RlIiwicmVhc29uIiwid2FzQ2xlYW4iLCJFcnJvckV2ZW50IiwibWVzc2FnZSIsIk1lc3NhZ2VFdmVudCIsIkV2ZW50VGFyZ2V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImxpc3RlbmVyIiwid3JhcHBlciIsImlzQmluYXJ5IiwiZXZlbnQiLCJfY2xvc2VGcmFtZVJlY2VpdmVkIiwiX2Nsb3NlRnJhbWVTZW50Iiwib25jZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYW5kbGVyIiwibGlzdGVuZXJzIiwicmVtb3ZlTGlzdGVuZXIiLCJ0b2tlbkNoYXJzIiwiZGVzdCIsImVsZW0iLCJmb3JtYXQiLCJleHRlbnNpb25zIiwia2V5cyIsImV4dGVuc2lvbiIsImNvbmZpZ3VyYXRpb25zIiwiQXJyYXkiLCJpc0FycmF5IiwicGFyYW1zIiwiam9pbiIsImhlYWRlciIsIm9mZmVycyIsImV4dGVuc2lvbk5hbWUiLCJwYXJhbU5hbWUiLCJtdXN0VW5lc2NhcGUiLCJpc0VzY2FwaW5nIiwiaW5RdW90ZXMiLCJjaGFyQ29kZUF0IiwiU3ludGF4RXJyb3IiLCJyZXBsYWNlIiwidG9rZW4iLCJrRG9uZSIsImtSdW4iLCJjb25jdXJyZW5jeSIsInBlbmRpbmciLCJJbmZpbml0eSIsImpvYnMiLCJhZGQiLCJqb2IiLCJzaGlmdCIsInpsaWIiLCJMaW1pdGVyIiwiVFJBSUxFUiIsImtQZXJNZXNzYWdlRGVmbGF0ZSIsImtUb3RhbExlbmd0aCIsImtDYWxsYmFjayIsImtCdWZmZXJzIiwiemxpYkxpbWl0ZXIiLCJkZWZsYXRlT25EYXRhIiwiaW5mbGF0ZU9uRGF0YSIsIl9tYXhQYXlsb2FkIiwiUmFuZ2VFcnJvciIsInJlc2V0IiwiaW5mbGF0ZU9uRXJyb3IiLCJfaW5mbGF0ZSIsImlzU2VydmVyIiwibWF4UGF5bG9hZCIsIl9vcHRpb25zIiwiX3RocmVzaG9sZCIsInRocmVzaG9sZCIsIl9pc1NlcnZlciIsIl9kZWZsYXRlIiwiY29uY3VycmVuY3lMaW1pdCIsIm9mZmVyIiwic2VydmVyTm9Db250ZXh0VGFrZW92ZXIiLCJzZXJ2ZXJfbm9fY29udGV4dF90YWtlb3ZlciIsImNsaWVudE5vQ29udGV4dFRha2VvdmVyIiwiY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXIiLCJzZXJ2ZXJNYXhXaW5kb3dCaXRzIiwic2VydmVyX21heF93aW5kb3dfYml0cyIsImNsaWVudE1heFdpbmRvd0JpdHMiLCJjbGllbnRfbWF4X3dpbmRvd19iaXRzIiwiYWNjZXB0Iiwibm9ybWFsaXplUGFyYW1zIiwiYWNjZXB0QXNTZXJ2ZXIiLCJhY2NlcHRBc0NsaWVudCIsImNsZWFudXAiLCJjbG9zZSIsImNhbGxiYWNrIiwiRXJyb3IiLCJvcHRzIiwiYWNjZXB0ZWQiLCJyZXNwb25zZSIsImtleSIsIm51bSIsImlzSW50ZWdlciIsIlR5cGVFcnJvciIsImRlY29tcHJlc3MiLCJmaW4iLCJkb25lIiwiX2RlY29tcHJlc3MiLCJjb21wcmVzcyIsIl9jb21wcmVzcyIsImVuZHBvaW50Iiwid2luZG93Qml0cyIsIlpfREVGQVVMVF9XSU5ET1dCSVRTIiwiY3JlYXRlSW5mbGF0ZVJhdyIsInpsaWJJbmZsYXRlT3B0aW9ucyIsIndyaXRlIiwiZmx1c2giLCJfcmVhZGFibGVTdGF0ZSIsImVuZEVtaXR0ZWQiLCJjcmVhdGVEZWZsYXRlUmF3IiwiemxpYkRlZmxhdGVPcHRpb25zIiwiWl9TWU5DX0ZMVVNIIiwiV3JpdGFibGUiLCJQZXJNZXNzYWdlRGVmbGF0ZSIsImlzVmFsaWRTdGF0dXNDb2RlIiwiaXNWYWxpZFVURjgiLCJFcnJvckN0b3IiLCJwcmVmaXgiLCJzdGF0dXNDb2RlIiwiZXJyb3JDb2RlIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJfYmluYXJ5VHlwZSIsImJpbmFyeVR5cGUiLCJfZXh0ZW5zaW9ucyIsIl9za2lwVVRGOFZhbGlkYXRpb24iLCJza2lwVVRGOFZhbGlkYXRpb24iLCJfYnVmZmVyZWRCeXRlcyIsIl9idWZmZXJzIiwiX2NvbXByZXNzZWQiLCJfcGF5bG9hZExlbmd0aCIsIl9mcmFnbWVudGVkIiwiX21hc2tlZCIsIl9maW4iLCJfb3Bjb2RlIiwiX3RvdGFsUGF5bG9hZExlbmd0aCIsIl9tZXNzYWdlTGVuZ3RoIiwiX2ZyYWdtZW50cyIsIl9zdGF0ZSIsIl9sb29wIiwiX3dyaXRlIiwiZW5jb2RpbmciLCJjYiIsInN0YXJ0TG9vcCIsImNvbnN1bWUiLCJuIiwiZHN0IiwiVWludDhBcnJheSIsImdldEluZm8iLCJnZXRQYXlsb2FkTGVuZ3RoMTYiLCJnZXRQYXlsb2FkTGVuZ3RoNjQiLCJnZXRNYXNrIiwiZ2V0RGF0YSIsImNvbXByZXNzZWQiLCJoYXZlTGVuZ3RoIiwicmVhZFVJbnQxNkJFIiwicmVhZFVJbnQzMkJFIiwiTWF0aCIsInBvdyIsImNvbnRyb2xNZXNzYWdlIiwiZGF0YU1lc3NhZ2UiLCJlciIsIm1lc3NhZ2VMZW5ndGgiLCJmcmFnbWVudHMiLCJlbWl0IiwicmFuZG9tRmlsbFN5bmMiLCJhcHBseU1hc2siLCJrQnl0ZUxlbmd0aCIsIm1hc2tCdWZmZXIiLCJzb2NrZXQiLCJnZW5lcmF0ZU1hc2siLCJfZ2VuZXJhdGVNYXNrIiwiX21hc2tCdWZmZXIiLCJfc29ja2V0IiwiX2ZpcnN0RnJhZ21lbnQiLCJfZGVmbGF0aW5nIiwiX3F1ZXVlIiwiZnJhbWUiLCJkYXRhTGVuZ3RoIiwibWVyZ2UiLCJza2lwTWFza2luZyIsInBheWxvYWRMZW5ndGgiLCJvcGNvZGUiLCJyc3YxIiwid3JpdGVVSW50MTZCRSIsIndyaXRlVUludEJFIiwiZW5xdWV1ZSIsImRpc3BhdGNoIiwic2VuZEZyYW1lIiwicGluZyIsInBvbmciLCJwZXJNZXNzYWdlRGVmbGF0ZSIsImJpbmFyeSIsIl8iLCJkZXN0cm95ZWQiLCJkZXF1ZXVlIiwiUmVmbGVjdCIsImFwcGx5IiwiY29yayIsInVuY29yayIsIkR1cGxleCIsImVtaXRDbG9zZSIsInN0cmVhbSIsImR1cGxleE9uRW5kIiwiX3dyaXRhYmxlU3RhdGUiLCJmaW5pc2hlZCIsImRlc3Ryb3kiLCJkdXBsZXhPbkVycm9yIiwibGlzdGVuZXJDb3VudCIsIndzIiwidGVybWluYXRlT25EZXN0cm95IiwiZHVwbGV4IiwiYXV0b0Rlc3Ryb3kiLCJvYmplY3RNb2RlIiwid3JpdGFibGVPYmplY3RNb2RlIiwibXNnIiwicGF1c2UiLCJfZGVzdHJveSIsInJlYWR5U3RhdGUiLCJDTE9TRUQiLCJuZXh0VGljayIsImNhbGxlZCIsInRlcm1pbmF0ZSIsIl9maW5hbCIsIkNPTk5FQ1RJTkciLCJfcmVhZCIsImlzUGF1c2VkIiwicmVzdW1lIiwicHJvdG9jb2xzIiwiU2V0IiwicHJvdG9jb2wiLCJoYXMiLCJfaXNWYWxpZFVURjgiLCJsZW4iLCJXU19OT19VVEZfOF9WQUxJREFURSIsIkV2ZW50RW1pdHRlciIsImNyZWF0ZUhhc2giLCJzdWJwcm90b2NvbCIsImtleVJlZ2V4Iiwic2VydmVyIiwic29ja2V0T25FcnJvciIsImFib3J0SGFuZHNoYWtlIiwiU1RBVFVTX0NPREVTIiwiQ29ubmVjdGlvbiIsImgiLCJhYm9ydEhhbmRzaGFrZU9yRW1pdHdzQ2xpZW50RXJyb3IiLCJoYW5kbGVQcm90b2NvbHMiLCJjbGllbnRUcmFja2luZyIsInZlcmlmeUNsaWVudCIsIm5vU2VydmVyIiwiYmFja2xvZyIsImhvc3QiLCJfc2VydmVyIiwiYm9keSIsImVtaXRDb25uZWN0aW9uIiwiYmluZCIsIl9yZW1vdmVMaXN0ZW5lcnMiLCJhZGRMaXN0ZW5lcnMiLCJsaXN0ZW5pbmciLCJ1cGdyYWRlIiwiaGVhZCIsImhhbmRsZVVwZ3JhZGUiLCJfc2hvdWxkRW1pdENsb3NlIiwiYWRkcmVzcyIsInNpemUiLCJzaG91bGRIYW5kbGUiLCJpbmRleE9mIiwidmVyc2lvbiIsIm1ldGhvZCIsInRvTG93ZXJDYXNlIiwidGVzdCIsInNlY1dlYlNvY2tldFByb3RvY29sIiwic2VjV2ViU29ja2V0RXh0ZW5zaW9ucyIsImluZm8iLCJvcmlnaW4iLCJzZWN1cmUiLCJhdXRob3JpemVkIiwiZW5jcnlwdGVkIiwidmVyaWZpZWQiLCJjb21wbGV0ZVVwZ3JhZGUiLCJyZWFkYWJsZSIsInVwZGF0ZSIsImRpZ2VzdCIsIm5leHQiLCJfcHJvdG9jb2wiLCJzZXRTb2NrZXQiLCJkZWxldGUiLCJodHRwcyIsIm5ldCIsInRscyIsInJhbmRvbUJ5dGVzIiwiUmVhZGFibGUiLCJVUkwiLCJrQWJvcnRlZCIsInByb3RvY29sVmVyc2lvbnMiLCJyZWFkeVN0YXRlcyIsInN1YnByb3RvY29sUmVnZXgiLCJfY2xvc2VDb2RlIiwiX2Nsb3NlTWVzc2FnZSIsIl9jbG9zZVRpbWVyIiwiX3BhdXNlZCIsIl9yZWFkeVN0YXRlIiwiX3JlY2VpdmVyIiwiX3NlbmRlciIsIl9idWZmZXJlZEFtb3VudCIsIl9yZWRpcmVjdHMiLCJpbml0QXNDbGllbnQiLCJpbmNsdWRlcyIsImJ1ZmZlcmVkQW1vdW50Iiwib25jbG9zZSIsIm9uZXJyb3IiLCJvbm9wZW4iLCJvbm1lc3NhZ2UiLCJfdXJsIiwicmVjZWl2ZXIiLCJyZWNlaXZlck9uQ29uY2x1ZGUiLCJyZWNlaXZlck9uRHJhaW4iLCJyZWNlaXZlck9uRXJyb3IiLCJyZWNlaXZlck9uTWVzc2FnZSIsInJlY2VpdmVyT25QaW5nIiwicmVjZWl2ZXJPblBvbmciLCJzZXRUaW1lb3V0Iiwic2V0Tm9EZWxheSIsInVuc2hpZnQiLCJzb2NrZXRPbkNsb3NlIiwic29ja2V0T25EYXRhIiwic29ja2V0T25FbmQiLCJPUEVOIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiX3JlcSIsIkNMT1NJTkciLCJlcnJvckVtaXR0ZWQiLCJzZW5kQWZ0ZXJDbG9zZSIsIm5lZWREcmFpbiIsIndlYnNvY2tldCIsInByb3RvY29sVmVyc2lvbiIsImZvbGxvd1JlZGlyZWN0cyIsIm1heFJlZGlyZWN0cyIsImNyZWF0ZUNvbm5lY3Rpb24iLCJzb2NrZXRQYXRoIiwiaG9zdG5hbWUiLCJ0aW1lb3V0IiwicGFyc2VkVXJsIiwiaHJlZiIsImlzU2VjdXJlIiwiaXNVbml4U29ja2V0IiwiaW52YWxpZFVSTE1lc3NhZ2UiLCJwYXRobmFtZSIsImhhc2giLCJlbWl0RXJyb3JBbmRDbG9zZSIsImRlZmF1bHRQb3J0IiwicmVxdWVzdCIsInByb3RvY29sU2V0IiwidGxzQ29ubmVjdCIsIm5ldENvbm5lY3QiLCJzdGFydHNXaXRoIiwiVXBncmFkZSIsInNlYXJjaCIsImhhbmRzaGFrZVRpbWVvdXQiLCJPcmlnaW4iLCJ1c2VybmFtZSIsImF1dGgiLCJwYXJ0cyIsInNwbGl0IiwiX29yaWdpbmFsU2VjdXJlIiwiX29yaWdpbmFsSG9zdCIsImVudHJpZXMiLCJpc1NhbWVIb3N0IiwiYXV0aG9yaXphdGlvbiIsImNvb2tpZSIsImxvY2F0aW9uIiwiYWRkciIsImFib3J0Iiwic2VydmVyUHJvdCIsInByb3RFcnJvciIsImV4dGVuc2lvbk5hbWVzIiwiY29ubmVjdCIsInNlcnZlcm5hbWUiLCJpc0lQIiwic2V0SGVhZGVyIiwicmVjZWl2ZXJPbkZpbmlzaCIsInJlYWQiLCJjbGVhclRpbWVvdXQiLCJwcm9wZXJ0eSIsInJlcXVpcmUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIl0sInNvdXJjZVJvb3QiOiIifQ==